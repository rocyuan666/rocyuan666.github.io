<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>【mybatis】基础学习记录</title>
    <link href="/java/%E3%80%90mybatis%E3%80%91%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/"/>
    <url>/java/%E3%80%90mybatis%E3%80%91%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<p>代码地址，学习简化省略 service 层：<a href="https://github.com/rocyuan666/learn-mybatis">https://github.com/rocyuan666/learn-mybatis</a></p><h1 id="mapper-接口"><a href="#mapper-接口" class="headerlink" title="mapper 接口"></a>mapper 接口</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> top.rocyuan.mapper;<br><br><span class="hljs-keyword">import</span> org.apache.ibatis.annotations.*;<br><span class="hljs-keyword">import</span> top.rocyuan.entity.User;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 查询所有列表，无查询条件</span><br><span class="hljs-comment">     */</span><br>    ArrayList&lt;User&gt; <span class="hljs-title function_">selectAll</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 查询详情</span><br><span class="hljs-comment">     */</span><br>    User <span class="hljs-title function_">selectById</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 查询详情（注解方式）</span><br><span class="hljs-comment">     * 注解方式不常用！！！</span><br><span class="hljs-comment">     * 分为：</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Select</span>(&quot;sql&quot;)</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Insert</span>(&quot;sql&quot;)</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Delete</span>(&quot;sql&quot;)</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Update</span>(&quot;sql&quot;)</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Select(&quot;select id, user_name as userName, password, nick_name as nickName, avatar, sex, age, add_time as addTime, update_time as updateTime from roc_user where id = #&#123;id&#125;&quot;)</span><br>    User <span class="hljs-title function_">selectByIdAnnotation</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 查询列表 多条件查询</span><br><span class="hljs-comment">     * 1. 散装参数 <span class="hljs-doctag">@Param</span> 方式</span><br><span class="hljs-comment">     * 2. User 对象方式</span><br><span class="hljs-comment">     * 3. Map 方式</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-comment">// 1. 散装参数 @Param(field) 方式; field 需要与 xml 中 #&#123;field&#125; field 相同</span><br>    <span class="hljs-comment">// ArrayList&lt;User&gt; selectByCondition(@Param(&quot;age&quot;) Integer age, @Param(&quot;sex&quot;) Integer sex, @Param(&quot;nickName&quot;) String nickName);</span><br>    <span class="hljs-comment">// 2. User 实体类方式; 实体类属性 需要与 xml 中 #&#123;field&#125; field 相同</span><br>    <span class="hljs-comment">// ArrayList&lt;User&gt; selectByCondition(User user);</span><br>    <span class="hljs-comment">// 3. Map 方式; Map 中 key 需要与 xml 中 #&#123;field&#125; field 相同</span><br>    ArrayList&lt;User&gt; <span class="hljs-title function_">selectByCondition</span><span class="hljs-params">(Map&lt;String, Object&gt; map)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 查询列表 单条件查询</span><br><span class="hljs-comment">     */</span><br>    ArrayList&lt;User&gt; <span class="hljs-title function_">selectByConditionSingle</span><span class="hljs-params">(User user)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 添加</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(User user)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 修改</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(User user)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 删除</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteById</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 批量删除</span><br><span class="hljs-comment">     * 不加 <span class="hljs-doctag">@Param</span> xml 内部 会默认为: array 属性</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteByIds</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;ids&quot;)</span> <span class="hljs-type">int</span>[] ids)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="mapper-XML"><a href="#mapper-XML" class="headerlink" title="mapper XML"></a>mapper XML</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;top.rocyuan.mapper.UserMapper&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 映射 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userResultMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;user_name&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;userName&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;nick_name&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;nickName&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;add_time&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;addTime&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;update_time&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;updateTime&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!-- 字段 与 属性值 一样的可以不写 --&gt;</span><br>        <span class="hljs-comment">&lt;!-- &lt;result column=&quot;sex&quot; property=&quot;sex&quot;/&gt; --&gt;</span><br>        <span class="hljs-comment">&lt;!-- &lt;result column=&quot;age&quot; property=&quot;age&quot;/&gt; --&gt;</span><br>        <span class="hljs-comment">&lt;!-- &lt;result column=&quot;password&quot; property=&quot;password&quot;/&gt; --&gt;</span><br>        <span class="hljs-comment">&lt;!-- &lt;result column=&quot;avatar&quot; property=&quot;avatar&quot;/&gt; --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- sql 片段 配合 include 使用 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">sql</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userColum&quot;</span>&gt;</span><br>        id<br>        , user_name, password, nick_name, sex, age, avatar, add_time, update_time<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">sql</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    ======================== 查询所有数据 ============================</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-comment">&lt;!-- 使用了 resultMap 不需要指定 resultType=&quot;User&quot;  --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectAll&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;userResultMap&quot;</span>&gt;</span><br>        select<br>        <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;userColum&quot;</span>/&gt;</span><br>        from roc_user;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    ======================== 查询详情 ============================</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-comment">&lt;!-- 查询详情（单条件查询） parameterType=&quot;int&quot; 可省略 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectById&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;userResultMap&quot;</span>&gt;</span><br>        select<br>        <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;userColum&quot;</span>/&gt;</span><br>        from roc_user where id = #&#123;id&#125;;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    特殊字符处理：</span><br><span class="hljs-comment">    1. 转义字符 如：&amp;lt; == &lt;</span><br><span class="hljs-comment">    2. CDATA区</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;select id=&quot;selectById&quot; resultMap=&quot;userResultMap&quot;&gt; --&gt;</span><br>    <span class="hljs-comment">&lt;!--     select --&gt;</span><br>    <span class="hljs-comment">&lt;!--     &lt;include refid=&quot;userColum&quot;/&gt; --&gt;</span><br>    <span class="hljs-comment">&lt;!--     from roc_user where id --&gt;</span><br>    <span class="hljs-comment">&lt;!--     &lt;![CDATA[ --&gt;</span><br>    <span class="hljs-comment">&lt;!--     &lt; --&gt;</span><br>    <span class="hljs-comment">&lt;!--     ]]&gt; --&gt;</span><br>    <span class="hljs-comment">&lt;!--     #&#123;id&#125;; --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;/select&gt; --&gt;</span><br><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    ======================== 多条件查询（存在BUG：必须要传递指定的参数） ============================</span><br><span class="hljs-comment">    Mapper 接口传参方式不同，分为：</span><br><span class="hljs-comment">    1. 散装参数 @Param 方式</span><br><span class="hljs-comment">    2. User 实体类方式</span><br><span class="hljs-comment">    3. Map 方式</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;select id=&quot;selectByCondition&quot; resultMap=&quot;userResultMap&quot;&gt; --&gt;</span><br>    <span class="hljs-comment">&lt;!--     select --&gt;</span><br>    <span class="hljs-comment">&lt;!--     &lt;include refid=&quot;userColum&quot;/&gt; --&gt;</span><br>    <span class="hljs-comment">&lt;!--     from roc_user --&gt;</span><br>    <span class="hljs-comment">&lt;!--     where age &gt; #&#123;age&#125; --&gt;</span><br>    <span class="hljs-comment">&lt;!--     and sex = #&#123;sex&#125; --&gt;</span><br>    <span class="hljs-comment">&lt;!--     and nick_name like #&#123;nickName&#125;; --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;/select&gt; --&gt;</span><br><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    ======================== 多条件动态查询（解决上方BUG） ============================</span><br><span class="hljs-comment">    动态 sql 文档：https://mybatis.org/mybatis-3/zh_CN/dynamic-sql.html</span><br><span class="hljs-comment">    Mapper 接口传参方式使用：2、3</span><br><span class="hljs-comment">    if 标签; where 标签 动态处理 sql where 关键字后 and/or 等语法问题</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectByCondition&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;userResultMap&quot;</span>&gt;</span><br>        select<br>        <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;userColum&quot;</span>/&gt;</span><br>        from roc_user<br>        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;age != null&quot;</span>&gt;</span><br>                and age &gt; #&#123;age&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;sex != null&quot;</span>&gt;</span><br>                and sex = #&#123;sex&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;nickName != null and nickName != &#x27;&#x27;&quot;</span>&gt;</span><br>                and nick_name like #&#123;nickName&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    ======================== 单条件动态查询（指定字段的内容查询） ============================</span><br><span class="hljs-comment">    动态 sql 文档：https://mybatis.org/mybatis-3/zh_CN/dynamic-sql.html</span><br><span class="hljs-comment">    choose、when, otherwise 标签; where 标签 动态处理 sql where 关键字后 and/or 等语法问题</span><br><span class="hljs-comment">    类似</span><br><span class="hljs-comment">    switch、case、default 语句</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectByConditionSingle&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;userResultMap&quot;</span>&gt;</span><br>        select<br>        <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;userColum&quot;</span>/&gt;</span><br>        from roc_user<br>        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">choose</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;age != null&quot;</span>&gt;</span><br>                    age &gt; #&#123;age&#125;<br>                <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;sex != null&quot;</span>&gt;</span><br>                    sex = #&#123;sex&#125;<br>                <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;nickName != null and nickName != &#x27;&#x27;&quot;</span>&gt;</span><br>                    nick_name like #&#123;nickName&#125;<br>                <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">choose</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    ======================== 添加 ============================</span><br><span class="hljs-comment">    添加完返回该条数据的 id useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;add&quot;</span> <span class="hljs-attr">useGeneratedKeys</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">keyProperty</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><br>        insert into roc_user (user_name, password, nick_name, sex, age, avatar, add_time, update_time)<br>        values (#&#123;userName&#125;, #&#123;password&#125;, #&#123;nickName&#125;, #&#123;sex&#125;, #&#123;age&#125;, #&#123;avatar&#125;, #&#123;addTime&#125;, #&#123;updateTime&#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    ======================== 修改（存在BUG：没有传某个字段时，该字段会被修改为null） ============================</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;update id=&quot;update&quot;&gt; --&gt;</span><br>    <span class="hljs-comment">&lt;!--     update roc_user --&gt;</span><br>    <span class="hljs-comment">&lt;!--     set user_name   = #&#123;userName&#125;, --&gt;</span><br>    <span class="hljs-comment">&lt;!--         password    = #&#123;password&#125;, --&gt;</span><br>    <span class="hljs-comment">&lt;!--         nick_name   = #&#123;nickName&#125;, --&gt;</span><br>    <span class="hljs-comment">&lt;!--         sex         = #&#123;sex&#125;, --&gt;</span><br>    <span class="hljs-comment">&lt;!--         age         = #&#123;age&#125;, --&gt;</span><br>    <span class="hljs-comment">&lt;!--         avatar      = #&#123;avatar&#125;, --&gt;</span><br>    <span class="hljs-comment">&lt;!--         add_time    = #&#123;addTime&#125;, --&gt;</span><br>    <span class="hljs-comment">&lt;!--         update_time = #&#123;updateTime&#125; --&gt;</span><br>    <span class="hljs-comment">&lt;!--     where id = $&#123;id&#125; --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;/update&gt; --&gt;</span><br><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    ======================== 修改（解决上方BUG，动态修改字段） ============================</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;update&quot;</span>&gt;</span><br>        update roc_user<br>        <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;userName != null and userName != &#x27;&#x27;&quot;</span>&gt;</span><br>                user_name = #&#123;userName&#125;,<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;password != null and password != &#x27;&#x27;&quot;</span>&gt;</span><br>                password = #&#123;password&#125;,<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;nickName != null and nickName != &#x27;&#x27;&quot;</span>&gt;</span><br>                nick_name = #&#123;nickName&#125;,<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;sex != null&quot;</span>&gt;</span><br>                sex = #&#123;sex&#125;,<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;age != null&quot;</span>&gt;</span><br>                age = #&#123;age&#125;,<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;avatar != null and avatar != &#x27;&#x27;&quot;</span>&gt;</span><br>                avatar = #&#123;avatar&#125;,<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;addTime != null and addTime != &#x27;&#x27;&quot;</span>&gt;</span><br>                add_time = #&#123;addTime&#125;,<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;updateTime != null and updateTime != &#x27;&#x27;&quot;</span>&gt;</span><br>                update_time = #&#123;updateTime&#125;,<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span><br>        where id = #&#123;id&#125;;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    ======================== 删除 ============================</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteById&quot;</span>&gt;</span><br>        delete<br>        from roc_user<br>        where id = #&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    ======================== 批量删除 ============================</span><br><span class="hljs-comment">    foreach 标签</span><br><span class="hljs-comment">    collection: 默认 array, 在 Mapper 接口中使用注解 @Param(&quot;ids&quot;) 指定</span><br><span class="hljs-comment">    item: 每一项的变量</span><br><span class="hljs-comment">    separator: 使用什么分割</span><br><span class="hljs-comment">    open: 使用 foreach 标签 开始拼接的字符串</span><br><span class="hljs-comment">    close: 使用 foreach 标签 结束拼接的字符串</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteByIds&quot;</span>&gt;</span><br>        delete<br>        from roc_user<br>        where id in<br>        <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">&quot;ids&quot;</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;,&quot;</span> <span class="hljs-attr">open</span>=<span class="hljs-string">&quot;(&quot;</span> <span class="hljs-attr">close</span>=<span class="hljs-string">&quot;)&quot;</span>&gt;</span><br>            #&#123;id&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 未使用 open close 效果 --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;delete id=&quot;deleteByIds&quot;&gt; --&gt;</span><br>    <span class="hljs-comment">&lt;!--     delete --&gt;</span><br>    <span class="hljs-comment">&lt;!--     from roc_user --&gt;</span><br>    <span class="hljs-comment">&lt;!--     where id in( --&gt;</span><br>    <span class="hljs-comment">&lt;!--     &lt;foreach collection=&quot;ids&quot; item=&quot;id&quot; separator=&quot;,&quot;&gt; --&gt;</span><br>    <span class="hljs-comment">&lt;!--         #&#123;id&#125; --&gt;</span><br>    <span class="hljs-comment">&lt;!--     &lt;/foreach&gt; --&gt;</span><br>    <span class="hljs-comment">&lt;!--     ) --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;/delete&gt; --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="参数传递补充"><a href="#参数传递补充" class="headerlink" title="参数传递补充"></a>参数传递补充</h1><p><strong>MyBatis 参数传递，建议使用 @Param 修改 Map 集合中默认的键名！！！</strong></p><p>MyBatis 参数封装：</p><ul><li>单个参数：<ul><li>POJO 类型：直接使用，属性名 和 参数占位符名称 一致</li><li>Map 集合：直接使用，键名 和 参数占位符名称 一致</li><li>Collection：封装为 Map 集合，可以使用 @Param 注解，替换 Map 集合中默认的 arg 键名<ul><li>默认键名如下：</li><li>map.put(“arg0”,collection 集合);</li><li>map.put(“collection”,collection 集合);</li></ul></li><li>List：封装为 Map 集合，可以使用 @Param 注解，替换 Map 集合中默认的 arg 键名<ul><li>默认键名如下：</li><li>map.put(“arg0”,list 集合);</li><li>map.put(“collection”,list 集合);</li><li>map.put(“list”,list 集合);</li></ul></li><li>Array：封装为 Map 集合，可以使用 @Param 注解，替换 Map 集合中默认的 arg 键名（如批量删除地方就是用的 ids 替换了 array）<ul><li>默认键名如下：</li><li>map.put(“arg0”,数组);</li><li>map.put(“array”,数组);</li></ul></li><li>其他类型：直接使用</li></ul></li><li>多个参数：<ul><li>封装为 Map 集合,可以使用 @Param 注解，替换 Map 集合中默认的 arg 键名</li><li>默认键名如下：</li><li>map.put(“arg0”,参数值 1)</li><li>map.put(“param1”,参数值 1)</li><li>map.put(“param2”,参数值 2)</li><li>map.put(“agr1”,参数值 2)</li><li>——– 使用了 @Param(“username”) 默认的将被修改为如下： ——–</li><li>map.put(“username”,参数值 1)</li><li>map.put(“param1”,参数值 1)</li><li>map.put(“param2”,参数值 2)</li><li>map.put(“agr1”,参数值 2)</li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】DeepSeek-R1-AI模型本地部署</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91DeepSeek-R1-AI%E6%A8%A1%E5%9E%8B%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91DeepSeek-R1-AI%E6%A8%A1%E5%9E%8B%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2/</url>
    
    <content type="html"><![CDATA[<h1 id="下载安装-ollama"><a href="#下载安装-ollama" class="headerlink" title="下载安装 ollama"></a>下载安装 ollama</h1><p>官网下载：<a href="https://ollama.com/download">https://ollama.com/download</a></p><h1 id="模型版本选择"><a href="#模型版本选择" class="headerlink" title="模型版本选择"></a>模型版本选择</h1><p>地址：<a href="https://ollama.com/library/deepseek-r1">https://ollama.com/library/deepseek-r1</a></p><p>安装 ollama 完成后，运行以下命令下载安装对应版本的模型。</p><h2 id="1-5b"><a href="#1-5b" class="headerlink" title="1.5b"></a>1.5b</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ollama run deepseek-r1:1.5b<br></code></pre></td></tr></table></figure><h2 id="7b"><a href="#7b" class="headerlink" title="7b"></a>7b</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ollama run deepseek-r1:7b<br></code></pre></td></tr></table></figure><h2 id="8b"><a href="#8b" class="headerlink" title="8b"></a>8b</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ollama run deepseek-r1:8b<br></code></pre></td></tr></table></figure><h2 id="14b"><a href="#14b" class="headerlink" title="14b"></a>14b</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ollama run deepseek-r1:14b<br></code></pre></td></tr></table></figure><h2 id="32b"><a href="#32b" class="headerlink" title="32b"></a>32b</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ollama run deepseek-r1:32b<br></code></pre></td></tr></table></figure><h2 id="70b"><a href="#70b" class="headerlink" title="70b"></a>70b</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ollama run deepseek-r1:70b<br></code></pre></td></tr></table></figure><h2 id="671b"><a href="#671b" class="headerlink" title="671b"></a>671b</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ollama run deepseek-r1:671b<br></code></pre></td></tr></table></figure><h1 id="安装完成"><a href="#安装完成" class="headerlink" title="安装完成"></a>安装完成</h1><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91DeepSeek-R1%E6%A8%A1%E5%9E%8B%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2/1.png" alt="下载安装中..."></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91DeepSeek-R1%E6%A8%A1%E5%9E%8B%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2/2.png" alt="下载安装完成"></p><p>此时只能在终端中进行对话，无法在视图中进行对话。安装 chatbox ai 进行视图界面的部署。也可以选择其他的视图界面工具进行部署。</p><h1 id="视图界面-chatbox"><a href="#视图界面-chatbox" class="headerlink" title="视图界面 chatbox"></a>视图界面 chatbox</h1><p>官网下载：<a href="https://chatboxai.app/">https://chatboxai.app</a></p><h1 id="设置本地模型"><a href="#设置本地模型" class="headerlink" title="设置本地模型"></a>设置本地模型</h1><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91DeepSeek-R1%E6%A8%A1%E5%9E%8B%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2/3.png" alt="chatbox 配置 DeepSeek-R1"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91DeepSeek-R1%E6%A8%A1%E5%9E%8B%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2/4.png" alt="与 DeepSeek-R1 对话"></p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】exceljs生成excel并导出</title>
    <link href="/js/%E3%80%90js%E3%80%91exceljs%E7%94%9F%E6%88%90excel%E5%B9%B6%E5%AF%BC%E5%87%BA/"/>
    <url>/js/%E3%80%90js%E3%80%91exceljs%E7%94%9F%E6%88%90excel%E5%B9%B6%E5%AF%BC%E5%87%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h1><p>前端导出 <code>excel</code> 文件支持多个工作表、多级表头、多级表头合并单元格、数据填充<br>excel 处理使用库：<code>exceljs</code><br>文件导出使用库：<code>file-saver</code><br>exceljs: <a href="https://github.com/exceljs/exceljs">https://github.com/exceljs/exceljs</a></p><h1 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h1><p><img src="/../../assets/%E3%80%90js%E3%80%91exceljs%E7%94%9F%E6%88%90excel%E5%B9%B6%E5%AF%BC%E5%87%BA/1.jpg"></p><p><img src="/../../assets/%E3%80%90js%E3%80%91exceljs%E7%94%9F%E6%88%90excel%E5%B9%B6%E5%AF%BC%E5%87%BA/2.jpg"></p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>版本参考：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;exceljs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^4.4.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;file-saver&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.0.5&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install exceljs file-saver<br></code></pre></td></tr></table></figure><h1 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ExcelJS</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;exceljs&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; saveAs &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;file-saver&quot;</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@typedef</span> &#123;<span class="hljs-type">Object</span>&#125; <span class="hljs-variable">TitleTreeItem</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@property</span> &#123;<span class="hljs-type">string</span>&#125; <span class="hljs-variable">name</span> - 表头名称</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@property</span> &#123;<span class="hljs-type">string</span>&#125; <span class="hljs-variable">field</span> - 字段名</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@property</span> &#123;<span class="hljs-type">TitleTreeItem[]</span>&#125; [children] - 子节点</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 导出 excel</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">TitleTreeItem[]</span>&#125; <span class="hljs-variable">titleTree</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">Object</span>&#125; <span class="hljs-variable">data</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">string</span>&#125; [fileName]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">Promise&lt;void&gt;</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">exportExcel</span>(<span class="hljs-params">titleTree, data, fileName = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().valueOf()&#125;</span>.xlsx`</span></span>) &#123;<br>  <span class="hljs-keyword">const</span> fileBlob = <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateExcel</span>(titleTree, data);<br>  <span class="hljs-title function_">saveAs</span>(fileBlob, fileName);<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 生成 excel</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">TitleTreeItem[]</span>&#125; <span class="hljs-variable">titleTree</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">Object</span>&#125; <span class="hljs-variable">data</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">Promise&lt;Blob&gt;</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">generateExcel</span>(<span class="hljs-params">titleTree, data</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> workbook = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExcelJS</span>.<span class="hljs-title class_">Workbook</span>();<br><br>    <span class="hljs-comment">// 遍历第一层级创建工作表</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> sheet <span class="hljs-keyword">of</span> titleTree) &#123;<br>      <span class="hljs-keyword">const</span> worksheet = workbook.<span class="hljs-title function_">addWorksheet</span>(sheet.<span class="hljs-property">name</span>);<br>      <span class="hljs-keyword">const</span> sheetData = data[sheet.<span class="hljs-property">field</span>] || [];<br><br>      <span class="hljs-keyword">const</span> headerRows = [];<br>      <span class="hljs-keyword">let</span> maxDepth = <span class="hljs-number">0</span>;<br><br>      <span class="hljs-comment">// 计算树的最大深度</span><br>      <span class="hljs-keyword">function</span> <span class="hljs-title function_">getTreeDepth</span>(<span class="hljs-params">node, depth = <span class="hljs-number">0</span></span>) &#123;<br>        maxDepth = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(maxDepth, depth);<br>        <span class="hljs-keyword">if</span> (node.<span class="hljs-property">children</span> &amp;&amp; node.<span class="hljs-property">children</span>.<span class="hljs-property">length</span>) &#123;<br>          node.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> <span class="hljs-title function_">getTreeDepth</span>(child, depth + <span class="hljs-number">1</span>));<br>        &#125;<br>      &#125;<br><br>      <span class="hljs-comment">// 获取节点宽度</span><br>      <span class="hljs-keyword">function</span> <span class="hljs-title function_">getNodeWidth</span>(<span class="hljs-params">node</span>) &#123;<br>        <span class="hljs-keyword">if</span> (!node.<span class="hljs-property">children</span> || !node.<span class="hljs-property">children</span>.<span class="hljs-property">length</span>) &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> node.<span class="hljs-property">children</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, child</span>) =&gt;</span> sum + <span class="hljs-title function_">getNodeWidth</span>(child), <span class="hljs-number">0</span>);<br>      &#125;<br><br>      <span class="hljs-comment">// 获取节点的最大深度</span><br>      <span class="hljs-keyword">function</span> <span class="hljs-title function_">getNodeMaxDepth</span>(<span class="hljs-params">node, depth = <span class="hljs-number">0</span></span>) &#123;<br>        <span class="hljs-keyword">if</span> (!node.<span class="hljs-property">children</span> || node.<span class="hljs-property">children</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) &#123;<br>          <span class="hljs-keyword">return</span> depth;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(...node.<span class="hljs-property">children</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> <span class="hljs-title function_">getNodeMaxDepth</span>(child, depth + <span class="hljs-number">1</span>)));<br>      &#125;<br><br>      <span class="hljs-comment">// 构建表头数据</span><br>      <span class="hljs-keyword">function</span> <span class="hljs-title function_">buildHeader</span>(<span class="hljs-params">node, depth = <span class="hljs-number">0</span>, startCol = <span class="hljs-number">1</span></span>) &#123;<br>        <span class="hljs-keyword">if</span> (!headerRows[depth]) &#123;<br>          headerRows[depth] = [];<br>        &#125;<br><br>        <span class="hljs-keyword">const</span> cell = &#123;<br>          <span class="hljs-attr">value</span>: node.<span class="hljs-property">name</span>,<br>          <span class="hljs-attr">field</span>: node.<span class="hljs-property">field</span>,<br>          startCol,<br>          <span class="hljs-attr">rowSpan</span>: <span class="hljs-number">1</span>,<br>          <span class="hljs-attr">colSpan</span>: <span class="hljs-number">1</span>,<br>        &#125;;<br><br>        <span class="hljs-keyword">if</span> (node.<span class="hljs-property">children</span> &amp;&amp; node.<span class="hljs-property">children</span>.<span class="hljs-property">length</span>) &#123;<br>          <span class="hljs-keyword">let</span> currentCol = startCol;<br>          node.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> &#123;<br>            <span class="hljs-keyword">const</span> childWidth = <span class="hljs-title function_">getNodeWidth</span>(child);<br>            <span class="hljs-title function_">buildHeader</span>(child, depth + <span class="hljs-number">1</span>, currentCol);<br>            currentCol += childWidth;<br>          &#125;);<br>          cell.<span class="hljs-property">colSpan</span> = currentCol - startCol;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">const</span> currentNodeMaxDepth = <span class="hljs-title function_">getNodeMaxDepth</span>(node);<br>          cell.<span class="hljs-property">rowSpan</span> = maxDepth - depth - (currentNodeMaxDepth - <span class="hljs-number">1</span>);<br>        &#125;<br><br>        headerRows[depth].<span class="hljs-title function_">push</span>(cell);<br>        <span class="hljs-keyword">return</span> cell.<span class="hljs-property">colSpan</span>;<br>      &#125;<br><br>      <span class="hljs-comment">// 处理当前工作表的表头</span><br>      <span class="hljs-keyword">if</span> (sheet.<span class="hljs-property">children</span>) &#123;<br>        sheet.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">root</span>) =&gt;</span> &#123;<br>          <span class="hljs-title function_">getTreeDepth</span>(root);<br>        &#125;);<br><br>        <span class="hljs-keyword">let</span> currentCol = <span class="hljs-number">1</span>;<br>        sheet.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">root</span>) =&gt;</span> &#123;<br>          <span class="hljs-keyword">const</span> width = <span class="hljs-title function_">buildHeader</span>(root, <span class="hljs-number">0</span>, currentCol);<br>          currentCol += width;<br>        &#125;);<br><br>        <span class="hljs-comment">// 将表头数据写入工作表</span><br>        headerRows.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">row, rowIndex</span>) =&gt;</span> &#123;<br>          row.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">cell</span>) =&gt;</span> &#123;<br>            <span class="hljs-keyword">const</span> excelCell = worksheet.<span class="hljs-title function_">getCell</span>(rowIndex + <span class="hljs-number">1</span>, cell.<span class="hljs-property">startCol</span>);<br>            excelCell.<span class="hljs-property">value</span> = cell.<span class="hljs-property">value</span>;<br><br>            <span class="hljs-comment">// 合并单元格</span><br>            <span class="hljs-keyword">if</span> (cell.<span class="hljs-property">colSpan</span> &gt; <span class="hljs-number">1</span> || cell.<span class="hljs-property">rowSpan</span> &gt; <span class="hljs-number">1</span>) &#123;<br>              worksheet.<span class="hljs-title function_">mergeCells</span>(rowIndex + <span class="hljs-number">1</span>, cell.<span class="hljs-property">startCol</span>, rowIndex + cell.<span class="hljs-property">rowSpan</span>, cell.<span class="hljs-property">startCol</span> + cell.<span class="hljs-property">colSpan</span> - <span class="hljs-number">1</span>);<br>            &#125;<br><br>            <span class="hljs-comment">// 设置样式</span><br>            excelCell.<span class="hljs-property">fill</span> = &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;pattern&quot;</span>, <span class="hljs-attr">pattern</span>: <span class="hljs-string">&quot;solid&quot;</span>, <span class="hljs-attr">fgColor</span>: &#123; <span class="hljs-attr">argb</span>: <span class="hljs-string">&quot;FFCCCCCC&quot;</span> &#125; &#125;;<br>            excelCell.<span class="hljs-property">alignment</span> = &#123; <span class="hljs-attr">vertical</span>: <span class="hljs-string">&quot;middle&quot;</span>, <span class="hljs-attr">horizontal</span>: <span class="hljs-string">&quot;center&quot;</span> &#125;;<br>            excelCell.<span class="hljs-property">border</span> = &#123;<br>              <span class="hljs-attr">top</span>: &#123; <span class="hljs-attr">style</span>: <span class="hljs-string">&quot;thin&quot;</span> &#125;,<br>              <span class="hljs-attr">left</span>: &#123; <span class="hljs-attr">style</span>: <span class="hljs-string">&quot;thin&quot;</span> &#125;,<br>              <span class="hljs-attr">bottom</span>: &#123; <span class="hljs-attr">style</span>: <span class="hljs-string">&quot;thin&quot;</span> &#125;,<br>              <span class="hljs-attr">right</span>: &#123; <span class="hljs-attr">style</span>: <span class="hljs-string">&quot;thin&quot;</span> &#125;,<br>            &#125;;<br>          &#125;);<br>        &#125;);<br><br>        <span class="hljs-comment">// 写入数据</span><br>        <span class="hljs-keyword">const</span> dataRow = maxDepth + <span class="hljs-number">2</span>;<br>        sheetData.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> &#123;<br>          <span class="hljs-keyword">let</span> col = <span class="hljs-number">1</span>;<br>          <span class="hljs-keyword">const</span> flattenNodes = <span class="hljs-title function_">getFlattenLeafNodes</span>(sheet.<span class="hljs-property">children</span>);<br>          flattenNodes.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> &#123;<br>            <span class="hljs-keyword">const</span> cell = worksheet.<span class="hljs-title function_">getCell</span>(dataRow + index, col);<br>            <span class="hljs-keyword">const</span> value = item[node.<span class="hljs-property">field</span>] || <span class="hljs-string">&quot;&quot;</span>;<br>            cell.<span class="hljs-property">value</span> = value;<br>            cell.<span class="hljs-property">alignment</span> = &#123;<br>              <span class="hljs-attr">vertical</span>: <span class="hljs-string">&quot;middle&quot;</span>,<br>              <span class="hljs-attr">horizontal</span>: <span class="hljs-string">&quot;center&quot;</span>,<br>            &#125;;<br>            cell.<span class="hljs-property">border</span> = &#123;<br>              <span class="hljs-attr">top</span>: &#123; <span class="hljs-attr">style</span>: <span class="hljs-string">&quot;thin&quot;</span> &#125;,<br>              <span class="hljs-attr">left</span>: &#123; <span class="hljs-attr">style</span>: <span class="hljs-string">&quot;thin&quot;</span> &#125;,<br>              <span class="hljs-attr">bottom</span>: &#123; <span class="hljs-attr">style</span>: <span class="hljs-string">&quot;thin&quot;</span> &#125;,<br>              <span class="hljs-attr">right</span>: &#123; <span class="hljs-attr">style</span>: <span class="hljs-string">&quot;thin&quot;</span> &#125;,<br>            &#125;;<br>            col++;<br>          &#125;);<br>        &#125;);<br><br>        <span class="hljs-comment">// 确保空白单元格也有边框</span><br>        <span class="hljs-keyword">const</span> totalRows = dataRow + sheetData.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">const</span> totalCols = <span class="hljs-title function_">getFlattenLeafNodes</span>(sheet.<span class="hljs-property">children</span>).<span class="hljs-property">length</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> row = <span class="hljs-number">1</span>; row &lt;= totalRows; row++) &#123;<br>          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> col = <span class="hljs-number">1</span>; col &lt;= totalCols; col++) &#123;<br>            <span class="hljs-keyword">const</span> cell = worksheet.<span class="hljs-title function_">getCell</span>(row, col);<br>            <span class="hljs-keyword">if</span> (!cell.<span class="hljs-property">border</span>) &#123;<br>              cell.<span class="hljs-property">border</span> = &#123;<br>                <span class="hljs-attr">top</span>: &#123; <span class="hljs-attr">style</span>: <span class="hljs-string">&quot;thin&quot;</span> &#125;,<br>                <span class="hljs-attr">left</span>: &#123; <span class="hljs-attr">style</span>: <span class="hljs-string">&quot;thin&quot;</span> &#125;,<br>                <span class="hljs-attr">bottom</span>: &#123; <span class="hljs-attr">style</span>: <span class="hljs-string">&quot;thin&quot;</span> &#125;,<br>                <span class="hljs-attr">right</span>: &#123; <span class="hljs-attr">style</span>: <span class="hljs-string">&quot;thin&quot;</span> &#125;,<br>              &#125;;<br>            &#125;<br>          &#125;<br>        &#125;<br><br>        <span class="hljs-comment">// 调整列宽</span><br>        worksheet.<span class="hljs-property">columns</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">column</span>) =&gt;</span> &#123;<br>          column.<span class="hljs-property">width</span> = <span class="hljs-number">15</span>;<br>        &#125;);<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// 生成文件</span><br>    workbook.<span class="hljs-property">xlsx</span><br>      .<span class="hljs-title function_">writeBuffer</span>()<br>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">buffer</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">const</span> fileBlob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([buffer]);<br>        <span class="hljs-title function_">resolve</span>(fileBlob);<br>      &#125;)<br>      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>        <span class="hljs-title function_">reject</span>(error);<br>      &#125;);<br>  &#125;);<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 获取所有叶子节点</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> <span class="hljs-variable">nodes</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">*[]</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getFlattenLeafNodes</span>(<span class="hljs-params">nodes</span>) &#123;<br>  <span class="hljs-keyword">const</span> result = [];<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse</span>(<span class="hljs-params">node</span>) &#123;<br>    <span class="hljs-keyword">if</span> (!node.<span class="hljs-property">children</span> || node.<span class="hljs-property">children</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) &#123;<br>      result.<span class="hljs-title function_">push</span>(node);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      node.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> <span class="hljs-title function_">traverse</span>(child));<br>    &#125;<br>  &#125;<br><br>  nodes.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> <span class="hljs-title function_">traverse</span>(node));<br>  <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;exportExcel(titleTree, data)&quot;</span>&gt;</span>导出<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; exportExcel &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/utils/excel.js&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// 工作表及表头数据-树形结构</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> titleTree = [</span><br><span class="language-javascript">    &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;工作表1&quot;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">field</span>: <span class="hljs-string">&quot;sheet1&quot;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">children</span>: [</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;名称1&quot;</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">&quot;name1&quot;</span> &#125;,</span><br><span class="language-javascript">        &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;名称2&quot;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">children</span>: [</span><br><span class="language-javascript">            &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;名称3&quot;</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">&quot;name3&quot;</span> &#125;,</span><br><span class="language-javascript">            &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;名称4&quot;</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">&quot;name4&quot;</span> &#125;,</span><br><span class="language-javascript">          ],</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      ],</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;工作表2&quot;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">field</span>: <span class="hljs-string">&quot;sheet2&quot;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">children</span>: [</span><br><span class="language-javascript">        &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;名称1&quot;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">field</span>: <span class="hljs-string">&quot;name1&quot;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">children</span>: [</span><br><span class="language-javascript">            &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;名称3&quot;</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">&quot;name3&quot;</span> &#125;,</span><br><span class="language-javascript">            &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;名称4&quot;</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">&quot;name4&quot;</span> &#125;,</span><br><span class="language-javascript">          ],</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;名称2&quot;</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">&quot;name2&quot;</span> &#125;,</span><br><span class="language-javascript">      ],</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  ];</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// 工作表数据</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> data = &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">sheet1</span>: [</span><br><span class="language-javascript">      &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name1</span>: <span class="hljs-string">&quot;name1数据&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">name3</span>: <span class="hljs-string">&quot;name3数据&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">name4</span>: <span class="hljs-string">&quot;name4数据&quot;</span>,</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name1</span>: <span class="hljs-string">&quot;name1数据&quot;</span>,</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">    ],</span><br><span class="language-javascript">    <span class="hljs-attr">sheet2</span>: [</span><br><span class="language-javascript">      &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name2</span>: <span class="hljs-string">&quot;name2数据&quot;</span>,</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">    ],</span><br><span class="language-javascript">  &#125;;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】视角切换</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E8%A7%86%E8%A7%92%E5%88%87%E6%8D%A2/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E8%A7%86%E8%A7%92%E5%88%87%E6%8D%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="视角切换"><a href="#视角切换" class="headerlink" title="视角切换"></a>视角切换</h1><p>点击按钮，让相机视角切换到对应的位置，并且使控制器更改观察目标，使用 <code>GSAP</code> 动画库完成带有动画的视角切换效果。</p><h1 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn-wrap&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;init3D.angleOrigin()&quot;</span>&gt;</span>原始 视角<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;init3D.angle1()&quot;</span>&gt;</span>红色立方体 视角<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;init3D.angle2()&quot;</span>&gt;</span>绿色立方体 视角<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;init3D.angle3()&quot;</span>&gt;</span>蓝色立方体 视角<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;threeContainer&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;three-container&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">BaseThree</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/common/three/BaseThree.js&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; gsap &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;gsap&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> threeContainer = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">class</span> <span class="hljs-title class_">Init3D</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BaseThree</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">dom</span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">super</span>(dom);</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createCube</span>();</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-comment">// 创建三个立方体</span></span><br><span class="language-javascript">    <span class="hljs-title function_">createCube</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BoxGeometry</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);</span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> material1 = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshBasicMaterial</span>(&#123; <span class="hljs-attr">color</span>: <span class="hljs-number">0xff0000</span> &#125;);</span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> material2 = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshBasicMaterial</span>(&#123; <span class="hljs-attr">color</span>: <span class="hljs-number">0x00ff00</span> &#125;);</span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> material3 = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshBasicMaterial</span>(&#123; <span class="hljs-attr">color</span>: <span class="hljs-number">0x0000ff</span> &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cube1</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, material1);</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cube1</span>.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> = -<span class="hljs-number">6</span>;</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">scene</span>.<span class="hljs-title function_">add</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cube1</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cube2</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, material2);</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cube2</span>.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> = <span class="hljs-number">6</span>;</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">scene</span>.<span class="hljs-title function_">add</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cube2</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cube3</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, material3);</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cube3</span>.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> = -<span class="hljs-number">6</span>;</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">scene</span>.<span class="hljs-title function_">add</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cube3</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">animate</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">cube1</span>.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> += <span class="hljs-number">0.05</span>;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">cube2</span>.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> += <span class="hljs-number">0.05</span>;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">cube3</span>.<span class="hljs-property">rotation</span>.<span class="hljs-property">z</span> += <span class="hljs-number">0.05</span>;</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-comment">// 改变视角</span></span><br><span class="language-javascript">    <span class="hljs-title function_">checkAngle</span>(<span class="hljs-params">targetPosition, targetMesh</span>) &#123;</span><br><span class="language-javascript">      gsap.<span class="hljs-title function_">to</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-property">position</span>, &#123;</span><br><span class="language-javascript">        ...targetPosition,</span><br><span class="language-javascript">        <span class="hljs-attr">duration</span>: <span class="hljs-number">1</span>,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">      gsap.<span class="hljs-title function_">to</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">controls</span>.<span class="hljs-property">target</span>, &#123;</span><br><span class="language-javascript">        ...targetMesh.<span class="hljs-property">position</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">duration</span>: <span class="hljs-number">1</span>,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-comment">// 原始视角</span></span><br><span class="language-javascript">    <span class="hljs-title function_">angleOrigin</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      gsap.<span class="hljs-title function_">to</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-property">position</span>, &#123;</span><br><span class="language-javascript">        ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">cameraOriginPosition</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">duration</span>: <span class="hljs-number">1</span>,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">      gsap.<span class="hljs-title function_">to</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">controls</span>.<span class="hljs-property">target</span>, &#123;</span><br><span class="language-javascript">        ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">orbitControlsTarget</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">duration</span>: <span class="hljs-number">1</span>,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-comment">// 视角1</span></span><br><span class="language-javascript">    <span class="hljs-title function_">angle1</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkAngle</span>(&#123; <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">3</span> &#125;, <span class="hljs-variable language_">this</span>.<span class="hljs-property">cube1</span>);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-comment">// 视角2</span></span><br><span class="language-javascript">    <span class="hljs-title function_">angle2</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkAngle</span>(&#123; <span class="hljs-attr">x</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">5</span> &#125;, <span class="hljs-variable language_">this</span>.<span class="hljs-property">cube2</span>);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-comment">// 视角3</span></span><br><span class="language-javascript">    <span class="hljs-title function_">angle3</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkAngle</span>(&#123; <span class="hljs-attr">x</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">z</span>: -<span class="hljs-number">2</span> &#125;, <span class="hljs-variable language_">this</span>.<span class="hljs-property">cube3</span>);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">let</span> init3D;</span><br><span class="language-javascript">  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    init3D = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Init3D</span>(threeContainer.<span class="hljs-property">value</span>);</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.three-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vh</span> - <span class="hljs-number">20px</span>);</span><br><span class="language-css">  &#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.btn-wrap</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">position</span>: fixed;</span><br><span class="language-css">    <span class="hljs-attribute">top</span>: <span class="hljs-number">30px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.btn-wrap</span> <span class="hljs-selector-tag">button</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.btn-wrap</span> <span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-number">#00f</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.btn-wrap</span> <span class="hljs-selector-tag">button</span> + <span class="hljs-selector-tag">button</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>BaseThree.js （基础的 threejs 场景元素封装）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">OrbitControls</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three/examples/jsm/controls/OrbitControls.js&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseThree</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">dom</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cameraOriginPosition</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">orbitControlsTarget</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dom</span> = dom;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createScene</span>();<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createCamera</span>();<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createRenderer</span>();<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createControls</span>();<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createHelpers</span>();<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">animate</span>();<br>  &#125;<br>  <span class="hljs-comment">// 场景</span><br>  <span class="hljs-title function_">createScene</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">scene</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">scene</span>.<span class="hljs-property">background</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">CubeTextureLoader</span>().<span class="hljs-title function_">setPath</span>(<span class="hljs-string">&quot;/images/skyBox6/&quot;</span>).<span class="hljs-title function_">load</span>([<span class="hljs-string">&quot;posx.jpg&quot;</span>, <span class="hljs-string">&quot;negx.jpg&quot;</span>, <span class="hljs-string">&quot;posy.jpg&quot;</span>, <span class="hljs-string">&quot;negy.jpg&quot;</span>, <span class="hljs-string">&quot;posz.jpg&quot;</span>, <span class="hljs-string">&quot;negz.jpg&quot;</span>]);<br>  &#125;<br>  <span class="hljs-comment">// 相机</span><br>  <span class="hljs-title function_">createCamera</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">dom</span>.<span class="hljs-property">clientWidth</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">dom</span>.<span class="hljs-property">clientHeight</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(...<span class="hljs-variable language_">this</span>.<span class="hljs-property">cameraOriginPosition</span>);<br>  &#125;<br>  <span class="hljs-comment">// 渲染器</span><br>  <span class="hljs-title function_">createRenderer</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderer</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>(&#123; <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> &#125;);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderer</span>.<span class="hljs-title function_">setPixelRatio</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderer</span>.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dom</span>.<span class="hljs-property">clientWidth</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">dom</span>.<span class="hljs-property">clientHeight</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dom</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">renderer</span>.<span class="hljs-property">domElement</span>);<br>  &#125;<br>  <span class="hljs-comment">// 控制器</span><br>  <span class="hljs-title function_">createControls</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controls</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderer</span>.<span class="hljs-property">domElement</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controls</span>.<span class="hljs-property">target</span>.<span class="hljs-title function_">set</span>(...<span class="hljs-variable language_">this</span>.<span class="hljs-property">orbitControlsTarget</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controls</span>.<span class="hljs-property">enableDamping</span> = <span class="hljs-literal">true</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controls</span>.<span class="hljs-property">dampingFactor</span> = <span class="hljs-number">0.1</span>;<br>  &#125;<br>  <span class="hljs-comment">// 辅助工具</span><br>  <span class="hljs-title function_">createHelpers</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> axesHelper = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">AxesHelper</span>(<span class="hljs-number">50</span>);<br>    <span class="hljs-keyword">const</span> gridHelper = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">GridHelper</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">0x0000ff</span>, <span class="hljs-number">0x111111</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">scene</span>.<span class="hljs-title function_">add</span>(axesHelper, gridHelper);<br>  &#125;<br>  <span class="hljs-comment">// 动画函数</span><br>  <span class="hljs-title function_">animate</span>(<span class="hljs-params">callback</span>) &#123;<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">_animate</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>      <span class="hljs-title function_">requestAnimationFrame</span>(_animate);<br>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback === <span class="hljs-string">&quot;function&quot;</span>) <span class="hljs-title function_">callback</span>();<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">controls</span>.<span class="hljs-title function_">update</span>();<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderer</span>.<span class="hljs-title function_">render</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">scene</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>);<br>    &#125;;<br>    <span class="hljs-title function_">_animate</span>();<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h1><p><img src="/../../assets/web3d/check-angle-1.gif" alt="视角切换"></p>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】补间动画</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E8%A1%A5%E9%97%B4%E5%8A%A8%E7%94%BB/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E8%A1%A5%E9%97%B4%E5%8A%A8%E7%94%BB/</url>
    
    <content type="html"><![CDATA[<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>补间动画是指在一定时间内，从一个状态过渡到另一个状态的动画效果。在 threejs 中，可以使用 <code>Tween.js</code> 库来实现补间动画，也可以使用 <code>GSAP</code> 库，后续将使用 <code>GSAP</code> 来实现动画效果。</p><h1 id="GSAP"><a href="#GSAP" class="headerlink" title="GSAP"></a>GSAP</h1><p><code>GSAP</code> 是一个强大的动画库，它可以实现各种复杂的动画效果，它不仅可以操作 DOM 元素，还可以操作数据对象。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install gsap<br></code></pre></td></tr></table></figure><h2 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; gsap &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;gsap&quot;</span>;<br></code></pre></td></tr></table></figure><h1 id="常用-API"><a href="#常用-API" class="headerlink" title="常用 API"></a>常用 API</h1><h2 id="to"><a href="#to" class="headerlink" title="to"></a>to</h2><p>设置目标状态，从当前状态过渡到目标状态</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> tween = gsap.<span class="hljs-title function_">to</span>(<span class="hljs-string">&quot;.box&quot;</span>, &#123;<br>  <span class="hljs-comment">// 设置属性，如果是操作DOM元素，可设置CSS属性；如果是操作数据对象，可设置数据属性（目标值）</span><br>  <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>,<br>  <span class="hljs-attr">opacity</span>: <span class="hljs-number">1</span>,<br>  <span class="hljs-comment">// 动画配置，gsap提供的配置属性（可选）</span><br>  <span class="hljs-attr">duration</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// 动画时长（秒）</span><br>  <span class="hljs-attr">ease</span>: <span class="hljs-string">&quot;power1.inOut&quot;</span>, <span class="hljs-comment">// 缓动函数 https://gsap.com/docs/v3/Eases/</span><br>  <span class="hljs-attr">repeat</span>: -<span class="hljs-number">1</span>, <span class="hljs-comment">// 重复次数（-1 无限循环）</span><br>  <span class="hljs-attr">delay</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// 延迟时间（秒）</span><br>  <span class="hljs-attr">yoyo</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 往返运动</span><br>  <span class="hljs-attr">paused</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 是否暂停，适用于一开始不执行，通过某种交互手动触发动画</span><br>  <span class="hljs-title function_">onStart</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 动画开始回调函数</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;动画开始&quot;</span>);<br>  &#125;,<br>  <span class="hljs-title function_">onUpdate</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 动画正在更新</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;动画更新中...&quot;</span>);<br>  &#125;,<br>  <span class="hljs-title function_">onComplete</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 动画完成回调函数</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;动画完成&quot;</span>);<br>  &#125;,<br>&#125;);<br>tween.<span class="hljs-title function_">play</span>(); <span class="hljs-comment">// 播放动画</span><br>tween.<span class="hljs-title function_">pause</span>(); <span class="hljs-comment">// 暂停动画</span><br>tween.<span class="hljs-title function_">resume</span>(); <span class="hljs-comment">// 恢复动画</span><br>tween.<span class="hljs-title function_">reverse</span>(); <span class="hljs-comment">// 反向播放动画</span><br>tween.<span class="hljs-title function_">restart</span>(); <span class="hljs-comment">// 重新播放动画</span><br></code></pre></td></tr></table></figure><h2 id="form"><a href="#form" class="headerlink" title="form"></a>form</h2><p>设置目标状态，从目标状态过渡到当前状态</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">gsap.<span class="hljs-title function_">from</span>(<span class="hljs-string">&quot;.box&quot;</span>, &#123;<br>  <span class="hljs-comment">// 参考 to</span><br>&#125;);<br></code></pre></td></tr></table></figure><h2 id="formTo"><a href="#formTo" class="headerlink" title="formTo"></a>formTo</h2><p>指定起始状态到目标状态</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js">gsap.<span class="hljs-title function_">fromTo</span>(<br>  <span class="hljs-string">&quot;.box&quot;</span>,<br>  &#123;<br>    <span class="hljs-comment">// 参考 to</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-comment">// 参考 to</span><br>  &#125;<br>);<br></code></pre></td></tr></table></figure><h2 id="set"><a href="#set" class="headerlink" title="set"></a>set</h2><p>设置元素的属性值，不产生动画效果</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">gsap.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;.box&quot;</span>, &#123; <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;#f00&quot;</span> &#125;);<br></code></pre></td></tr></table></figure><h2 id="timeline"><a href="#timeline" class="headerlink" title="timeline"></a>timeline</h2><p>创建时间轴，用于控制动画的顺序，不需要手动计算延迟时间，可以更好的编排动画。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> tl = gsap.<span class="hljs-title function_">timeline</span>();<br><br><span class="hljs-comment">// 前两个参数参考 gsap.to()，可以链式调用</span><br><span class="hljs-comment">// 时间轴第三个参数详解：</span><br><br><span class="hljs-comment">// 1秒后执行动画</span><br>tl.<span class="hljs-title function_">to</span>(<span class="hljs-string">&quot;.box&quot;</span>, &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">2</span> &#125;, <span class="hljs-number">1</span>);<br><br><span class="hljs-comment">// 与上一个动画同时执行</span><br>tl.<span class="hljs-title function_">to</span>(<span class="hljs-string">&quot;.box&quot;</span>, &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">1</span> &#125;, <span class="hljs-string">&quot;&lt;&quot;</span>);<br><br><span class="hljs-comment">// 上个动画执行完后再执行（默认）</span><br>tl.<span class="hljs-title function_">to</span>(<span class="hljs-string">&quot;.box&quot;</span>, &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">1</span> &#125;, <span class="hljs-string">&quot;&gt;&quot;</span>);<br><br><span class="hljs-comment">// 上个动画结束后 1秒 再执行</span><br>tl.<span class="hljs-title function_">to</span>(<span class="hljs-string">&quot;.box&quot;</span>, &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">1</span> &#125;, <span class="hljs-string">&quot;+=1&quot;</span>);<br><br><span class="hljs-comment">// 上个动画结束前 1秒 再执行</span><br>tl.<span class="hljs-title function_">to</span>(<span class="hljs-string">&quot;.box&quot;</span>, &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">1</span> &#125;, <span class="hljs-string">&quot;-=1&quot;</span>);<br><br>tl.<span class="hljs-title function_">from</span>();<br>tl.<span class="hljs-title function_">fromTo</span>();<br>tl.<span class="hljs-title function_">set</span>();<br></code></pre></td></tr></table></figure><h1 id="与-threejs-结合"><a href="#与-threejs-结合" class="headerlink" title="与 threejs 结合"></a>与 threejs 结合</h1><p>示例：将摄像机从 x 轴 0 移动到 x 轴 5，持续时间为 2 秒（完成补间动画）。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; gsap &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;gsap&quot;</span>;<br><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three&quot;</span>;<br><br><span class="hljs-comment">// 省略其他代码...</span><br><br><span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);<br><br>gsap.<span class="hljs-title function_">to</span>(camera.<span class="hljs-property">position</span>, &#123;<br>  <span class="hljs-attr">x</span>: <span class="hljs-number">5</span>,<br>  <span class="hljs-attr">duration</span>: <span class="hljs-number">2</span>,<br>&#125;);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】centos7安装nodejs20</title>
    <link href="/node/%E3%80%90node%E3%80%91centos7%E5%AE%89%E8%A3%85nodejs20/"/>
    <url>/node/%E3%80%90node%E3%80%91centos7%E5%AE%89%E8%A3%85nodejs20/</url>
    
    <content type="html"><![CDATA[<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>nodejs v18 以上版本，在 centos7 下因 glibc 版本问题 无法使用。</p><p>node v20.9.0 报错信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@localhost bin]<span class="hljs-comment"># node --version</span><br>node: /lib64/libm.so.6: version `GLIBC_2.27<span class="hljs-string">&#x27; not found (required by node)</span><br><span class="hljs-string">node: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.20&#x27;</span> not found (required by node)<br>node: /lib64/libstdc++.so.6: version `CXXABI_1.3.9<span class="hljs-string">&#x27; not found (required by node)</span><br><span class="hljs-string">node: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21&#x27;</span> not found (required by node)<br>node: /lib64/libc.so.6: version `GLIBC_2.28<span class="hljs-string">&#x27; not found (required by node)</span><br><span class="hljs-string">node: /lib64/libc.so.6: version `GLIBC_2.25&#x27;</span> not found (required by node)<br></code></pre></td></tr></table></figure><p>centos7 glibc 版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@localhost ~]<span class="hljs-comment"># ldd --version</span><br>ldd (GNU libc) 2.17<br>Copyright (C) 2012 Free Software Foundation, Inc.<br>This is free software; see the <span class="hljs-built_in">source</span> <span class="hljs-keyword">for</span> copying conditions.  There is NO<br>warranty; not even <span class="hljs-keyword">for</span> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.<br>由 Roland McGrath 和 Ulrich Drepper 编写。<br></code></pre></td></tr></table></figure><h2 id="GLIBC"><a href="#GLIBC" class="headerlink" title="GLIBC"></a>GLIBC</h2><p>‌glibc 的全称是 GNU C Library；也就是 GNU 发布的 c 运行库，是 linux 系统中最底层的 api。</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>网上很多文章都需要升级 glibc 版本，了解到它是较为底层的库，在生产环境的系统不推荐，也不敢升级！</p><p>GitHub 上有个项目提供了 Node.js 的非官方二进制文件 <a href="https://github.com/nodejs/unofficial-builds">https://github.com/nodejs/unofficial-builds</a> 而且 nodejs 新版官网也提到了</p><p><img src="/../../assets/%E3%80%90node%E3%80%91centos7%E5%AE%89%E8%A3%85nodejs20/1.jpg"></p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>下载 node-v20.9.0</p><p>下载地址: <a href="https://unofficial-builds.nodejs.org/download/release/">https://unofficial-builds.nodejs.org/download/release/</a></p><p>报错的是 glibc 版本问题，下载 glibc-217 版本的 nodejs</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget -P /usr/local https://unofficial-builds.nodejs.org/download/release/v20.9.0/node-v20.9.0-linux-x64-glibc-217.tar.gz<br></code></pre></td></tr></table></figure><h2 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h2><p>进入 &#x2F;usr&#x2F;local 目录下, 解压</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cd</span> /usr/local<br><span class="hljs-attribute">tar</span> zxvf node-v20.<span class="hljs-number">9</span>.<span class="hljs-number">0</span>-linux-x64-glibc-<span class="hljs-number">217</span>.tar.gz<br></code></pre></td></tr></table></figure><h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /etc/profile<br></code></pre></td></tr></table></figure><p>编辑 &#x2F;etc&#x2F;profile 文件，添加如下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nodejs</span><br><span class="hljs-built_in">export</span> PATH=/usr/local/node-v20.9.0-linux-x64-glibc-217/bin:<span class="hljs-variable">$PATH</span><br></code></pre></td></tr></table></figure><h2 id="重新加载环境变量"><a href="#重新加载环境变量" class="headerlink" title="重新加载环境变量"></a>重新加载环境变量</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> /etc/profile<br></code></pre></td></tr></table></figure><h2 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h2><p><img src="/../../assets/%E3%80%90node%E3%80%91centos7%E5%AE%89%E8%A3%85nodejs20/2.jpg"></p><h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="xdg-open-报错"><a href="#xdg-open-报错" class="headerlink" title="xdg-open 报错"></a>xdg-open 报错</h3><p>在运行 vue 项目时候发生 xdg-open 报错，需要安装 xdg-utils</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo yum install xdg-utils<br></code></pre></td></tr></table></figure><h3 id="node-运行时内存不足"><a href="#node-运行时内存不足" class="headerlink" title="node 运行时内存不足"></a>node 运行时内存不足</h3><p>当内存小于 4G 的时候，node v20 运行时会报内存运行不足的错，如果大于 4G 还报错，可尝试设置给 node 设置内存大小（设置时参考实际机器的内存大小）。</p><p>设置内存运行脚本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">node --max_old_space_size=4096 build.js<br></code></pre></td></tr></table></figure><p>报错：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">FATAL ERROR: Reached heap <span class="hljs-built_in">limit</span> Allocation failed - JavaScript heap out of memory<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】执行模型动画</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%9E%8B%E5%8A%A8%E7%94%BB/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%9E%8B%E5%8A%A8%E7%94%BB/</url>
    
    <content type="html"><![CDATA[<h1 id="模型动画"><a href="#模型动画" class="headerlink" title="模型动画"></a>模型动画</h1><p>有些 3D 模型本身就带有一些动画（建模工程师已经建立好了动画），加载 3D 模型后，可以对模型动画进行操作，在操作动画，主要使用到的是：动画混合器 <code>AnimationMixer</code>。</p><p>加载 3D 模型后，会返回一个 <code>gltf</code> 对象，<code>gltf.animations</code> 存放了模型的所有动画的数组。</p><p><img src="/../../assets/web3d/animation-1.jpg" alt="模型动画数据"></p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;threeContainer&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;three-container&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">OrbitControls</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three/examples/jsm/controls/OrbitControls.js&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">GLTFLoader</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three/examples/jsm/loaders/GLTFLoader.js&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> threeContainer = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">init3D</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientWidth</span> / threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);</span><br><span class="language-javascript">    camera.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> = <span class="hljs-number">20</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>(&#123; <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> &#125;);</span><br><span class="language-javascript">    renderer.<span class="hljs-title function_">setSize</span>(threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientWidth</span>, threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>);</span><br><span class="language-javascript">    threeContainer.<span class="hljs-property">value</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> ambientLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">AmbientLight</span>(<span class="hljs-number">0xffffff</span>, <span class="hljs-number">0.5</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> directionalLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">DirectionalLight</span>(<span class="hljs-number">0xffffff</span>, <span class="hljs-number">0.5</span>);</span><br><span class="language-javascript">    directionalLight.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> = <span class="hljs-number">2000</span>;</span><br><span class="language-javascript">    scene.<span class="hljs-title function_">add</span>(ambientLight, directionalLight);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, renderer.<span class="hljs-property">domElement</span>);</span><br><span class="language-javascript">    controls.<span class="hljs-property">enableDamping</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    controls.<span class="hljs-property">dampingFactor</span> = <span class="hljs-number">0.05</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 1. 定义动画混合器</span></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> mixer;</span><br><span class="language-javascript">    <span class="hljs-comment">// 2. 创建跟踪时间（保证在不同帧率设备上动画运行一致）</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> clock = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Clock</span>();</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> glftLoader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GLTFLoader</span>();</span><br><span class="language-javascript">    glftLoader.<span class="hljs-title function_">load</span>(<span class="hljs-string">&quot;/model/phoenix_bird.glb&quot;</span>, <span class="hljs-function">(<span class="hljs-params">gltf</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> model = gltf.<span class="hljs-property">scene</span>;</span><br><span class="language-javascript">      model.<span class="hljs-property">scale</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0.01</span>, <span class="hljs-number">0.01</span>, <span class="hljs-number">0.01</span>);</span><br><span class="language-javascript">      scene.<span class="hljs-title function_">add</span>(model);</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 3. 创建动画混合器（传入要执行动画的3D模型对象）</span></span><br><span class="language-javascript">      mixer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">AnimationMixer</span>(model);</span><br><span class="language-javascript">      <span class="hljs-comment">// 4. 创建动画调度器（传入AnimationClip 返回 AnimationAction）</span></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> action = mixer.<span class="hljs-title function_">clipAction</span>(gltf.<span class="hljs-property">animations</span>[<span class="hljs-number">0</span>]);</span><br><span class="language-javascript">      <span class="hljs-comment">// 5. 调度器操作动画</span></span><br><span class="language-javascript">      action.<span class="hljs-title function_">play</span>();</span><br><span class="language-javascript">      <span class="hljs-comment">// action.stop()</span></span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">requestAnimationFrame</span>(animate);</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">if</span> (mixer) &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// 6. 更新动画混合器并传入帧更新时间差（保证在不同帧率设备上动画运行一致）</span></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> delta = clock.<span class="hljs-title function_">getDelta</span>();</span><br><span class="language-javascript">        mixer.<span class="hljs-title function_">update</span>(delta);</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      controls.<span class="hljs-title function_">update</span>();</span><br><span class="language-javascript">      renderer.<span class="hljs-title function_">render</span>(scene, camera);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-title function_">animate</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">init3D</span>();</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.three-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vh</span> - <span class="hljs-number">20px</span>);</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h1><p><img src="/../../assets/web3d/animation-1.gif" alt="模型动画"></p>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】vue3-虚拟列表组件</title>
    <link href="/vue/%E3%80%90vue%E3%80%91vue3-%E8%99%9A%E6%8B%9F%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6/"/>
    <url>/vue/%E3%80%90vue%E3%80%91vue3-%E8%99%9A%E6%8B%9F%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><h2 id="只渲染可视区域的数据项"><a href="#只渲染可视区域的数据项" class="headerlink" title="只渲染可视区域的数据项"></a>只渲染可视区域的数据项</h2><ul><li>滚动时动态计算开始项的索引。</li><li>通过开始项索引计算出结束索引。</li><li>有了开始结束索引，使用 slice 切割原始数组，得到新数组（实际渲染的数据）。</li></ul><h2 id="滚动条的实现"><a href="#滚动条的实现" class="headerlink" title="滚动条的实现"></a>滚动条的实现</h2><ul><li>使用一个空白的占位元素，通过计算数据总高度，设置其高。</li></ul><h2 id="内容始终在中间"><a href="#内容始终在中间" class="headerlink" title="内容始终在中间"></a>内容始终在中间</h2><ul><li>滚动时记录偏移量，使用 position: top 定位 或者 transform: translate 让可视区域始终在中间，不会滚动上移。</li></ul><h1 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h1><p><code>RocVirtualList.vue</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;roc-virtual-list&quot;</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123; height: `$&#123;height&#125;px` &#125;&quot;</span> @<span class="hljs-attr">scroll</span>=<span class="hljs-string">&quot;handleScroll&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;roc-virtual-list-phantom&quot;</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123; height: `$&#123;listHeight&#125;px` &#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;roc-virtual-list-content&quot;</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123; transform: `translate3d(0, $&#123;offset&#125;px, 0)` &#125;&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in visibleData&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;roc-virtual-list-item&quot;</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123; height: `$&#123;itemHeight&#125;px` &#125;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; ref, computed, watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// 定义 props</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">listData</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Array</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">height</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">itemHeight</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// 响应式数据</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> offset = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> start = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// 计算属性</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> listHeight = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">listData</span>.<span class="hljs-property">length</span> * props.<span class="hljs-property">itemHeight</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> visibleCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(props.<span class="hljs-property">height</span> / props.<span class="hljs-property">itemHeight</span>) + <span class="hljs-number">2</span>); <span class="hljs-comment">// 向上取整 + 多渲染两条</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> visibleData = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> start_index = start.<span class="hljs-property">value</span>;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> end_index = start.<span class="hljs-property">value</span> + visibleCount.<span class="hljs-property">value</span>;</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> props.<span class="hljs-property">listData</span>.<span class="hljs-title function_">slice</span>(start_index, end_index);</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// 滚动处理</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleScroll</span> = (<span class="hljs-params">e</span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> scrollTop = e.<span class="hljs-property">target</span>.<span class="hljs-property">scrollTop</span>;</span><br><span class="language-javascript">    start.<span class="hljs-property">value</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(scrollTop / props.<span class="hljs-property">itemHeight</span>); <span class="hljs-comment">// 此处向下取整 和 visibleCount 向上取整正好抵消 （这样计算的数据 visibleData 的数量符合预期的数量）</span></span><br><span class="language-javascript">    offset.<span class="hljs-property">value</span> = scrollTop;</span><br><span class="language-javascript">  &#125;;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// 监听数据变化</span></span><br><span class="language-javascript">  <span class="hljs-title function_">watch</span>(</span><br><span class="language-javascript">    <span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">listData</span>,</span><br><span class="language-javascript">    <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">      offset.<span class="hljs-property">value</span> = <span class="hljs-number">0</span>;</span><br><span class="language-javascript">      start.<span class="hljs-property">value</span> = <span class="hljs-number">0</span>;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    &#123; <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> &#125;</span><br><span class="language-javascript">  );</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.roc-virtual-list</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">    <span class="hljs-attribute">overflow-y</span>: auto;</span><br><span class="language-css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e8e8e8</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.roc-virtual-list-phantom</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">    <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">    <span class="hljs-attribute">z-index</span>: -<span class="hljs-number">1</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.roc-virtual-list-content</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">    <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">    <span class="hljs-attribute">will-change</span>: transform;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.roc-virtual-list-item</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e8e8e8</span>;</span><br><span class="language-css">    <span class="hljs-attribute">box-sizing</span>: border-box;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">    <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list-page&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">RocVirtualList</span> <span class="hljs-attr">:listData</span>=<span class="hljs-string">&quot;listData&quot;</span> <span class="hljs-attr">:height</span>=<span class="hljs-string">&quot;400&quot;</span> <span class="hljs-attr">:itemHeight</span>=<span class="hljs-string">&quot;40&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">&quot;&#123; item &#125;&quot;</span>&gt;</span> &#123;&#123; item.id &#125;&#125; - &#123;&#123; item.content &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">RocVirtualList</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">RocVirtualList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/RocVirtualList/RocVirtualList.vue&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> listData = <span class="hljs-title function_">ref</span>([]);</span><br><span class="language-javascript">  <span class="hljs-title function_">setData</span>();</span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">setData</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">500000</span>; i++) &#123;</span><br><span class="language-javascript">      listData.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">id</span>: i + <span class="hljs-number">1</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">content</span>: <span class="hljs-string">`数据<span class="hljs-subst">$&#123;i&#125;</span>`</span>,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】萤石云EZUIkit-js-SDK</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E8%90%A4%E7%9F%B3%E4%BA%91EZUIkit-js-SDK/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E8%90%A4%E7%9F%B3%E4%BA%91EZUIkit-js-SDK/</url>
    
    <content type="html"><![CDATA[<p>萤石云 EZUIkit-js-SDK 接入官方文档：<a href="https://open.ys7.com/help/1772">https://open.ys7.com/help/1772</a></p><h2 id="vue-组件"><a href="#vue-组件" class="headerlink" title="vue 组件"></a>vue 组件</h2><p>npm 地址：<a href="https://www.npmjs.com/package/vue-ezuikit">https://www.npmjs.com/package/vue-ezuikit</a></p><h2 id="常用功能"><a href="#常用功能" class="headerlink" title="常用功能"></a>常用功能</h2><p><code>npm install ezuikit-js@7.6.8</code></p><p><strong>7.6.8 以上为 pro 公测版本</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;hello-ezuikit-js&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;video-container&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;init&quot;</span>&gt;</span>初始化<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;stop&quot;</span>&gt;</span>停止<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;play&quot;</span>&gt;</span>播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;openSound&quot;</span>&gt;</span>开启声音<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;closeSound&quot;</span>&gt;</span>关闭声音<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;startSave&quot;</span>&gt;</span>开始录制<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;stopSave&quot;</span>&gt;</span>结束录制<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;capturePicture&quot;</span>&gt;</span>截图<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;fullScreen&quot;</span>&gt;</span>全屏<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;cancelFullScreen&quot;</span>&gt;</span>退出全屏<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;getOSDTime&quot;</span>&gt;</span>获取基准时间<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;ezopenStartTalk&quot;</span>&gt;</span>开始对讲<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;ezopenStopTalk&quot;</span>&gt;</span>结束对讲<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;destroy&quot;</span>&gt;</span>销毁<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; onMounted &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">EZUIKit</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;ezuikit-js&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">EZUIKit.EZUIKitPlayer | null</span>&#125;</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">let</span> player;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 初始化萤石云播放器</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (player) <span class="hljs-title function_">destroy</span>();</span><br><span class="language-javascript">    <span class="hljs-comment">// accessToken 请求演示（需要替换真实的accessToken请求）</span></span><br><span class="language-javascript">    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&quot;https://open.ys7.com/jssdk/ezopen/demo/token&quot;</span>)</span><br><span class="language-javascript">      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.<span class="hljs-title function_">json</span>())</span><br><span class="language-javascript">      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> accessToken = res.<span class="hljs-property">data</span>.<span class="hljs-property">accessToken</span>;</span><br><span class="language-javascript">        player = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EZUIKit</span>.<span class="hljs-title class_">EZUIKitPlayer</span>(&#123;</span><br><span class="language-javascript">          <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;video-container&quot;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">accessToken</span>: accessToken,</span><br><span class="language-javascript">          <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;ezopen://open.ys7.com/序列号/通道号.live&quot;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">template</span>: <span class="hljs-string">&quot;simple&quot;</span>, <span class="hljs-comment">// simple: 极简版; standard: 标准版; security: 安防版; voice: 语音版; pcLive: pc直播; pcRec: pc回放; mobileLive: 移动端直播; mobileRec: 移动端回放</span></span><br><span class="language-javascript">          <span class="hljs-attr">plugin</span>: [], <span class="hljs-comment">// 按需加载插件: talk-对讲</span></span><br><span class="language-javascript">          <span class="hljs-attr">width</span>: <span class="hljs-number">600</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">height</span>: <span class="hljs-number">400</span>,</span><br><span class="language-javascript">        &#125;);</span><br><span class="language-javascript">        <span class="hljs-variable language_">window</span>.<span class="hljs-property">player</span> = player;</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">init</span>();</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 播放</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">play</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> playPromise = player.<span class="hljs-title function_">play</span>();</span><br><span class="language-javascript">    playPromise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;promise 获取 数据&quot;</span>, data);</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 停止</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">stop</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> stopPromise = player.<span class="hljs-title function_">stop</span>();</span><br><span class="language-javascript">    stopPromise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;promise 获取 数据&quot;</span>, data);</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 获取基准时间</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getOSDTime</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> getOSDTimePromise = player.<span class="hljs-title function_">getOSDTime</span>();</span><br><span class="language-javascript">    getOSDTimePromise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;promise 获取 数据&quot;</span>, data);</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 截图</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">capturePicture</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    player.<span class="hljs-title function_">capturePicture</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime()&#125;</span>`</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;截图数据&quot;</span>, data);</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 开启声音</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">openSound</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> openSoundPromise = player.<span class="hljs-title function_">openSound</span>();</span><br><span class="language-javascript">    openSoundPromise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;promise 获取 数据&quot;</span>, data);</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 关闭声音</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">closeSound</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> openSoundPromise = player.<span class="hljs-title function_">closeSound</span>();</span><br><span class="language-javascript">    openSoundPromise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;promise 获取 数据&quot;</span>, data);</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 开始录制</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">startSave</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> startSavePromise = player.<span class="hljs-title function_">startSave</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime()&#125;</span>`</span>);</span><br><span class="language-javascript">    startSavePromise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;promise 获取 数据&quot;</span>, data);</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 结束录制</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">stopSave</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> stopSavePromise = player.<span class="hljs-title function_">stopSave</span>();</span><br><span class="language-javascript">    stopSavePromise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;promise 获取 数据&quot;</span>, data);</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 开启对讲</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">ezopenStartTalk</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    player.<span class="hljs-title function_">startTalk</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 关闭对讲</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">ezopenStopTalk</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    player.<span class="hljs-title function_">stopTalk</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 全屏</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">fullScreen</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    player.<span class="hljs-title function_">fullScreen</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 退出全屏</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">cancelFullScreen</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    player.<span class="hljs-title function_">cancelFullScreen</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 销毁</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">destroy</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    player.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>;</span><br><span class="language-javascript">    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(playerId.<span class="hljs-property">value</span>)?.<span class="hljs-title function_">remove</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】vue3-图标选择器组件</title>
    <link href="/vue/%E3%80%90vue%E3%80%91vue3-%E5%9B%BE%E6%A0%87%E9%80%89%E6%8B%A9%E5%99%A8%E7%BB%84%E4%BB%B6/"/>
    <url>/vue/%E3%80%90vue%E3%80%91vue3-%E5%9B%BE%E6%A0%87%E9%80%89%E6%8B%A9%E5%99%A8%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><ul><li>使用 element-plus 的 el-popover + el-input 组件二次封装实现。</li><li>引入图标库 <code>npm i roc-icon4</code>，定义一个数组定义所有图标名称。</li><li>搜索功能，使用 input 组件 + 数组 filter 来实现。</li><li>图标数据的双向绑定 v-model（modelValue + update:modelValue）。</li></ul><h1 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h1><p><code>RocIconSelect.vue</code></p><p>图标必须安装 <code>roc-icon4</code>，文档：<a href="https://doc.rocyuan.top/roc-icon.html">https://doc.rocyuan.top/roc-icon.html</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;roc-icon-select&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-popover</span> <span class="hljs-attr">placement</span>=<span class="hljs-string">&quot;bottom-start&quot;</span> <span class="hljs-attr">:width</span>=<span class="hljs-string">&quot;700&quot;</span> <span class="hljs-attr">trigger</span>=<span class="hljs-string">&quot;click&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">reference</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 选择图标回显 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">:model-value</span>=<span class="hljs-string">&quot;props.modelValue&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;点击选择图标&quot;</span> <span class="hljs-attr">readonly</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">prefix</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;props.modelValue&quot;</span>&gt;</span><br>              <span class="hljs-comment">&lt;!-- renderIcon 解决字体图标为重新渲染问题 --&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">roc-icon</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;renderIcon&quot;</span> <span class="hljs-attr">:size</span>=<span class="hljs-string">&quot;16&quot;</span> <span class="hljs-attr">:name</span>=<span class="hljs-string">&quot;props.modelValue&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">roc-icon</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-icon</span> <span class="hljs-attr">v-else</span> <span class="hljs-attr">:size</span>=<span class="hljs-string">&quot;16&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">search</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-icon</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- 选择图标 --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;icon-content&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;icon-top-bar&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;filterIconName&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;输入图标名称搜索&quot;</span> <span class="hljs-attr">clearable</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;filterIcon&quot;</span> @<span class="hljs-attr">clear</span>=<span class="hljs-string">&quot;filterIcon&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn-clear-clone&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clearSelectedIcon&quot;</span>&gt;</span>清除已选图标<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;icon-list&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;icon-item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;name in iconNameList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;name&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;selectedIcon(name)&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">roc-icon</span> <span class="hljs-attr">:name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">:size</span>=<span class="hljs-string">&quot;16&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">roc-icon</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">el-popover</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> iconNames <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./requireIcons&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; nextTick, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">&quot;update:modelValue&quot;</span>]);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">modelValue</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> iconNameList = <span class="hljs-title function_">ref</span>(iconNames);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> filterIconName = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;&quot;</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 过滤图标</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">filterIcon</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    iconNameList.<span class="hljs-property">value</span> = iconNames.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> name.<span class="hljs-title function_">includes</span>(filterIconName.<span class="hljs-property">value</span>));</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> renderIcon = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">true</span>);</span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 选择图标</span></span><br><span class="hljs-comment"><span class="language-javascript">   * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">string</span>&#125; <span class="hljs-variable">name</span></span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">selectedIcon</span>(<span class="hljs-params">name</span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-comment">// 解决 font 字体 icon 不刷新问题</span></span><br><span class="language-javascript">    renderIcon.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;</span><br><span class="language-javascript">    <span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>();</span><br><span class="language-javascript">    renderIcon.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    <span class="hljs-title function_">emit</span>(<span class="hljs-string">&quot;update:modelValue&quot;</span>, name);</span><br><span class="language-javascript">    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">click</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 清除已选图标</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">clearSelectedIcon</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">emit</span>(<span class="hljs-string">&quot;update:modelValue&quot;</span>, name);</span><br><span class="language-javascript">    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">click</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.icon-content</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">overflow-y</span>: auto;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span>;</span><br><span class="language-css">    <span class="hljs-selector-class">.icon-top-bar</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">6px</span>;</span><br><span class="language-css">      <span class="hljs-selector-class">.btn-clear-clone</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">6px</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">    <span class="hljs-selector-class">.icon-list</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">      <span class="hljs-attribute">flex-wrap</span>: wrap;</span><br><span class="language-css">      <span class="hljs-selector-class">.icon-item</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">30px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">        <span class="hljs-selector-class">.icon-name</span> &#123;</span><br><span class="language-css">          <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p><code>requireIcons.js</code></p><p>所有的图标名称</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [<br>  <span class="hljs-string">&quot;glass&quot;</span>,<br>  <span class="hljs-string">&quot;music&quot;</span>,<br>  <span class="hljs-string">&quot;search&quot;</span>,<br>  <span class="hljs-string">&quot;envelope-o&quot;</span>,<br>  <span class="hljs-string">&quot;heart&quot;</span>,<br>  <span class="hljs-string">&quot;star&quot;</span>,<br>  <span class="hljs-string">&quot;star-o&quot;</span>,<br>  <span class="hljs-string">&quot;user&quot;</span>,<br>  <span class="hljs-string">&quot;film&quot;</span>,<br>  <span class="hljs-string">&quot;th-large&quot;</span>,<br>  <span class="hljs-string">&quot;th&quot;</span>,<br>  <span class="hljs-string">&quot;th-list&quot;</span>,<br>  <span class="hljs-string">&quot;check&quot;</span>,<br>  <span class="hljs-string">&quot;times&quot;</span>,<br>  <span class="hljs-string">&quot;search-plus&quot;</span>,<br>  <span class="hljs-string">&quot;search-minus&quot;</span>,<br>  <span class="hljs-string">&quot;power-off&quot;</span>,<br>  <span class="hljs-string">&quot;signal&quot;</span>,<br>  <span class="hljs-string">&quot;cog&quot;</span>,<br>  <span class="hljs-string">&quot;trash-o&quot;</span>,<br>  <span class="hljs-string">&quot;home&quot;</span>,<br>  <span class="hljs-string">&quot;file-o&quot;</span>,<br>  <span class="hljs-string">&quot;clock-o&quot;</span>,<br>  <span class="hljs-string">&quot;road&quot;</span>,<br>  <span class="hljs-string">&quot;download&quot;</span>,<br>  <span class="hljs-string">&quot;arrow-circle-o-down&quot;</span>,<br>  <span class="hljs-string">&quot;arrow-circle-o-up&quot;</span>,<br>  <span class="hljs-string">&quot;inbox&quot;</span>,<br>  <span class="hljs-string">&quot;play-circle-o&quot;</span>,<br>  <span class="hljs-string">&quot;repeat&quot;</span>,<br>  <span class="hljs-string">&quot;refresh&quot;</span>,<br>  <span class="hljs-string">&quot;list-alt&quot;</span>,<br>  <span class="hljs-string">&quot;lock&quot;</span>,<br>  <span class="hljs-string">&quot;flag&quot;</span>,<br>  <span class="hljs-string">&quot;headphones&quot;</span>,<br>  <span class="hljs-string">&quot;volume-off&quot;</span>,<br>  <span class="hljs-string">&quot;volume-down&quot;</span>,<br>  <span class="hljs-string">&quot;volume-up&quot;</span>,<br>  <span class="hljs-string">&quot;qrcode&quot;</span>,<br>  <span class="hljs-string">&quot;barcode&quot;</span>,<br>  <span class="hljs-string">&quot;tag&quot;</span>,<br>  <span class="hljs-string">&quot;tags&quot;</span>,<br>  <span class="hljs-string">&quot;book&quot;</span>,<br>  <span class="hljs-string">&quot;bookmark&quot;</span>,<br>  <span class="hljs-string">&quot;print&quot;</span>,<br>  <span class="hljs-string">&quot;camera&quot;</span>,<br>  <span class="hljs-string">&quot;font&quot;</span>,<br>  <span class="hljs-string">&quot;bold&quot;</span>,<br>  <span class="hljs-string">&quot;italic&quot;</span>,<br>  <span class="hljs-string">&quot;text-height&quot;</span>,<br>  <span class="hljs-string">&quot;text-width&quot;</span>,<br>  <span class="hljs-string">&quot;align-left&quot;</span>,<br>  <span class="hljs-string">&quot;align-center&quot;</span>,<br>  <span class="hljs-string">&quot;align-right&quot;</span>,<br>  <span class="hljs-string">&quot;align-justify&quot;</span>,<br>  <span class="hljs-string">&quot;list&quot;</span>,<br>  <span class="hljs-string">&quot;outdent&quot;</span>,<br>  <span class="hljs-string">&quot;indent&quot;</span>,<br>  <span class="hljs-string">&quot;video-camera&quot;</span>,<br>  <span class="hljs-string">&quot;picture-o&quot;</span>,<br>  <span class="hljs-string">&quot;pencil&quot;</span>,<br>  <span class="hljs-string">&quot;map-marker&quot;</span>,<br>  <span class="hljs-string">&quot;adjust&quot;</span>,<br>  <span class="hljs-string">&quot;tint&quot;</span>,<br>  <span class="hljs-string">&quot;pencil-square-o&quot;</span>,<br>  <span class="hljs-string">&quot;share-square-o&quot;</span>,<br>  <span class="hljs-string">&quot;check-square-o&quot;</span>,<br>  <span class="hljs-string">&quot;arrows&quot;</span>,<br>  <span class="hljs-string">&quot;step-backward&quot;</span>,<br>  <span class="hljs-string">&quot;fast-backward&quot;</span>,<br>  <span class="hljs-string">&quot;backward&quot;</span>,<br>  <span class="hljs-string">&quot;play&quot;</span>,<br>  <span class="hljs-string">&quot;pause&quot;</span>,<br>  <span class="hljs-string">&quot;stop&quot;</span>,<br>  <span class="hljs-string">&quot;forward&quot;</span>,<br>  <span class="hljs-string">&quot;fast-forward&quot;</span>,<br>  <span class="hljs-string">&quot;step-forward&quot;</span>,<br>  <span class="hljs-string">&quot;eject&quot;</span>,<br>  <span class="hljs-string">&quot;chevron-left&quot;</span>,<br>  <span class="hljs-string">&quot;chevron-right&quot;</span>,<br>  <span class="hljs-string">&quot;plus-circle&quot;</span>,<br>  <span class="hljs-string">&quot;minus-circle&quot;</span>,<br>  <span class="hljs-string">&quot;times-circle&quot;</span>,<br>  <span class="hljs-string">&quot;check-circle&quot;</span>,<br>  <span class="hljs-string">&quot;question-circle&quot;</span>,<br>  <span class="hljs-string">&quot;info-circle&quot;</span>,<br>  <span class="hljs-string">&quot;crosshairs&quot;</span>,<br>  <span class="hljs-string">&quot;times-circle-o&quot;</span>,<br>  <span class="hljs-string">&quot;check-circle-o&quot;</span>,<br>  <span class="hljs-string">&quot;ban&quot;</span>,<br>  <span class="hljs-string">&quot;arrow-left&quot;</span>,<br>  <span class="hljs-string">&quot;arrow-right&quot;</span>,<br>  <span class="hljs-string">&quot;arrow-up&quot;</span>,<br>  <span class="hljs-string">&quot;arrow-down&quot;</span>,<br>  <span class="hljs-string">&quot;share&quot;</span>,<br>  <span class="hljs-string">&quot;expand&quot;</span>,<br>  <span class="hljs-string">&quot;compress&quot;</span>,<br>  <span class="hljs-string">&quot;plus&quot;</span>,<br>  <span class="hljs-string">&quot;minus&quot;</span>,<br>  <span class="hljs-string">&quot;asterisk&quot;</span>,<br>  <span class="hljs-string">&quot;exclamation-circle&quot;</span>,<br>  <span class="hljs-string">&quot;gift&quot;</span>,<br>  <span class="hljs-string">&quot;leaf&quot;</span>,<br>  <span class="hljs-string">&quot;fire&quot;</span>,<br>  <span class="hljs-string">&quot;eye&quot;</span>,<br>  <span class="hljs-string">&quot;eye-slash&quot;</span>,<br>  <span class="hljs-string">&quot;exclamation-triangle&quot;</span>,<br>  <span class="hljs-string">&quot;plane&quot;</span>,<br>  <span class="hljs-string">&quot;calendar&quot;</span>,<br>  <span class="hljs-string">&quot;random&quot;</span>,<br>  <span class="hljs-string">&quot;comment&quot;</span>,<br>  <span class="hljs-string">&quot;magnet&quot;</span>,<br>  <span class="hljs-string">&quot;chevron-up&quot;</span>,<br>  <span class="hljs-string">&quot;chevron-down&quot;</span>,<br>  <span class="hljs-string">&quot;retweet&quot;</span>,<br>  <span class="hljs-string">&quot;shopping-cart&quot;</span>,<br>  <span class="hljs-string">&quot;folder&quot;</span>,<br>  <span class="hljs-string">&quot;folder-open&quot;</span>,<br>  <span class="hljs-string">&quot;arrows-v&quot;</span>,<br>  <span class="hljs-string">&quot;arrows-h&quot;</span>,<br>  <span class="hljs-string">&quot;bar-chart&quot;</span>,<br>  <span class="hljs-string">&quot;twitter-square&quot;</span>,<br>  <span class="hljs-string">&quot;facebook-square&quot;</span>,<br>  <span class="hljs-string">&quot;camera-retro&quot;</span>,<br>  <span class="hljs-string">&quot;key&quot;</span>,<br>  <span class="hljs-string">&quot;cogs&quot;</span>,<br>  <span class="hljs-string">&quot;comments&quot;</span>,<br>  <span class="hljs-string">&quot;thumbs-o-up&quot;</span>,<br>  <span class="hljs-string">&quot;thumbs-o-down&quot;</span>,<br>  <span class="hljs-string">&quot;star-half&quot;</span>,<br>  <span class="hljs-string">&quot;heart-o&quot;</span>,<br>  <span class="hljs-string">&quot;sign-out&quot;</span>,<br>  <span class="hljs-string">&quot;linkedin-square&quot;</span>,<br>  <span class="hljs-string">&quot;thumb-tack&quot;</span>,<br>  <span class="hljs-string">&quot;external-link&quot;</span>,<br>  <span class="hljs-string">&quot;sign-in&quot;</span>,<br>  <span class="hljs-string">&quot;trophy&quot;</span>,<br>  <span class="hljs-string">&quot;github-square&quot;</span>,<br>  <span class="hljs-string">&quot;upload&quot;</span>,<br>  <span class="hljs-string">&quot;lemon-o&quot;</span>,<br>  <span class="hljs-string">&quot;phone&quot;</span>,<br>  <span class="hljs-string">&quot;square-o&quot;</span>,<br>  <span class="hljs-string">&quot;bookmark-o&quot;</span>,<br>  <span class="hljs-string">&quot;phone-square&quot;</span>,<br>  <span class="hljs-string">&quot;twitter&quot;</span>,<br>  <span class="hljs-string">&quot;facebook&quot;</span>,<br>  <span class="hljs-string">&quot;github&quot;</span>,<br>  <span class="hljs-string">&quot;unlock&quot;</span>,<br>  <span class="hljs-string">&quot;credit-card&quot;</span>,<br>  <span class="hljs-string">&quot;rss&quot;</span>,<br>  <span class="hljs-string">&quot;hdd-o&quot;</span>,<br>  <span class="hljs-string">&quot;bullhorn&quot;</span>,<br>  <span class="hljs-string">&quot;bell&quot;</span>,<br>  <span class="hljs-string">&quot;certificate&quot;</span>,<br>  <span class="hljs-string">&quot;hand-o-right&quot;</span>,<br>  <span class="hljs-string">&quot;hand-o-left&quot;</span>,<br>  <span class="hljs-string">&quot;hand-o-up&quot;</span>,<br>  <span class="hljs-string">&quot;hand-o-down&quot;</span>,<br>  <span class="hljs-string">&quot;arrow-circle-left&quot;</span>,<br>  <span class="hljs-string">&quot;arrow-circle-right&quot;</span>,<br>  <span class="hljs-string">&quot;arrow-circle-up&quot;</span>,<br>  <span class="hljs-string">&quot;arrow-circle-down&quot;</span>,<br>  <span class="hljs-string">&quot;globe&quot;</span>,<br>  <span class="hljs-string">&quot;wrench&quot;</span>,<br>  <span class="hljs-string">&quot;tasks&quot;</span>,<br>  <span class="hljs-string">&quot;filter&quot;</span>,<br>  <span class="hljs-string">&quot;briefcase&quot;</span>,<br>  <span class="hljs-string">&quot;arrows-alt&quot;</span>,<br>  <span class="hljs-string">&quot;users&quot;</span>,<br>  <span class="hljs-string">&quot;link&quot;</span>,<br>  <span class="hljs-string">&quot;cloud&quot;</span>,<br>  <span class="hljs-string">&quot;flask&quot;</span>,<br>  <span class="hljs-string">&quot;scissors&quot;</span>,<br>  <span class="hljs-string">&quot;files-o&quot;</span>,<br>  <span class="hljs-string">&quot;paperclip&quot;</span>,<br>  <span class="hljs-string">&quot;floppy-o&quot;</span>,<br>  <span class="hljs-string">&quot;square&quot;</span>,<br>  <span class="hljs-string">&quot;bars&quot;</span>,<br>  <span class="hljs-string">&quot;list-ul&quot;</span>,<br>  <span class="hljs-string">&quot;list-ol&quot;</span>,<br>  <span class="hljs-string">&quot;strikethrough&quot;</span>,<br>  <span class="hljs-string">&quot;underline&quot;</span>,<br>  <span class="hljs-string">&quot;table&quot;</span>,<br>  <span class="hljs-string">&quot;magic&quot;</span>,<br>  <span class="hljs-string">&quot;truck&quot;</span>,<br>  <span class="hljs-string">&quot;pinterest&quot;</span>,<br>  <span class="hljs-string">&quot;pinterest-square&quot;</span>,<br>  <span class="hljs-string">&quot;google-plus-square&quot;</span>,<br>  <span class="hljs-string">&quot;google-plus&quot;</span>,<br>  <span class="hljs-string">&quot;money&quot;</span>,<br>  <span class="hljs-string">&quot;caret-down&quot;</span>,<br>  <span class="hljs-string">&quot;caret-up&quot;</span>,<br>  <span class="hljs-string">&quot;caret-left&quot;</span>,<br>  <span class="hljs-string">&quot;caret-right&quot;</span>,<br>  <span class="hljs-string">&quot;columns&quot;</span>,<br>  <span class="hljs-string">&quot;sort&quot;</span>,<br>  <span class="hljs-string">&quot;sort-desc&quot;</span>,<br>  <span class="hljs-string">&quot;sort-asc&quot;</span>,<br>  <span class="hljs-string">&quot;envelope&quot;</span>,<br>  <span class="hljs-string">&quot;linkedin&quot;</span>,<br>  <span class="hljs-string">&quot;undo&quot;</span>,<br>  <span class="hljs-string">&quot;gavel&quot;</span>,<br>  <span class="hljs-string">&quot;tachometer&quot;</span>,<br>  <span class="hljs-string">&quot;comment-o&quot;</span>,<br>  <span class="hljs-string">&quot;comments-o&quot;</span>,<br>  <span class="hljs-string">&quot;bolt&quot;</span>,<br>  <span class="hljs-string">&quot;sitemap&quot;</span>,<br>  <span class="hljs-string">&quot;umbrella&quot;</span>,<br>  <span class="hljs-string">&quot;clipboard&quot;</span>,<br>  <span class="hljs-string">&quot;lightbulb-o&quot;</span>,<br>  <span class="hljs-string">&quot;exchange&quot;</span>,<br>  <span class="hljs-string">&quot;cloud-download&quot;</span>,<br>  <span class="hljs-string">&quot;cloud-upload&quot;</span>,<br>  <span class="hljs-string">&quot;user-md&quot;</span>,<br>  <span class="hljs-string">&quot;stethoscope&quot;</span>,<br>  <span class="hljs-string">&quot;suitcase&quot;</span>,<br>  <span class="hljs-string">&quot;bell-o&quot;</span>,<br>  <span class="hljs-string">&quot;coffee&quot;</span>,<br>  <span class="hljs-string">&quot;cutlery&quot;</span>,<br>  <span class="hljs-string">&quot;file-text-o&quot;</span>,<br>  <span class="hljs-string">&quot;building-o&quot;</span>,<br>  <span class="hljs-string">&quot;hospital-o&quot;</span>,<br>  <span class="hljs-string">&quot;ambulance&quot;</span>,<br>  <span class="hljs-string">&quot;medkit&quot;</span>,<br>  <span class="hljs-string">&quot;fighter-jet&quot;</span>,<br>  <span class="hljs-string">&quot;beer&quot;</span>,<br>  <span class="hljs-string">&quot;h-square&quot;</span>,<br>  <span class="hljs-string">&quot;plus-square&quot;</span>,<br>  <span class="hljs-string">&quot;angle-double-left&quot;</span>,<br>  <span class="hljs-string">&quot;angle-double-right&quot;</span>,<br>  <span class="hljs-string">&quot;angle-double-up&quot;</span>,<br>  <span class="hljs-string">&quot;angle-double-down&quot;</span>,<br>  <span class="hljs-string">&quot;angle-left&quot;</span>,<br>  <span class="hljs-string">&quot;angle-right&quot;</span>,<br>  <span class="hljs-string">&quot;angle-up&quot;</span>,<br>  <span class="hljs-string">&quot;angle-down&quot;</span>,<br>  <span class="hljs-string">&quot;desktop&quot;</span>,<br>  <span class="hljs-string">&quot;laptop&quot;</span>,<br>  <span class="hljs-string">&quot;tablet&quot;</span>,<br>  <span class="hljs-string">&quot;mobile&quot;</span>,<br>  <span class="hljs-string">&quot;circle-o&quot;</span>,<br>  <span class="hljs-string">&quot;quote-left&quot;</span>,<br>  <span class="hljs-string">&quot;quote-right&quot;</span>,<br>  <span class="hljs-string">&quot;spinner&quot;</span>,<br>  <span class="hljs-string">&quot;circle&quot;</span>,<br>  <span class="hljs-string">&quot;reply&quot;</span>,<br>  <span class="hljs-string">&quot;github-alt&quot;</span>,<br>  <span class="hljs-string">&quot;folder-o&quot;</span>,<br>  <span class="hljs-string">&quot;folder-open-o&quot;</span>,<br>  <span class="hljs-string">&quot;smile-o&quot;</span>,<br>  <span class="hljs-string">&quot;frown-o&quot;</span>,<br>  <span class="hljs-string">&quot;meh-o&quot;</span>,<br>  <span class="hljs-string">&quot;gamepad&quot;</span>,<br>  <span class="hljs-string">&quot;keyboard-o&quot;</span>,<br>  <span class="hljs-string">&quot;flag-o&quot;</span>,<br>  <span class="hljs-string">&quot;flag-checkered&quot;</span>,<br>  <span class="hljs-string">&quot;terminal&quot;</span>,<br>  <span class="hljs-string">&quot;code&quot;</span>,<br>  <span class="hljs-string">&quot;reply-all&quot;</span>,<br>  <span class="hljs-string">&quot;star-half-o&quot;</span>,<br>  <span class="hljs-string">&quot;location-arrow&quot;</span>,<br>  <span class="hljs-string">&quot;crop&quot;</span>,<br>  <span class="hljs-string">&quot;code-fork&quot;</span>,<br>  <span class="hljs-string">&quot;chain-broken&quot;</span>,<br>  <span class="hljs-string">&quot;question&quot;</span>,<br>  <span class="hljs-string">&quot;info&quot;</span>,<br>  <span class="hljs-string">&quot;exclamation&quot;</span>,<br>  <span class="hljs-string">&quot;superscript&quot;</span>,<br>  <span class="hljs-string">&quot;subscript&quot;</span>,<br>  <span class="hljs-string">&quot;eraser&quot;</span>,<br>  <span class="hljs-string">&quot;puzzle-piece&quot;</span>,<br>  <span class="hljs-string">&quot;microphone&quot;</span>,<br>  <span class="hljs-string">&quot;microphone-slash&quot;</span>,<br>  <span class="hljs-string">&quot;shield&quot;</span>,<br>  <span class="hljs-string">&quot;calendar-o&quot;</span>,<br>  <span class="hljs-string">&quot;fire-extinguisher&quot;</span>,<br>  <span class="hljs-string">&quot;rocket&quot;</span>,<br>  <span class="hljs-string">&quot;maxcdn&quot;</span>,<br>  <span class="hljs-string">&quot;chevron-circle-left&quot;</span>,<br>  <span class="hljs-string">&quot;chevron-circle-right&quot;</span>,<br>  <span class="hljs-string">&quot;chevron-circle-up&quot;</span>,<br>  <span class="hljs-string">&quot;chevron-circle-down&quot;</span>,<br>  <span class="hljs-string">&quot;html5&quot;</span>,<br>  <span class="hljs-string">&quot;css3&quot;</span>,<br>  <span class="hljs-string">&quot;anchor&quot;</span>,<br>  <span class="hljs-string">&quot;unlock-alt&quot;</span>,<br>  <span class="hljs-string">&quot;bullseye&quot;</span>,<br>  <span class="hljs-string">&quot;ellipsis-h&quot;</span>,<br>  <span class="hljs-string">&quot;ellipsis-v&quot;</span>,<br>  <span class="hljs-string">&quot;rss-square&quot;</span>,<br>  <span class="hljs-string">&quot;play-circle&quot;</span>,<br>  <span class="hljs-string">&quot;ticket&quot;</span>,<br>  <span class="hljs-string">&quot;minus-square&quot;</span>,<br>  <span class="hljs-string">&quot;minus-square-o&quot;</span>,<br>  <span class="hljs-string">&quot;level-up&quot;</span>,<br>  <span class="hljs-string">&quot;level-down&quot;</span>,<br>  <span class="hljs-string">&quot;check-square&quot;</span>,<br>  <span class="hljs-string">&quot;pencil-square&quot;</span>,<br>  <span class="hljs-string">&quot;external-link-square&quot;</span>,<br>  <span class="hljs-string">&quot;share-square&quot;</span>,<br>  <span class="hljs-string">&quot;compass&quot;</span>,<br>  <span class="hljs-string">&quot;caret-square-o-down&quot;</span>,<br>  <span class="hljs-string">&quot;caret-square-o-up&quot;</span>,<br>  <span class="hljs-string">&quot;caret-square-o-right&quot;</span>,<br>  <span class="hljs-string">&quot;eur&quot;</span>,<br>  <span class="hljs-string">&quot;gbp&quot;</span>,<br>  <span class="hljs-string">&quot;usd&quot;</span>,<br>  <span class="hljs-string">&quot;inr&quot;</span>,<br>  <span class="hljs-string">&quot;jpy&quot;</span>,<br>  <span class="hljs-string">&quot;rub&quot;</span>,<br>  <span class="hljs-string">&quot;krw&quot;</span>,<br>  <span class="hljs-string">&quot;btc&quot;</span>,<br>  <span class="hljs-string">&quot;file&quot;</span>,<br>  <span class="hljs-string">&quot;file-text&quot;</span>,<br>  <span class="hljs-string">&quot;sort-alpha-asc&quot;</span>,<br>  <span class="hljs-string">&quot;sort-alpha-desc&quot;</span>,<br>  <span class="hljs-string">&quot;sort-amount-asc&quot;</span>,<br>  <span class="hljs-string">&quot;sort-amount-desc&quot;</span>,<br>  <span class="hljs-string">&quot;sort-numeric-asc&quot;</span>,<br>  <span class="hljs-string">&quot;sort-numeric-desc&quot;</span>,<br>  <span class="hljs-string">&quot;thumbs-up&quot;</span>,<br>  <span class="hljs-string">&quot;thumbs-down&quot;</span>,<br>  <span class="hljs-string">&quot;youtube-square&quot;</span>,<br>  <span class="hljs-string">&quot;youtube&quot;</span>,<br>  <span class="hljs-string">&quot;xing&quot;</span>,<br>  <span class="hljs-string">&quot;xing-square&quot;</span>,<br>  <span class="hljs-string">&quot;youtube-play&quot;</span>,<br>  <span class="hljs-string">&quot;dropbox&quot;</span>,<br>  <span class="hljs-string">&quot;stack-overflow&quot;</span>,<br>  <span class="hljs-string">&quot;instagram&quot;</span>,<br>  <span class="hljs-string">&quot;flickr&quot;</span>,<br>  <span class="hljs-string">&quot;adn&quot;</span>,<br>  <span class="hljs-string">&quot;bitbucket&quot;</span>,<br>  <span class="hljs-string">&quot;bitbucket-square&quot;</span>,<br>  <span class="hljs-string">&quot;tumblr&quot;</span>,<br>  <span class="hljs-string">&quot;tumblr-square&quot;</span>,<br>  <span class="hljs-string">&quot;long-arrow-down&quot;</span>,<br>  <span class="hljs-string">&quot;long-arrow-up&quot;</span>,<br>  <span class="hljs-string">&quot;long-arrow-left&quot;</span>,<br>  <span class="hljs-string">&quot;long-arrow-right&quot;</span>,<br>  <span class="hljs-string">&quot;apple&quot;</span>,<br>  <span class="hljs-string">&quot;windows&quot;</span>,<br>  <span class="hljs-string">&quot;android&quot;</span>,<br>  <span class="hljs-string">&quot;linux&quot;</span>,<br>  <span class="hljs-string">&quot;dribbble&quot;</span>,<br>  <span class="hljs-string">&quot;skype&quot;</span>,<br>  <span class="hljs-string">&quot;foursquare&quot;</span>,<br>  <span class="hljs-string">&quot;trello&quot;</span>,<br>  <span class="hljs-string">&quot;female&quot;</span>,<br>  <span class="hljs-string">&quot;male&quot;</span>,<br>  <span class="hljs-string">&quot;gratipay&quot;</span>,<br>  <span class="hljs-string">&quot;sun-o&quot;</span>,<br>  <span class="hljs-string">&quot;moon-o&quot;</span>,<br>  <span class="hljs-string">&quot;archive&quot;</span>,<br>  <span class="hljs-string">&quot;bug&quot;</span>,<br>  <span class="hljs-string">&quot;vk&quot;</span>,<br>  <span class="hljs-string">&quot;weibo&quot;</span>,<br>  <span class="hljs-string">&quot;renren&quot;</span>,<br>  <span class="hljs-string">&quot;pagelines&quot;</span>,<br>  <span class="hljs-string">&quot;stack-exchange&quot;</span>,<br>  <span class="hljs-string">&quot;arrow-circle-o-right&quot;</span>,<br>  <span class="hljs-string">&quot;arrow-circle-o-left&quot;</span>,<br>  <span class="hljs-string">&quot;caret-square-o-left&quot;</span>,<br>  <span class="hljs-string">&quot;dot-circle-o&quot;</span>,<br>  <span class="hljs-string">&quot;wheelchair&quot;</span>,<br>  <span class="hljs-string">&quot;vimeo-square&quot;</span>,<br>  <span class="hljs-string">&quot;try&quot;</span>,<br>  <span class="hljs-string">&quot;plus-square-o&quot;</span>,<br>  <span class="hljs-string">&quot;space-shuttle&quot;</span>,<br>  <span class="hljs-string">&quot;slack&quot;</span>,<br>  <span class="hljs-string">&quot;envelope-square&quot;</span>,<br>  <span class="hljs-string">&quot;wordpress&quot;</span>,<br>  <span class="hljs-string">&quot;openid&quot;</span>,<br>  <span class="hljs-string">&quot;university&quot;</span>,<br>  <span class="hljs-string">&quot;graduation-cap&quot;</span>,<br>  <span class="hljs-string">&quot;yahoo&quot;</span>,<br>  <span class="hljs-string">&quot;google&quot;</span>,<br>  <span class="hljs-string">&quot;reddit&quot;</span>,<br>  <span class="hljs-string">&quot;reddit-square&quot;</span>,<br>  <span class="hljs-string">&quot;stumbleupon-circle&quot;</span>,<br>  <span class="hljs-string">&quot;stumbleupon&quot;</span>,<br>  <span class="hljs-string">&quot;delicious&quot;</span>,<br>  <span class="hljs-string">&quot;digg&quot;</span>,<br>  <span class="hljs-string">&quot;pied-piper-pp&quot;</span>,<br>  <span class="hljs-string">&quot;pied-piper-alt&quot;</span>,<br>  <span class="hljs-string">&quot;drupal&quot;</span>,<br>  <span class="hljs-string">&quot;joomla&quot;</span>,<br>  <span class="hljs-string">&quot;language&quot;</span>,<br>  <span class="hljs-string">&quot;fax&quot;</span>,<br>  <span class="hljs-string">&quot;building&quot;</span>,<br>  <span class="hljs-string">&quot;child&quot;</span>,<br>  <span class="hljs-string">&quot;paw&quot;</span>,<br>  <span class="hljs-string">&quot;spoon&quot;</span>,<br>  <span class="hljs-string">&quot;cube&quot;</span>,<br>  <span class="hljs-string">&quot;cubes&quot;</span>,<br>  <span class="hljs-string">&quot;behance&quot;</span>,<br>  <span class="hljs-string">&quot;behance-square&quot;</span>,<br>  <span class="hljs-string">&quot;steam&quot;</span>,<br>  <span class="hljs-string">&quot;steam-square&quot;</span>,<br>  <span class="hljs-string">&quot;recycle&quot;</span>,<br>  <span class="hljs-string">&quot;car&quot;</span>,<br>  <span class="hljs-string">&quot;taxi&quot;</span>,<br>  <span class="hljs-string">&quot;tree&quot;</span>,<br>  <span class="hljs-string">&quot;spotify&quot;</span>,<br>  <span class="hljs-string">&quot;deviantart&quot;</span>,<br>  <span class="hljs-string">&quot;soundcloud&quot;</span>,<br>  <span class="hljs-string">&quot;database&quot;</span>,<br>  <span class="hljs-string">&quot;file-pdf-o&quot;</span>,<br>  <span class="hljs-string">&quot;file-word-o&quot;</span>,<br>  <span class="hljs-string">&quot;file-excel-o&quot;</span>,<br>  <span class="hljs-string">&quot;file-powerpoint-o&quot;</span>,<br>  <span class="hljs-string">&quot;file-image-o&quot;</span>,<br>  <span class="hljs-string">&quot;file-archive-o&quot;</span>,<br>  <span class="hljs-string">&quot;file-audio-o&quot;</span>,<br>  <span class="hljs-string">&quot;file-video-o&quot;</span>,<br>  <span class="hljs-string">&quot;file-code-o&quot;</span>,<br>  <span class="hljs-string">&quot;vine&quot;</span>,<br>  <span class="hljs-string">&quot;codepen&quot;</span>,<br>  <span class="hljs-string">&quot;jsfiddle&quot;</span>,<br>  <span class="hljs-string">&quot;life-ring&quot;</span>,<br>  <span class="hljs-string">&quot;circle-o-notch&quot;</span>,<br>  <span class="hljs-string">&quot;rebel&quot;</span>,<br>  <span class="hljs-string">&quot;empire&quot;</span>,<br>  <span class="hljs-string">&quot;git-square&quot;</span>,<br>  <span class="hljs-string">&quot;git&quot;</span>,<br>  <span class="hljs-string">&quot;hacker-news&quot;</span>,<br>  <span class="hljs-string">&quot;tencent-weibo&quot;</span>,<br>  <span class="hljs-string">&quot;qq&quot;</span>,<br>  <span class="hljs-string">&quot;weixin&quot;</span>,<br>  <span class="hljs-string">&quot;paper-plane&quot;</span>,<br>  <span class="hljs-string">&quot;paper-plane-o&quot;</span>,<br>  <span class="hljs-string">&quot;history&quot;</span>,<br>  <span class="hljs-string">&quot;circle-thin&quot;</span>,<br>  <span class="hljs-string">&quot;header&quot;</span>,<br>  <span class="hljs-string">&quot;paragraph&quot;</span>,<br>  <span class="hljs-string">&quot;sliders&quot;</span>,<br>  <span class="hljs-string">&quot;share-alt&quot;</span>,<br>  <span class="hljs-string">&quot;share-alt-square&quot;</span>,<br>  <span class="hljs-string">&quot;bomb&quot;</span>,<br>  <span class="hljs-string">&quot;futbol-o&quot;</span>,<br>  <span class="hljs-string">&quot;tty&quot;</span>,<br>  <span class="hljs-string">&quot;binoculars&quot;</span>,<br>  <span class="hljs-string">&quot;plug&quot;</span>,<br>  <span class="hljs-string">&quot;slideshare&quot;</span>,<br>  <span class="hljs-string">&quot;twitch&quot;</span>,<br>  <span class="hljs-string">&quot;yelp&quot;</span>,<br>  <span class="hljs-string">&quot;newspaper-o&quot;</span>,<br>  <span class="hljs-string">&quot;wifi&quot;</span>,<br>  <span class="hljs-string">&quot;calculator&quot;</span>,<br>  <span class="hljs-string">&quot;paypal&quot;</span>,<br>  <span class="hljs-string">&quot;google-wallet&quot;</span>,<br>  <span class="hljs-string">&quot;cc-visa&quot;</span>,<br>  <span class="hljs-string">&quot;cc-mastercard&quot;</span>,<br>  <span class="hljs-string">&quot;cc-discover&quot;</span>,<br>  <span class="hljs-string">&quot;cc-amex&quot;</span>,<br>  <span class="hljs-string">&quot;cc-paypal&quot;</span>,<br>  <span class="hljs-string">&quot;cc-stripe&quot;</span>,<br>  <span class="hljs-string">&quot;bell-slash&quot;</span>,<br>  <span class="hljs-string">&quot;bell-slash-o&quot;</span>,<br>  <span class="hljs-string">&quot;trash&quot;</span>,<br>  <span class="hljs-string">&quot;copyright&quot;</span>,<br>  <span class="hljs-string">&quot;at&quot;</span>,<br>  <span class="hljs-string">&quot;eyedropper&quot;</span>,<br>  <span class="hljs-string">&quot;paint-brush&quot;</span>,<br>  <span class="hljs-string">&quot;birthday-cake&quot;</span>,<br>  <span class="hljs-string">&quot;area-chart&quot;</span>,<br>  <span class="hljs-string">&quot;pie-chart&quot;</span>,<br>  <span class="hljs-string">&quot;line-chart&quot;</span>,<br>  <span class="hljs-string">&quot;lastfm&quot;</span>,<br>  <span class="hljs-string">&quot;lastfm-square&quot;</span>,<br>  <span class="hljs-string">&quot;toggle-off&quot;</span>,<br>  <span class="hljs-string">&quot;toggle-on&quot;</span>,<br>  <span class="hljs-string">&quot;bicycle&quot;</span>,<br>  <span class="hljs-string">&quot;bus&quot;</span>,<br>  <span class="hljs-string">&quot;ioxhost&quot;</span>,<br>  <span class="hljs-string">&quot;angellist&quot;</span>,<br>  <span class="hljs-string">&quot;cc&quot;</span>,<br>  <span class="hljs-string">&quot;ils&quot;</span>,<br>  <span class="hljs-string">&quot;meanpath&quot;</span>,<br>  <span class="hljs-string">&quot;buysellads&quot;</span>,<br>  <span class="hljs-string">&quot;connectdevelop&quot;</span>,<br>  <span class="hljs-string">&quot;dashcube&quot;</span>,<br>  <span class="hljs-string">&quot;forumbee&quot;</span>,<br>  <span class="hljs-string">&quot;leanpub&quot;</span>,<br>  <span class="hljs-string">&quot;sellsy&quot;</span>,<br>  <span class="hljs-string">&quot;shirtsinbulk&quot;</span>,<br>  <span class="hljs-string">&quot;simplybuilt&quot;</span>,<br>  <span class="hljs-string">&quot;skyatlas&quot;</span>,<br>  <span class="hljs-string">&quot;cart-plus&quot;</span>,<br>  <span class="hljs-string">&quot;cart-arrow-down&quot;</span>,<br>  <span class="hljs-string">&quot;diamond&quot;</span>,<br>  <span class="hljs-string">&quot;ship&quot;</span>,<br>  <span class="hljs-string">&quot;user-secret&quot;</span>,<br>  <span class="hljs-string">&quot;motorcycle&quot;</span>,<br>  <span class="hljs-string">&quot;street-view&quot;</span>,<br>  <span class="hljs-string">&quot;heartbeat&quot;</span>,<br>  <span class="hljs-string">&quot;venus&quot;</span>,<br>  <span class="hljs-string">&quot;mars&quot;</span>,<br>  <span class="hljs-string">&quot;mercury&quot;</span>,<br>  <span class="hljs-string">&quot;transgender&quot;</span>,<br>  <span class="hljs-string">&quot;transgender-alt&quot;</span>,<br>  <span class="hljs-string">&quot;venus-double&quot;</span>,<br>  <span class="hljs-string">&quot;mars-double&quot;</span>,<br>  <span class="hljs-string">&quot;venus-mars&quot;</span>,<br>  <span class="hljs-string">&quot;mars-stroke&quot;</span>,<br>  <span class="hljs-string">&quot;mars-stroke-v&quot;</span>,<br>  <span class="hljs-string">&quot;mars-stroke-h&quot;</span>,<br>  <span class="hljs-string">&quot;neuter&quot;</span>,<br>  <span class="hljs-string">&quot;genderless&quot;</span>,<br>  <span class="hljs-string">&quot;facebook-official&quot;</span>,<br>  <span class="hljs-string">&quot;pinterest-p&quot;</span>,<br>  <span class="hljs-string">&quot;whatsapp&quot;</span>,<br>  <span class="hljs-string">&quot;server&quot;</span>,<br>  <span class="hljs-string">&quot;user-plus&quot;</span>,<br>  <span class="hljs-string">&quot;user-times&quot;</span>,<br>  <span class="hljs-string">&quot;bed&quot;</span>,<br>  <span class="hljs-string">&quot;viacoin&quot;</span>,<br>  <span class="hljs-string">&quot;train&quot;</span>,<br>  <span class="hljs-string">&quot;subway&quot;</span>,<br>  <span class="hljs-string">&quot;medium&quot;</span>,<br>  <span class="hljs-string">&quot;y-combinator&quot;</span>,<br>  <span class="hljs-string">&quot;optin-monster&quot;</span>,<br>  <span class="hljs-string">&quot;opencart&quot;</span>,<br>  <span class="hljs-string">&quot;expeditedssl&quot;</span>,<br>  <span class="hljs-string">&quot;battery-full&quot;</span>,<br>  <span class="hljs-string">&quot;battery-three-quarters&quot;</span>,<br>  <span class="hljs-string">&quot;battery-half&quot;</span>,<br>  <span class="hljs-string">&quot;battery-quarter&quot;</span>,<br>  <span class="hljs-string">&quot;battery-empty&quot;</span>,<br>  <span class="hljs-string">&quot;mouse-pointer&quot;</span>,<br>  <span class="hljs-string">&quot;i-cursor&quot;</span>,<br>  <span class="hljs-string">&quot;object-group&quot;</span>,<br>  <span class="hljs-string">&quot;object-ungroup&quot;</span>,<br>  <span class="hljs-string">&quot;sticky-note&quot;</span>,<br>  <span class="hljs-string">&quot;sticky-note-o&quot;</span>,<br>  <span class="hljs-string">&quot;cc-jcb&quot;</span>,<br>  <span class="hljs-string">&quot;cc-diners-club&quot;</span>,<br>  <span class="hljs-string">&quot;clone&quot;</span>,<br>  <span class="hljs-string">&quot;balance-scale&quot;</span>,<br>  <span class="hljs-string">&quot;hourglass-o&quot;</span>,<br>  <span class="hljs-string">&quot;hourglass-start&quot;</span>,<br>  <span class="hljs-string">&quot;hourglass-half&quot;</span>,<br>  <span class="hljs-string">&quot;hourglass-end&quot;</span>,<br>  <span class="hljs-string">&quot;hourglass&quot;</span>,<br>  <span class="hljs-string">&quot;hand-rock-o&quot;</span>,<br>  <span class="hljs-string">&quot;hand-paper-o&quot;</span>,<br>  <span class="hljs-string">&quot;hand-scissors-o&quot;</span>,<br>  <span class="hljs-string">&quot;hand-lizard-o&quot;</span>,<br>  <span class="hljs-string">&quot;hand-spock-o&quot;</span>,<br>  <span class="hljs-string">&quot;hand-pointer-o&quot;</span>,<br>  <span class="hljs-string">&quot;hand-peace-o&quot;</span>,<br>  <span class="hljs-string">&quot;trademark&quot;</span>,<br>  <span class="hljs-string">&quot;registered&quot;</span>,<br>  <span class="hljs-string">&quot;creative-commons&quot;</span>,<br>  <span class="hljs-string">&quot;gg&quot;</span>,<br>  <span class="hljs-string">&quot;gg-circle&quot;</span>,<br>  <span class="hljs-string">&quot;tripadvisor&quot;</span>,<br>  <span class="hljs-string">&quot;odnoklassniki&quot;</span>,<br>  <span class="hljs-string">&quot;odnoklassniki-square&quot;</span>,<br>  <span class="hljs-string">&quot;get-pocket&quot;</span>,<br>  <span class="hljs-string">&quot;wikipedia-w&quot;</span>,<br>  <span class="hljs-string">&quot;safari&quot;</span>,<br>  <span class="hljs-string">&quot;chrome&quot;</span>,<br>  <span class="hljs-string">&quot;firefox&quot;</span>,<br>  <span class="hljs-string">&quot;opera&quot;</span>,<br>  <span class="hljs-string">&quot;internet-explorer&quot;</span>,<br>  <span class="hljs-string">&quot;television&quot;</span>,<br>  <span class="hljs-string">&quot;contao&quot;</span>,<br>  <span class="hljs-string">&quot;500px&quot;</span>,<br>  <span class="hljs-string">&quot;amazon&quot;</span>,<br>  <span class="hljs-string">&quot;calendar-plus-o&quot;</span>,<br>  <span class="hljs-string">&quot;calendar-minus-o&quot;</span>,<br>  <span class="hljs-string">&quot;calendar-times-o&quot;</span>,<br>  <span class="hljs-string">&quot;calendar-check-o&quot;</span>,<br>  <span class="hljs-string">&quot;industry&quot;</span>,<br>  <span class="hljs-string">&quot;map-pin&quot;</span>,<br>  <span class="hljs-string">&quot;map-signs&quot;</span>,<br>  <span class="hljs-string">&quot;map-o&quot;</span>,<br>  <span class="hljs-string">&quot;map&quot;</span>,<br>  <span class="hljs-string">&quot;commenting&quot;</span>,<br>  <span class="hljs-string">&quot;commenting-o&quot;</span>,<br>  <span class="hljs-string">&quot;houzz&quot;</span>,<br>  <span class="hljs-string">&quot;vimeo&quot;</span>,<br>  <span class="hljs-string">&quot;black-tie&quot;</span>,<br>  <span class="hljs-string">&quot;fonticons&quot;</span>,<br>  <span class="hljs-string">&quot;reddit-alien&quot;</span>,<br>  <span class="hljs-string">&quot;edge&quot;</span>,<br>  <span class="hljs-string">&quot;credit-card-alt&quot;</span>,<br>  <span class="hljs-string">&quot;codiepie&quot;</span>,<br>  <span class="hljs-string">&quot;modx&quot;</span>,<br>  <span class="hljs-string">&quot;fort-awesome&quot;</span>,<br>  <span class="hljs-string">&quot;usb&quot;</span>,<br>  <span class="hljs-string">&quot;product-hunt&quot;</span>,<br>  <span class="hljs-string">&quot;mixcloud&quot;</span>,<br>  <span class="hljs-string">&quot;scribd&quot;</span>,<br>  <span class="hljs-string">&quot;pause-circle&quot;</span>,<br>  <span class="hljs-string">&quot;pause-circle-o&quot;</span>,<br>  <span class="hljs-string">&quot;stop-circle&quot;</span>,<br>  <span class="hljs-string">&quot;stop-circle-o&quot;</span>,<br>  <span class="hljs-string">&quot;shopping-bag&quot;</span>,<br>  <span class="hljs-string">&quot;shopping-basket&quot;</span>,<br>  <span class="hljs-string">&quot;hashtag&quot;</span>,<br>  <span class="hljs-string">&quot;bluetooth&quot;</span>,<br>  <span class="hljs-string">&quot;bluetooth-b&quot;</span>,<br>  <span class="hljs-string">&quot;percent&quot;</span>,<br>  <span class="hljs-string">&quot;gitlab&quot;</span>,<br>  <span class="hljs-string">&quot;wpbeginner&quot;</span>,<br>  <span class="hljs-string">&quot;wpforms&quot;</span>,<br>  <span class="hljs-string">&quot;envira&quot;</span>,<br>  <span class="hljs-string">&quot;universal-access&quot;</span>,<br>  <span class="hljs-string">&quot;wheelchair-alt&quot;</span>,<br>  <span class="hljs-string">&quot;question-circle-o&quot;</span>,<br>  <span class="hljs-string">&quot;blind&quot;</span>,<br>  <span class="hljs-string">&quot;audio-description&quot;</span>,<br>  <span class="hljs-string">&quot;volume-control-phone&quot;</span>,<br>  <span class="hljs-string">&quot;braille&quot;</span>,<br>  <span class="hljs-string">&quot;assistive-listening-systems&quot;</span>,<br>  <span class="hljs-string">&quot;american-sign-language-interpreting&quot;</span>,<br>  <span class="hljs-string">&quot;deaf&quot;</span>,<br>  <span class="hljs-string">&quot;glide&quot;</span>,<br>  <span class="hljs-string">&quot;glide-g&quot;</span>,<br>  <span class="hljs-string">&quot;sign-language&quot;</span>,<br>  <span class="hljs-string">&quot;low-vision&quot;</span>,<br>  <span class="hljs-string">&quot;viadeo&quot;</span>,<br>  <span class="hljs-string">&quot;viadeo-square&quot;</span>,<br>  <span class="hljs-string">&quot;snapchat&quot;</span>,<br>  <span class="hljs-string">&quot;snapchat-ghost&quot;</span>,<br>  <span class="hljs-string">&quot;snapchat-square&quot;</span>,<br>  <span class="hljs-string">&quot;pied-piper&quot;</span>,<br>  <span class="hljs-string">&quot;first-order&quot;</span>,<br>  <span class="hljs-string">&quot;yoast&quot;</span>,<br>  <span class="hljs-string">&quot;themeisle&quot;</span>,<br>  <span class="hljs-string">&quot;google-plus-official&quot;</span>,<br>  <span class="hljs-string">&quot;font-awesome&quot;</span>,<br>  <span class="hljs-string">&quot;handshake-o&quot;</span>,<br>  <span class="hljs-string">&quot;envelope-open&quot;</span>,<br>  <span class="hljs-string">&quot;envelope-open-o&quot;</span>,<br>  <span class="hljs-string">&quot;linode&quot;</span>,<br>  <span class="hljs-string">&quot;address-book&quot;</span>,<br>  <span class="hljs-string">&quot;address-book-o&quot;</span>,<br>  <span class="hljs-string">&quot;address-card&quot;</span>,<br>  <span class="hljs-string">&quot;address-card-o&quot;</span>,<br>  <span class="hljs-string">&quot;user-circle&quot;</span>,<br>  <span class="hljs-string">&quot;user-circle-o&quot;</span>,<br>  <span class="hljs-string">&quot;user-o&quot;</span>,<br>  <span class="hljs-string">&quot;id-badge&quot;</span>,<br>  <span class="hljs-string">&quot;id-card&quot;</span>,<br>  <span class="hljs-string">&quot;id-card-o&quot;</span>,<br>  <span class="hljs-string">&quot;quora&quot;</span>,<br>  <span class="hljs-string">&quot;free-code-camp&quot;</span>,<br>  <span class="hljs-string">&quot;telegram&quot;</span>,<br>  <span class="hljs-string">&quot;thermometer-full&quot;</span>,<br>  <span class="hljs-string">&quot;thermometer-three-quarters&quot;</span>,<br>  <span class="hljs-string">&quot;thermometer-half&quot;</span>,<br>  <span class="hljs-string">&quot;thermometer-quarter&quot;</span>,<br>  <span class="hljs-string">&quot;thermometer-empty&quot;</span>,<br>  <span class="hljs-string">&quot;shower&quot;</span>,<br>  <span class="hljs-string">&quot;bath&quot;</span>,<br>  <span class="hljs-string">&quot;podcast&quot;</span>,<br>  <span class="hljs-string">&quot;window-maximize&quot;</span>,<br>  <span class="hljs-string">&quot;window-minimize&quot;</span>,<br>  <span class="hljs-string">&quot;window-restore&quot;</span>,<br>  <span class="hljs-string">&quot;window-close&quot;</span>,<br>  <span class="hljs-string">&quot;window-close-o&quot;</span>,<br>  <span class="hljs-string">&quot;bandcamp&quot;</span>,<br>  <span class="hljs-string">&quot;grav&quot;</span>,<br>  <span class="hljs-string">&quot;etsy&quot;</span>,<br>  <span class="hljs-string">&quot;imdb&quot;</span>,<br>  <span class="hljs-string">&quot;ravelry&quot;</span>,<br>  <span class="hljs-string">&quot;eercast&quot;</span>,<br>  <span class="hljs-string">&quot;microchip&quot;</span>,<br>  <span class="hljs-string">&quot;snowflake-o&quot;</span>,<br>  <span class="hljs-string">&quot;superpowers&quot;</span>,<br>  <span class="hljs-string">&quot;wpexplorer&quot;</span>,<br>  <span class="hljs-string">&quot;meetup&quot;</span>,<br>];<br></code></pre></td></tr></table></figure><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">RocIconSelect</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;icon&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">RocIconSelect</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/RocIconSelect/RocIconSelect.vue&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; ref, watchEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> icon = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;user&quot;</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(icon.<span class="hljs-property">value</span>, <span class="hljs-string">&quot;选择的图标&quot;</span>);</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】光线投射点击物体</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E5%85%89%E7%BA%BF%E6%8A%95%E5%B0%84%E7%82%B9%E5%87%BB%E7%89%A9%E4%BD%93/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E5%85%89%E7%BA%BF%E6%8A%95%E5%B0%84%E7%82%B9%E5%87%BB%E7%89%A9%E4%BD%93/</url>
    
    <content type="html"><![CDATA[<h1 id="光线投射"><a href="#光线投射" class="headerlink" title="光线投射"></a>光线投射</h1><p>光线投射用于进行鼠标拾取, 在三维空间中计算出鼠标移过了什么物体</p><p>文档: <a href="https://threejs.rocyuan.top/docs/?q=ray#api/zh/core/Raycaster">https://threejs.rocyuan.top/docs/?q=ray#api/zh/core/Raycaster</a></p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><p>完成一个示例, 三个立方体都为绿色, 点击哪个立方体, 就将其变为红色, 再次点击, 同样的逻辑, 将其他立方体变为绿色</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;threeContainer&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;three-container&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">OrbitControls</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three/examples/jsm/controls/OrbitControls.js&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> threeContainer = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">init3D</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientWidth</span> / threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);</span><br><span class="language-javascript">    camera.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> = <span class="hljs-number">5</span>;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>(&#123; <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> &#125;);</span><br><span class="language-javascript">    renderer.<span class="hljs-title function_">setSize</span>(threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientWidth</span>, threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>);</span><br><span class="language-javascript">    threeContainer.<span class="hljs-property">value</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, renderer.<span class="hljs-property">domElement</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">createCube</span>(<span class="hljs-params">width = <span class="hljs-number">1</span>, height = <span class="hljs-number">1</span>, depth = <span class="hljs-number">1</span></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BoxGeometry</span>(width, height, depth);</span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshBasicMaterial</span>(&#123; <span class="hljs-attr">color</span>: <span class="hljs-number">0x00ff00</span> &#125;);</span><br><span class="language-javascript">      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, material);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> cube1 = <span class="hljs-title function_">createCube</span>();</span><br><span class="language-javascript">    cube1.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> = -<span class="hljs-number">2</span>;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> cube2 = <span class="hljs-title function_">createCube</span>();</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> cube3 = <span class="hljs-title function_">createCube</span>();</span><br><span class="language-javascript">    cube3.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> = <span class="hljs-number">2</span>;</span><br><span class="language-javascript">    scene.<span class="hljs-title function_">add</span>(cube1, cube2, cube3);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">cubeAllGreen</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      cube1.<span class="hljs-property">material</span>.<span class="hljs-property">color</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0x00ff00</span>);</span><br><span class="language-javascript">      cube2.<span class="hljs-property">material</span>.<span class="hljs-property">color</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0x00ff00</span>);</span><br><span class="language-javascript">      cube3.<span class="hljs-property">material</span>.<span class="hljs-property">color</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0x00ff00</span>);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 1. 创建光线投射</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> raycaster = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Raycaster</span>();</span><br><span class="language-javascript">    <span class="hljs-comment">// 2. 创建二维向量存储鼠标位置</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> mouse = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector2</span>();</span><br><span class="language-javascript"></span><br><span class="language-javascript">    threeContainer.<span class="hljs-property">value</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;mousedown&quot;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-comment">// 3. 将鼠标点击 canvas 的像素坐标转换为三维场景中的 x y 二维坐标 取值范围是 -1 到 1</span></span><br><span class="language-javascript">      mouse.<span class="hljs-property">x</span> = (event.<span class="hljs-property">clientX</span> / threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientWidth</span>) * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>;</span><br><span class="language-javascript">      mouse.<span class="hljs-property">y</span> = -(event.<span class="hljs-property">clientY</span> / threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>) * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>;</span><br><span class="language-javascript">      <span class="hljs-comment">// 4. 通过鼠标位置和摄像机更新射线</span></span><br><span class="language-javascript">      raycaster.<span class="hljs-title function_">setFromCamera</span>(mouse, camera);</span><br><span class="language-javascript">      <span class="hljs-comment">// 5. 通过射线和场景中的所有物体进行相交检测</span></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> intersects = raycaster.<span class="hljs-title function_">intersectObjects</span>(scene.<span class="hljs-property">children</span>);</span><br><span class="language-javascript">      <span class="hljs-comment">// 6. 如果有交点，输出第一个交点的对象（从相机发射出一条射线，会穿过多个物体，所以会返回多个交点，第一个交点就是鼠标点击距离相机最近的物体）</span></span><br><span class="language-javascript">      <span class="hljs-title function_">cubeAllGreen</span>();</span><br><span class="language-javascript">      <span class="hljs-keyword">if</span> (intersects.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> currentClickMesh = intersects[<span class="hljs-number">0</span>].<span class="hljs-property">object</span>;</span><br><span class="language-javascript">        currentClickMesh.<span class="hljs-property">material</span>.<span class="hljs-property">color</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0xff0000</span>);</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">requestAnimationFrame</span>(animate);</span><br><span class="language-javascript">      renderer.<span class="hljs-title function_">render</span>(scene, camera);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-title function_">animate</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">init3D</span>();</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.three-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vh</span> - <span class="hljs-number">20px</span>);</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h1><p><img src="/../../assets/web3d/ray-1.gif" alt="射线点击物体"></p>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】log4js日志</title>
    <link href="/node/%E3%80%90node%E3%80%91log4js%E6%97%A5%E5%BF%97/"/>
    <url>/node/%E3%80%90node%E3%80%91log4js%E6%97%A5%E5%BF%97/</url>
    
    <content type="html"><![CDATA[<h2 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h2><p>更多详细参数查看官方文档: <a href="https://log4js-node.github.io/log4js-node/">https://log4js-node.github.io/log4js-node/</a></p><h2 id="日志级别"><a href="#日志级别" class="headerlink" title="日志级别"></a>日志级别</h2><table><thead><tr><th>级别</th><th>含义</th><th>适用场景</th></tr></thead><tbody><tr><td>TRACE</td><td>追踪详细的运行信息</td><td>开发环境，调试代码</td></tr><tr><td>DEBUG</td><td>调试信息</td><td>开发环境，测试环境</td></tr><tr><td>INFO</td><td>状态信息或重要事件</td><td>生产环境，监控程序运行状态</td></tr><tr><td>WARN</td><td>警告信息，潜在问题</td><td>生产环境，提醒潜在问题</td></tr><tr><td>ERROR</td><td>错误信息，程序仍可运行</td><td>生产环境，记录需要关注的错误</td></tr><tr><td>FATAL</td><td>致命错误，程序可能无法运行</td><td>生产环境，记录致命错误</td></tr><tr><td>MARK</td><td>标记或特殊事件</td><td>根据需求使用</td></tr></tbody></table><h2 id="常用配置代码"><a href="#常用配置代码" class="headerlink" title="常用配置代码"></a>常用配置代码</h2><p>@&#x2F;utils&#x2F;logger.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;node:path&quot;</span>;<br><span class="hljs-keyword">import</span> log4js <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;log4js&quot;</span>;<br><br>log4js.<span class="hljs-title function_">configure</span>(&#123;<br>  <span class="hljs-attr">appenders</span>: &#123;<br>    <span class="hljs-comment">// 标准输出流</span><br>    <span class="hljs-attr">out</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;stdout&quot;</span> &#125;,<br>    <span class="hljs-comment">// 日期文件输出</span><br>    <span class="hljs-attr">dateFile</span>: &#123;<br>      <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;dateFile&quot;</span>,<br>      <span class="hljs-attr">filename</span>: path.<span class="hljs-title function_">resolve</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">dirname</span>, <span class="hljs-string">&quot;../&quot;</span>, <span class="hljs-string">&quot;logs&quot;</span>, <span class="hljs-string">&quot;dateFile&quot;</span>, <span class="hljs-string">&quot;log-name.log&quot;</span>),<br>      <span class="hljs-attr">pattern</span>: <span class="hljs-string">&quot;yyyy-MM-dd_hh-mm-ss&quot;</span>,<br>      <span class="hljs-attr">alwaysIncludePattern</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">fileNameSep</span>: <span class="hljs-string">&quot;.&quot;</span>,<br>      <span class="hljs-attr">keepFileExt</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">encoding</span>: <span class="hljs-string">&quot;utf-8&quot;</span>,<br>      <span class="hljs-attr">maxLogSize</span>: <span class="hljs-string">&quot;10M&quot;</span>,<br>      <span class="hljs-attr">numBackups</span>: <span class="hljs-number">5</span>,<br>      <span class="hljs-attr">mode</span>: <span class="hljs-number">0o666</span>,<br>      <span class="hljs-attr">layout</span>: &#123;<br>        <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;basic&quot;</span>,<br>      &#125;,<br>    &#125;,<br>    <span class="hljs-comment">// 文件输出</span><br>    <span class="hljs-attr">file</span>: &#123;<br>      <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;file&quot;</span>,<br>      <span class="hljs-attr">filename</span>: path.<span class="hljs-title function_">resolve</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">dirname</span>, <span class="hljs-string">&quot;../&quot;</span>, <span class="hljs-string">&quot;logs&quot;</span>, <span class="hljs-string">&quot;file&quot;</span>, <span class="hljs-string">&quot;log-name.log&quot;</span>),<br>      <span class="hljs-attr">maxLogSize</span>: <span class="hljs-string">&quot;10M&quot;</span>,<br>      <span class="hljs-attr">backups</span>: <span class="hljs-number">5</span>,<br>      <span class="hljs-attr">encoding</span>: <span class="hljs-string">&quot;utf-8&quot;</span>,<br>      <span class="hljs-attr">mode</span>: <span class="hljs-number">0o666</span>,<br>      <span class="hljs-attr">keepFileExt</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">layout</span>: &#123;<br>        <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;basic&quot;</span>,<br>      &#125;,<br>    &#125;,<br>    <span class="hljs-comment">// 文件输出（同步）</span><br>    <span class="hljs-attr">fileSync</span>: &#123;<br>      <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;fileSync&quot;</span>,<br>      <span class="hljs-attr">filename</span>: path.<span class="hljs-title function_">resolve</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">dirname</span>, <span class="hljs-string">&quot;../&quot;</span>, <span class="hljs-string">&quot;logs&quot;</span>, <span class="hljs-string">&quot;fileSync&quot;</span>, <span class="hljs-string">&quot;log-name.log&quot;</span>),<br>      <span class="hljs-attr">maxLogSize</span>: <span class="hljs-string">&quot;10M&quot;</span>,<br>      <span class="hljs-attr">backups</span>: <span class="hljs-number">5</span>,<br>      <span class="hljs-attr">encoding</span>: <span class="hljs-string">&quot;utf-8&quot;</span>,<br>      <span class="hljs-attr">mode</span>: <span class="hljs-number">0o666</span>,<br>      <span class="hljs-attr">keepFileExt</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">layout</span>: &#123;<br>        <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;basic&quot;</span>,<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>  <span class="hljs-comment">// 日志等级 level 值，等级由低到高，假设日志等级为 info，那么小于 info 的日志不会输出</span><br>  <span class="hljs-comment">// ALL &lt; TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL &lt; MARK &lt; OFF</span><br>  <span class="hljs-attr">categories</span>: &#123;<br>    <span class="hljs-attr">default</span>: &#123; <span class="hljs-attr">appenders</span>: [<span class="hljs-string">&quot;out&quot;</span>], <span class="hljs-attr">level</span>: <span class="hljs-string">&quot;all&quot;</span> &#125;,<br>    <span class="hljs-attr">app1</span>: &#123; <span class="hljs-attr">appenders</span>: [<span class="hljs-string">&quot;dateFile&quot;</span>], <span class="hljs-attr">level</span>: <span class="hljs-string">&quot;all&quot;</span> &#125;,<br>    <span class="hljs-attr">app2</span>: &#123; <span class="hljs-attr">appenders</span>: [<span class="hljs-string">&quot;file&quot;</span>], <span class="hljs-attr">level</span>: <span class="hljs-string">&quot;all&quot;</span> &#125;,<br>    <span class="hljs-attr">app3</span>: &#123; <span class="hljs-attr">appenders</span>: [<span class="hljs-string">&quot;fileSync&quot;</span>], <span class="hljs-attr">level</span>: <span class="hljs-string">&quot;all&quot;</span> &#125;,<br>  &#125;,<br>&#125;);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> logger = log4js.<span class="hljs-title function_">getLogger</span>(<span class="hljs-string">&quot;default&quot;</span>);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> loggerDateFile = log4js.<span class="hljs-title function_">getLogger</span>(<span class="hljs-string">&quot;app1&quot;</span>);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> loggerFile = log4js.<span class="hljs-title function_">getLogger</span>(<span class="hljs-string">&quot;app2&quot;</span>);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> loggerFileSync = log4js.<span class="hljs-title function_">getLogger</span>(<span class="hljs-string">&quot;app3&quot;</span>);<br></code></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; logger &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/utils/logger.js&quot;</span>;<br><br>logger.<span class="hljs-title function_">trace</span>(<span class="hljs-string">&quot;trace&quot;</span>);<br>logger.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;debug&quot;</span>);<br>logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">&quot;info&quot;</span>);<br>logger.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&quot;warn&quot;</span>);<br>logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;error&quot;</span>);<br>logger.<span class="hljs-title function_">fatal</span>(<span class="hljs-string">&quot;fatal&quot;</span>);<br>logger.<span class="hljs-title function_">mark</span>(<span class="hljs-string">&quot;mark&quot;</span>);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】element-plus日期时间范围禁用规则</title>
    <link href="/vue/%E3%80%90vue%E3%80%91element-plus%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E8%8C%83%E5%9B%B4%E7%A6%81%E7%94%A8%E8%A7%84%E5%88%99/"/>
    <url>/vue/%E3%80%90vue%E3%80%91element-plus%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E8%8C%83%E5%9B%B4%E7%A6%81%E7%94%A8%E8%A7%84%E5%88%99/</url>
    
    <content type="html"><![CDATA[<p>@&#x2F;hooks&#x2F;dateDisabled.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 日期选择器 日期选择禁用</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">dateDisabled</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> firstSelectDate = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">const</span> countDay = <span class="hljs-number">7</span>;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * 日历上禁用日期（禁用规则：不允许选择当天以后的日期，范围只能选择第一次选择日期的前后7天）</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> <span class="hljs-variable">date</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">boolean</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">disabledDateRange</span>(<span class="hljs-params">date</span>) &#123;<br>    <span class="hljs-keyword">if</span> (firstSelectDate.<span class="hljs-property">value</span>) &#123;<br>      <span class="hljs-comment">// 1天毫秒时间戳</span><br>      <span class="hljs-keyword">const</span> timeRange = <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>;<br>      <span class="hljs-keyword">const</span> currentTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();<br>      <span class="hljs-keyword">const</span> minTime = firstSelectDate.<span class="hljs-property">value</span> - timeRange * countDay;<br>      <span class="hljs-keyword">let</span> maxTime = firstSelectDate.<span class="hljs-property">value</span> + timeRange * (countDay - <span class="hljs-number">1</span>);<br>      <span class="hljs-comment">// 如果最大时间超过当前时间处理</span><br>      <span class="hljs-keyword">if</span> (maxTime &gt; currentTime) maxTime = currentTime;<br>      <span class="hljs-keyword">return</span> date.<span class="hljs-title function_">getTime</span>() &lt;= minTime || date.<span class="hljs-title function_">getTime</span>() &gt; maxTime;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">return</span> date.<span class="hljs-title function_">getTime</span>() &gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * 在日历所选日期更改时触发</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">Array&lt;Date&gt;</span>&#125; <span class="hljs-variable">dates</span></span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">calendarChange</span>(<span class="hljs-params">dates</span>) &#123;<br>    firstSelectDate.<span class="hljs-property">value</span> = dates[<span class="hljs-number">0</span>].<span class="hljs-title function_">getTime</span>();<br>    <span class="hljs-keyword">if</span> (dates[<span class="hljs-number">1</span>]) firstSelectDate.<span class="hljs-property">value</span> = <span class="hljs-number">0</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> &#123;<br>    disabledDateRange,<br>    calendarChange,<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>xxx.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;日期&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;date&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-date-picker</span></span><br><span class="hljs-tag">      <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;queryParams.date&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;daterange&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">value-format</span>=<span class="hljs-string">&quot;YYYY-MM-DD&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">range-separator</span>=<span class="hljs-string">&quot;-&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">start-placeholder</span>=<span class="hljs-string">&quot;开始日期&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">end-placeholder</span>=<span class="hljs-string">&quot;结束日期&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">:clearable</span>=<span class="hljs-string">&quot;false&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">:disabled-date</span>=<span class="hljs-string">&quot;disabledDateRange&quot;</span></span><br><span class="hljs-tag">      @<span class="hljs-attr">calendarChange</span>=<span class="hljs-string">&quot;calendarChange&quot;</span></span><br><span class="hljs-tag">    &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-date-picker</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; dateDisabled &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/hooks/dateDisabled.js&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> &#123; disabledDateRange, calendarChange &#125; = <span class="hljs-title function_">dateDisabled</span>();</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】3D模型加载</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%913D%E6%A8%A1%E5%9E%8B%E5%8A%A0%E8%BD%BD/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%913D%E6%A8%A1%E5%9E%8B%E5%8A%A0%E8%BD%BD/</url>
    
    <content type="html"><![CDATA[<h1 id="3D-模型加载"><a href="#3D-模型加载" class="headerlink" title="3D 模型加载"></a>3D 模型加载</h1><p>在实际开发中, 不可能使用 Three.js 提供的几何体、材质等方式来编写 3D 模型, 通常是使用建模软件建模, 导出 3D 模型, 使用 Three.js 完成交互功能。</p><p>添加了模型之后, 必须添加灯光才能看到模型, 否则模型会被黑色覆盖, 因为三维场景和现实世界一样, 没有光照亮, 能看到的只有黑色。</p><p>Three.js 提供了多种 3D 模型加载器，常用的有：</p><ul><li><code>GLTFLoader</code> - 加载 .gltf&#x2F;.glb 模型（官方推荐的格式，支持性最好）。</li><li><code>DRACOLoader</code> - 用于压缩 .gltf&#x2F;.glb 模型</li><li><code>FBXLoader</code> - 加载 .fbx 模型。</li><li><code>ColladaLoader</code> - 加载 .dae 模型。</li><li><code>OBJLoader</code> - 加载 .obj 模型，与 MTLLoader 配合使用。</li><li><code>MTLLoader</code> - 加载 .mtl 材质，与 OBJLoader 配合使用。</li><li><code>STLLoader</code> - 加载 .stl 模型。</li></ul><p>文档：<a href="https://threejs.rocyuan.top/docs/#examples/zh/loaders/GLTFLoader">https://threejs.rocyuan.top/docs/#examples/zh/loaders/GLTFLoader</a></p><h1 id="GLTFLoader-使用"><a href="#GLTFLoader-使用" class="headerlink" title="GLTFLoader 使用"></a>GLTFLoader 使用</h1><p>加载器的使用基本大同小异，以 GLTFLoader 为例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">GLTFLoader</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three/examples/jsm/loaders/GLTFLoader.js&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">DRACOLoader</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three/examples/jsm/loaders/DRACOLoader.js&quot;</span>;<br><br><span class="hljs-comment">// 加载 GLFT 三维模型</span><br><span class="hljs-keyword">const</span> gltfLoader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GLTFLoader</span>();<br><br><span class="hljs-comment">// 指定 DRACO 解码器(可选)</span><br><span class="hljs-keyword">const</span> dracoLoader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DRACOLoader</span>();<br>dracoLoader.<span class="hljs-title function_">setDecoderPath</span>(<span class="hljs-string">&quot;/examples/jsm/libs/draco/&quot;</span>);<br>gltfLoader.<span class="hljs-title function_">setDRACOLoader</span>(dracoLoader);<br><br>gltfLoader.<span class="hljs-title function_">load</span>(<br>  <span class="hljs-string">&quot;/model/wooden_table_02_4k/wooden_table_02_4k.gltf&quot;</span>,<br>  <span class="hljs-function">(<span class="hljs-params">glft</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// 主要的模型操作在此处编写...</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(glft);<br>    <span class="hljs-keyword">const</span> model = glft.<span class="hljs-property">scene</span>;<br>    <span class="hljs-comment">// 给加载的三维模型中的网格模型开启阴影</span><br>    model.<span class="hljs-title function_">traverse</span>(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (child.<span class="hljs-property">isMesh</span>) &#123;<br>        child.<span class="hljs-property">castShadow</span> = <span class="hljs-literal">true</span>;<br>        child.<span class="hljs-property">receiveShadow</span> = <span class="hljs-literal">false</span>;<br>      &#125;<br>    &#125;);<br>    scene.<span class="hljs-title function_">add</span>(model);<br>  &#125;,<br>  <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;加载进度：&quot;</span>, <span class="hljs-string">`<span class="hljs-subst">$&#123;(e.loaded / e.total) * <span class="hljs-number">100</span>&#125;</span>%`</span>);<br>  &#125;,<br>  <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;加载错误：&quot;</span>, err);<br>  &#125;<br>);<br></code></pre></td></tr></table></figure><h1 id="完整示例"><a href="#完整示例" class="headerlink" title="完整示例"></a>完整示例</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;threeContainer&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;three-container&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">OrbitControls</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three/examples/jsm/controls/OrbitControls.js&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">GLTFLoader</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three/examples/jsm/loaders/GLTFLoader.js&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> threeContainer = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">init3D</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientWidth</span> / threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);</span><br><span class="language-javascript">    camera.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">1.5</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>(&#123; <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> &#125;);</span><br><span class="language-javascript">    renderer.<span class="hljs-title function_">setSize</span>(threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientWidth</span>, threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>);</span><br><span class="language-javascript">    renderer.<span class="hljs-title function_">setPixelRatio</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span>);</span><br><span class="language-javascript">    threeContainer.<span class="hljs-property">value</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);</span><br><span class="language-javascript">    <span class="hljs-comment">// 1. 渲染器中启用阴影</span></span><br><span class="language-javascript">    renderer.<span class="hljs-property">shadowMap</span>.<span class="hljs-property">enabled</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    renderer.<span class="hljs-property">shadowMap</span>.<span class="hljs-property">type</span> = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">PCFSoftShadowMap</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> ambientLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">AmbientLight</span>(<span class="hljs-number">0x404040</span>);</span><br><span class="language-javascript">    scene.<span class="hljs-title function_">add</span>(ambientLight);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> directionalLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">DirectionalLight</span>(<span class="hljs-number">0xffffff</span>, <span class="hljs-number">0.5</span>);</span><br><span class="language-javascript">    directionalLight.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> = <span class="hljs-number">200</span>;</span><br><span class="language-javascript">    directionalLight.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> = <span class="hljs-number">200</span>;</span><br><span class="language-javascript">    directionalLight.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> = <span class="hljs-number">100</span>;</span><br><span class="language-javascript">    <span class="hljs-comment">// 2. 开启平行光投射阴影</span></span><br><span class="language-javascript">    directionalLight.<span class="hljs-property">castShadow</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    scene.<span class="hljs-title function_">add</span>(directionalLight);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 创建球体</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> sphereGeometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">SphereGeometry</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">32</span>, <span class="hljs-number">32</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> sphereMaterial = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshStandardMaterial</span>(&#123;</span><br><span class="language-javascript">      <span class="hljs-attr">color</span>: <span class="hljs-number">0x00ff00</span>,</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> sphere = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(sphereGeometry, sphereMaterial);</span><br><span class="language-javascript">    sphere.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);</span><br><span class="language-javascript">    <span class="hljs-comment">// 3. 开启物体投射阴影（castShadow） 与 接收阴影（receiveShadow）</span></span><br><span class="language-javascript">    sphere.<span class="hljs-property">castShadow</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    sphere.<span class="hljs-property">receiveShadow</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    <span class="hljs-comment">// scene.add(sphere)</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 创建平板</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> planeGeometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PlaneGeometry</span>(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> planeMaterial = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshStandardMaterial</span>(&#123;</span><br><span class="language-javascript">      <span class="hljs-attr">color</span>: <span class="hljs-number">0xffffff</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">side</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">DoubleSide</span>,</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> plane = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(planeGeometry, planeMaterial);</span><br><span class="language-javascript">    plane.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">2</span>;</span><br><span class="language-javascript">    <span class="hljs-comment">// 4. 开启平面（模拟地面）接收阴影</span></span><br><span class="language-javascript">    plane.<span class="hljs-property">receiveShadow</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    scene.<span class="hljs-title function_">add</span>(plane);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 加载 GLFT 三维模型</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> gltfLoader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GLTFLoader</span>();</span><br><span class="language-javascript">    gltfLoader.<span class="hljs-title function_">load</span>(</span><br><span class="language-javascript">      <span class="hljs-string">&quot;/model/wooden_table_02_4k.gltf/wooden_table_02_4k.gltf&quot;</span>,</span><br><span class="language-javascript">      <span class="hljs-function">(<span class="hljs-params">glft</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// 主要的模型操作在此处编写...</span></span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(glft);</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> model = glft.<span class="hljs-property">scene</span>;</span><br><span class="language-javascript">        <span class="hljs-comment">// 给加载的三维模型中的网格模型开启阴影</span></span><br><span class="language-javascript">        model.<span class="hljs-title function_">traverse</span>(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">if</span> (child.<span class="hljs-property">isMesh</span>) &#123;</span><br><span class="language-javascript">            child.<span class="hljs-property">castShadow</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">            child.<span class="hljs-property">receiveShadow</span> = <span class="hljs-literal">false</span>;</span><br><span class="language-javascript">          &#125;</span><br><span class="language-javascript">        &#125;);</span><br><span class="language-javascript">        scene.<span class="hljs-title function_">add</span>(model);</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;加载进度：&quot;</span>, <span class="hljs-string">`<span class="hljs-subst">$&#123;(e.loaded / e.total) * <span class="hljs-number">100</span>&#125;</span>%`</span>);</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;加载错误：&quot;</span>, err);</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    );</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, renderer.<span class="hljs-property">domElement</span>);</span><br><span class="language-javascript">    controls.<span class="hljs-property">enableDamping</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    controls.<span class="hljs-property">dampingFactor</span> = <span class="hljs-number">0.05</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">requestAnimationFrame</span>(animate);</span><br><span class="language-javascript">      controls.<span class="hljs-title function_">update</span>();</span><br><span class="language-javascript">      renderer.<span class="hljs-title function_">render</span>(scene, camera);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-title function_">animate</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">init3D</span>();</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.three-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vh</span> - <span class="hljs-number">20px</span>);</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h1><p><img src="/../../assets/web3d/model-1.jpg" alt="加载3d模型效果"></p><p>打印模型加载完成的数据可见, 模型中包含了网格模型、材质、动画、位置、旋转、缩放等数据, 均可在加载完成后操作。</p>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【代码生成】code-generator-VAR</title>
    <link href="/code-generate/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E3%80%91code-generator-VAR/"/>
    <url>/code-generate/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E3%80%91code-generator-VAR/</url>
    
    <content type="html"><![CDATA[<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>code-generator-VAR 是一款纯前端使用的代码生成器客户端，快速生成前端页面 CURD 代码，享受更多摸鱼时间；可通过配置对接任意后端，支持自定义模版，不依赖任何后端程序，使用简单，支持 windows、mac、linux 三大平台。<br>github 地址：<a href="https://github.com/rocyuan666/code-generator-var">https://github.com/rocyuan666/code-generator-var</a><br>下载地址：<a href="https://github.com/rocyuan666/code-generator-var/releases">https://github.com/rocyuan666/code-generator-var/releases</a></p><p><strong>视频预览见底部</strong></p><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><h2 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h2><p>下载安装好生成器后，生成器需要连接数据库。</p><p><img src="/../../assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91code-generator-VAR/1.jpg"></p><h2 id="获取表数据"><a href="#获取表数据" class="headerlink" title="获取表数据"></a>获取表数据</h2><p>点击 <code>获取表数据</code> 将会获取所连接数据库中所有表与字段信息.</p><p><img src="/../../assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91code-generator-VAR/2.jpg"></p><h2 id="配置信息"><a href="#配置信息" class="headerlink" title="配置信息"></a>配置信息</h2><p>点击每一行后 <code>配置</code> 开始填写生成代码所需要的配置信息；它会将读取数据库的表、字典的信息填充到配置信息中，方便配置。<br>配置分为 <code>表配置</code> 与 <code>字段配置</code></p><h3 id="表配置"><a href="#表配置" class="headerlink" title="表配置"></a>表配置</h3><p>表配置中可以配置 该表是否有 添加、编辑、删除、导出功能和与后端对接的 api 地址及权限标识；列表、详情与后端对接的 api 地址及权限标识、子表的配置等。</p><h3 id="字段配置"><a href="#字段配置" class="headerlink" title="字段配置"></a>字段配置</h3><h4 id="字段名"><a href="#字段名" class="headerlink" title="字段名"></a>字段名</h4><p>与后端对接的字段名</p><h4 id="标签名"><a href="#标签名" class="headerlink" title="标签名"></a>标签名</h4><p>列表、表单显示的文字</p><h4 id="添加编辑显示"><a href="#添加编辑显示" class="headerlink" title="添加编辑显示"></a>添加编辑显示</h4><p>添加编辑表单需要显示提交的字段</p><h4 id="列表显示"><a href="#列表显示" class="headerlink" title="列表显示"></a>列表显示</h4><p>列表中需要显示的字段</p><h4 id="查询方式"><a href="#查询方式" class="headerlink" title="查询方式"></a>查询方式</h4><p>列表中顶部查询的字段，单值查询与范围查询</p><h4 id="必填"><a href="#必填" class="headerlink" title="必填"></a>必填</h4><p>表单中需要必填的字段</p><h4 id="显示类型"><a href="#显示类型" class="headerlink" title="显示类型"></a>显示类型</h4><p>表单显示的表单组件类型</p><h4 id="单位"><a href="#单位" class="headerlink" title="单位"></a>单位</h4><p>文本框、数字框后面显示的单位值，填写什么就显示什么</p><h4 id="字典标识"><a href="#字典标识" class="headerlink" title="字典标识"></a>字典标识</h4><p>由于生成器与后端完全解耦，不能获取字典下拉选择字典，需要手动填写自己系统中的字典标识（填写上后修改 VAR 项目模板中的根据字典标识查询字典数据的接口）即可在项目中正常访问字典。</p><p><img src="/../../assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91code-generator-VAR/3.jpg"></p><h2 id="生成代码"><a href="#生成代码" class="headerlink" title="生成代码"></a>生成代码</h2><p>生成代码分为 <code>批量生成</code> 与 <code>单个表生成</code> ；生成成功后会提示打开生成代码的目录，点击确定就可以看到生成的代码了。</p><p><img src="/../../assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91code-generator-VAR/4.jpg"></p><h2 id="生成器配置"><a href="#生成器配置" class="headerlink" title="生成器配置"></a>生成器配置</h2><p>可以配置 <code>项目名称</code> 、 <code>输出目录</code> 、<code>自定义模板路径</code> 。<br>最终生成代码的目录为：<code>输出目录/项目名称/vue/*</code></p><p><img src="/../../assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91code-generator-VAR/5.jpg"></p><h1 id="配合-vue-admin-roc（VAR）使用"><a href="#配合-vue-admin-roc（VAR）使用" class="headerlink" title="配合 vue-admin-roc（VAR）使用"></a>配合 vue-admin-roc（VAR）使用</h1><h2 id="VAR-介绍"><a href="#VAR-介绍" class="headerlink" title="VAR 介绍"></a>VAR 介绍</h2><p>vue-admin-roc（VAR）是一个基于 <code>vue3</code> 技术栈（vite + vue3.x + vue-router4.x + pinia + element-plus……）的纯前端后台管理系统模板；code-generator-VAR 默认生成模板生成的代码只能在本项目模板使用，如果没有使用 VAR 项目模板，则需要自行编写生成模板。<br>项目中 mock 的 api 需自行根据业务实现对接。</p><h2 id="VAR-创建"><a href="#VAR-创建" class="headerlink" title="VAR 创建"></a>VAR 创建</h2><p>使用以下命令创建：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npx roc-cli create 项目名<br></code></pre></td></tr></table></figure><p>选择 <code>vue-admin-roc(vue3.x)</code> 选项，回车。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">Please <span class="hljs-keyword">select</span> the project <span class="hljs-built_in">type</span> to create:<br>  vue2.x<br>  vue3.x<br>  uniapp(uview1.x)<br>  uniapp(uview2.x)<br>&gt; vue-admin-roc(vue3.x)<br>  electron(vue3.x)<br>  koa<br></code></pre></td></tr></table></figure><h2 id="生成代码的使用"><a href="#生成代码的使用" class="headerlink" title="生成代码的使用"></a>生成代码的使用</h2><p>将生成的代码（目录： <code>输出目录/项目名称/vue/*</code> ）复制到创建的项目中的 <code>src/*</code> 目录下，启动项目 <code>npm run dev</code> 可以看到效果；然后基于生成的代码进行二次开发即可。</p><p><img src="/../../assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91code-generator-VAR/6.jpg"></p><h1 id="视频预览"><a href="#视频预览" class="headerlink" title="视频预览"></a>视频预览</h1><iframe style="width: 100%; height: 520px" src="//player.bilibili.com/player.html?aid=493251751&bvid=BV1qN411g7eE&cid=1329340769&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>]]></content>
    
    
    <categories>
      
      <category>code generate</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】vue3-videojs组件</title>
    <link href="/vue/%E3%80%90vue%E3%80%91vue3-videojs%E7%BB%84%E4%BB%B6/"/>
    <url>/vue/%E3%80%90vue%E3%80%91vue3-videojs%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><ul><li>为播放 m3u8 地址需求封装的组件</li><li>参数选项如果不够参考官网属性修改</li><li>官网配置选项地址：<a href="https://videojs.com/guides/options/">https://videojs.com/guides/options/</a></li><li>考虑 m3u8 流质量不稳定，断开重连问题</li></ul><p><code>RocVideojs.vue</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;roc-videojs&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 考虑 m3u8 流质量不稳定，断开重连问题 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;reloadText&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reload&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;@/assets/images/loading.gif&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;加载中&quot;</span> /&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; reloadText &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;videoShow&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;video-js&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;myPlayerRef&quot;</span> <span class="hljs-attr">:poster</span>=<span class="hljs-string">&quot;poster&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; nextTick, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> videojs <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;video.js&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> zhCn <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;video.js/dist/lang/zh-CN.json&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-string">&quot;video.js/dist/video-js.min.css&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  videojs.<span class="hljs-title function_">addLanguage</span>(<span class="hljs-string">&quot;zh-CN&quot;</span>, zhCn);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">src</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">default</span>: <span class="hljs-string">&quot;&quot;</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">type</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">default</span>: <span class="hljs-string">&quot;application/x-mpegURL&quot;</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">preload</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">default</span>: <span class="hljs-string">&quot;none&quot;</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">poster</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">default</span>: <span class="hljs-string">&quot;&quot;</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">controls</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">default</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">autoplay</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">default</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">width</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: [<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Number</span>],</span><br><span class="language-javascript">      <span class="hljs-attr">default</span>: <span class="hljs-number">320</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">height</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: [<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Number</span>],</span><br><span class="language-javascript">      <span class="hljs-attr">default</span>: <span class="hljs-number">180</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> myPlayerRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">let</span> myPlayer = <span class="hljs-literal">null</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> videoShow = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> reloadText = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;&quot;</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 初始化播放器</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">initVideojs</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    videoShow.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    <span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>();</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> options = &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">controls</span>: props.<span class="hljs-property">controls</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">autoplay</span>: props.<span class="hljs-property">autoplay</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">muted</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">preload</span>: props.<span class="hljs-property">preload</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">width</span>: props.<span class="hljs-property">width</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">height</span>: props.<span class="hljs-property">height</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">sources</span>: [</span><br><span class="language-javascript">        &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">src</span>: props.<span class="hljs-property">src</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">type</span>: props.<span class="hljs-property">type</span>,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      ],</span><br><span class="language-javascript">    &#125;;</span><br><span class="language-javascript">    myPlayer = <span class="hljs-title function_">videojs</span>(myPlayerRef.<span class="hljs-property">value</span>, options, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;播放器准备好了&quot;</span>);</span><br><span class="language-javascript">      <span class="hljs-keyword">if</span> (props.<span class="hljs-property">autoplay</span>) &#123;</span><br><span class="language-javascript">        myPlayer.<span class="hljs-title function_">play</span>();</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">      myPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;error&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">        reloadText.<span class="hljs-property">value</span> = <span class="hljs-string">&quot;视频出错，正在重连...&quot;</span>;</span><br><span class="language-javascript">        myPlayer.<span class="hljs-title function_">load</span>();</span><br><span class="language-javascript">        myPlayer.<span class="hljs-title function_">play</span>();</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">      myPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;playing&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">        reloadText.<span class="hljs-property">value</span> = <span class="hljs-string">&quot;&quot;</span>;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;正在播放&quot;</span>);</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 播放</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">play</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (myPlayer) myPlayer.<span class="hljs-title function_">play</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 暂停播放</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">pause</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (myPlayer) myPlayer.<span class="hljs-title function_">pause</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 卸载播放器</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">dispose</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (myPlayer) myPlayer.<span class="hljs-title function_">dispose</span>();</span><br><span class="language-javascript">    reloadText.<span class="hljs-property">value</span> = <span class="hljs-string">&quot;&quot;</span>;</span><br><span class="language-javascript">    videoShow.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title function_">defineExpose</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">init</span>: initVideojs,</span><br><span class="language-javascript">    play,</span><br><span class="language-javascript">    pause,</span><br><span class="language-javascript">    dispose,</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.roc-videojs</span>,</span><br><span class="language-css">  <span class="hljs-selector-class">.video-js</span>,</span><br><span class="language-css">  <span class="hljs-selector-tag">video</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.roc-videojs</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">    <span class="hljs-selector-class">.reload</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">      <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2</span>;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);</span><br><span class="language-css">      <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">      <span class="hljs-attribute">flex-direction</span>: column;</span><br><span class="language-css">      <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">      <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">      <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">      <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">6px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>使用：</p><p>如果在弹窗中并且播放的是推流地址类型（m3u8），关闭弹窗需要调用 <code>dispose</code> 方法销毁掉 videojs 对象，否则推流地址不会停；调用 <code>dispose</code> 方法后会发生打开第一次弹窗正常运行，点击第二次报错，是因为 <code>dispose</code> 方法会删除掉 video dom 元素，再次打开就会找不到 video 元素；在 <code>RocVideojs</code> 组件使用 <code>v-if</code> 处理每次打开弹窗都重新创建该组件 dom 即可（或者在 <code>el-dialog</code> 上加上 <code>destroy-on-close</code> 属性）。</p><p><code>cam.vue</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">el-dialog</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;title&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;open&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;1200&quot;</span> <span class="hljs-attr">append-to-body</span> <span class="hljs-attr">:close-on-click-modal</span>=<span class="hljs-string">&quot;false&quot;</span> @<span class="hljs-attr">closed</span>=<span class="hljs-string">&quot;handleClosed&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 1120px; height: 630px;&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">RocVideojs</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;open&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;rocVideoRef&quot;</span> <span class="hljs-attr">:poster</span>=<span class="hljs-string">&quot;rowInfo.img_url&quot;</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;rowInfo.video_url&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">RocVideojs</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">el-dialog</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Cam&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; ref, getCurrentInstance, nextTick &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">RocVideojs</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/RocVideojs&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> &#123; proxy &#125; = <span class="hljs-title function_">getCurrentInstance</span>();</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> title = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;&quot;</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> open = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> rowInfo = <span class="hljs-title function_">ref</span>(&#123;&#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 打开对话框</span></span><br><span class="hljs-comment"><span class="language-javascript">   * <span class="hljs-doctag">@param</span> <span class="hljs-variable">row</span></span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleOpen</span>(<span class="hljs-params">row</span>) &#123;</span><br><span class="language-javascript">    rowInfo.<span class="hljs-property">value</span> = row;</span><br><span class="language-javascript">    title.<span class="hljs-property">value</span> = row.<span class="hljs-property">name</span>;</span><br><span class="language-javascript">    open.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">      proxy.<span class="hljs-property">$refs</span>[<span class="hljs-string">&quot;rocVideoRef&quot;</span>].<span class="hljs-title function_">init</span>();</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 关闭对话框以后</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClosed</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    proxy.<span class="hljs-property">$refs</span>[<span class="hljs-string">&quot;rocVideoRef&quot;</span>].<span class="hljs-title function_">dispose</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title function_">defineExpose</span>(&#123; handleOpen &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】video-js常用功能整理</title>
    <link href="/js/%E3%80%90js%E3%80%91video-js%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD%E6%95%B4%E7%90%86/"/>
    <url>/js/%E3%80%90js%E3%80%91video-js%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD%E6%95%B4%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p>video.js 常用功能配置</p><p><img src="/../../assets/%E3%80%90js%E3%80%91video-js%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD%E6%95%B4%E7%90%86/1.jpg"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>video.js - roc<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://unpkg.com/video.js@8.10.0/dist/video-js.min.css&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wrap&quot;</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- 设置了视频宽高比例 aspectRatio: &quot;16:9&quot; video需要自适应 16：9 --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 1024px&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 100%&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;video-js&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;my-player&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- 状态显示 --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>视频总长: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;duration&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- 操作 --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;margin-top: 10px&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;player.play()&quot;</span>&gt;</span>播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;player.pause()&quot;</span>&gt;</span>暂停<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- currentTime方法 获取到的是秒数；传参也需要是秒数 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;player.currentTime(player.currentTime() + 5)&quot;</span>&gt;</span>快进5秒<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;player.currentTime(player.currentTime() - 5)&quot;</span>&gt;</span>后退5秒<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;player.volume(player.volume() + 0.05)&quot;</span>&gt;</span>加大音量(+5)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;player.volume(player.volume() - 0.05)&quot;</span>&gt;</span>减小音量(-5)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- volume方法 获取到的是 0-1之间的小数；传参也需要是 0-1之间的小数 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;player.volume(0.5)&quot;</span>&gt;</span>设置音量50<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;player.muted(true)&quot;</span>&gt;</span>静音<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;player.muted(false)&quot;</span>&gt;</span>关闭静音<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;changePlayerM3u8()&quot;</span>&gt;</span>切换m3u8<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;changePlayerMp4()&quot;</span>&gt;</span>切换mp4<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;player.requestFullscreen()&quot;</span>&gt;</span>全屏<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;player.exitFullscreen()&quot;</span>&gt;</span>退出全屏<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;player.load(); player.play()&quot;</span>&gt;</span>重新加载<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;player.dispose()&quot;</span>&gt;</span>销毁（会删除video标签）<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/video.js@8.10.0/dist/video.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/video.js@8.10.0/dist/lang/zh-CN.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">       * 以下列举出常用的 video.js 配置</span></span><br><span class="hljs-comment"><span class="language-javascript">       * 全部配置参考：</span></span><br><span class="hljs-comment"><span class="language-javascript">       * 中文：https://gitcode.gitcode.host/docs-cn/video.js-docs-cn/docs/guides/options.html</span></span><br><span class="hljs-comment"><span class="language-javascript">       * 英文：https://videojs.com/guides/options</span></span><br><span class="hljs-comment"><span class="language-javascript">       */</span></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> player = <span class="hljs-title function_">videojs</span>(</span><br><span class="language-javascript">        <span class="hljs-string">&quot;my-player&quot;</span>,</span><br><span class="language-javascript">        &#123;</span><br><span class="language-javascript">          <span class="hljs-comment">// width: 1024,</span></span><br><span class="language-javascript">          <span class="hljs-comment">// height: 576,</span></span><br><span class="language-javascript">          <span class="hljs-comment">// 设置语言（需要引入对应的 lang.js）</span></span><br><span class="language-javascript">          <span class="hljs-attr">language</span>: <span class="hljs-string">&quot;zh-CN&quot;</span>,</span><br><span class="language-javascript">          <span class="hljs-comment">// 视频宽高比例如：16:9 4:3 需要配合 video标签 外层标签设置宽度使用</span></span><br><span class="language-javascript">          <span class="hljs-attr">aspectRatio</span>: <span class="hljs-string">&quot;16:9&quot;</span>,</span><br><span class="language-javascript">          <span class="hljs-comment">// 控制条</span></span><br><span class="language-javascript">          <span class="hljs-attr">controls</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">          <span class="hljs-comment">// 自动播放属性 false true muted play any 开启自动播放推荐使用 any</span></span><br><span class="language-javascript">          <span class="hljs-attr">autoplay</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">          <span class="hljs-comment">// 静音</span></span><br><span class="language-javascript">          <span class="hljs-attr">muted</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">          <span class="hljs-comment">// 循环播放</span></span><br><span class="language-javascript">          <span class="hljs-attr">loop</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">          <span class="hljs-comment">// 封面图</span></span><br><span class="language-javascript">          <span class="hljs-attr">poster</span>: <span class="hljs-string">&quot;https://rocyuan666.gitee.io/img/rocyuan.jpg&quot;</span>,</span><br><span class="language-javascript">          <span class="hljs-comment">// 预加载 auto metadata none 一般推荐 auto</span></span><br><span class="language-javascript">          <span class="hljs-attr">preload</span>: <span class="hljs-string">&quot;auto&quot;</span>,</span><br><span class="language-javascript">          <span class="hljs-comment">// video标签 的 source标签 type（MIME类型）: video/mp4 video/webm video/ogg application/x-mpegURL</span></span><br><span class="language-javascript">          <span class="hljs-attr">sources</span>: [</span><br><span class="language-javascript">            <span class="hljs-comment">// &#123;</span></span><br><span class="language-javascript">            <span class="hljs-comment">//   src: &quot;https://cfss.cc/api/ysp/cctv1.m3u8&quot;,</span></span><br><span class="language-javascript">            <span class="hljs-comment">//   type: &quot;application/x-mpegURL&quot;,</span></span><br><span class="language-javascript">            <span class="hljs-comment">// &#125;,</span></span><br><span class="language-javascript">            &#123;</span><br><span class="language-javascript">              <span class="hljs-attr">src</span>: <span class="hljs-string">&quot;https://rocyuan666.github.io/assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91code-generator-VAR/1.mp4&quot;</span>,</span><br><span class="language-javascript">              <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;video/mp4&quot;</span>,</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">          ],</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">          videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;播放器准备完成~&quot;</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">muted</span>());</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">           * 事件监听</span></span><br><span class="hljs-comment"><span class="language-javascript">           */</span></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;error&quot;</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;播放错误&quot;</span>, error);</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;stalled&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;网速异常&quot;</span>);</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;play&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;开始播放&quot;</span>);</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;playing&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;不论什么原因（刚开始播放、转跳后播放等...场景）每次播放都会触发一次，播放中...&quot;</span>);</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;pause&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;暂停播放&quot;</span>);</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;ended&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;播放结束&quot;</span>);</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;seeking&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;视频跳转中&quot;</span>);</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;seeked&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;视频跳转结束&quot;</span>);</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;ratechange&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;播放速率改变&quot;</span>);</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;timeupdate&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;播放时间变化&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">currentTime</span>());</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;volumechange&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> volume = <span class="hljs-title class_">Number</span>((<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">volume</span>() * <span class="hljs-number">100</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">0</span>));</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;播放音量变化（包括静音设置）&quot;</span>, volume);</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;是否静音&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">muted</span>());</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;fullscreenchange&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;是否全屏&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isFullscreen</span>());</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;loadstart&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;开始请求数据&quot;</span>);</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;loadedmetadata&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;获取资源长度完成 &quot;</span>);</span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;duration&quot;</span>).<span class="hljs-property">innerHTML</span> = player.<span class="hljs-title function_">duration</span>() + <span class="hljs-string">&quot; 秒&quot;</span>;</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;progress&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;正在请求数据...&quot;</span>);</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;canplaythrough&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;视频源数据加载完成&quot;</span>);</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;waiting&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            videojs.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;等待数据&quot;</span>);</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">          <span class="hljs-comment">// 移除事件监听</span></span><br><span class="language-javascript">          <span class="hljs-comment">// this.off(&quot;play&quot;, () =&gt; &#123;&#125;);</span></span><br><span class="language-javascript">          <span class="hljs-comment">// ...</span></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      );</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">       * 切换m3u8</span></span><br><span class="hljs-comment"><span class="language-javascript">       */</span></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">changePlayerM3u8</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        player.<span class="hljs-title function_">src</span>([</span><br><span class="language-javascript">          &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">src</span>: <span class="hljs-string">&quot;https://rocyuan666.github.io/assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91code-generator-VAR/1.m3u8&quot;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;application/x-mpegURL&quot;</span>,</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">        ]);</span><br><span class="language-javascript">        player.<span class="hljs-title function_">play</span>();</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">       * 切换mp4</span></span><br><span class="hljs-comment"><span class="language-javascript">       */</span></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">changePlayerMp4</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        player.<span class="hljs-title function_">src</span>([</span><br><span class="language-javascript">          &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">src</span>: <span class="hljs-string">&quot;https://rocyuan666.github.io/assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91code-generator-VAR/1.mp4&quot;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;video/mp4&quot;</span>,</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">        ]);</span><br><span class="language-javascript">        player.<span class="hljs-title function_">play</span>();</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>文档参考：</p><p><a href="https://videojs.com/guides/options">https://videojs.com/guides/options</a></p><p><a href="https://gitcode.gitcode.host/docs-cn/video.js-docs-cn/docs/guides/options.html">https://gitcode.gitcode.host/docs-cn/video.js-docs-cn/docs/guides/options.html</a></p>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】vue3-字典组件</title>
    <link href="/vue/%E3%80%90vue%E3%80%91vue3-%E5%AD%97%E5%85%B8%E7%BB%84%E4%BB%B6/"/>
    <url>/vue/%E3%80%90vue%E3%80%91vue3-%E5%AD%97%E5%85%B8%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><ul><li>考虑性能问题，转换字典数据为对象 KV 的格式，简化循环次数。</li><li>将传入的 value 转成数组，并且考虑字符串逗号分割情况（支持多 value 转换 label）。</li><li>循环 valueList 数组，根据数组项找到对应的字典数据。</li><li>根据字典数据的 elTagType 或 elTagClass 来渲染不同的样式。</li><li>纯文本显示时，需要使用什么分隔符来分隔。</li><li>考虑未找到匹配的数据时是否显示 value。</li></ul><h1 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h1><p><code>RocDictTag.vue</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;roc-dict-tag&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(v, i) in valueList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;v&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;optionsObj[v]&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- tag 标签 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;optionsObj[v].elTagType&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-tag</span> <span class="hljs-attr">:type</span>=<span class="hljs-string">&quot;optionsObj[v].elTagType&quot;</span>&gt;</span>&#123;&#123; optionsObj[v].label &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el-tag</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 文字颜色样式 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">&quot;optionsObj[v].elTagClass&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;[optionsObj[v].elTagClass]&quot;</span>&gt;</span>&#123;&#123; optionsObj[v].label &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;i &lt; valueList.length - 1&quot;</span>&gt;</span>&#123;&#123; dot &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 普通文字 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-else</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123; optionsObj[v].label &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;i &lt; valueList.length - 1&quot;</span>&gt;</span>&#123;&#123; dot &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-else</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;showValue&quot;</span>&gt;</span>&#123;&#123; v &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; computed &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-comment">// 数据</span></span><br><span class="language-javascript">    <span class="hljs-attr">options</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Array</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-comment">// 当前的值</span></span><br><span class="language-javascript">    <span class="hljs-attr">value</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: [<span class="hljs-title class_">Number</span>, <span class="hljs-title class_">String</span>, <span class="hljs-title class_">Array</span>],</span><br><span class="language-javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-comment">// 当未找到匹配的数据时是否显示value</span></span><br><span class="language-javascript">    <span class="hljs-attr">showValue</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">default</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-comment">// 使用分隔符 默认“、”</span></span><br><span class="language-javascript">    <span class="hljs-attr">dot</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">default</span>: <span class="hljs-string">&quot;、&quot;</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> optionsObj = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> obj = &#123;&#125;;</span><br><span class="language-javascript">    props.<span class="hljs-property">options</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">      obj[item.<span class="hljs-property">value</span>] = item;</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> obj;</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> valueList = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> list;</span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(props.<span class="hljs-property">value</span>)) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> props.<span class="hljs-property">value</span> === <span class="hljs-string">&quot;string&quot;</span> &amp;&amp; props.<span class="hljs-property">value</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;,&quot;</span>) !== -<span class="hljs-number">1</span>) &#123;</span><br><span class="language-javascript">        list = props.<span class="hljs-property">value</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;,&quot;</span>);</span><br><span class="language-javascript">      &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">        list = [props.<span class="hljs-property">value</span>];</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">      list = props.<span class="hljs-property">value</span>;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> list;</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.el-tag</span> + <span class="hljs-selector-class">.el-tag</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.primary</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-number">#409eff</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.success</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-number">#67c23a</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.info</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-number">#909399</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.warning</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-number">#e6a23c</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.danger</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-number">#f56c6c</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">RocDictTag</span> <span class="hljs-attr">:options</span>=<span class="hljs-string">&quot;dict&quot;</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;[1, 2]&quot;</span> <span class="hljs-attr">dot</span>=<span class="hljs-string">&quot;、&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">RocDictTag</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">RocDictTag</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/RocDictTag/RocDictTag.vue&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * 字典</span></span><br><span class="hljs-comment"><span class="language-javascript">   * <span class="hljs-doctag">@typedef</span> <span class="hljs-variable">Dict</span></span></span><br><span class="hljs-comment"><span class="language-javascript">   * <span class="hljs-doctag">@property</span> &#123;<span class="hljs-type">string</span>&#125; <span class="hljs-variable">label</span></span></span><br><span class="hljs-comment"><span class="language-javascript">   * <span class="hljs-doctag">@property</span> &#123;<span class="hljs-type">string | Number</span>&#125; <span class="hljs-variable">value</span></span></span><br><span class="hljs-comment"><span class="language-javascript">   * <span class="hljs-doctag">@property</span> &#123;<span class="hljs-type">&#x27;&#x27; | &#x27;primary&#x27; | &#x27;success&#x27; | &#x27;info&#x27; | &#x27;warning&#x27; | &#x27;danger&#x27;</span>&#125; <span class="hljs-variable">elTagType</span></span></span><br><span class="hljs-comment"><span class="language-javascript">   * <span class="hljs-doctag">@property</span> &#123;<span class="hljs-type">&#x27;&#x27; | &#x27;primary&#x27; | &#x27;success&#x27; | &#x27;info&#x27; | &#x27;warning&#x27; | &#x27;danger&#x27;</span>&#125; <span class="hljs-variable">elTagClass</span></span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">Dict[]</span>&#125;</span></span><br><span class="hljs-comment"><span class="language-javascript">   */</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> dict = [</span><br><span class="language-javascript">    &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;男&quot;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">elTagType</span>: <span class="hljs-string">&quot;&quot;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">elTagClass</span>: <span class="hljs-string">&quot;&quot;</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;女&quot;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">value</span>: <span class="hljs-number">2</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">elTagType</span>: <span class="hljs-string">&quot;&quot;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">elTagClass</span>: <span class="hljs-string">&quot;&quot;</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  ];</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】阴影Shadow</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E9%98%B4%E5%BD%B1Shadow/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E9%98%B4%E5%BD%B1Shadow/</url>
    
    <content type="html"><![CDATA[<h1 id="阴影-Shadow"><a href="#阴影-Shadow" class="headerlink" title="阴影 Shadow"></a>阴影 Shadow</h1><ul><li>DirectionalLightShadow - 平行光阴影</li><li>PointLightShadow - 点光源阴影</li><li>SpotLightShadow - 聚光灯阴影</li><li>LightShadow - 阴影基类</li></ul><p>文档：<a href="https://threejs.rocyuan.top/docs/#api/zh/lights/shadows/PointLightShadow">https://threejs.rocyuan.top/docs/#api/zh/lights/shadows/PointLightShadow</a></p><h1 id="平行光阴影示例"><a href="#平行光阴影示例" class="headerlink" title="平行光阴影示例"></a>平行光阴影示例</h1><p>添加步骤：</p><ul><li>渲染器中启用阴影</li><li>开启平行光投射阴影</li><li>开启物体投射阴影（castShadow） 与 接收阴影（receiveShadow）,如果物体未开启 receiveShadow 另外一个物体的阴影将不会投射到该物体上</li><li>开启平面（模拟地面）接收阴影</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;threeContainer&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;three-container&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">OrbitControls</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three/examples/jsm/controls/OrbitControls.js&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> threeContainer = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">init3D</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientWidth</span> / threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);</span><br><span class="language-javascript">    camera.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>(&#123; <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> &#125;);</span><br><span class="language-javascript">    renderer.<span class="hljs-title function_">setSize</span>(threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientWidth</span>, threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>);</span><br><span class="language-javascript">    renderer.<span class="hljs-title function_">setPixelRatio</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span>);</span><br><span class="language-javascript">    threeContainer.<span class="hljs-property">value</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);</span><br><span class="language-javascript">    <span class="hljs-comment">// 1. 渲染器中启用阴影</span></span><br><span class="language-javascript">    renderer.<span class="hljs-property">shadowMap</span>.<span class="hljs-property">enabled</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    renderer.<span class="hljs-property">shadowMap</span>.<span class="hljs-property">type</span> = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">PCFSoftShadowMap</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> ambientLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">AmbientLight</span>(<span class="hljs-number">0x404040</span>);</span><br><span class="language-javascript">    scene.<span class="hljs-title function_">add</span>(ambientLight);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> directionalLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">DirectionalLight</span>(<span class="hljs-number">0xffffff</span>, <span class="hljs-number">0.5</span>);</span><br><span class="language-javascript">    directionalLight.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> = <span class="hljs-number">200</span>;</span><br><span class="language-javascript">    directionalLight.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> = <span class="hljs-number">200</span>;</span><br><span class="language-javascript">    <span class="hljs-comment">// 2. 开启平行光投射阴影</span></span><br><span class="language-javascript">    directionalLight.<span class="hljs-property">castShadow</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    scene.<span class="hljs-title function_">add</span>(directionalLight);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> sphereGeometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">SphereGeometry</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">32</span>, <span class="hljs-number">32</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> sphereMaterial = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshStandardMaterial</span>(&#123;</span><br><span class="language-javascript">      <span class="hljs-attr">color</span>: <span class="hljs-number">0x00ff00</span>,</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> sphere = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(sphereGeometry, sphereMaterial);</span><br><span class="language-javascript">    sphere.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);</span><br><span class="language-javascript">    <span class="hljs-comment">// 3. 开启物体投射阴影（castShadow） 与 接收阴影（receiveShadow）</span></span><br><span class="language-javascript">    sphere.<span class="hljs-property">castShadow</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    sphere.<span class="hljs-property">receiveShadow</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    scene.<span class="hljs-title function_">add</span>(sphere);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> planeGeometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PlaneGeometry</span>(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> planeMaterial = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshStandardMaterial</span>(&#123;</span><br><span class="language-javascript">      <span class="hljs-attr">color</span>: <span class="hljs-number">0xffffff</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">side</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">DoubleSide</span>,</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> plane = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(planeGeometry, planeMaterial);</span><br><span class="language-javascript">    plane.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">2</span>;</span><br><span class="language-javascript">    <span class="hljs-comment">// 4. 开启平面（模拟地面）接收阴影</span></span><br><span class="language-javascript">    plane.<span class="hljs-property">receiveShadow</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    scene.<span class="hljs-title function_">add</span>(plane);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, renderer.<span class="hljs-property">domElement</span>);</span><br><span class="language-javascript">    controls.<span class="hljs-property">enableDamping</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    controls.<span class="hljs-property">dampingFactor</span> = <span class="hljs-number">0.05</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">requestAnimationFrame</span>(animate);</span><br><span class="language-javascript">      controls.<span class="hljs-title function_">update</span>();</span><br><span class="language-javascript">      renderer.<span class="hljs-title function_">render</span>(scene, camera);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-title function_">animate</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">init3D</span>();</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.three-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vh</span> - <span class="hljs-number">20px</span>);</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h1><p><img src="/../../assets/web3d/shadow-1.jpg" alt="平行光阴影"></p>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】vue项目自动化构建-构建物储存回滚（node脚本）</title>
    <link href="/vue/%E3%80%90vue%E3%80%91vue%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA-%E6%9E%84%E5%BB%BA%E7%89%A9%E5%82%A8%E5%AD%98%E5%9B%9E%E6%BB%9A%EF%BC%88node%E8%84%9A%E6%9C%AC%EF%BC%89/"/>
    <url>/vue/%E3%80%90vue%E3%80%91vue%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA-%E6%9E%84%E5%BB%BA%E7%89%A9%E5%82%A8%E5%AD%98%E5%9B%9E%E6%BB%9A%EF%BC%88node%E8%84%9A%E6%9C%AC%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="构建更新，储存每次构建物"><a href="#构建更新，储存每次构建物" class="headerlink" title="构建更新，储存每次构建物"></a>构建更新，储存每次构建物</h2><p>使用:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">node vue-build.mjs git克隆地址 git分支(可选) 打包指令(可选)<br></code></pre></td></tr></table></figure><p>vue-build.mjs:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; resolve &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;node:path&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; execSync &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;node:child_process&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; mkdirSync, readdirSync &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;node:fs&quot;</span>;<br><br><span class="hljs-keyword">const</span> arg1 = process.<span class="hljs-property">argv</span>[<span class="hljs-number">2</span>];<br><span class="hljs-keyword">const</span> arg2 = process.<span class="hljs-property">argv</span>[<span class="hljs-number">3</span>];<br><span class="hljs-keyword">const</span> arg3 = process.<span class="hljs-property">argv</span>[<span class="hljs-number">4</span>];<br><br><span class="hljs-title function_">main</span>(arg1, arg2, arg3);<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 程序入口</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">string</span>&#125; <span class="hljs-variable">arg1</span> - git clone 地址</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">string</span>&#125; <span class="hljs-variable">arg2</span> - git branch 名称 默认：master</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">string</span>&#125; <span class="hljs-variable">arg3</span> - 打包指令 默认：build</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">arg1, arg2, arg3</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;执行中...&quot;</span>);<br>  <span class="hljs-keyword">const</span> gitCloneUrl = arg1 || <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-keyword">const</span> gitBranch = arg2 || <span class="hljs-string">&quot;master&quot;</span>;<br>  <span class="hljs-keyword">const</span> buildEnv = arg3 || <span class="hljs-string">&quot;build&quot;</span>;<br>  <span class="hljs-keyword">const</span> pwd = <span class="hljs-title function_">resolve</span>();<br>  <span class="hljs-keyword">const</span> workDir = <span class="hljs-string">&quot;work_space&quot;</span>;<br>  <span class="hljs-keyword">const</span> vueBuildDirName = <span class="hljs-string">&quot;dist&quot;</span>;<br>  <span class="hljs-keyword">const</span> saveTarDir = <span class="hljs-string">&quot;dist_files&quot;</span>;<br>  <span class="hljs-keyword">const</span> remoteFiles = <span class="hljs-string">&quot;favicon.ico index.html index.html.gz assets&quot;</span>;<br><br>  <span class="hljs-keyword">if</span> (!gitCloneUrl) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;git clone 地址不能为空！&quot;</span>);<br><br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">execSync</span>(<span class="hljs-string">`rm -rf <span class="hljs-subst">$&#123;workDir&#125;</span>`</span>, &#123; <span class="hljs-attr">cwd</span>: pwd &#125;).<span class="hljs-title function_">toString</span>());<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;正在克隆代码...&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">execSync</span>(<span class="hljs-string">`git clone <span class="hljs-subst">$&#123;gitCloneUrl&#125;</span> <span class="hljs-subst">$&#123;workDir&#125;</span> -b <span class="hljs-subst">$&#123;gitBranch&#125;</span> --depth=1`</span>, &#123; <span class="hljs-attr">cwd</span>: pwd &#125;).<span class="hljs-title function_">toString</span>());<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;克隆完成&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;正在安装项目依赖...&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">execSync</span>(<span class="hljs-string">`npm install`</span>, &#123; <span class="hljs-attr">cwd</span>: <span class="hljs-title function_">resolve</span>(pwd, workDir) &#125;).<span class="hljs-title function_">toString</span>());<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;安装项目依赖完成&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;正在打包...&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">execSync</span>(<span class="hljs-string">`npm run <span class="hljs-subst">$&#123;buildEnv&#125;</span>`</span>, &#123; <span class="hljs-attr">cwd</span>: <span class="hljs-title function_">resolve</span>(pwd, workDir) &#125;).<span class="hljs-title function_">toString</span>());<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;打包完成&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;正在整理资源...&quot;</span>);<br>    <span class="hljs-keyword">const</span> tarName = <span class="hljs-title function_">handleDistTarName</span>();<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">execSync</span>(<span class="hljs-string">`tar cvf <span class="hljs-subst">$&#123;tarName&#125;</span>.tar -C ./<span class="hljs-subst">$&#123;vueBuildDirName&#125;</span> .`</span>, &#123; <span class="hljs-attr">cwd</span>: <span class="hljs-title function_">resolve</span>(pwd, workDir) &#125;).<span class="hljs-title function_">toString</span>());<br>    <span class="hljs-keyword">const</span> fileList = <span class="hljs-title function_">readdirSync</span>(pwd);<br>    <span class="hljs-keyword">if</span> (fileList.<span class="hljs-title function_">includes</span>(saveTarDir)) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;存放所有构建物文件目录已存在&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-title function_">mkdirSync</span>(<span class="hljs-title function_">resolve</span>(pwd, saveTarDir));<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;存放所有构建物文件目录已创建&quot;</span>);<br>    &#125;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">execSync</span>(<span class="hljs-string">`mv ./<span class="hljs-subst">$&#123;workDir&#125;</span>/<span class="hljs-subst">$&#123;tarName&#125;</span>.tar ./`</span>, &#123; <span class="hljs-attr">cwd</span>: pwd &#125;).<span class="hljs-title function_">toString</span>());<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;正在整理资源...&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">execSync</span>(<span class="hljs-string">`rm -rf <span class="hljs-subst">$&#123;remoteFiles&#125;</span>`</span>, &#123; <span class="hljs-attr">cwd</span>: pwd &#125;).<span class="hljs-title function_">toString</span>());<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">execSync</span>(<span class="hljs-string">`tar xvf <span class="hljs-subst">$&#123;tarName&#125;</span>.tar`</span>, &#123; <span class="hljs-attr">cwd</span>: pwd &#125;).<span class="hljs-title function_">toString</span>());<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">execSync</span>(<span class="hljs-string">`mv <span class="hljs-subst">$&#123;tarName&#125;</span>.tar ./<span class="hljs-subst">$&#123;saveTarDir&#125;</span>`</span>, &#123; <span class="hljs-attr">cwd</span>: pwd &#125;).<span class="hljs-title function_">toString</span>());<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;正在整理资源...&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">execSync</span>(<span class="hljs-string">`rm -rf <span class="hljs-subst">$&#123;workDir&#125;</span>`</span>, &#123; <span class="hljs-attr">cwd</span>: pwd &#125;).<span class="hljs-title function_">toString</span>());<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;构建更新完成&quot;</span>);<br>  &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;执行错误：&quot;</span>, error);<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 打包构建物的命名（日期时间）</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">String</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleDistTarName</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> y = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getFullYear</span>().<span class="hljs-title function_">toString</span>();<br>  <span class="hljs-keyword">const</span> m = (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getMonth</span>() + <span class="hljs-number">1</span>).<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;0&quot;</span>);<br>  <span class="hljs-keyword">const</span> d = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getDate</span>().<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;0&quot;</span>);<br>  <span class="hljs-keyword">const</span> h = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getHours</span>().<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;0&quot;</span>);<br>  <span class="hljs-keyword">const</span> mi = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getMinutes</span>().<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;0&quot;</span>);<br>  <span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getSeconds</span>().<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;0&quot;</span>);<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;y&#125;</span>-<span class="hljs-subst">$&#123;m&#125;</span>-<span class="hljs-subst">$&#123;d&#125;</span>_<span class="hljs-subst">$&#123;h&#125;</span>-<span class="hljs-subst">$&#123;mi&#125;</span>-<span class="hljs-subst">$&#123;s&#125;</span>`</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="构建物回滚"><a href="#构建物回滚" class="headerlink" title="构建物回滚"></a>构建物回滚</h2><p>使用:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">node vue-rollback.mjs 构建物路径<br></code></pre></td></tr></table></figure><p>vue-rollback.mjs:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; resolve &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;node:path&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; execSync &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;node:child_process&quot;</span>;<br><br><span class="hljs-keyword">const</span> arg1 = process.<span class="hljs-property">argv</span>[<span class="hljs-number">2</span>];<br><br><span class="hljs-title function_">main</span>(arg1);<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 程序入口</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">string</span>&#125; <span class="hljs-variable">tarFilePath</span> - 构建物路径</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">tarFilePath</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;执行中...&quot;</span>);<br>  <span class="hljs-keyword">const</span> pwd = <span class="hljs-title function_">resolve</span>();<br>  <span class="hljs-keyword">const</span> removeFiles = <span class="hljs-string">&quot;favicon.ico index.html index.html.gz assets&quot;</span>;<br><br>  <span class="hljs-keyword">if</span> (!tarFilePath) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;请传入构建物&quot;</span>);<br><br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">execSync</span>(<span class="hljs-string">`rm -rf <span class="hljs-subst">$&#123;removeFiles&#125;</span>`</span>, &#123; <span class="hljs-attr">cwd</span>: pwd &#125;).<span class="hljs-title function_">toString</span>());<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">execSync</span>(<span class="hljs-string">`tar xvf <span class="hljs-subst">$&#123;tarFilePath&#125;</span>`</span>, &#123; <span class="hljs-attr">cwd</span>: pwd &#125;).<span class="hljs-title function_">toString</span>());<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`使用了：<span class="hljs-subst">$&#123;tarFilePath&#125;</span> 构建物`</span>);<br>  &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;执行错误：&quot;</span>, error);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】vue项目自动化构建-构建物储存回滚（shell脚本）</title>
    <link href="/vue/%E3%80%90vue%E3%80%91vue%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA-%E6%9E%84%E5%BB%BA%E7%89%A9%E5%82%A8%E5%AD%98%E5%9B%9E%E6%BB%9A%EF%BC%88shell%E8%84%9A%E6%9C%AC%EF%BC%89/"/>
    <url>/vue/%E3%80%90vue%E3%80%91vue%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA-%E6%9E%84%E5%BB%BA%E7%89%A9%E5%82%A8%E5%AD%98%E5%9B%9E%E6%BB%9A%EF%BC%88shell%E8%84%9A%E6%9C%AC%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="构建更新，储存每次构建物"><a href="#构建更新，储存每次构建物" class="headerlink" title="构建更新，储存每次构建物"></a>构建更新，储存每次构建物</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/sh</span><br><br>dir_name=&quot;work_space&quot; # 克隆项目到本地的文件夹名<br>git_path=&quot;git clone url&quot; # 项目的 git clone 地址<br>git_branch=&quot;master&quot; # 项目的 git 分支<br>vue_build_dir_name=&quot;dist&quot; # vue项目配置打包后的目录名 一般是 dist<br>vue_build_script=&quot;build:prod&quot; # vue项目配置打包的脚本 一般是 build<br><br>save_tar_dir=&quot;dist_files&quot; # 存放所有构建物文件<br>remote_files=&quot;favicon.ico index.html index.html.gz assets&quot; # 需要删除跟站点下的文件<br><br>if [ $# == 0 ]<br>then<br>  vue_build_script=&quot;build:prod&quot;<br>else<br>  vue_build_script=$1<br>fi<br><br>rm -rf $&#123;dir_name&#125;<br>echo &quot;正在克隆代码...&quot;<br>git clone $&#123;git_path&#125; $&#123;dir_name&#125; -b $&#123;git_branch&#125; --depth=1<br>echo &quot;克隆完成&quot;<br>cd $&#123;dir_name&#125;<br>echo &quot;正在安装项目依赖...&quot;<br>npm install<br>echo &quot;安装项目依赖完成&quot;<br>echo &quot;正在打包...&quot;<br>npm run $&#123;vue_build_script&#125;<br>echo &quot;打包完成&quot;<br><br>echo &quot;正在整理资源...&quot;<br>current_date_time=$(date &#x27;+%Y-%m-%d_%H-%M-%S&#x27;) # 当前日期时间<br>tar_name=&quot;$&#123;dir_name&#125;_dist_$&#123;current_date_time&#125;&quot; # 构建物名称<br>tar cvf $&#123;tar_name&#125;.tar -C ./$&#123;vue_build_dir_name&#125; .<br>cd ../<br><br>if [ ! -d $&#123;save_tar_dir&#125; ]<br>then<br>  mkdir -p $&#123;save_tar_dir&#125;<br>  echo &quot;存放所有构建物文件目录已创建&quot;<br>else<br>  echo &quot;存放所有构建物文件目录已存在&quot;<br>fi<br><br>mv ./$&#123;dir_name&#125;/$&#123;tar_name&#125;.tar ./<br>rm -rf $&#123;remote_files&#125;<br>tar xvf $&#123;tar_name&#125;.tar<br>mv $&#123;tar_name&#125;.tar ./$&#123;save_tar_dir&#125;<br>rm -rf $&#123;dir_name&#125;<br>echo &quot;构建更新完成&quot;<br></code></pre></td></tr></table></figure><h2 id="构建物回滚"><a href="#构建物回滚" class="headerlink" title="构建物回滚"></a>构建物回滚</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/sh</span><br><br>remote_files=&quot;favicon.ico index.html index.html.gz assets&quot; # 需要删除跟站点下的文件<br><br>if [ $# == 0 ]<br>then<br>    echo &quot;请传入构建物参数&quot;;<br>else<br>    rm -rf $&#123;remote_files&#125;<br>    tar xvf $&#123;1&#125;<br>    echo &quot;使用了：$&#123;1&#125; 构建物&quot;<br>fi<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】vue3-ts_引用vue模块类型报错</title>
    <link href="/vue/%E3%80%90vue%E3%80%91vue3-ts_%E5%BC%95%E7%94%A8vue%E6%A8%A1%E5%9D%97%E7%B1%BB%E5%9E%8B%E6%8A%A5%E9%94%99/"/>
    <url>/vue/%E3%80%90vue%E3%80%91vue3-ts_%E5%BC%95%E7%94%A8vue%E6%A8%A1%E5%9D%97%E7%B1%BB%E5%9E%8B%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p>引用vue组件类型报错，是因为 ts 本身不认识 .vue 组件模块，按照以下方式定义类型解决</p><p>例如：在 env.d.ts 定义 <code>*.vue</code> 模块类型，在 tsconfig.json 中的 <code>include</code> 配置中添加上 env.d.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;*.vue&#x27;</span> &#123;<br>    <span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">ComponentOptions</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br>    <span class="hljs-keyword">const</span> <span class="hljs-attr">component</span>: <span class="hljs-title class_">ComponentOptions</span>;<br>    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> component;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】vite常用配置</title>
    <link href="/node/%E3%80%90node%E3%80%91vite%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/"/>
    <url>/node/%E3%80%90node%E3%80%91vite%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="分块优化"><a href="#分块优化" class="headerlink" title="分块优化"></a>分块优化</h1><p><a href="https://cn.vitejs.dev/config/build-options.html#build-chunksizewarninglimit">https://cn.vitejs.dev/config/build-options.html#build-chunksizewarninglimit</a><br><a href="https://cn.vitejs.dev/config/build-options.html#build-rollupoptions">https://cn.vitejs.dev/config/build-options.html#build-rollupoptions</a><br><a href="https://rollupjs.org/configuration-options/#output-manualchunks">https://rollupjs.org/configuration-options/#output-manualchunks</a></p><p>配置(对象形式)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">build</span>: &#123;<br>    <span class="hljs-attr">chunkSizeWarningLimit</span>: <span class="hljs-number">1024</span>,<br>    <span class="hljs-attr">rollupOptions</span>: &#123;<br>      <span class="hljs-attr">output</span>: &#123;<br>        <span class="hljs-attr">manualChunks</span>: &#123;<br>          <span class="hljs-attr">monacoeditor</span>: [<span class="hljs-string">&quot;monaco-editor&quot;</span>],<br>          <span class="hljs-attr">quill</span>: [<span class="hljs-string">&quot;quill&quot;</span>],<br>          <span class="hljs-attr">lodash</span>: [<span class="hljs-string">&quot;lodash&quot;</span>],<br>          <span class="hljs-attr">lib</span>: [<span class="hljs-string">&quot;sortablejs&quot;</span>, <span class="hljs-string">&quot;vxe-table&quot;</span>, <span class="hljs-string">&quot;xe-utils&quot;</span>],<br>          <span class="hljs-attr">vlib</span>: [<span class="hljs-string">&quot;vue&quot;</span>, <span class="hljs-string">&quot;vue-router&quot;</span>, <span class="hljs-string">&quot;vue-i18n&quot;</span>, <span class="hljs-string">&quot;element-plus&quot;</span>],<br>        &#125;,<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><p>配置(函数形式)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">build</span>: &#123;<br>    <span class="hljs-attr">chunkSizeWarningLimit</span>: <span class="hljs-number">1024</span>,<br>    <span class="hljs-attr">rollupOptions</span>: &#123;<br>      <span class="hljs-attr">output</span>: &#123;<br>        <span class="hljs-title function_">manualChunks</span>(<span class="hljs-params">id</span>) &#123;<br>          <span class="hljs-comment">// 如果是包含 node_modules 则打包到 vendor.js 中</span><br>          <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;node_modules&quot;</span>)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;vendor&quot;</span>;<br>          &#125;<br>        &#125;,<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="打包资源分类"><a href="#打包资源分类" class="headerlink" title="打包资源分类"></a>打包资源分类</h1><p><a href="https://cn.vitejs.dev/config/build-options.html#build-rollupoptions">https://cn.vitejs.dev/config/build-options.html#build-rollupoptions</a><br><a href="https://rollupjs.org/configuration-options/#output-entryfilenames">https://rollupjs.org/configuration-options/#output-entryfilenames</a><br><a href="https://rollupjs.org/configuration-options/#output-chunkfilenames">https://rollupjs.org/configuration-options/#output-chunkfilenames</a><br><a href="https://rollupjs.org/configuration-options/#output-assetfilenames">https://rollupjs.org/configuration-options/#output-assetfilenames</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">build</span>: &#123;<br>    <span class="hljs-attr">rollupOptions</span>: &#123;<br>      <span class="hljs-attr">output</span>: &#123;<br>        <span class="hljs-attr">entryFileNames</span>: <span class="hljs-string">&quot;static/js/[name]-[hash].js&quot;</span>,<br>        <span class="hljs-attr">chunkFileNames</span>: <span class="hljs-string">&quot;static/js/[name]-[hash].js&quot;</span>,<br>        <span class="hljs-attr">assetFileNames</span>: <span class="hljs-string">&quot;static/[ext]/[name]-[hash].[ext]&quot;</span>,<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="scss-自动导入"><a href="#scss-自动导入" class="headerlink" title="scss 自动导入"></a>scss 自动导入</h1><p><a href="https://cn.vitejs.dev/config/shared-options.html#css-preprocessoroptions">https://cn.vitejs.dev/config/shared-options.html#css-preprocessoroptions</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">css</span>: &#123;<br>    <span class="hljs-attr">preprocessorOptions</span>: &#123;<br>      <span class="hljs-attr">scss</span>: &#123;<br>        <span class="hljs-attr">additionalData</span>: <span class="hljs-string">`@import &quot;@/assets/styles/variables.scss&quot;;`</span>,<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="打包去掉-console"><a href="#打包去掉-console" class="headerlink" title="打包去掉 console"></a>打包去掉 console</h1><p><a href="https://esbuild.github.io/api/#drop">https://esbuild.github.io/api/#drop</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vite&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(<span class="hljs-function">(<span class="hljs-params">&#123; mode &#125;</span>) =&gt;</span> (&#123;<br>  <span class="hljs-attr">esbuild</span>: &#123;<br>    <span class="hljs-comment">// 移除 debugger 与 全部 console.*</span><br>    <span class="hljs-attr">drop</span>: mode === <span class="hljs-string">&quot;production&quot;</span> ? [<span class="hljs-string">&quot;debugger&quot;</span>, <span class="hljs-string">&quot;console&quot;</span>] : [],<br>    <span class="hljs-comment">// 移除 指定 console.*</span><br>    <span class="hljs-comment">// pure: mode === &quot;production&quot; ? [&quot;console.log&quot;] : [],</span><br>  &#125;,<br>&#125;));<br></code></pre></td></tr></table></figure><h1 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; fileURLToPath, <span class="hljs-variable constant_">URL</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;node:url&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">resolve</span>: &#123;<br>    <span class="hljs-attr">alias</span>: &#123;<br>      <span class="hljs-string">&quot;@&quot;</span>: <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">&quot;./src&quot;</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>)),<br>      <span class="hljs-comment">// ...</span><br>    &#125;,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="setup-指定组件名称"><a href="#setup-指定组件名称" class="headerlink" title="setup 指定组件名称"></a>setup 指定组件名称</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i -D vite-plugin-vue-setup-extend<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> vitePluginVueSetupExtend <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vite-plugin-vue-setup-extend&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vitePluginVueSetupExtend</span>()],<br>&#125;;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script setup name=<span class="hljs-string">&quot;MyComponent&quot;</span>&gt;&lt;/script&gt;<br></code></pre></td></tr></table></figure><h1 id="gzip-压缩"><a href="#gzip-压缩" class="headerlink" title="gzip 压缩"></a>gzip 压缩</h1><p><a href="https://github.com/vbenjs/vite-plugin-compression">https://github.com/vbenjs/vite-plugin-compression</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i -D vite-plugin-compression<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> compression <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vite-plugin-compression&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">plugins</span>: [<br>    <span class="hljs-title function_">compression</span>(&#123;<br>      <span class="hljs-attr">ext</span>: <span class="hljs-string">&quot;.gz&quot;</span>,<br>      <span class="hljs-attr">threshold</span>: <span class="hljs-number">1024</span>, <span class="hljs-comment">// 单位：字节。大于该参数会被压缩 gzip</span><br>      <span class="hljs-attr">deleteOriginFile</span>: <span class="hljs-literal">false</span>,<br>    &#125;),<br>  ],<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="SVG-自动引入"><a href="#SVG-自动引入" class="headerlink" title="SVG 自动引入"></a>SVG 自动引入</h1><p><a href="https://www.npmjs.com/package/vite-plugin-svg-icons">https://www.npmjs.com/package/vite-plugin-svg-icons</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i -D vite-plugin-svg-icons<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createSvgIconsPlugin &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vite-plugin-svg-icons&quot;</span>;<br><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;node:path&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; fileURLToPath &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;node:url&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">plugins</span>: [<br>    <span class="hljs-title function_">createSvgIconsPlugin</span>(&#123;<br>      <span class="hljs-attr">iconDirs</span>: [path.<span class="hljs-title function_">resolve</span>(<span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">&quot;./&quot;</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>)), <span class="hljs-string">&quot;src/assets/icons/svg&quot;</span>)],<br>      <span class="hljs-attr">symbolId</span>: <span class="hljs-string">&quot;icon-[dir]-[name]&quot;</span>,<br>      <span class="hljs-attr">svgoOptions</span>: <span class="hljs-literal">true</span>,<br>    &#125;),<br>  ],<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="打包排除-js-库使用-CDN-引入"><a href="#打包排除-js-库使用-CDN-引入" class="headerlink" title="打包排除 js 库使用 CDN 引入"></a>打包排除 js 库使用 CDN 引入</h1><p><a href="https://rollupjs.org/configuration-options/#external">https://rollupjs.org/configuration-options/#external</a></p><p>排除后，在 index.html 中引入 CDN 地址。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">build</span>: &#123;<br>    <span class="hljs-attr">rollupOptions</span>: &#123;<br>      <span class="hljs-attr">external</span>: [<span class="hljs-string">&quot;echarts&quot;</span>], <span class="hljs-comment">// 替换为你想排除的库名</span><br>      <span class="hljs-attr">output</span>: &#123;<br>        <span class="hljs-attr">globals</span>: &#123;<br>          <span class="hljs-attr">echarts</span>: <span class="hljs-string">&quot;echarts&quot;</span>, <span class="hljs-comment">// 指定 echarts 的全局变量</span><br>        &#125;,<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="打包模块可视化分析"><a href="#打包模块可视化分析" class="headerlink" title="打包模块可视化分析"></a>打包模块可视化分析</h2><p><a href="https://www.npmjs.com/package/rollup-plugin-visualizer">https://www.npmjs.com/package/rollup-plugin-visualizer</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i -D rollup-plugin-visualizer<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; visualizer &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rollup-plugin-visualizer&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">visualizer</span>()],<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【linux】centos防火墙服务</title>
    <link href="/linux/%E3%80%90linux%E3%80%91centos%E9%98%B2%E7%81%AB%E5%A2%99%E6%9C%8D%E5%8A%A1/"/>
    <url>/linux/%E3%80%90linux%E3%80%91centos%E9%98%B2%E7%81%AB%E5%A2%99%E6%9C%8D%E5%8A%A1/</url>
    
    <content type="html"><![CDATA[<p>查看防火墙状态：active（running）防火墙已经被打开；disavtive（dead），防火墙已经被关闭</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl status firewalld.service<br></code></pre></td></tr></table></figure><p>关闭防火墙：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl stop firewalld.service<br></code></pre></td></tr></table></figure><p>永久关闭防火墙：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl <span class="hljs-built_in">disable</span> firewalld.service<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】纹理贴图Texture</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E7%BA%B9%E7%90%86%E8%B4%B4%E5%9B%BETexture/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E7%BA%B9%E7%90%86%E8%B4%B4%E5%9B%BETexture/</url>
    
    <content type="html"><![CDATA[<h1 id="常用加载器"><a href="#常用加载器" class="headerlink" title="常用加载器"></a>常用加载器</h1><p>常用的纹理贴图加载器有:</p><ul><li><code>TextureLoader</code> - 加载单张纹理</li><li><code>CubeTextureLoader</code> - 加载立方体贴图 6 张纹理</li></ul><h1 id="常用贴图类型"><a href="#常用贴图类型" class="headerlink" title="常用贴图类型"></a>常用贴图类型</h1><ul><li><code>map</code> - 基础颜色贴图 (定义模型表面的基础颜色)</li><li><code>normalMap</code> - 法线贴图 (通过改变表面法线方向，模拟凹凸细节，增加模型的真实感)</li><li><code>aoMap</code> - 环境光遮蔽贴图, ARM 组合贴图 (模拟模型表面因环境光遮蔽而产生的阴影效果，增加细节和真实感)</li><li><code>roughnessMap</code> - 粗糙度贴图, ARM 组合贴图 (定义模型表面的粗糙程度，影响光线的反射方式)</li><li><code>metalnessMap</code> - 金属度贴图, ARM 组合贴图 (定义模型表面的金属感，影响光线的反射和折射)</li><li><code>displacementMap</code> - 置换贴图 (通过改变顶点位置，模拟模型表面的凹凸效果)</li></ul><h1 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h1><p>贴图素材: <a href="https://threejs.rocyuan.top/">https://threejs.rocyuan.top</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;threeContainer&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;three-container&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">OrbitControls</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three/examples/jsm/controls/OrbitControls.js&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> threeContainer = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">init3D</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientWidth</span> / threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);</span><br><span class="language-javascript">    camera.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>(&#123; <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> &#125;);</span><br><span class="language-javascript">    renderer.<span class="hljs-title function_">setSize</span>(threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientWidth</span>, threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>);</span><br><span class="language-javascript">    renderer.<span class="hljs-title function_">setPixelRatio</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span>);</span><br><span class="language-javascript">    threeContainer.<span class="hljs-property">value</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);</span><br><span class="language-javascript">    renderer.<span class="hljs-property">shadowMap</span>.<span class="hljs-property">enabled</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    renderer.<span class="hljs-property">shadowMap</span>.<span class="hljs-property">type</span> = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">PCFSoftShadowMap</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> ambientLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">AmbientLight</span>(<span class="hljs-number">0x404040</span>);</span><br><span class="language-javascript">    scene.<span class="hljs-title function_">add</span>(ambientLight);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> directionalLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">DirectionalLight</span>(<span class="hljs-number">0xffffff</span>, <span class="hljs-number">1</span>);</span><br><span class="language-javascript">    directionalLight.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> = <span class="hljs-number">200</span>;</span><br><span class="language-javascript">    directionalLight.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> = <span class="hljs-number">200</span>;</span><br><span class="language-javascript">    directionalLight.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> = <span class="hljs-number">100</span>;</span><br><span class="language-javascript">    directionalLight.<span class="hljs-property">castShadow</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    scene.<span class="hljs-title function_">add</span>(directionalLight);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> texture = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">TextureLoader</span>().<span class="hljs-title function_">load</span>(<span class="hljs-string">&quot;/images/textures/rock_boulder_cracked_diff_1k.png&quot;</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> textureNo = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">TextureLoader</span>().<span class="hljs-title function_">load</span>(<span class="hljs-string">&quot;/images/textures/rock_boulder_cracked_nor_gl_1k.png&quot;</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> textureARM = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">TextureLoader</span>().<span class="hljs-title function_">load</span>(<span class="hljs-string">&quot;/images/textures/rock_boulder_cracked_arm_1k.png&quot;</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> textureDis = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">TextureLoader</span>().<span class="hljs-title function_">load</span>(<span class="hljs-string">&quot;/images/textures/rock_boulder_cracked_disp_1k.png&quot;</span>);</span><br><span class="language-javascript">    texture.<span class="hljs-property">colorSpace</span> = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">SRGBColorSpace</span>;</span><br><span class="language-javascript">    textureNo.<span class="hljs-property">colorSpace</span> = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">SRGBColorSpace</span>;</span><br><span class="language-javascript">    textureARM.<span class="hljs-property">colorSpace</span> = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">SRGBColorSpace</span>;</span><br><span class="language-javascript">    textureDis.<span class="hljs-property">colorSpace</span> = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">SRGBColorSpace</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 创建球体</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> sphereGeometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">SphereGeometry</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">32</span>, <span class="hljs-number">32</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> sphereMaterial = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshStandardMaterial</span>(&#123;</span><br><span class="language-javascript">      <span class="hljs-comment">// 设置纹理贴图</span></span><br><span class="language-javascript">      <span class="hljs-attr">map</span>: texture,</span><br><span class="language-javascript">      <span class="hljs-attr">normalMap</span>: textureNo,</span><br><span class="language-javascript">      <span class="hljs-attr">aoMap</span>: textureARM,</span><br><span class="language-javascript">      <span class="hljs-attr">roughnessMap</span>: textureARM,</span><br><span class="language-javascript">      <span class="hljs-attr">metalnessMap</span>: textureARM,</span><br><span class="language-javascript">      <span class="hljs-attr">displacementMap</span>: textureDis,</span><br><span class="language-javascript">      <span class="hljs-attr">displacementScale</span>: <span class="hljs-number">0.02</span>, <span class="hljs-comment">// 控制凹凸强度</span></span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> sphere = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(sphereGeometry, sphereMaterial);</span><br><span class="language-javascript">    sphere.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);</span><br><span class="language-javascript">    sphere.<span class="hljs-property">castShadow</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    sphere.<span class="hljs-property">receiveShadow</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    scene.<span class="hljs-title function_">add</span>(sphere);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 创建平板</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> planeGeometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PlaneGeometry</span>(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> planeMaterial = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshStandardMaterial</span>(&#123;</span><br><span class="language-javascript">      <span class="hljs-attr">color</span>: <span class="hljs-number">0xffffff</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">side</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">DoubleSide</span>,</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> plane = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(planeGeometry, planeMaterial);</span><br><span class="language-javascript">    plane.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">2</span>;</span><br><span class="language-javascript">    plane.<span class="hljs-property">receiveShadow</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    scene.<span class="hljs-title function_">add</span>(plane);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, renderer.<span class="hljs-property">domElement</span>);</span><br><span class="language-javascript">    controls.<span class="hljs-property">enableDamping</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    controls.<span class="hljs-property">dampingFactor</span> = <span class="hljs-number">0.05</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">requestAnimationFrame</span>(animate);</span><br><span class="language-javascript">      controls.<span class="hljs-title function_">update</span>();</span><br><span class="language-javascript">      camera.<span class="hljs-title function_">lookAt</span>(sphere.<span class="hljs-property">position</span>);</span><br><span class="language-javascript">      renderer.<span class="hljs-title function_">render</span>(scene, camera);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-title function_">animate</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">init3D</span>();</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.three-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vh</span> - <span class="hljs-number">20px</span>);</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h1><p><img src="/../../assets/web3d/texture-1.jpg" alt="效果1"></p><p><img src="/../../assets/web3d/texture-2.jpg" alt="效果2"></p><p><img src="/../../assets/web3d/texture-3.jpg" alt="贴图素材示例"></p>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】GUI库</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91GUI%E5%BA%93/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91GUI%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<h1 id="dat-gui"><a href="#dat-gui" class="headerlink" title="dat.gui"></a>dat.gui</h1><p>dat.gui 是一个轻量级的图形用户界面，用于在 JavaScript 中更改变量，使用这个库可以很方便的修改三维物体的属性。</p><p>文档：<a href="https://github.com/dataarts/dat.gui/blob/HEAD/API.md">https://github.com/dataarts/dat.gui/blob/HEAD/API.md</a></p><h1 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123; obj.size &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123; obj.hide &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123; obj.color &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>count: &#123;&#123; count &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; reactive, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; <span class="hljs-variable constant_">GUI</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three/examples/jsm/libs/lil-gui.module.min.js&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> gui = <span class="hljs-keyword">new</span> <span class="hljs-title function_">GUI</span>();</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> obj = <span class="hljs-title function_">reactive</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">size</span>: <span class="hljs-number">0</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">hide</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;#ff0000&quot;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">fn1</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      count.<span class="hljs-property">value</span>++;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> folder = gui.<span class="hljs-title function_">addFolder</span>(<span class="hljs-string">&quot;分组1&quot;</span>);</span><br><span class="language-javascript">  folder.<span class="hljs-title function_">add</span>(obj, <span class="hljs-string">&quot;size&quot;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">100</span>, <span class="hljs-number">1</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">&quot;大小&quot;</span>);</span><br><span class="language-javascript">  folder.<span class="hljs-title function_">add</span>(obj, <span class="hljs-string">&quot;hide&quot;</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">&quot;隐藏&quot;</span>);</span><br><span class="language-javascript">  folder.<span class="hljs-title function_">addColor</span>(obj, <span class="hljs-string">&quot;color&quot;</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">&quot;颜色&quot;</span>);</span><br><span class="language-javascript">  folder.<span class="hljs-title function_">add</span>(obj, <span class="hljs-string">&quot;fn1&quot;</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">&quot;count++&quot;</span>);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/../../assets/web3d/datgui-1.gif" alt="基本使用"></p><h1 id="结合-threejs-使用"><a href="#结合-threejs-使用" class="headerlink" title="结合 threejs 使用"></a>结合 threejs 使用</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;threeContainer&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;three-container&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; <span class="hljs-variable constant_">GUI</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three/examples/jsm/libs/lil-gui.module.min.js&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> gui = <span class="hljs-keyword">new</span> <span class="hljs-title function_">GUI</span>();</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> threeContainer = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">init3D</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-comment">// 场景</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();</span><br><span class="language-javascript">    <span class="hljs-comment">// 相机</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientWidth</span> / threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);</span><br><span class="language-javascript">    camera.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 渲染器</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>(&#123;</span><br><span class="language-javascript">      <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">    renderer.<span class="hljs-title function_">setPixelRatio</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span>);</span><br><span class="language-javascript">    renderer.<span class="hljs-title function_">setSize</span>(threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientWidth</span>, threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>);</span><br><span class="language-javascript">    threeContainer.<span class="hljs-property">value</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 添加立方体</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BoxGeometry</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshBasicMaterial</span>();</span><br><span class="language-javascript">    material.<span class="hljs-property">color</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(<span class="hljs-number">0x00ff00</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> cube = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, material);</span><br><span class="language-javascript">    scene.<span class="hljs-title function_">add</span>(cube);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 使用 gui 调节参数</span></span><br><span class="language-javascript">    gui.<span class="hljs-title function_">add</span>(cube.<span class="hljs-property">position</span>, <span class="hljs-string">&quot;x&quot;</span>, -<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0.01</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">&quot;x轴&quot;</span>);</span><br><span class="language-javascript">    gui.<span class="hljs-title function_">add</span>(cube.<span class="hljs-property">position</span>, <span class="hljs-string">&quot;y&quot;</span>, -<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0.01</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">&quot;y轴&quot;</span>);</span><br><span class="language-javascript">    gui.<span class="hljs-title function_">add</span>(cube.<span class="hljs-property">position</span>, <span class="hljs-string">&quot;z&quot;</span>, -<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0.01</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">&quot;z轴&quot;</span>);</span><br><span class="language-javascript">    gui.<span class="hljs-title function_">addColor</span>(material, <span class="hljs-string">&quot;color&quot;</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">&quot;颜色&quot;</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 渲染场景</span></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">requestAnimationFrame</span>(animate);</span><br><span class="language-javascript">      renderer.<span class="hljs-title function_">render</span>(scene, camera);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-title function_">animate</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">init3D</span>();</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.three-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/../../assets/web3d/datgui-2.gif" alt="结合 threejs 使用"></p><h1 id="常用组件及方法"><a href="#常用组件及方法" class="headerlink" title="常用组件及方法"></a>常用组件及方法</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// prop字符串类型 - 输入框</span><br>gui.<span class="hljs-title function_">add</span>(obj, <span class="hljs-string">&quot;prop&quot;</span>);<br><span class="hljs-comment">// prop数字类型 - 数字输入与滑块</span><br>gui.<span class="hljs-title function_">add</span>(obj, <span class="hljs-string">&quot;prop&quot;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">100</span>, <span class="hljs-number">1</span>);<br><span class="hljs-comment">// prop布尔值 - 选择框</span><br>gui.<span class="hljs-title function_">add</span>(obj, <span class="hljs-string">&quot;prop&quot;</span>);<br><span class="hljs-comment">// prop函数 - 按钮</span><br>gui.<span class="hljs-title function_">add</span>(obj, <span class="hljs-string">&quot;prop&quot;</span>);<br><span class="hljs-comment">// 3参数数组/对象 - 下拉框</span><br>gui.<span class="hljs-title function_">add</span>(obj, <span class="hljs-string">&quot;prop&quot;</span>, [<span class="hljs-string">&quot;value1&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>, <span class="hljs-string">&quot;value3&quot;</span>]);<br>gui.<span class="hljs-title function_">add</span>(obj, <span class="hljs-string">&quot;prop&quot;</span>, &#123; <span class="hljs-attr">label1</span>: <span class="hljs-string">&quot;value1&quot;</span>, <span class="hljs-attr">label2</span>: <span class="hljs-string">&quot;value2&quot;</span>, <span class="hljs-attr">label3</span>: <span class="hljs-string">&quot;value3&quot;</span> &#125;);<br><span class="hljs-comment">// addColor - 颜色选择器</span><br>gui.<span class="hljs-title function_">addColor</span>(obj, <span class="hljs-string">&quot;prop&quot;</span>);<br><br><span class="hljs-comment">// onChange - 值改变时的回调函数</span><br>gui.<span class="hljs-title function_">add</span>(obj, <span class="hljs-string">&quot;prop&quot;</span>).<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value);<br>&#125;);<br><br><span class="hljs-comment">// addFolder - 分组</span><br><span class="hljs-keyword">const</span> f1 = gui.<span class="hljs-title function_">addFolder</span>(<span class="hljs-string">&quot;分组1&quot;</span>);<br>f1.<span class="hljs-title function_">add</span>(obj, <span class="hljs-string">&quot;prop&quot;</span>);<br><span class="hljs-comment">// 展开</span><br>f1.<span class="hljs-title function_">open</span>();<br><span class="hljs-comment">// 关闭</span><br>f1.<span class="hljs-title function_">close</span>();<br><br><span class="hljs-comment">// addFolder - 分组套娃</span><br><span class="hljs-keyword">const</span> f2 = gui.<span class="hljs-title function_">addFolder</span>(<span class="hljs-string">&quot;分组2&quot;</span>);<br><span class="hljs-keyword">const</span> f21 = f2.<span class="hljs-title function_">addFolder</span>(<span class="hljs-string">&quot;分组2-1&quot;</span>);<br>f21.<span class="hljs-title function_">add</span>(obj, <span class="hljs-string">&quot;prop&quot;</span>);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】光照Light</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E5%85%89%E7%85%A7Light/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E5%85%89%E7%85%A7Light/</url>
    
    <content type="html"><![CDATA[<h1 id="光照-Light"><a href="#光照-Light" class="headerlink" title="光照 Light"></a>光照 Light</h1><p>Three.js 提供了多种模拟生活中光源的光源类型：</p><ul><li><code>AmbientLight</code> - 环境光（全局光照，均匀照亮整个场景。不支持阴影。）</li><li><code>DirectionalLight</code> - 平行光（从一个方向发射光，发出的光是平行的，可模拟太阳光。）</li><li><code>PointLight</code> - 点光源（从一个点向所有方向发射光，可模拟灯泡的光）</li><li><code>SpotLight</code> - 聚光灯（从一个点向一个方向发射光，可模拟手电筒。）</li><li><code>HemisphereLight</code> - 半球光（从一个方向向另一个方向均匀地照亮整个场景。不支持阴影。）</li><li><code>RectAreaLight</code> - 矩形区域光（从一个矩形区域均匀地照亮，可模拟晚上窗户发光。不支持阴影。）</li><li><code>Light</code> - 光源的抽象基类</li><li><code>LightProbe</code> - 光照探针</li></ul><p>文档：<a href="https://threejs.rocyuan.top/docs/#api/zh/lights/AmbientLight">https://threejs.rocyuan.top/docs/#api/zh/lights/AmbientLight</a></p>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【代码生成】codesmith-网络请求(四)</title>
    <link href="/code-generate/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E3%80%91codesmith-%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82(%E5%9B%9B)/"/>
    <url>/code-generate/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E3%80%91codesmith-%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82(%E5%9B%9B)/</url>
    
    <content type="html"><![CDATA[<p>在使用 Codesmith 生成代码时，会存在连接数据库后，提供的数据不足以生成所需要的代码，需要配合其他json数据来生成代码；这些json数据可能来自于api，所以需要使用网络请求获取数据。</p><h1 id="HttpClient"><a href="#HttpClient" class="headerlink" title="HttpClient"></a>HttpClient</h1><p>一种方式是使用 HttpClient 需要导入程序集和命名空间<br>HttpClient 文档：<a href="https://learn.microsoft.com/zh-cn/dotnet/api/system.net.http.httpclient?view=net-8.0">https://learn.microsoft.com/zh-cn/dotnet/api/system.net.http.httpclient?view=net-8.0</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cst">&lt;%@ Template Language=&quot;C#&quot; TargetLanguage=&quot;Text&quot; Description=&quot;HttpClient类库使用&quot; %&gt;<br><br>&lt;%-- 导入程序集 --%&gt;<br>&lt;%@ Assembly Name=&quot;System.Net.Http&quot; %&gt;<br><br>&lt;%-- 导入命名空间 --%&gt;<br>&lt;%@ Import Namespace=&quot;System.Net.Http&quot; %&gt;<br>&lt;%@ Import Namespace=&quot;CodeSmith.Engine.Json.Linq&quot; %&gt;<br><br>&lt;%-- 属性定义 --%&gt;<br>&lt;%@ Property Type=&quot;String&quot; Name=&quot;apiUrl&quot; Category=&quot;接口&quot; Optional=&quot;False&quot; Description=&quot;接口地址&quot; %&gt;<br><br>&lt;%<br>// 使用 HttpClient 调用接口<br>HttpClient httpClient = new HttpClient();<br>HttpResponseMessage result = httpClient.GetAsync(apiUrl).Result;<br>string res = result.Content.ReadAsStringAsync().Result;<br><br>// 使用 CodeSmith.Engine.Json.Linq 中的 JObject 解析 json<br>JObject json = JObject.Parse(res);<br>%&gt;<br><br>api获取到的原始json数据：<br>&lt;%= json %&gt;<br><br>获取json中【data】中【user】中【field】的数据<br>&lt;%= json[&quot;data&quot;][&quot;user&quot;][&quot;field&quot;] %&gt;<br><br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91codesmith-%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82(%E5%9B%9B)/1.jpg" alt="../../assets/【代码生成器】codesmith-网络请求(四)/1.jpg"></p><h1 id="WebClient"><a href="#WebClient" class="headerlink" title="WebClient"></a>WebClient</h1><p>一种方式是使用 WebClient 导入命名空间即可<br>WebClient 文档：<a href="https://learn.microsoft.com/zh-cn/dotnet/api/system.net.webclient?view=net-8.0">https://learn.microsoft.com/zh-cn/dotnet/api/system.net.webclient?view=net-8.0</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cst">&lt;%@ Template Language=&quot;C#&quot; TargetLanguage=&quot;Text&quot; Description=&quot;WebClient类库使用&quot; %&gt;<br><br>&lt;%-- 导入命名空间 --%&gt;<br>&lt;%@ Import Namespace=&quot;System.Net&quot; %&gt;<br>&lt;%@ Import Namespace=&quot;System.Text&quot; %&gt;<br>&lt;%@ Import Namespace=&quot;CodeSmith.Engine.Json.Linq&quot; %&gt;<br><br>&lt;%-- 属性定义 --%&gt;<br>&lt;%@ Property Type=&quot;String&quot; Name=&quot;apiUrl&quot; Category=&quot;接口&quot; Optional=&quot;False&quot; Description=&quot;接口地址&quot; %&gt;<br><br>&lt;%<br>// 使用 WebClient 调用接口<br>WebClient webClient = new WebClient();<br>byte[] bytes = webClient.DownloadData(apiUrl);<br><br>// 获取到的是字节数据，使用 System.Text 中的 Encoding 将字节数据转换为字符串<br>string result = Encoding.UTF8.GetString(bytes);<br><br>// 使用 CodeSmith.Engine.Json.Linq 中的 JObject 解析 json<br>JObject json = JObject.Parse(result);<br>%&gt;<br><br>api获取到的原始json数据：<br>&lt;%= json %&gt;<br><br>获取json中【data】中【user】中【field】的数据<br>&lt;%= json[&quot;data&quot;][&quot;user&quot;][&quot;field&quot;] %&gt;<br><br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91codesmith-%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82(%E5%9B%9B)/2.jpg" alt="../../assets/【代码生成器】codesmith-网络请求(四)/2.jpg"></p>]]></content>
    
    
    <categories>
      
      <category>code generate</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【代码生成】codesmith-基本语法(三)</title>
    <link href="/code-generate/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E3%80%91codesmith-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95(%E4%B8%89)/"/>
    <url>/code-generate/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E3%80%91codesmith-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95(%E4%B8%89)/</url>
    
    <content type="html"><![CDATA[<p>CodeSmith 的 C# 语法与 Asp.net MVC2 的模板语法很像；对于 web 前端来讲其实也和 ejs 很像。</p><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>编写模板代码第一句就是在声明：告诉 CodeSmith 你的开发模板的语言是 C#，生成的目标代码是 HTML，最后是这个模板的描述信息。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cst">&lt;%@ Template Language=&quot;C#&quot; TargetLanguage=&quot;HTML&quot; Description=&quot;描述&quot; %&gt;<br></code></pre></td></tr></table></figure><h2 id=""><a href="#" class="headerlink" title="&lt;% %&gt;"></a>&lt;% %&gt;</h2><p>C# 代码需要写在 <code>&lt;%  %&gt;</code> 标签内</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cst">&lt;% string message = &quot;hello world&quot;; %&gt;<br>&lt;%<br>string name = &quot;rocyuan&quot;;<br>%&gt;<br></code></pre></td></tr></table></figure><h2 id="-1"><a href="#-1" class="headerlink" title="&lt;%&#x3D; %&gt;"></a>&lt;%&#x3D; %&gt;</h2><p>要输出到模板的变量值需要写在 <code>&lt;%=  %&gt;</code> 标签内</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cst">&lt;%= message %&gt;<br>&lt;%= name %&gt;<br></code></pre></td></tr></table></figure><h2 id="-2"><a href="#-2" class="headerlink" title=""></a><script></script></h2><p>需要写一大段 c# 代码时可以使用 <code>&lt;script&gt;&lt;/script&gt;</code> 标签，如需要封装函数功能等…。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cst">&lt;script runat=&quot;template&quot;&gt;<br>public string SnakeFormatHump(string snakeName, bool isBig = false)<br>&#123;<br>    string newSnakeName = &quot;&quot;;<br>    string[] snakeNames = snakeName.Split(&quot;_&quot;.ToCharArray());<br>    for(int i = 0; i &lt; snakeNames.Length; i++)<br>    &#123;<br>        string nameSplitFormat = snakeNames[i].Substring(0, 1).ToUpper() + snakeNames[i].Substring(1);<br>        if(isBig || i &gt; 0)<br>        &#123;<br>            snakeNames[i] = nameSplitFormat;<br>        &#125;<br>        newSnakeName += snakeNames[i];<br>    &#125;<br>    return newSnakeName;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h2 id="外部输出的变量（属性管理中管理的变量）"><a href="#外部输出的变量（属性管理中管理的变量）" class="headerlink" title="外部输出的变量（属性管理中管理的变量）"></a>外部输出的变量（属性管理中管理的变量）</h2><p>有些变量，我们需要在生成的时候通过属性管理面板输入的，这个时候就需要声明外部变量了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cst">&lt;%@ Property Name=&quot;name&quot; Type=&quot;System.String&quot; Default=&quot;xxx项目&quot; Optional=&quot;False&quot; Category=&quot;分类1&quot; Description=&quot;项目名称&quot; %&gt;<br></code></pre></td></tr></table></figure><ul><li>Name：要声明的变量的名字</li><li>Type：要声明的属性的类型</li><li>Default：当没有通过属性面板输入值时，使用的默认值</li><li>Optional：是否允许为空(即不输入)</li><li>Category：声明的这个属性的类别(CodeSmith 软件中的属性面板中显示的类别名称)</li><li>Description：说明描述</li></ul><p><img src="/../../assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91codesmith-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95(%E4%B8%89)/1.jpg"></p><h2 id="include-引入其他模板文件"><a href="#include-引入其他模板文件" class="headerlink" title="#include 引入其他模板文件"></a>#include 引入其他模板文件</h2><p>有些模板文件是专门存放工程中的公共工具方法的，这时在其他模板文件中就可以使用 <code>#include</code> 来引入工具方法模板，使用公共定义的方法了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cst">&lt;!-- #include file=&quot;common\\utils.cst&quot; --&gt;<br></code></pre></td></tr></table></figure><h2 id="Assembly-添加程序集"><a href="#Assembly-添加程序集" class="headerlink" title="Assembly 添加程序集"></a>Assembly 添加程序集</h2><p>使用类库所在的程序集时，需要在模板顶部添加所依赖的程序集引用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cst">&lt;%@ Assembly Name=&quot;SchemaExplorer&quot; %&gt;<br>&lt;%@ Assembly Name=&quot;System.Net.Http&quot; %&gt;<br></code></pre></td></tr></table></figure><h2 id="Import-导入命名空间"><a href="#Import-导入命名空间" class="headerlink" title="Import 导入命名空间"></a>Import 导入命名空间</h2><p>使用一些 <code>.Net</code> 类库，或者 <code>CodeSmith</code> 提供的类库时，需要在模板顶部导入该类库的命名空间，比如:<br>使用 IO 操作时，需要导入 <code>System.IO</code> 命名空间<br>使用 JSON 数据处理时，需要导入 <code>CodeSmith.Engine.Json.Linq</code> 命名空间</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cst">&lt;%@ Import Namespace=&quot;System.IO&quot; %&gt;<br></code></pre></td></tr></table></figure><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>CodeSmith 中可以使用 &lt;%– –%&gt; 作为注释，也可以使用 c# 的注释（c#的注释必须在 c#语法标签中使用 <code>&lt;%  %&gt;</code> 或 <code>&lt;script&gt;&lt;/script&gt;</code> 中）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cst">&lt;%--<br>注释注释注释注释注释<br>--%&gt;<br><br>&lt;%<br>// c#注释<br>/* c#注释 */<br>// ...<br>%&gt;<br><br>&lt;script&gt;<br>// c#注释<br>/* c#注释 */<br>// ...<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>code generate</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【代码生成】codesmith-认识codesmith(二)</title>
    <link href="/code-generate/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E3%80%91codesmith-%E8%AE%A4%E8%AF%86codesmith(%E4%BA%8C)/"/>
    <url>/code-generate/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E3%80%91codesmith-%E8%AE%A4%E8%AF%86codesmith(%E4%BA%8C)/</url>
    
    <content type="html"><![CDATA[<h1 id="操作界面"><a href="#操作界面" class="headerlink" title="操作界面"></a>操作界面</h1><p><img src="/../../assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91codesmith-%E8%AE%A4%E8%AF%86codesmith/1.jpg"></p><ul><li>资源管理<ul><li>模板资源：<code>.cst</code> 模板的存放目录，自行规划目录结构</li><li>数据库资源：管理数据库连接的界面</li><li>Map 资源：Map 文件的添加编辑界面</li></ul></li><li>属性管理：编写 <code>.cst</code> 模板的属性面板</li><li>脚本编辑：主要的编辑模板界面</li><li>编译操作：编译模板</li><li>生成操作：生成代码</li></ul><h1 id="模板编写"><a href="#模板编写" class="headerlink" title="模板编写"></a>模板编写</h1><p>编写模板的脚本支持 <code>c#</code> <code>vb</code> <code>javascript</code> 三种语言；支持性最好的是 <code>c#</code>，使用 <code>javascript</code> 写模板时无任何提示，<code>vb</code> 没用过；个人使用 <code>c#</code> 语言编写。</p><h2 id="创建模板"><a href="#创建模板" class="headerlink" title="创建模板"></a>创建模板</h2><p>创建文件夹使用 <code>codesmith</code> 打开文件夹，在<code>模板资源管理</code>中右键文件夹，新建一个<code>c#模板</code></p><p><img src="/../../assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91codesmith-%E8%AE%A4%E8%AF%86codesmith/2.jpg"></p><p><img src="/../../assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91codesmith-%E8%AE%A4%E8%AF%86codesmith/3.jpg"></p><p>修改代码仅保留第一行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cst">&lt;%@ Template Language=&quot;C#&quot; TargetLanguage=&quot;Text&quot; Description=&quot;描述&quot; %&gt;<br></code></pre></td></tr></table></figure><ul><li>Template 声明模板</li><li>Language&#x3D;”C#” 指定模板使用的语言</li><li>TargetLanguage&#x3D;”Text” 指定模板生成后的语言，支持很多中编程语言，指定了后会有对应语言的高亮提示（不需要高亮提示可以指定为“Text”）；指定的语言与实际生成的文件后缀无关，实际生成文件的后缀可由编写模板代码决定的；理论上是能生成任何语言的代码</li><li>Description&#x3D;”描述” 模板的描述信息</li></ul><h2 id="编写模板"><a href="#编写模板" class="headerlink" title="编写模板"></a>编写模板</h2><p>编写 <code>HTML</code> 模板输出 <code>hello world</code>，使用 <code>c#</code> 定义一个变量，然后输出 HTML 填充变量的值</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cst">&lt;%@ Template Language=&quot;C#&quot; TargetLanguage=&quot;HTML&quot; Description=&quot;描述&quot; %&gt;<br><br>&lt;% string message = &quot;hello world&quot;; %&gt;<br>&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br>&lt;head&gt;<br>  &lt;meta charset=&quot;UTF-8&quot;&gt;<br>  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>  &lt;title&gt;代码生成&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>  &lt;h1&gt;&lt;%= message %&gt;&lt;/h1&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br><br></code></pre></td></tr></table></figure><h2 id="生成结果"><a href="#生成结果" class="headerlink" title="生成结果"></a>生成结果</h2><p><img src="/../../assets/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%91codesmith-%E8%AE%A4%E8%AF%86codesmith/4.jpg"></p><p>可以看出，使用 <code>&lt;%  %&gt;</code> 包裹 <code>c#</code> 代码，使用 <code>&lt;%=  %&gt;</code> 输出 <code>c#</code> 变量，其他内容原样输出，其实就是模板引擎的语法。</p><p>代码生成的原理就是，使用某种语言的模板引擎，编写适合自己项目的代码模板，然后解析模板，生成需要代码。</p>]]></content>
    
    
    <categories>
      
      <category>code generate</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【代码生成】codesmith-安装与配置(一)</title>
    <link href="/code-generate/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E3%80%91codesmith-%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE(%E4%B8%80)/"/>
    <url>/code-generate/%E3%80%90%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E3%80%91codesmith-%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE(%E4%B8%80)/</url>
    
    <content type="html"><![CDATA[<h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><p>百度网盘下载：<br>链接：<a href="https://pan.baidu.com/s/1l3OWoOEcLkjxGLPBpbJWOg?pwd=8zgv">https://pan.baidu.com/s/1l3OWoOEcLkjxGLPBpbJWOg?pwd=8zgv </a><br>提取码：<code>8zgv</code></p><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><ol><li>下载 <code>MySql.Data.dll</code> 文件（压缩包内有）<br>下载地址:<br><a href="https://www.dll-files.com/mysql.data.dll.html">https://www.dll-files.com/mysql.data.dll.html</a><br><a href="https://downloads.mysql.com/archives/c-net/">https://downloads.mysql.com/archives/c-net/</a>  </li><li>将 <code>MySql.Data.dll</code> 复制到 <code>CodeSmith</code> 的 <code>bin</code> 文件夹下</li><li>修改 <code>CodeSmith</code> 安装目录下的 <code>TemplateEditor.exe.config</code>， 在最后结尾的 <code>&lt;/configuration&gt;</code> 之前加入以下行：</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">system.data</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">DbProviderFactories</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;MySQL Data Provider&quot;</span> <span class="hljs-attr">invariant</span>=<span class="hljs-string">&quot;MySql.Data.MySqlClient&quot;</span> <span class="hljs-attr">description</span>=<span class="hljs-string">&quot;.Net Framework Data Provider for MySQL&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=8.0.16.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">DbProviderFactories</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">system.data</span>&gt;</span><br></code></pre></td></tr></table></figure><ol start="4"><li><p>确认下载的 <code>MySql.Data.dll</code> 版本号和上述字符串中的<code>Version</code>（版本）一致, 保存关闭文件, 重启 <code>CodeSmith</code><br><strong>第 3 步 中配置版本号与压缩包内 <code>MySql.Data.dll</code> 文件版本一致，可直接使用！</strong></p></li><li><p>在 <code>Schama Explorer</code> 面板中新增数据库，<code>provider Type</code> 选择 <code>MySQLSchamaProvider</code>, 连接字符串如下:</p></li></ol><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">server</span>=<span class="hljs-number">172.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>;<span class="hljs-keyword">User</span> ID=root;<span class="hljs-keyword">Password</span>=root;<span class="hljs-keyword">database</span>=DB_NAME;<br></code></pre></td></tr></table></figure><ol start="6"><li><p><code>Test</code> 测试成功，<code>Add</code> 保存</p></li><li><p>解决mysql获取表、字段注释为空问题需要将压缩包内 <code>SchemaExplorer.MySQLSchemaProvider.dll</code> 替换到 <code>/CodeSmith/v8.5/SchemaProviders/SchemaExplorer.MySQLSchemaProvider.dll</code></p></li><li><p>编写模板，在 <code>Properties</code> 面板中选择数据库表，进行代码生成。</p></li></ol><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><p>示例模板代码：<br><a href="https://github.com/rocyuan666/codesmith_template">https://github.com/rocyuan666/codesmith_template</a></p>]]></content>
    
    
    <categories>
      
      <category>code generate</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】几何体Geometry</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E5%87%A0%E4%BD%95%E4%BD%93Geometry/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E5%87%A0%E4%BD%95%E4%BD%93Geometry/</url>
    
    <content type="html"><![CDATA[<h1 id="几何体-Geometry"><a href="#几何体-Geometry" class="headerlink" title="几何体 Geometry"></a>几何体 Geometry</h1><p>几何体决定了物体的形状，Three.js 提供了多种内置的几何体。</p><ul><li><code>BoxGeometry</code> - 立方体</li><li><code>CapsuleGeometry</code> - 胶囊体</li><li><code>CircleGeometry</code> - 圆形</li><li><code>ConeGeometry</code> - 圆锥体</li><li><code>CylinderGeometry</code> - 圆柱体</li><li><code>DodecahedronGeometry</code> - 十二面体</li><li><code>EdgesGeometry</code> - 边缘</li><li><code>ExtrudeGeometry</code> - 挤压</li><li><code>IcosahedronGeometry</code> - 二十面体</li><li><code>LatheGeometry</code> - 旋转几何体</li><li><code>OctahedronGeometry</code> - 八面体</li><li><code>PlaneGeometry</code> - 平面</li><li><code>PolyhedronGeometry</code> - 多面体</li><li><code>RingGeometry</code> - 环形</li><li><code>ShapeGeometry</code> - 自定义 2D 形状</li><li><code>SphereGeometry</code> - 球体</li><li><code>TetrahedronGeometry</code> - 四面体</li><li><code>TorusGeometry</code> - 圆环</li><li><code>TorusKnotGeometry</code> - 圆环扭结</li><li><code>TubeGeometry</code> - 管道</li><li><code>WireframeGeometry</code> - 线框</li></ul><p>文档：<a href="https://threejs.rocyuan.top/docs/?q=geo#api/zh/geometries/BoxGeometry">https://threejs.rocyuan.top/docs/?q=geo#api/zh/geometries/BoxGeometry</a></p>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】材质Material</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E6%9D%90%E8%B4%A8Material/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E6%9D%90%E8%B4%A8Material/</url>
    
    <content type="html"><![CDATA[<h1 id="几何体-Material"><a href="#几何体-Material" class="headerlink" title="几何体 Material"></a>几何体 Material</h1><p>材质决定了物体的外观，包括颜色、纹理、透明度、光照反射等属性，Three.js 提供了多种内置的材质。</p><ul><li><code>MeshBasicMaterial</code> - 基础网格材质（不受光照影响，仅显示颜色或纹理。适用于不需要光照的简单物体、背景、调试等。）</li><li><code>MeshPhongMaterial</code> - Phong 网格材质（受光照影响，支持高光反射。适用于需要高光反射的物体（如塑料、金属））</li><li><code>MeshLambertMaterial</code> - Lambert 网格材质（受光照影响，但不支持高光反射。适用于需要漫反射的物体（如布料、纸张））</li><li><code>MeshStandardMaterial</code> - 标准网格材质（受光照影响，基于物理的渲染（PBR），支持金属度和粗糙度。适用于需要真实感渲染的物体（如金属、陶瓷）。）</li><li><code>MeshPhysicalMaterial</code> - 物理网格材质（受光照影响，MeshStandardMaterial 的扩展，支持更多物理属性（如清漆、透光率）。）</li><li><code>MeshToonMaterial</code> - 卡通网格材质（卡通风格的渲染，颜色分层。适用于卡通风格的物体。）</li><li><code>MeshNormalMaterial</code> - 法线网格材质（显示物体的法线方向。适用于调试法线或创建特殊效果。）</li><li><code>MeshDepthMaterial</code> - 深度网格材质（根据物体与相机的距离显示灰度颜色。适用于深度可视化或后处理效果。）</li><li><code>ShaderMaterial</code> - 着色器材质</li><li><code>LineBasicMaterial</code> - 基本线框材质</li><li><code>LineDashedMaterial</code> - 虚线材质</li><li><code>Material</code> - 材质的抽象基类</li><li><code>MeshDistanceMaterial</code> - 距离网格材质</li><li><code>MeshMatcapMaterial</code> - Matcap 网格材质</li><li><code>PointsMaterial</code> - 点材质</li><li><code>RawShaderMaterial</code> - 原始着色器材质</li><li><code>ShadowMaterial</code> - 阴影材质</li><li><code>SpriteMaterial</code> - 点精灵材质</li></ul><p>文档：<a href="https://threejs.rocyuan.top/docs/?q=m#api/zh/materials/MeshBasicMaterial">https://threejs.rocyuan.top/docs/?q=m#api/zh/materials/MeshBasicMaterial</a></p><h1 id="材质选择"><a href="#材质选择" class="headerlink" title="材质选择"></a>材质选择</h1><ul><li>简单物体：<code>MeshBasicMaterial</code></li><li>需要光照的物体：<code>MeshPhongMaterial</code> 或 <code>MeshLambertMaterial</code></li><li>真实感渲染：<code>MeshStandardMaterial</code> 或 <code>MeshPhysicalMaterial</code></li><li>自定义效果：<code>ShaderMaterial</code></li></ul>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】创建三维物体步骤</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E5%88%9B%E5%BB%BA%E4%B8%89%E7%BB%B4%E7%89%A9%E4%BD%93%E6%AD%A5%E9%AA%A4/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E5%88%9B%E5%BB%BA%E4%B8%89%E7%BB%B4%E7%89%A9%E4%BD%93%E6%AD%A5%E9%AA%A4/</url>
    
    <content type="html"><![CDATA[<p>创建三维物体的步骤如下：</p><ol><li>创建几何体</li><li>创建材质</li><li>创建网格</li><li>添加到场景</li></ol><p>以下将使用 立方体 和 基础材质 作为示例。</p><h1 id="创建几何体（Geometry）"><a href="#创建几何体（Geometry）" class="headerlink" title="创建几何体（Geometry）"></a>创建几何体（Geometry）</h1><p>创建立方体，几何体决定了物体的形状。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 创建立方体（宽，高，深）</span><br><span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BoxGeometry</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure><h1 id="创建材质（Material）"><a href="#创建材质（Material）" class="headerlink" title="创建材质（Material）"></a>创建材质（Material）</h1><p>创建基础材质，材质决定了物体的 颜色、纹理、光照响应等外观。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 创建基础材质（不受光照影响）</span><br><span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshBasicMaterial</span>(&#123; <span class="hljs-attr">color</span>: <span class="hljs-number">0x00ff00</span> &#125;);<br></code></pre></td></tr></table></figure><h1 id="创建网格（Mesh）"><a href="#创建网格（Mesh）" class="headerlink" title="创建网格（Mesh）"></a>创建网格（Mesh）</h1><p>创建网格需要将几何体和材质传入，然后将网格添加到场景中。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 创建网格（传入立方体和材质）</span><br><span class="hljs-keyword">const</span> cube = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, material);<br></code></pre></td></tr></table></figure><h1 id="将物体添加到场景（Scene）中"><a href="#将物体添加到场景（Scene）中" class="headerlink" title="将物体添加到场景（Scene）中"></a>将物体添加到场景（Scene）中</h1><p>将创建好的网格添加到场景中，使其可见。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 将网格添加到场景中</span><br>scene.<span class="hljs-title function_">add</span>(cube);<br></code></pre></td></tr></table></figure><h1 id="设置物体的位置、旋转和缩放"><a href="#设置物体的位置、旋转和缩放" class="headerlink" title="设置物体的位置、旋转和缩放"></a>设置物体的位置、旋转和缩放</h1><p>设置物体的位置、旋转和缩放需要使用物体的 position、rotation 和 scale 属性。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">cube.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">// 设置位置</span><br>cube.<span class="hljs-property">rotation</span>.<span class="hljs-title function_">set</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">// 设置旋转（绕 X 轴旋转 45 度）</span><br>cube.<span class="hljs-property">scale</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// 设置缩放（X 轴放大 2 倍）</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】轨道控制器</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E8%BD%A8%E9%81%93%E6%8E%A7%E5%88%B6%E5%99%A8/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E8%BD%A8%E9%81%93%E6%8E%A7%E5%88%B6%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="轨道控制器"><a href="#轨道控制器" class="headerlink" title="轨道控制器"></a>轨道控制器</h1><p>轨道控制器（OrbitControls）是一个用于控制相机视角的工具，它可以让用户通过鼠标或触摸设备来旋转、缩放和平移相机等操作。</p><p>文档：<a href="https://threejs.rocyuan.top/docs/?q=control#examples/zh/controls/OrbitControls">https://threejs.rocyuan.top/docs/?q=control#examples/zh/controls/OrbitControls</a></p><h1 id="创建轨道控制器"><a href="#创建轨道控制器" class="headerlink" title="创建轨道控制器"></a>创建轨道控制器</h1><p>创建轨道控制器有两个参数，第一个参数是相机，第二个参数是渲染器的 DOM 元素。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">OrbitControls</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three/examples/jsm/controls/OrbitControls.js&quot;</span>;<br><br><span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, renderer.<span class="hljs-property">domElement</span>);<br></code></pre></td></tr></table></figure><h1 id="常见操作"><a href="#常见操作" class="headerlink" title="常见操作"></a>常见操作</h1><h2 id="启用阻尼效果"><a href="#启用阻尼效果" class="headerlink" title="启用阻尼效果"></a>启用阻尼效果</h2><p>阻尼效果可以让相机的旋转和缩放更加平滑。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">controls.<span class="hljs-property">enableDamping</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// 启用阻尼</span><br>controls.<span class="hljs-property">dampingFactor</span> = <span class="hljs-number">0.05</span>; <span class="hljs-comment">// 阻尼系数，值越小，阻尼效果越弱</span><br></code></pre></td></tr></table></figure><h2 id="旋转、缩放、平移的禁用"><a href="#旋转、缩放、平移的禁用" class="headerlink" title="旋转、缩放、平移的禁用"></a>旋转、缩放、平移的禁用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">controls.<span class="hljs-property">enableRotate</span> = <span class="hljs-literal">false</span>; <span class="hljs-comment">// 禁用旋转</span><br>controls.<span class="hljs-property">enableZoom</span> = <span class="hljs-literal">false</span>; <span class="hljs-comment">// 禁用缩放</span><br>controls.<span class="hljs-property">enablePan</span> = <span class="hljs-literal">false</span>; <span class="hljs-comment">// 禁用平移</span><br></code></pre></td></tr></table></figure><h2 id="旋转、缩放、平移的速度"><a href="#旋转、缩放、平移的速度" class="headerlink" title="旋转、缩放、平移的速度"></a>旋转、缩放、平移的速度</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">controls.<span class="hljs-property">rotateSpeed</span> = <span class="hljs-number">0.5</span>; <span class="hljs-comment">// 旋转速度</span><br>controls.<span class="hljs-property">zoomSpeed</span> = <span class="hljs-number">0.5</span>; <span class="hljs-comment">// 缩放速度</span><br>controls.<span class="hljs-property">panSpeed</span> = <span class="hljs-number">0.5</span>; <span class="hljs-comment">// 平移速度</span><br></code></pre></td></tr></table></figure><h2 id="旋转范围"><a href="#旋转范围" class="headerlink" title="旋转范围"></a>旋转范围</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">controls.<span class="hljs-property">minAzimuthAngle</span> = -<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">4</span>; <span class="hljs-comment">// 最小水平角度</span><br>controls.<span class="hljs-property">maxAzimuthAngle</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">4</span>; <span class="hljs-comment">// 最大水平角度</span><br>controls.<span class="hljs-property">minPolarAngle</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">4</span>; <span class="hljs-comment">// 最小垂直角度</span><br>controls.<span class="hljs-property">maxPolarAngle</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">2</span>; <span class="hljs-comment">// 最大垂直角度</span><br></code></pre></td></tr></table></figure><h2 id="缩放范围"><a href="#缩放范围" class="headerlink" title="缩放范围"></a>缩放范围</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">controls.<span class="hljs-property">minDistance</span> = <span class="hljs-number">1</span>; <span class="hljs-comment">// 最小缩放距离</span><br>controls.<span class="hljs-property">maxDistance</span> = <span class="hljs-number">10</span>; <span class="hljs-comment">// 最大缩放距离</span><br></code></pre></td></tr></table></figure><h2 id="自动旋转"><a href="#自动旋转" class="headerlink" title="自动旋转"></a>自动旋转</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">controls.<span class="hljs-property">autoRotate</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// 自动旋转</span><br>controls.<span class="hljs-property">autoRotateSpeed</span> = <span class="hljs-number">1</span>; <span class="hljs-comment">// 自动旋转速度</span><br></code></pre></td></tr></table></figure><h2 id="设置目标点"><a href="#设置目标点" class="headerlink" title="设置目标点"></a>设置目标点</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">controls.<span class="hljs-property">target</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">// 设置目标点</span><br></code></pre></td></tr></table></figure><h2 id="监听控制器事件"><a href="#监听控制器事件" class="headerlink" title="监听控制器事件"></a>监听控制器事件</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">controls.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;change&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;相机位置:&quot;</span>, camera.<span class="hljs-property">position</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h2 id="更新控制器"><a href="#更新控制器" class="headerlink" title="更新控制器"></a>更新控制器</h2><p>在渲染循环中调用 controls.update()，以确保控制器状态更新。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-title function_">requestAnimationFrame</span>(animate);<br>  controls.<span class="hljs-title function_">update</span>(); <span class="hljs-comment">// 更新控制器</span><br>  renderer.<span class="hljs-title function_">render</span>(scene, camera);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="重置控制器"><a href="#重置控制器" class="headerlink" title="重置控制器"></a>重置控制器</h2><p>通过 reset 方法将控制器重置到初始状态。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">controls.<span class="hljs-title function_">reset</span>(); <span class="hljs-comment">// 重置控制器</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】三要素之渲染器</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E4%B8%89%E8%A6%81%E7%B4%A0%E4%B9%8B%E6%B8%B2%E6%9F%93%E5%99%A8/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E4%B8%89%E8%A6%81%E7%B4%A0%E4%B9%8B%E6%B8%B2%E6%9F%93%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="渲染器"><a href="#渲染器" class="headerlink" title="渲染器"></a>渲染器</h1><p>渲染器负责将场景渲染到指定的输出目标上。</p><p>文档：<a href="https://threejs.rocyuan.top/docs/?q=webgl#api/zh/renderers/WebGLRenderer">https://threejs.rocyuan.top/docs/?q=webgl#api/zh/renderers/WebGLRenderer</a></p><h1 id="创建渲染器"><a href="#创建渲染器" class="headerlink" title="创建渲染器"></a>创建渲染器</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three&quot;</span>;<br><br><span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>();<br></code></pre></td></tr></table></figure><h1 id="常见操作"><a href="#常见操作" class="headerlink" title="常见操作"></a>常见操作</h1><h2 id="设置渲染器的大小"><a href="#设置渲染器的大小" class="headerlink" title="设置渲染器的大小"></a>设置渲染器的大小</h2><p>通过 setSize 方法设置渲染器的大小，通常设置为画布的宽度和高度。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">renderer.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>);<br></code></pre></td></tr></table></figure><h2 id="将渲染器的-DOM-元素添加到页面中"><a href="#将渲染器的-DOM-元素添加到页面中" class="headerlink" title="将渲染器的 DOM 元素添加到页面中"></a>将渲染器的 DOM 元素添加到页面中</h2><p>渲染器会自动创建一个 <code>canvas</code> 元素，你需要将其添加到页面的 DOM 中。与【指定渲染器输出的 canvas】二选一即可。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);<br></code></pre></td></tr></table></figure><h2 id="指定渲染器输出的-canvas"><a href="#指定渲染器输出的-canvas" class="headerlink" title="指定渲染器输出的 canvas"></a>指定渲染器输出的 canvas</h2><p>如果你已经有一个 <code>canvas</code> 元素，你可以将其传递给渲染器的 <code>canvas</code> 属性。与【将渲染器的 DOM 元素添加到页面中】二选一即可。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three&quot;</span>;<br><br><span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>(&#123;<br>  <span class="hljs-attr">canvas</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#myCanvas&quot;</span>),<br>&#125;);<br></code></pre></td></tr></table></figure><h2 id="渲染场景"><a href="#渲染场景" class="headerlink" title="渲染场景"></a>渲染场景</h2><p>使用 render 方法将场景和相机结合起来，渲染出最终的图像。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">renderer.<span class="hljs-title function_">render</span>(scene, camera);<br></code></pre></td></tr></table></figure><h2 id="启用抗锯齿"><a href="#启用抗锯齿" class="headerlink" title="启用抗锯齿"></a>启用抗锯齿</h2><p>通过 setAntialias 方法启用抗锯齿，以减少图像的锯齿感。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three&quot;</span>;<br><br><span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>(&#123; <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> &#125;);<br></code></pre></td></tr></table></figure><h2 id="设置像素比率"><a href="#设置像素比率" class="headerlink" title="设置像素比率"></a>设置像素比率</h2><p>通过 setPixelRatio 方法设置渲染器的像素比率，以适应高分辨率屏幕。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">renderer.<span class="hljs-title function_">setPixelRatio</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span>);<br></code></pre></td></tr></table></figure><h2 id="设置背景颜色"><a href="#设置背景颜色" class="headerlink" title="设置背景颜色"></a>设置背景颜色</h2><p>通过 setClearColor 方法设置渲染器的背景颜色。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">renderer.<span class="hljs-title function_">setClearColor</span>(<span class="hljs-number">0xffffff</span>);<br></code></pre></td></tr></table></figure><h2 id="调整画布大小"><a href="#调整画布大小" class="headerlink" title="调整画布大小"></a>调整画布大小</h2><p>当窗口大小发生变化时，需要调整渲染器的大小以适应新的窗口大小。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;resize&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> width = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>;<br>  <span class="hljs-keyword">const</span> height = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>;<br>  renderer.<span class="hljs-title function_">setSize</span>(width, height);<br>  camera.<span class="hljs-property">aspect</span> = width / height;<br>  camera.<span class="hljs-title function_">updateProjectionMatrix</span>();<br>&#125;);<br></code></pre></td></tr></table></figure><h2 id="渲染循环"><a href="#渲染循环" class="headerlink" title="渲染循环"></a>渲染循环</h2><p>渲染循环是渲染器的核心，它会不断地渲染场景并更新渲染器的输出。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-title function_">requestAnimationFrame</span>(animate);<br>  renderer.<span class="hljs-title function_">render</span>(scene, camera);<br>&#125;<br><span class="hljs-title function_">animate</span>();<br></code></pre></td></tr></table></figure><h2 id="保存渲染结果"><a href="#保存渲染结果" class="headerlink" title="保存渲染结果"></a>保存渲染结果</h2><p>通过 toDataURL 方法将渲染结果保存为图片。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> image = renderer.<span class="hljs-property">domElement</span>.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-string">&quot;image/png&quot;</span>);<br><span class="hljs-keyword">const</span> link = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;a&quot;</span>);<br>link.<span class="hljs-property">href</span> = image;<br>link.<span class="hljs-property">download</span> = <span class="hljs-string">&quot;screenshot.png&quot;</span>;<br>link.<span class="hljs-title function_">click</span>();<br></code></pre></td></tr></table></figure><h2 id="销毁渲染器"><a href="#销毁渲染器" class="headerlink" title="销毁渲染器"></a>销毁渲染器</h2><p>当不再需要渲染器时，需要调用 dispose 方法销毁渲染器。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">renderer.<span class="hljs-title function_">dispose</span>();<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】三要素之相机</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E4%B8%89%E8%A6%81%E7%B4%A0%E4%B9%8B%E7%9B%B8%E6%9C%BA/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E4%B8%89%E8%A6%81%E7%B4%A0%E4%B9%8B%E7%9B%B8%E6%9C%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="相机"><a href="#相机" class="headerlink" title="相机"></a>相机</h1><p>相机（Camera）用于定义场景的视角。Three.js 提供了多种相机类型，如：</p><ul><li>透视相机 PerspectiveCamera</li><li>正交相机 OrthographicCamera</li><li>立方相机 CubeCamera</li><li>阵列相机 ArrayCamera</li><li>立体相机 StereoCamera</li></ul><p>其中最常用的是透视相机（PerspectiveCamera），它模拟人眼的视角，具有近大远小的透视效果。</p><p>文档：<a href="https://threejs.rocyuan.top/docs/#api/zh/cameras/PerspectiveCamera">https://threejs.rocyuan.top/docs/#api/zh/cameras/PerspectiveCamera</a></p><h1 id="创建透视相机"><a href="#创建透视相机" class="headerlink" title="创建透视相机"></a>创建透视相机</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three&quot;</span>;<br><br><span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);<br></code></pre></td></tr></table></figure><p>创建透视相机有四个参数，超出视野范围会进行裁切：</p><ul><li>fov：视场角度，以度为单位</li><li>aspect：相机视锥体长宽比</li><li>near：相机视锥体近端面</li><li>far：相机视锥体远端面</li></ul><p><img src="/../../assets/web3d/1.jpg" alt="透视相机"></p><h1 id="常见操作"><a href="#常见操作" class="headerlink" title="常见操作"></a>常见操作</h1><h2 id="相机位置"><a href="#相机位置" class="headerlink" title="相机位置"></a>相机位置</h2><p>相机的位置可以通过相机的 position 属性来设置，默认值为 (0, 0, 0)。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">camera.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>);<br></code></pre></td></tr></table></figure><h2 id="相机朝向"><a href="#相机朝向" class="headerlink" title="相机朝向"></a>相机朝向</h2><p>相机朝向可以通过相机的 lookAt 方法来设置，它接受一个 THREE.Vector3 （三维向量）作为参数，表示相机看向的目标点。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">camera.<span class="hljs-title function_">lookAt</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure><h2 id="调整视场角（FOV）"><a href="#调整视场角（FOV）" class="headerlink" title="调整视场角（FOV）"></a>调整视场角（FOV）</h2><p>视场角（FOV）是相机视野的角度，它可以通过相机的 fov 属性来设置。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">camera.<span class="hljs-property">fov</span> = <span class="hljs-number">45</span>; <span class="hljs-comment">// 将视场角设置为 45 度</span><br>camera.<span class="hljs-title function_">updateProjectionMatrix</span>(); <span class="hljs-comment">// 修改 fov 后需要调用此方法更新相机</span><br></code></pre></td></tr></table></figure><h2 id="调整宽高比（Aspect-Ratio）"><a href="#调整宽高比（Aspect-Ratio）" class="headerlink" title="调整宽高比（Aspect Ratio）"></a>调整宽高比（Aspect Ratio）</h2><p>宽高比（Aspect Ratio）是相机视锥体的长宽比，它可以通过相机的 aspect 属性来设置。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">camera.<span class="hljs-property">aspect</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>; <span class="hljs-comment">// 将宽高比设置为 window 的宽高比</span><br>camera.<span class="hljs-title function_">updateProjectionMatrix</span>(); <span class="hljs-comment">// 修改 aspect 后需要调用此方法更新相机</span><br></code></pre></td></tr></table></figure><h2 id="调整近裁剪面和远裁剪面"><a href="#调整近裁剪面和远裁剪面" class="headerlink" title="调整近裁剪面和远裁剪面"></a>调整近裁剪面和远裁剪面</h2><p>近裁剪面（Near Clipping Plane）和远裁剪面（Far Clipping Plane）是相机视锥体的两个面，它们可以通过相机的 near 和 far 属性来设置。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">camera.<span class="hljs-property">near</span> = <span class="hljs-number">0.1</span>; <span class="hljs-comment">// 将近裁剪面设置为 0.1</span><br>camera.<span class="hljs-property">far</span> = <span class="hljs-number">1000</span>; <span class="hljs-comment">// 将远裁剪面设置为 1000</span><br>camera.<span class="hljs-title function_">updateProjectionMatrix</span>(); <span class="hljs-comment">// 修改 near 和 far 后需要调用此方法更新相机</span><br></code></pre></td></tr></table></figure><h2 id="相机旋转"><a href="#相机旋转" class="headerlink" title="相机旋转"></a>相机旋转</h2><p>相机的旋转可以通过相机的 rotation 属性来设置，单位是弧度。</p><p><strong>注意：threejs 中所有的旋转单位均为弧度</strong></p><p>弧度、角度 互转参考：<a href="../../js/%E3%80%90js%E3%80%91%E8%A7%92%E5%BA%A6%E5%BC%A7%E5%BA%A6%E8%BD%AC%E6%8D%A2">【js】角度弧度转换</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">camera.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">4</span>; <span class="hljs-comment">// 将相机绕 x 轴旋转 45 度</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】三要素之场景</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E4%B8%89%E8%A6%81%E7%B4%A0%E4%B9%8B%E5%9C%BA%E6%99%AF/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E4%B8%89%E8%A6%81%E7%B4%A0%E4%B9%8B%E5%9C%BA%E6%99%AF/</url>
    
    <content type="html"><![CDATA[<h1 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h1><p>场景（Scene）是一个容器或者说是一个“舞台”，用于存放所有的 3D 对象（如网格、模型）、光源、相机等，场景是一个树形结构，所有对象都可以通过父子关系组织起来，进行管理和操作，它继承自 <code>Object3D</code>。</p><p>文档：<a href="https://threejs.rocyuan.top/docs/?q=scene#api/zh/scenes/Scene">https://threejs.rocyuan.top/docs/?q=scene#api/zh/scenes/Scene</a></p><h1 id="创建场景"><a href="#创建场景" class="headerlink" title="创建场景"></a>创建场景</h1><p>场景的创建非常简单，只需要使用 <code>THREE.Scene</code> 即可，其详细属性和方法见 <a href="https://threejs.rocyuan.top/docs/?q=scene#api/zh/scenes/Scene">文档</a>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three&quot;</span>;<br><br><span class="hljs-comment">// 创建场景</span><br><span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();<br></code></pre></td></tr></table></figure><h1 id="常见操作"><a href="#常见操作" class="headerlink" title="常见操作"></a>常见操作</h1><p>它集成自 <code>Object3D</code> 类，所以 <code>Scene</code> 也有 <code>Object3D</code> 的一些方法和属性。</p><h2 id="添加对象"><a href="#添加对象" class="headerlink" title="添加对象"></a>添加对象</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">scene.<span class="hljs-title function_">add</span>(<span class="hljs-title class_">Object3D</span>);<br></code></pre></td></tr></table></figure><h2 id="删除对象"><a href="#删除对象" class="headerlink" title="删除对象"></a>删除对象</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">scene.<span class="hljs-title function_">remove</span>(<span class="hljs-title class_">Object3D</span>);<br></code></pre></td></tr></table></figure><h2 id="清空场景"><a href="#清空场景" class="headerlink" title="清空场景"></a>清空场景</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">while</span> (scene.<span class="hljs-property">children</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) &#123;<br>  scene.<span class="hljs-title function_">remove</span>(scene.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>]); <span class="hljs-comment">// 移除所有子对象</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="设置背景"><a href="#设置背景" class="headerlink" title="设置背景"></a>设置背景</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 纯颜色</span><br>scene.<span class="hljs-property">background</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(<span class="hljs-number">0x000000</span>);<br><span class="hljs-comment">// 背景贴图纹理</span><br>scene.<span class="hljs-property">background</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">TextureLoader</span>().<span class="hljs-title function_">load</span>(<span class="hljs-string">&quot;images/texture.jpg&quot;</span>);<br><span class="hljs-comment">// 立方贴图纹理（天空盒）</span><br><span class="hljs-comment">// 图片宽高应一致，否则图片显示不齐</span><br><span class="hljs-comment">// 图片宽高比应为 1:1 ，否则不显示</span><br>scene.<span class="hljs-property">background</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">CubeTextureLoader</span>().<span class="hljs-title function_">setPath</span>(<span class="hljs-string">&quot;/images/&quot;</span>).<span class="hljs-title function_">load</span>([<br>  <span class="hljs-string">&quot;px.jpg&quot;</span>, <span class="hljs-comment">// Positive X  正X</span><br>  <span class="hljs-string">&quot;nx.jpg&quot;</span>, <span class="hljs-comment">// Negative X  负X</span><br>  <span class="hljs-string">&quot;py.jpg&quot;</span>, <span class="hljs-comment">// Positive Y  正Y</span><br>  <span class="hljs-string">&quot;ny.jpg&quot;</span>, <span class="hljs-comment">// Negative Y  负Y</span><br>  <span class="hljs-string">&quot;pz.jpg&quot;</span>, <span class="hljs-comment">// Positive Z  正Z</span><br>  <span class="hljs-string">&quot;nz.jpg&quot;</span>, <span class="hljs-comment">// Negative Z  负Z</span><br>]);<br></code></pre></td></tr></table></figure><h2 id="添加雾效果"><a href="#添加雾效果" class="headerlink" title="添加雾效果"></a>添加雾效果</h2><p><a href="https://threejs.rocyuan.top/docs/?q=fog#api/zh/scenes/Fog">线性雾</a>：雾的密度是随着设置的 近距离 到 远距离 线性增大的，相机到近距离是看不到雾的。</p><p><a href="https://threejs.rocyuan.top/docs/?q=fog#api/zh/scenes/FogExp2">指数雾</a>：在相机附近提供清晰的视野，随着距离相机越远，雾的浓度随着设置的指数增长。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 线性雾（颜色，近，远）</span><br>scene.<span class="hljs-property">fog</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Fog</span>(<span class="hljs-number">0x000000</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1000</span>);<br><span class="hljs-comment">// 指数雾（颜色，密度增长指数）</span><br>scene.<span class="hljs-property">fog</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">FogExp2</span>(<span class="hljs-number">0x000000</span>, <span class="hljs-number">0.00025</span>);<br></code></pre></td></tr></table></figure><h2 id="遍历场景中的对象"><a href="#遍历场景中的对象" class="headerlink" title="遍历场景中的对象"></a>遍历场景中的对象</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js">scene.<span class="hljs-title function_">traverse</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">object</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(object);<br>  <span class="hljs-comment">// 对每个对象执行操作 如让每个模型对象旋转</span><br>  <span class="hljs-keyword">if</span> (object.<span class="hljs-property">type</span> === <span class="hljs-string">&quot;Mesh&quot;</span>) &#123;<br>    object.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> += <span class="hljs-number">0.01</span>;<br>    object.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> += <span class="hljs-number">0.01</span>;<br>    object.<span class="hljs-property">rotation</span>.<span class="hljs-property">z</span> += <span class="hljs-number">0.01</span>;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】笛卡尔坐标系</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/</url>
    
    <content type="html"><![CDATA[<h1 id="笛卡尔坐标系"><a href="#笛卡尔坐标系" class="headerlink" title="笛卡尔坐标系"></a>笛卡尔坐标系</h1><p>笛卡尔坐标系（又称直角坐标系）是用于描述二维或三维空间中点位置的最基本坐标系；通过三个互相垂直的轴（x、y、z）定义空间中的点，它又分为 右手坐标系 和 左手坐标系。</p><p>Three.js 中使用的就是 笛卡尔坐标系 中的 右手坐标系。</p><p><img src="/../../assets/web3d/axes-1.jpg" alt="左右手坐标系"></p><h1 id="右手坐标系（Three-js-应用）"><a href="#右手坐标系（Three-js-应用）" class="headerlink" title="右手坐标系（Three.js 应用）"></a>右手坐标系（Three.js 应用）</h1><h2 id="判断方法"><a href="#判断方法" class="headerlink" title="判断方法"></a>判断方法</h2><p>伸出右手，拇指&#x3D;X 轴，食指&#x3D;Y 轴，中指&#x3D;Z 轴</p><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ul><li>Z 轴方向：当 X 轴向右，Y 轴向上时，Z 轴指向观察者（屏幕外）</li><li>旋转方向：逆时针，用右手法则（拇指指向旋转轴正方向，四指弯曲方向为正旋转方向）</li></ul><h1 id="左手坐标系"><a href="#左手坐标系" class="headerlink" title="左手坐标系"></a>左手坐标系</h1><h2 id="判断方法-1"><a href="#判断方法-1" class="headerlink" title="判断方法"></a>判断方法</h2><p>伸出左手，拇指&#x3D;X 轴，食指&#x3D;Y 轴，中指&#x3D;Z 轴</p><h2 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h2><ul><li>Z 轴方向：当 X 轴向右，Y 轴向上时，Z 轴指向屏幕内</li><li>旋转方向：顺时针，用左手法则（拇指指向旋转轴正方向，四指弯曲方向为正旋转方向）</li></ul>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【threejs】基本概念</title>
    <link href="/web3d/%E3%80%90threejs%E3%80%91%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"/>
    <url>/web3d/%E3%80%90threejs%E3%80%91%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/</url>
    
    <content type="html"><![CDATA[<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>threejs 是一个基于 WebGL 的 3D 引擎，它可以在浏览器中创建 3D 场景，并且可以通过 JavaScript 来控制三维场景中的元素。由于官方文档访问较慢，建议访问：<a href="https://threejs.rocyuan.top/">https://threejs.rocyuan.top</a>。</p><p><strong>注意：文章中所有的代码均使用 vue3 进行编写。</strong></p><h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p>threejs 源码目录主要结构如下：</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">three</span>.js<br>├── build     <span class="hljs-comment"> // 编译后的库文件</span><br>├── docs      <span class="hljs-comment"> // API文档</span><br>├── examples  <span class="hljs-comment"> // 示例（平时开发或者学习的资源参考）</span><br>│   ├── jsm   <span class="hljs-comment"> // 扩展库</span><br>├── editor    <span class="hljs-comment"> // 编辑器</span><br>├── manual    <span class="hljs-comment"> // 手册文档</span><br>├── playground<span class="hljs-comment"> // 在线编辑环境</span><br>└── src       <span class="hljs-comment"> // 源代码</span><br></code></pre></td></tr></table></figure><p>注意：扩展库的导入 <code>three/addons/...</code> 等价于 <code>three/examples/jsm/...</code> ；<code>addons/*</code> 是 <code>examples/jsm/*</code> 目录的导出别名。</p><h1 id="安装引入"><a href="#安装引入" class="headerlink" title="安装引入"></a>安装引入</h1><p>安装引入方式等问题官方文档写的已经很清楚了，就不赘述了。</p><p>文档：<a href="https://threejs.rocyuan.top/docs/#manual/zh/introduction/Installation">https://threejs.rocyuan.top/docs/#manual/zh/introduction/Installation</a></p><h1 id="三要素"><a href="#三要素" class="headerlink" title="三要素"></a>三要素</h1><p>threejs 绘制 3d 图形的三要素：</p><ul><li>场景（Scene）：场景是一个容器，用于存储所有的物体和光源等。</li><li>相机（Camera）：相机是一个虚拟的眼睛，用于观察场景中的一切物体。</li><li>渲染器（Renderer）：渲染器是一个将场景渲染到屏幕上的工具。</li></ul><h1 id="建立三维场景"><a href="#建立三维场景" class="headerlink" title="建立三维场景"></a>建立三维场景</h1><p>使用 threejs 三要素建立一个简单的三维场景。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;threeContainer&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;three-container&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; ref, onMounted &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;three&quot;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> threeContainer = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">init3D</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-comment">// 场景</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();</span><br><span class="language-javascript">    <span class="hljs-comment">// 相机（透视相机）</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientWidth</span> / threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);</span><br><span class="language-javascript">    <span class="hljs-comment">// 渲染器</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>();</span><br><span class="language-javascript">    renderer.<span class="hljs-title function_">setSize</span>(threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientWidth</span>, threeContainer.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>);</span><br><span class="language-javascript">    threeContainer.<span class="hljs-property">value</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 渲染场景 （一般会使用 requestAnimationFrame 根据帧率一直执行渲染）</span></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">requestAnimationFrame</span>(animate);</span><br><span class="language-javascript">      renderer.<span class="hljs-title function_">render</span>(scene, camera);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-title function_">animate</span>();</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">init3D</span>();</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.three-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>至此，三维场景已经建立完成，后续将详细介绍三要素中的 场景、相机、渲染器。</p>]]></content>
    
    
    <categories>
      
      <category>web3D</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】web3d需求制作</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91web3d%E9%9C%80%E6%B1%82%E5%88%B6%E4%BD%9C/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91web3d%E9%9C%80%E6%B1%82%E5%88%B6%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<h1 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h1><p>使用 <code>3D Builder</code> 和 <code>three.js</code> 建设某库区3d完整场景，实时显示罐中的液位、温度、重量，泵阀的开关状态。  </p><ul><li><code>3D Builder</code> 是一款简单易用的建模软件  </li><li><code>three.js</code> 是一个 3D js 库</li></ul><p>建模的软件有很多如 <code>3D MAX</code>  <code>Maya</code>  <code>Blender</code> 等…,，这些软件都比较重，学习起来也比较费时（主业做前端，没必要专门搞建模），所以我选择了一款简单易用的建模软件 <code>3D Builder</code> 。</p><p>先用 <code>3D Builder</code> 创建场景中不变的部分当做 3D 背景的模型（如上的地、房屋、罐、墙体…）；创建完成后，另存为 <code>.glb</code> 格式提供给 <code>three.js</code> 进行加载，然后在代码中调整可变的部分（如上的液位进度、温度展示、重量展示、泵阀状态…）。</p><p>结果如下：</p><p><img src="/../../assets/%E3%80%903d%E3%80%91web3d/1.jpg"></p><h1 id="建模"><a href="#建模" class="headerlink" title="建模"></a>建模</h1><h2 id="3D-Builder-下载"><a href="#3D-Builder-下载" class="headerlink" title="3D Builder 下载"></a>3D Builder 下载</h2><p>在微软商店中搜索： <code>3D Builder</code> 下载</p><p><img src="/../../assets/%E3%80%903d%E3%80%91web3d/2.jpg"></p><h2 id="3D-Builder-使用"><a href="#3D-Builder-使用" class="headerlink" title="3D Builder 使用"></a>3D Builder 使用</h2><p>打开软件后，点击，“新建场景” 创建3d场景；创建好后，通过插入“立方体”、“圆柱体”、“球体”、“棱锥形”、“六边形”……等图形进行创作；可以将插入的形状进行“拆分”、“平滑”、“浮雕”、“拉伸”、“合并”、“相交”、“减去”、“挖洞”、“绘制颜色”、“绘制纹理”……等一系列操作；总之发挥想象力创作出能够还原需求需要的3d场景。</p><p><img src="/../../assets/%E3%80%903d%E3%80%91web3d/3.jpg"></p><p>也可以将一部分（比如房子）创建成单独的一个文件，建模完成后可以直接导入添加到场景文件中。</p><p><img src="/../../assets/%E3%80%903d%E3%80%91web3d/4.jpg"></p><p>上图的房子就是利用八个立方体创作出来的，门窗可以找合适的图片贴上去（会ps更好，图片不合适的话稍微p一下）。</p><h1 id="建模完成"><a href="#建模完成" class="headerlink" title="建模完成"></a>建模完成</h1><p>3D Builder 默认的源文件后缀为 <code>.3mf</code> ；创建好模型后为了在 <code>threejs</code> 中使用，需要另存为 <code>threejs</code> 支持的格式 <code>.glb</code> 或者 <code>.gltf</code> （我一般储存为 <code>.glb</code> ）。</p><p><img src="/../../assets/%E3%80%903d%E3%80%91web3d/6.jpg"></p><p><img src="/../../assets/%E3%80%903d%E3%80%91web3d/7.jpg"></p><p><img src="/../../assets/%E3%80%903d%E3%80%91web3d/8.jpg"></p><h1 id="创建Threejs"><a href="#创建Threejs" class="headerlink" title="创建Threejs"></a>创建Threejs</h1><p>threejs官方文档：<br><a href="https://threejs.org/docs/index.html#manual/zh/">three.js docs (threejs.org)</a><br>使用起来比较复杂繁琐，参考官方示例项目完成一款方便完成需求的编辑器。</p><p>编辑器github地址：<a href="https://github.com/rocyuan666/threejs-tool">threejs-tool</a></p><p><img src="/../../assets/%E3%80%903d%E3%80%91web3d/9.jpg"></p><p>举例：3d文字变化<br>左下方选择 <code>GLB模型</code> 将我们创建的3d场景导入进来，创建 <code>文本</code> 放入3d场景中，将文字拖动至需要展示的地方；通过填写右侧 <code>绑定</code> 下的属性 <code>显示值</code> （接口返回数据的key值）改变文字。以上项目需求的液位是通过创建 <code>立方体</code> 绑定 <code>缩放Y</code> 实现的；状态是通过添加 <code>圆锥</code> 、 <code>球体</code> 等 绑定 <code>颜色</code> 值实现（不同颜色代表不同状态）。</p><p><img src="/../../assets/%E3%80%903d%E3%80%91web3d/11.jpg"></p><h1 id="查看预览"><a href="#查看预览" class="headerlink" title="查看预览"></a>查看预览</h1><p>访问 <code>/play</code> 路由访问。</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】noVNC使用配置</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91noVNC%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91noVNC%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><p>git、node安装省略…</p><p>UltraVNC VNC server 下载地址</p><p><a href="https://uvnc.com/">https://uvnc.com/</a></p><p>noVNC项目 git地址</p><p><a href="https://github.com/novnc/noVNC">https://github.com/novnc/noVNC</a></p><p>noVNC所需WebSocket项目 git地址</p><p><a href="https://github.com/novnc/websockify-js">https://github.com/novnc/websockify-js</a></p><h1 id="安装UltraVNC"><a href="#安装UltraVNC" class="headerlink" title="安装UltraVNC"></a>安装UltraVNC</h1><p>安装VNC服务，next……</p><p><img src="/../../assets/%E3%80%90noVNC%E3%80%91noVNC%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE/1.png"></p><p>安装完成运行VNC server，右键右下角，可设置密码、端口等。。。</p><p><img src="/../../assets/%E3%80%90noVNC%E3%80%91noVNC%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE/2.png"></p><p><img src="/../../assets/%E3%80%90noVNC%E3%80%91noVNC%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE/3.png"></p><p><img src="/../../assets/%E3%80%90noVNC%E3%80%91noVNC%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE/4.png"></p><h1 id="克隆项目"><a href="#克隆项目" class="headerlink" title="克隆项目"></a>克隆项目</h1><p>noVNC 和 websockify-js项目克隆完成后，进入websockify-js项目中的websockify目录安装依赖。修改websockify.js 中 filename拼接访问的html。</p><p><img src="/../../assets/%E3%80%90noVNC%E3%80%91noVNC%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE/5.png"></p><h1 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h1><p>说明见上图（完整功能需要指定 pem及key）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">node websockify.js --web ../../noVNC-1.4.0/ 9000 localhost:5900<br></code></pre></td></tr></table></figure><h1 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h1><p>输入VNC服务设置的密码进入</p><p><img src="/../../assets/%E3%80%90noVNC%E3%80%91noVNC%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE/6.png"></p><p><img src="/../../assets/%E3%80%90noVNC%E3%80%91noVNC%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE/7.png"></p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【ts】类型工具</title>
    <link href="/ts/%E3%80%90ts%E3%80%91%E5%B8%B8%E7%94%A8%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%B7%A5%E5%85%B7/"/>
    <url>/ts/%E3%80%90ts%E3%80%91%E5%B8%B8%E7%94%A8%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%B7%A5%E5%85%B7/</url>
    
    <content type="html"><![CDATA[<p>TypeScript 内部提供了一些方便使用的类型工具。</p><h1 id="Awaited"><a href="#Awaited" class="headerlink" title="Awaited&lt;Type&gt;"></a><code>Awaited&lt;Type&gt;</code></h1><p><code>Awaited&lt;Type&gt;</code>用来取出 Promise 的返回值类型，适合用在描述<code>then()</code>方法和 await 命令的参数类型。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// string</span><br><span class="hljs-keyword">type</span> A = <span class="hljs-title class_">Awaited</span>&lt;<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;;<br></code></pre></td></tr></table></figure><p>上面示例中，<code>Awaited&lt;Type&gt;</code>会返回 Promise 的返回值类型（string）。</p><p>它也可以返回多重 Promise 的返回值类型。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// number</span><br><span class="hljs-keyword">type</span> B = <span class="hljs-title class_">Awaited</span>&lt;<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">number</span>&gt;&gt;&gt;;<br></code></pre></td></tr></table></figure><p>如果它的类型参数不是 Promise 类型，那么就会原样返回。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// number | boolean</span><br><span class="hljs-keyword">type</span> C = <span class="hljs-title class_">Awaited</span>&lt;<span class="hljs-built_in">boolean</span> | <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">number</span>&gt;&gt;;<br></code></pre></td></tr></table></figure><p>上面示例中，类型参数是一个联合类型，其中的<code>boolean</code>会原样返回，所以最终返回的是<code>number|boolean</code>。</p><p><code>Awaited&lt;Type&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Awaited</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span><br>  ? T<br>  : T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span> &amp; &#123;<br>      <span class="hljs-title function_">then</span>(<span class="hljs-attr">onfulfilled</span>: infer F, ...<span class="hljs-attr">args</span>: infer _): <span class="hljs-built_in">any</span>;<br>    &#125;<br>  ? F <span class="hljs-keyword">extends</span> (<span class="hljs-attr">value</span>: infer V, ...<span class="hljs-attr">args</span>: infer _) =&gt; <span class="hljs-built_in">any</span><br>    ? <span class="hljs-title class_">Awaited</span>&lt;V&gt;<br>    : <span class="hljs-built_in">never</span><br>  : T;<br></code></pre></td></tr></table></figure><h1 id="Partial"><a href="#Partial" class="headerlink" title="Partial&lt;Type&gt;"></a><code>Partial&lt;Type&gt;</code></h1><p><code>Partial&lt;Type&gt;</code>返回一个新类型，将参数类型<code>Type</code>的所有属性变为可选属性。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> A &#123;<br>  <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">type</span> T = <span class="hljs-title class_">Partial</span>&lt;A&gt;; <span class="hljs-comment">// &#123; x?: number; y?: number; &#125;</span><br></code></pre></td></tr></table></figure><p><code>Partial&lt;Type&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Partial</span>&lt;T&gt; = &#123;<br>  [P <span class="hljs-keyword">in</span> keyof T]?: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="Required"><a href="#Required" class="headerlink" title="Required&lt;Type&gt;"></a><code>Required&lt;Type&gt;</code></h1><p><code>Required&lt;Type&gt;</code>返回一个新类型，将参数类型<code>Type</code>的所有属性变为必选属性。它与<code>Partial&lt;Type&gt;</code>的作用正好相反。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> A &#123;<br>  x?: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">type</span> T = <span class="hljs-title class_">Required</span>&lt;A&gt;; <span class="hljs-comment">// &#123; x: number; y: number; &#125;</span><br></code></pre></td></tr></table></figure><p><code>Required&lt;Type&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Required</span>&lt;T&gt; = &#123;<br>  [P <span class="hljs-keyword">in</span> keyof T]-?: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure><p>上面代码中，符号<code>-?</code>表示去除可选属性的“问号”，使其变成必选属性。</p><p>相对应地，符号<code>+?</code>表示增加可选属性的“问号”，等同于<code>?</code>。因此，前面的<code>Partial&lt;Type&gt;</code>的定义也可以写成下面这样。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Partial</span>&lt;T&gt; = &#123;<br>  [P <span class="hljs-keyword">in</span> keyof T]+?: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="Readonly"><a href="#Readonly" class="headerlink" title="Readonly&lt;Type&gt;"></a><code>Readonly&lt;Type&gt;</code></h1><p><code>Readonly&lt;Type&gt;</code>返回一个新类型，将参数类型<code>Type</code>的所有属性变为只读属性。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> A &#123;<br>  <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>;<br>  y?: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-comment">// &#123; readonly x: number; readonly y?: number; &#125;</span><br><span class="hljs-keyword">type</span> T = <span class="hljs-title class_">Readonly</span>&lt;A&gt;;<br></code></pre></td></tr></table></figure><p>上面示例中，<code>y</code>是可选属性，<code>Readonly&lt;Type&gt;</code>不会改变这一点，只会让<code>y</code>变成只读。</p><p><code>Readonly&lt;Type&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Readonly</span>&lt;T&gt; = &#123;<br>  <span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure><p>我们可以自定义类型工具<code>Mutable&lt;Type&gt;</code>，将参数类型的所有属性变成可变属性。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Mutable</span>&lt;T&gt; = &#123;<br>  -<span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure><p>上面代码中，<code>-readonly</code>表示去除属性的只读标志。</p><p>相应地，<code>+readonly</code>就表示增加只读标志，等同于<code>readonly</code>。因此，<code>Readonly&lt;Type&gt;</code>的实现也可以写成下面这样。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Readonly</span>&lt;T&gt; = &#123;<br>  +<span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure><p><code>Readonly&lt;Type&gt;</code>可以与<code>Partial&lt;Type&gt;</code>结合使用，将所有属性变成只读的可选属性。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Person</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">worker</span>: <span class="hljs-title class_">Readonly</span>&lt;<span class="hljs-title class_">Partial</span>&lt;<span class="hljs-title class_">Person</span>&gt;&gt; = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;张三&quot;</span> &#125;;<br><br>worker.<span class="hljs-property">name</span> = <span class="hljs-string">&quot;李四&quot;</span>; <span class="hljs-comment">// 报错</span><br></code></pre></td></tr></table></figure><h1 id="Record"><a href="#Record" class="headerlink" title="Record&lt;Keys, Type&gt;"></a><code>Record&lt;Keys, Type&gt;</code></h1><p><code>Record&lt;Keys, Type&gt;</code>返回一个对象类型，参数<code>Keys</code>用作键名，参数<code>Type</code>用作键值类型。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// &#123; a: number &#125;</span><br><span class="hljs-keyword">type</span> T = <span class="hljs-title class_">Record</span>&lt;<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-built_in">number</span>&gt;;<br></code></pre></td></tr></table></figure><p>上面示例中，<code>Record&lt;Keys, Type&gt;</code>的第一个参数<code>a</code>，用作对象的键名，第二个参数<code>number</code>是<code>a</code>的键值类型。</p><p>参数<code>Keys</code>可以是联合类型，这时会依次展开为多个键。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// &#123; a: number, b: number &#125;</span><br><span class="hljs-keyword">type</span> T = <span class="hljs-title class_">Record</span>&lt;<span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-built_in">number</span>&gt;;<br></code></pre></td></tr></table></figure><p>上面示例中，第一个参数是联合类型<code>&#39;a&#39;|&#39;b&#39;</code>，展开成两个键名<code>a</code>和<code>b</code>。</p><p>如果参数<code>Type</code>是联合类型，就表明键值是联合类型。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// &#123; a: number|string &#125;</span><br><span class="hljs-keyword">type</span> T = <span class="hljs-title class_">Record</span>&lt;<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>&gt;;<br></code></pre></td></tr></table></figure><p>参数<code>Keys</code>的类型必须兼容<code>string|number|symbol</code>，否则不能用作键名，会报错。</p><p><code>Record&lt;Keys, Type&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Record</span>&lt;K <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">symbol</span>, T&gt; = &#123; [P <span class="hljs-keyword">in</span> K]: T &#125;;<br></code></pre></td></tr></table></figure><h1 id="Pick"><a href="#Pick" class="headerlink" title="Pick&lt;Type, Keys&gt;"></a><code>Pick&lt;Type, Keys&gt;</code></h1><p><code>Pick&lt;Type, Keys&gt;</code>返回一个新的对象类型，第一个参数<code>Type</code>是一个对象类型，第二个参数<code>Keys</code>是<code>Type</code>里面被选定的键名。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> A &#123;<br>  <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">Pick</span>&lt;A, <span class="hljs-string">&quot;x&quot;</span>&gt;; <span class="hljs-comment">// &#123; x: number &#125;</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">Pick</span>&lt;A, <span class="hljs-string">&quot;y&quot;</span>&gt;; <span class="hljs-comment">// &#123; y: number &#125;</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T3</span> = <span class="hljs-title class_">Pick</span>&lt;A, <span class="hljs-string">&quot;x&quot;</span> | <span class="hljs-string">&quot;y&quot;</span>&gt;; <span class="hljs-comment">// &#123; x: number; y: number &#125;</span><br></code></pre></td></tr></table></figure><p>上面示例中，<code>Pick&lt;Type, Keys&gt;</code>会从对象类型<code>A</code>里面挑出指定的键名，组成一个新的对象类型。</p><p>指定的键名<code>Keys</code>必须是对象键名<code>Type</code>里面已经存在的键名，否则会报错。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> A &#123;<br>  <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">type</span> T = <span class="hljs-title class_">Pick</span>&lt;A, <span class="hljs-string">&quot;z&quot;</span>&gt;; <span class="hljs-comment">// 报错</span><br></code></pre></td></tr></table></figure><p>上面示例中，对象类型<code>A</code>不存在键名<code>z</code>，所以报错了。</p><p><code>Pick&lt;Type, Keys&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Pick</span>&lt;T, K <span class="hljs-keyword">extends</span> keyof T&gt; = &#123;<br>  [P <span class="hljs-keyword">in</span> K]: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="Omit"><a href="#Omit" class="headerlink" title="Omit&lt;Type, Keys&gt;"></a><code>Omit&lt;Type, Keys&gt;</code></h1><p><code>Omit&lt;Type, Keys&gt;</code>用来从对象类型<code>Type</code>中，删除指定的属性<code>Keys</code>，组成一个新的对象类型返回。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> A &#123;<br>  <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">Omit</span>&lt;A, <span class="hljs-string">&quot;x&quot;</span>&gt;; <span class="hljs-comment">// &#123; y: number &#125;</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">Omit</span>&lt;A, <span class="hljs-string">&quot;y&quot;</span>&gt;; <span class="hljs-comment">// &#123; x: number &#125;</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T3</span> = <span class="hljs-title class_">Omit</span>&lt;A, <span class="hljs-string">&quot;x&quot;</span> | <span class="hljs-string">&quot;y&quot;</span>&gt;; <span class="hljs-comment">// &#123; &#125;</span><br></code></pre></td></tr></table></figure><p>上面示例中，<code>Omit&lt;Type, Keys&gt;</code>从对象类型<code>A</code>里面删除指定属性，返回剩下的属性。</p><p>指定删除的键名<code>Keys</code>可以是对象类型<code>Type</code>中不存在的属性，但必须兼容<code>string|number|symbol</code>。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> A &#123;<br>  <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">type</span> T = <span class="hljs-title class_">Omit</span>&lt;A, <span class="hljs-string">&quot;z&quot;</span>&gt;; <span class="hljs-comment">// &#123; x: number; y: number &#125;</span><br></code></pre></td></tr></table></figure><p>上面示例中，对象类型<code>A</code>中不存在属性<code>z</code>，所以就原样返回了。</p><p><code>Omit&lt;Type, Keys&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Omit</span>&lt;T, K <span class="hljs-keyword">extends</span> keyof <span class="hljs-built_in">any</span>&gt; = <span class="hljs-title class_">Pick</span>&lt;T, <span class="hljs-title class_">Exclude</span>&lt;keyof T, K&gt;&gt;;<br></code></pre></td></tr></table></figure><h1 id="Exclude"><a href="#Exclude" class="headerlink" title="Exclude&lt;UnionType, ExcludedMembers&gt;"></a><code>Exclude&lt;UnionType, ExcludedMembers&gt;</code></h1><p><code>Exclude&lt;UnionType, ExcludedMembers&gt;</code>用来从联合类型<code>UnionType</code>里面，删除某些类型<code>ExcludedMembers</code>，组成一个新的类型返回。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">Exclude</span>&lt;<span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;b&quot;</span> | <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;a&quot;</span>&gt;; <span class="hljs-comment">// &#x27;b&#x27;|&#x27;c&#x27;</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">Exclude</span>&lt;<span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;b&quot;</span> | <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;b&quot;</span>&gt;; <span class="hljs-comment">// &#x27;c&#x27;</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T3</span> = <span class="hljs-title class_">Exclude</span>&lt;<span class="hljs-built_in">string</span> | (<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>), <span class="hljs-title class_">Function</span>&gt;; <span class="hljs-comment">// string</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T4</span> = <span class="hljs-title class_">Exclude</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">string</span>[], <span class="hljs-built_in">any</span>[]&gt;; <span class="hljs-comment">// string</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T5</span> = <span class="hljs-title class_">Exclude</span>&lt;(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>) | <span class="hljs-literal">null</span>, <span class="hljs-title class_">Function</span>&gt;; <span class="hljs-comment">// null</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T6</span> = <span class="hljs-title class_">Exclude</span>&lt;<span class="hljs-number">200</span> | <span class="hljs-number">400</span>, <span class="hljs-number">200</span> | <span class="hljs-number">201</span>&gt;; <span class="hljs-comment">// 400</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T7</span> = <span class="hljs-title class_">Exclude</span>&lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">boolean</span>&gt;; <span class="hljs-comment">// number</span><br></code></pre></td></tr></table></figure><p><code>Exclude&lt;UnionType, ExcludedMembers&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Exclude</span>&lt;T, U&gt; = T <span class="hljs-keyword">extends</span> U ? <span class="hljs-built_in">never</span> : T;<br></code></pre></td></tr></table></figure><p>上面代码中，等号右边的部分，表示先判断<code>T</code>是否兼容<code>U</code>，如果是的就返回<code>never</code>类型，否则返回当前类型<code>T</code>。由于<code>never</code>类型是任何其他类型的子类型，它跟其他类型组成联合类型时，可以直接将<code>never</code>类型从联合类型中“消掉”，因此<code>Exclude&lt;T, U&gt;</code>就相当于删除兼容的类型，剩下不兼容的类型。</p><h1 id="Extract"><a href="#Extract" class="headerlink" title="Extract&lt;Type, Union&gt;"></a><code>Extract&lt;Type, Union&gt;</code></h1><p><code>Extract&lt;UnionType, Union&gt;</code>用来从联合类型<code>UnionType</code>之中，提取指定类型<code>Union</code>，组成一个新类型返回。它与<code>Exclude&lt;T, U&gt;</code>正好相反。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">Extract</span>&lt;<span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;b&quot;</span> | <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;a&quot;</span>&gt;; <span class="hljs-comment">// &#x27;a&#x27;</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">Extract</span>&lt;<span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;b&quot;</span> | <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;b&quot;</span>&gt;; <span class="hljs-comment">// &#x27;a&#x27;|&#x27;b&#x27;</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T3</span> = <span class="hljs-title class_">Extract</span>&lt;<span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;b&quot;</span> | <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;d&quot;</span>&gt;; <span class="hljs-comment">// &#x27;a&#x27;</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T4</span> = <span class="hljs-title class_">Extract</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">string</span>[], <span class="hljs-built_in">any</span>[]&gt;; <span class="hljs-comment">// string[]</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T5</span> = <span class="hljs-title class_">Extract</span>&lt;(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>) | <span class="hljs-literal">null</span>, <span class="hljs-title class_">Function</span>&gt;; <span class="hljs-comment">// () =&gt; void</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T6</span> = <span class="hljs-title class_">Extract</span>&lt;<span class="hljs-number">200</span> | <span class="hljs-number">400</span>, <span class="hljs-number">200</span> | <span class="hljs-number">201</span>&gt;; <span class="hljs-comment">// 200</span><br></code></pre></td></tr></table></figure><p>如果参数类型<code>Union</code>不包含在联合类型<code>UnionType</code>之中，则返回<code>never</code>类型。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> T = <span class="hljs-title class_">Extract</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>, <span class="hljs-built_in">boolean</span>&gt;; <span class="hljs-comment">// never</span><br></code></pre></td></tr></table></figure><p><code>Extract&lt;UnionType, Union&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Extract</span>&lt;T, U&gt; = T <span class="hljs-keyword">extends</span> U ? T : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure><h1 id="NonNullable"><a href="#NonNullable" class="headerlink" title="NonNullable&lt;Type&gt;"></a><code>NonNullable&lt;Type&gt;</code></h1><p><code>NonNullable&lt;Type&gt;</code>用来从联合类型<code>Type</code>删除<code>null</code>类型和<code>undefined</code>类型，组成一个新类型返回，也就是返回<code>Type</code>的非空类型版本。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// string|number</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">NonNullable</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span>&gt;;<br><br><span class="hljs-comment">// string[]</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">NonNullable</span>&lt;<span class="hljs-built_in">string</span>[] | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>&gt;;<br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T3</span> = <span class="hljs-title class_">NonNullable</span>&lt;<span class="hljs-built_in">boolean</span>&gt;; <span class="hljs-comment">// boolean</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T4</span> = <span class="hljs-title class_">NonNullable</span>&lt;<span class="hljs-built_in">number</span> | <span class="hljs-literal">null</span>&gt;; <span class="hljs-comment">// number</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T5</span> = <span class="hljs-title class_">NonNullable</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>&gt;; <span class="hljs-comment">// string</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T6</span> = <span class="hljs-title class_">NonNullable</span>&lt;<span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>&gt;; <span class="hljs-comment">// never</span><br></code></pre></td></tr></table></figure><p><code>NonNullable&lt;Type&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">NonNullable</span>&lt;T&gt; = T &amp; &#123;&#125;;<br></code></pre></td></tr></table></figure><p>上面代码中，<code>T &amp; &#123;&#125;</code>等同于求<code>T &amp; Object</code>的交叉类型。由于 TypeScript 的非空值都属于<code>Object</code>的子类型，所以会返回自身；而<code>null</code>和<code>undefined</code>不属于<code>Object</code>，会返回<code>never</code>类型。</p><h1 id="Parameters"><a href="#Parameters" class="headerlink" title="Parameters&lt;Type&gt;"></a><code>Parameters&lt;Type&gt;</code></h1><p><code>Parameters&lt;Type&gt;</code>从函数类型<code>Type</code>里面提取参数类型，组成一个元组返回。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// []</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-function">(<span class="hljs-params">s: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>&gt;; <span class="hljs-comment">// [s:string]</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T3</span> = <span class="hljs-title class_">Parameters</span>&lt;&lt;T&gt;<span class="hljs-function">(<span class="hljs-params">arg: T</span>) =&gt;</span> T&gt;; <span class="hljs-comment">// [arg: unknown]</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T4</span> = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-function">(<span class="hljs-params">x: &#123; a: <span class="hljs-built_in">number</span>; b: <span class="hljs-built_in">string</span> &#125;</span>) =&gt;</span> <span class="hljs-built_in">void</span>&gt;; <span class="hljs-comment">// [x: &#123; a: number, b: string &#125;]</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T5</span> = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-function">(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// [a:number, b:number]</span><br></code></pre></td></tr></table></figure><p>上面示例中，<code>Parameters&lt;Type&gt;</code>的返回值会包括函数的参数名，这一点需要注意。</p><p>如果参数类型<code>Type</code>不是带有参数的函数形式，会报错。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 报错</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-built_in">string</span>&gt;;<br><br><span class="hljs-comment">// 报错</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-title class_">Function</span>&gt;;<br></code></pre></td></tr></table></figure><p>由于<code>any</code>和<code>never</code>是两个特殊值，会返回<code>unknown[]</code>和<code>never</code>。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-built_in">any</span>&gt;; <span class="hljs-comment">// unknown[]</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-built_in">never</span>&gt;; <span class="hljs-comment">// never</span><br></code></pre></td></tr></table></figure><p><code>Parameters&lt;Type&gt;</code>主要用于从外部模块提供的函数类型中，获取参数类型。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">SecretName</span> &#123;<br>  <span class="hljs-attr">first</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">last</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">SecretSanta</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-title class_">SecretName</span>;<br>  <span class="hljs-attr">gift</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getGift</span>(<span class="hljs-params">name: SecretName, gift: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">SecretSanta</span> &#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure><p>上面示例中，模块只输出了函数<code>getGift()</code>，没有输出参数<code>SecretName</code>和返回值<code>SecretSanta</code>。这时就可以通过<code>Parameters&lt;T&gt;</code>和<code>ReturnType&lt;T&gt;</code>拿到这两个接口类型。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ParaT</span> = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-keyword">typeof</span> getGift&gt;[<span class="hljs-number">0</span>]; <span class="hljs-comment">// SecretName</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ReturnT</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-keyword">typeof</span> getGift&gt;; <span class="hljs-comment">// SecretSanta</span><br></code></pre></td></tr></table></figure><p><code>Parameters&lt;Type&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Parameters</span>&lt;T <span class="hljs-keyword">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt; = T <span class="hljs-keyword">extends</span> (...<span class="hljs-attr">args</span>: infer P) =&gt; <span class="hljs-built_in">any</span> ? P : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure><h1 id="ConstructorParameters"><a href="#ConstructorParameters" class="headerlink" title="ConstructorParameters&lt;Type&gt;"></a><code>ConstructorParameters&lt;Type&gt;</code></h1><p><code>ConstructorParameters&lt;Type&gt;</code>提取构造方法<code>Type</code>的参数类型，组成一个元组类型返回。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">ConstructorParameters</span>&lt;<span class="hljs-keyword">new</span> (<span class="hljs-attr">x</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>) =&gt; <span class="hljs-built_in">object</span>&gt;; <span class="hljs-comment">// [x: string, y: number]</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">ConstructorParameters</span>&lt;<span class="hljs-keyword">new</span> (x?: <span class="hljs-built_in">string</span>) =&gt; <span class="hljs-built_in">object</span>&gt;; <span class="hljs-comment">// [x?: string | undefined]</span><br></code></pre></td></tr></table></figure><p>它可以返回一些内置构造方法的参数类型。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">ConstructorParameters</span>&lt;<span class="hljs-title class_">ErrorConstructor</span>&gt;; <span class="hljs-comment">// [message?: string]</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">ConstructorParameters</span>&lt;<span class="hljs-title class_">FunctionConstructor</span>&gt;; <span class="hljs-comment">// string[]</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T3</span> = <span class="hljs-title class_">ConstructorParameters</span>&lt;<span class="hljs-title class_">RegExpConstructor</span>&gt;; <span class="hljs-comment">// [pattern:string|RegExp, flags?:string]</span><br></code></pre></td></tr></table></figure><p>如果参数类型不是构造方法，就会报错。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">ConstructorParameters</span>&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// 报错</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">ConstructorParameters</span>&lt;<span class="hljs-title class_">Function</span>&gt;; <span class="hljs-comment">// 报错</span><br></code></pre></td></tr></table></figure><p><code>any</code>类型和<code>never</code>类型是两个特殊值，分别返回<code>unknown[]</code>和<code>never</code>。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">ConstructorParameters</span>&lt;<span class="hljs-built_in">any</span>&gt;; <span class="hljs-comment">// unknown[]</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">ConstructorParameters</span>&lt;<span class="hljs-built_in">never</span>&gt;; <span class="hljs-comment">// never</span><br></code></pre></td></tr></table></figure><p><code>ConstructorParameters&lt;Type&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ConstructorParameters</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">new</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">new</span> (...<span class="hljs-attr">args</span>: infer P) =&gt; <span class="hljs-built_in">any</span> ? P : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure><h1 id="ReturnType"><a href="#ReturnType" class="headerlink" title="ReturnType&lt;Type&gt;"></a><code>ReturnType&lt;Type&gt;</code></h1><p><code>ReturnType&lt;Type&gt;</code>提取函数类型<code>Type</code>的返回值类型，作为一个新类型返回。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// string</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">ReturnType</span>&lt;<br>  <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span>;<br>    <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>;<br>  &#125;<br>&gt;; <span class="hljs-comment">// &#123; a: string; b: number &#125;</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T3</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-function">(<span class="hljs-params">s: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>&gt;; <span class="hljs-comment">// void</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T4</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">any</span>[]&gt;; <span class="hljs-comment">// () =&gt; any[]</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T5</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Math</span>.<span class="hljs-property">random</span>&gt;; <span class="hljs-comment">// number</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T6</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Array</span>.<span class="hljs-property">isArray</span>&gt;; <span class="hljs-comment">// boolean</span><br></code></pre></td></tr></table></figure><p>如果参数类型是泛型函数，返回值取决于泛型类型。如果泛型不带有限制条件，就会返回<code>unknown</code>。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">ReturnType</span>&lt;&lt;T&gt;<span class="hljs-function">() =&gt;</span> T&gt;; <span class="hljs-comment">// unknown</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">ReturnType</span>&lt;&lt;T <span class="hljs-keyword">extends</span> U, U <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span>[]&gt;<span class="hljs-function">() =&gt;</span> T&gt;; <span class="hljs-comment">// number[]</span><br></code></pre></td></tr></table></figure><p>如果类型不是函数，会报错。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-built_in">boolean</span>&gt;; <span class="hljs-comment">// 报错</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-title class_">Function</span>&gt;; <span class="hljs-comment">// 报错</span><br></code></pre></td></tr></table></figure><p><code>any</code>和<code>never</code>是两个特殊值，分别返回<code>any</code>和<code>never</code>。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-built_in">any</span>&gt;; <span class="hljs-comment">// any</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-built_in">never</span>&gt;; <span class="hljs-comment">// never</span><br></code></pre></td></tr></table></figure><p><code>ReturnType&lt;Type&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ReturnType</span>&lt;T <span class="hljs-keyword">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt; = T <span class="hljs-keyword">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; infer R ? R : <span class="hljs-built_in">any</span>;<br></code></pre></td></tr></table></figure><h1 id="InstanceType"><a href="#InstanceType" class="headerlink" title="InstanceType&lt;Type&gt;"></a><code>InstanceType&lt;Type&gt;</code></h1><p><code>InstanceType&lt;Type&gt;</code>提取构造函数的返回值的类型（即实例类型），参数<code>Type</code>是一个构造函数，等同于构造函数的<code>ReturnType&lt;Type&gt;</code>。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> T = <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-keyword">new</span> () =&gt; <span class="hljs-built_in">object</span>&gt;; <span class="hljs-comment">// object</span><br></code></pre></td></tr></table></figure><p>上面示例中，类型参数是一个构造函数<code>new () =&gt; object</code>，返回值是该构造函数的实例类型（<code>object</code>）。</p><p>下面是一些例子。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> A = <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-title class_">ErrorConstructor</span>&gt;; <span class="hljs-comment">// Error</span><br><span class="hljs-keyword">type</span> B = <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-title class_">FunctionConstructor</span>&gt;; <span class="hljs-comment">// Function</span><br><span class="hljs-keyword">type</span> C = <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-title class_">RegExpConstructor</span>&gt;; <span class="hljs-comment">// RegExp</span><br></code></pre></td></tr></table></figure><p>上面示例中，<code>InstanceType&lt;T&gt;</code>的参数都是 TypeScript 内置的原生对象的构造函数类型，<code>InstanceType&lt;T&gt;</code>的返回值就是这些构造函数的实例类型。</p><p>由于 Class 作为类型，代表实例类型。要获取它的构造方法，必须把它当成值，然后用<code>typeof</code>运算符获取它的构造方法类型。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> &#123;<br>  x = <span class="hljs-number">0</span>;<br>  y = <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-keyword">type</span> T = <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-keyword">typeof</span> C&gt;; <span class="hljs-comment">// C</span><br></code></pre></td></tr></table></figure><p>上面示例中，<code>typeof C</code>是<code>C</code>的构造方法类型，然后 InstanceType 就能获得实例类型，即<code>C</code>本身。</p><p>如果类型参数不是构造方法，就会报错。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// 报错</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-title class_">Function</span>&gt;; <span class="hljs-comment">// 报错</span><br></code></pre></td></tr></table></figure><p>如果类型参数是<code>any</code>或<code>never</code>两个特殊值，分别返回<code>any</code>和<code>never</code>。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-built_in">any</span>&gt;; <span class="hljs-comment">// any</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-built_in">never</span>&gt;; <span class="hljs-comment">// never</span><br></code></pre></td></tr></table></figure><p><code>InstanceType&lt;Type&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">InstanceType</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">new</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">new</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; infer R ? R : <span class="hljs-built_in">any</span>;<br></code></pre></td></tr></table></figure><h1 id="NoInfer"><a href="#NoInfer" class="headerlink" title="NoInfer&lt;Type&gt;"></a><code>NoInfer&lt;Type&gt;</code></h1><p><code>NoInfer&lt;Type&gt;</code>用来防止类型推断。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> createStreetLight&lt;C <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt;(<span class="hljs-attr">colors</span>: C[], defaultColor?: <span class="hljs-title class_">NoInfer</span>&lt;C&gt;) &#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br><span class="hljs-title function_">createStreetLight</span>([<span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;yellow&quot;</span>, <span class="hljs-string">&quot;green&quot;</span>], <span class="hljs-string">&quot;red&quot;</span>); <span class="hljs-comment">// OK</span><br><span class="hljs-title function_">createStreetLight</span>([<span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;yellow&quot;</span>, <span class="hljs-string">&quot;green&quot;</span>], <span class="hljs-string">&quot;blue&quot;</span>); <span class="hljs-comment">// Error</span><br></code></pre></td></tr></table></figure><h1 id="ThisParameterType"><a href="#ThisParameterType" class="headerlink" title="ThisParameterType&lt;Type&gt;"></a><code>ThisParameterType&lt;Type&gt;</code></h1><p><code>ThisParameterType&lt;Type&gt;</code>提取函数类型中<code>this</code>参数的类型。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">toHex</span>(<span class="hljs-params"><span class="hljs-variable language_">this</span>: <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toString</span>(<span class="hljs-number">16</span>);<br>&#125;<br><br><span class="hljs-keyword">type</span> T = <span class="hljs-title class_">ThisParameterType</span>&lt;<span class="hljs-keyword">typeof</span> toHex&gt;; <span class="hljs-comment">// number</span><br></code></pre></td></tr></table></figure><p>如果函数没有<code>this</code>参数，则返回<code>unknown</code>。</p><p><code>ThisParameterType&lt;Type&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ThisParameterType</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> (<span class="hljs-attr">this</span>: infer U, ...<span class="hljs-attr">args</span>: <span class="hljs-built_in">never</span>) =&gt; <span class="hljs-built_in">any</span> ? U : <span class="hljs-built_in">unknown</span>;<br></code></pre></td></tr></table></figure><h1 id="OmitThisParameter"><a href="#OmitThisParameter" class="headerlink" title="OmitThisParameter&lt;Type&gt;"></a><code>OmitThisParameter&lt;Type&gt;</code></h1><p><code>OmitThisParameter&lt;Type&gt;</code>从函数类型中移除 this 参数。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">toHex</span>(<span class="hljs-params"><span class="hljs-variable language_">this</span>: <span class="hljs-built_in">Number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toString</span>(<span class="hljs-number">16</span>);<br>&#125;<br><br><span class="hljs-keyword">type</span> T = <span class="hljs-title class_">OmitThisParameter</span>&lt;<span class="hljs-keyword">typeof</span> toHex&gt;; <span class="hljs-comment">// () =&gt; string</span><br></code></pre></td></tr></table></figure><p>上面示例中，<code>OmitThisParameter&lt;T&gt;</code>给出了函数<code>toHex()</code>的类型，并将其中的<code>this</code>参数删除。</p><p>如果函数没有 this 参数，则返回原始函数类型。</p><p><code>OmitThisParameter&lt;Type&gt;</code>的实现如下。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">OmitThisParameter</span>&lt;T&gt; = <span class="hljs-built_in">unknown</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ThisParameterType</span>&lt;T&gt; ? T : T <span class="hljs-keyword">extends</span> (...<span class="hljs-attr">args</span>: infer A) =&gt; infer R ? <span class="hljs-function">(<span class="hljs-params">...args: A</span>) =&gt;</span> R : T;<br></code></pre></td></tr></table></figure><h1 id="ThisType"><a href="#ThisType" class="headerlink" title="ThisType&lt;Type&gt;"></a><code>ThisType&lt;Type&gt;</code></h1><p><code>ThisType&lt;Type&gt;</code>不返回类型，只用来跟其他类型组成交叉类型，用来提示 TypeScript 其他类型里面的<code>this</code>的类型。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">HelperThisValue</span> &#123;<br>  <span class="hljs-attr">logError</span>: <span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-keyword">let</span> <span class="hljs-attr">helperFunctions</span>: &#123; [<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-title class_">Function</span> &#125; &amp; <span class="hljs-title class_">ThisType</span>&lt;<span class="hljs-title class_">HelperThisValue</span>&gt; = &#123;<br>  <span class="hljs-attr">hello</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">logError</span>(<span class="hljs-string">&quot;Error: Something wrong!&quot;</span>); <span class="hljs-comment">// 正确</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">update</span>(); <span class="hljs-comment">// 报错</span><br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><p>上面示例中，变量<code>helperFunctions</code>的类型是一个正常的对象类型与<code>ThisType&lt;HelperThisValue&gt;</code>组成的交叉类型。</p><p>这里的<code>ThisType</code>的作用是提示 TypeScript，变量<code>helperFunctions</code>的<code>this</code>应该满足<code>HelperThisValue</code>的条件。所以，<code>this.logError()</code>可以正确调用，而<code>this.update()</code>会报错，因为<code>HelperThisValue</code>里面没有这个方法。</p><p>注意，使用这个类型工具时，必须打开<code>noImplicitThis</code>设置。</p><p>下面是另一个例子。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">obj</span>: <span class="hljs-title class_">ThisType</span>&lt;&#123; <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span> &#125;&gt; &amp; &#123; <span class="hljs-attr">getX</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">number</span> &#125;;<br><br>obj = &#123;<br>  <span class="hljs-title function_">getX</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>; <span class="hljs-comment">// 报错</span><br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><p>上面示例中，<code>getX()</code>里面的<code>this.y</code>会报错，因为根据<code>ThisType&lt;&#123; x: number &#125;&gt;</code>，这个对象的<code>this</code>不包含属性<code>y</code>。</p><p><code>ThisType&lt;Type&gt;</code>的实现就是一个空接口。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ThisType</span>&lt;T&gt; &#123;&#125;<br></code></pre></td></tr></table></figure><h1 id="字符串类型工具"><a href="#字符串类型工具" class="headerlink" title="字符串类型工具"></a>字符串类型工具</h1><p>TypeScript 内置了四个字符串类型工具，专门用来操作字符串类型。这四个工具类型都定义在 TypeScript 自带的<code>.d.ts</code>文件里面。</p><p>它们的实现都是在底层调用 JavaScript 引擎提供 JavaScript 字符操作方法。</p><h2 id="Uppercase"><a href="#Uppercase" class="headerlink" title="Uppercase&lt;StringType&gt;"></a><code>Uppercase&lt;StringType&gt;</code></h2><p><code>Uppercase&lt;StringType&gt;</code>将字符串类型的每个字符转为大写。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> A = <span class="hljs-string">&quot;hello&quot;</span>;<br><br><span class="hljs-comment">// &quot;HELLO&quot;</span><br><span class="hljs-keyword">type</span> B = <span class="hljs-title class_">Uppercase</span>&lt;A&gt;;<br></code></pre></td></tr></table></figure><p>上面示例中，<code>Uppercase&lt;T&gt;</code>将 hello 转为 HELLO。</p><h2 id="Lowercase"><a href="#Lowercase" class="headerlink" title="Lowercase&lt;StringType&gt;"></a><code>Lowercase&lt;StringType&gt;</code></h2><p><code>Lowercase&lt;StringType&gt;</code>将字符串的每个字符转为小写。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> A = <span class="hljs-string">&quot;HELLO&quot;</span>;<br><br><span class="hljs-comment">// &quot;hello&quot;</span><br><span class="hljs-keyword">type</span> B = <span class="hljs-title class_">Lowercase</span>&lt;A&gt;;<br></code></pre></td></tr></table></figure><p>上面示例中，<code>Lowercase&lt;T&gt;</code>将 HELLO 转为 hello。</p><h2 id="Capitalize"><a href="#Capitalize" class="headerlink" title="Capitalize&lt;StringType&gt;"></a><code>Capitalize&lt;StringType&gt;</code></h2><p><code>Capitalize&lt;StringType&gt;</code>将字符串的第一个字符转为大写。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> A = <span class="hljs-string">&quot;hello&quot;</span>;<br><br><span class="hljs-comment">// &quot;Hello&quot;</span><br><span class="hljs-keyword">type</span> B = <span class="hljs-title class_">Capitalize</span>&lt;A&gt;;<br></code></pre></td></tr></table></figure><p>上面示例中，<code>Capitalize&lt;T&gt;</code>将 hello 转为 Hello。</p><h2 id="Uncapitalize"><a href="#Uncapitalize" class="headerlink" title="Uncapitalize&lt;StringType&gt;"></a><code>Uncapitalize&lt;StringType&gt;</code></h2><p><code>Uncapitalize&lt;StringType&gt;</code> 将字符串的第一个字符转为小写。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> A = <span class="hljs-string">&quot;HELLO&quot;</span>;<br><br><span class="hljs-comment">// &quot;hELLO&quot;</span><br><span class="hljs-keyword">type</span> B = <span class="hljs-title class_">Uncapitalize</span>&lt;A&gt;;<br></code></pre></td></tr></table></figure><p>上面示例中，<code>Uncapitalize&lt;T&gt;</code>将 HELLO 转为 hELLO。</p><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul><li><p><a href="https://www.typescriptlang.org/docs/handbook/utility-types.html">https://www.typescriptlang.org/docs/handbook/utility-types.html</a></p></li><li><p><a href="https://github.com/wangdoc/typescript-tutorial">https://github.com/wangdoc/typescript-tutorial</a></p></li></ul>]]></content>
    
    
    <categories>
      
      <category>ts</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】JavaScript obfuscator代码混淆</title>
    <link href="/js/%E3%80%90js%E3%80%91JavaScript%20obfuscator%E4%BB%A3%E7%A0%81%E6%B7%B7%E6%B7%86/"/>
    <url>/js/%E3%80%90js%E3%80%91JavaScript%20obfuscator%E4%BB%A3%E7%A0%81%E6%B7%B7%E6%B7%86/</url>
    
    <content type="html"><![CDATA[<h2 id="JavaScript-obfuscator"><a href="#JavaScript-obfuscator" class="headerlink" title="JavaScript obfuscator"></a>JavaScript obfuscator</h2><p>JavaScript obfuscator 是一款功能强大的免费JavaScript混淆处理程序，包含多种功能，可为源代码提供保护。</p><p>github：<a href="https://github.com/javascript-obfuscator/javascript-obfuscator">https://github.com/javascript-obfuscator/javascript-obfuscator</a></p><h2 id="构建工具插件"><a href="#构建工具插件" class="headerlink" title="构建工具插件"></a>构建工具插件</h2><p>常用webpack与rollup的插件</p><ul><li>Webpack plugin: <a href="https://github.com/javascript-obfuscator/webpack-obfuscator">webpack-obfuscator</a></li><li>Webpack loader: <a href="https://github.com/javascript-obfuscator/obfuscator-loader">obfuscator-loader</a></li><li>Rollup: <a href="https://github.com/javascript-obfuscator/rollup-plugin-javascript-obfuscator">rollup-plugin-javascript-obfuscator</a></li><li>Gulp: <a href="https://github.com/javascript-obfuscator/gulp-javascript-obfuscator">gulp-javascript-obfuscator</a></li><li>Grunt: <a href="https://github.com/javascript-obfuscator/grunt-contrib-obfuscator">grunt-contrib-obfuscator</a></li><li>Weex: <a href="https://www.npmjs.com/package/weex-devtool">weex-devtool</a></li><li>Malta: <a href="https://github.com/fedeghe/malta-js-obfuscator">malta-js-obfuscator</a></li><li>Netlify plugin: <a href="https://www.npmjs.com/package/netlify-plugin-js-obfuscator">netlify-plugin-js-obfuscator</a></li></ul><h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>  <span class="hljs-attr">compact</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">controlFlowFlattening</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">controlFlowFlatteningThreshold</span>: <span class="hljs-number">0.75</span>,<br>  <span class="hljs-attr">deadCodeInjection</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">deadCodeInjectionThreshold</span>: <span class="hljs-number">0.4</span>,<br>  <span class="hljs-attr">debugProtection</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">debugProtectionInterval</span>: <span class="hljs-number">0</span>,<br>  <span class="hljs-attr">disableConsoleOutput</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">domainLock</span>: [],<br>  <span class="hljs-attr">domainLockRedirectUrl</span>: <span class="hljs-string">&#x27;about:blank&#x27;</span>,<br>  <span class="hljs-attr">forceTransformStrings</span>: [],<br>  <span class="hljs-attr">identifierNamesCache</span>: <span class="hljs-literal">null</span>,<br>  <span class="hljs-attr">identifierNamesGenerator</span>: <span class="hljs-string">&#x27;hexadecimal&#x27;</span>,<br>  <span class="hljs-attr">identifiersDictionary</span>: [],<br>  <span class="hljs-attr">identifiersPrefix</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>  <span class="hljs-attr">ignoreImports</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">inputFileName</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>  <span class="hljs-attr">log</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">numbersToExpressions</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">optionsPreset</span>: <span class="hljs-string">&#x27;default&#x27;</span>,<br>  <span class="hljs-attr">renameGlobals</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">renameProperties</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">renamePropertiesMode</span>: <span class="hljs-string">&#x27;safe&#x27;</span>,<br>  <span class="hljs-attr">reservedNames</span>: [],<br>  <span class="hljs-attr">reservedStrings</span>: [],<br>  <span class="hljs-attr">seed</span>: <span class="hljs-number">0</span>,<br>  <span class="hljs-attr">selfDefending</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">simplify</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">sourceMap</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">sourceMapBaseUrl</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>  <span class="hljs-attr">sourceMapFileName</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>  <span class="hljs-attr">sourceMapMode</span>: <span class="hljs-string">&#x27;separate&#x27;</span>,<br>  <span class="hljs-attr">sourceMapSourcesMode</span>: <span class="hljs-string">&#x27;sources-content&#x27;</span>,<br>  <span class="hljs-attr">splitStrings</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">splitStringsChunkLength</span>: <span class="hljs-number">10</span>,<br>  <span class="hljs-attr">stringArray</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">stringArrayCallsTransform</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">stringArrayCallsTransformThreshold</span>: <span class="hljs-number">0.5</span>,<br>  <span class="hljs-attr">stringArrayEncoding</span>: [],<br>  <span class="hljs-attr">stringArrayIndexesType</span>: [<br>  <span class="hljs-string">&#x27;hexadecimal-number&#x27;</span><br>],<br>  <span class="hljs-attr">stringArrayIndexShift</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">stringArrayRotate</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">stringArrayShuffle</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">stringArrayWrappersCount</span>: <span class="hljs-number">1</span>,<br>  <span class="hljs-attr">stringArrayWrappersChainedCalls</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">stringArrayWrappersParametersMaxCount</span>: <span class="hljs-number">2</span>,<br>  <span class="hljs-attr">stringArrayWrappersType</span>: <span class="hljs-string">&#x27;variable&#x27;</span>,<br>  <span class="hljs-attr">stringArrayThreshold</span>: <span class="hljs-number">0.75</span>,<br>  <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;browser&#x27;</span>,<br>  <span class="hljs-attr">transformObjectKeys</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">unicodeEscapeSequence</span>: <span class="hljs-literal">false</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="选项说明"><a href="#选项说明" class="headerlink" title="选项说明"></a>选项说明</h2><h3 id="compact"><a href="#compact" class="headerlink" title="compact"></a><code>compact</code></h3><p>Type: <code>boolean</code> Default: <code>true</code></p><p>在一行上输出紧凑的代码。</p><h3 id="config"><a href="#config" class="headerlink" title="config"></a><code>config</code></h3><p>Type: <code>string</code> Default: &#96;&#96;</p><p>包含混淆器选项的JS&#x2F;JSON配置文件的名称。这些将被直接传递给CLI的选项覆盖</p><h3 id="controlFlowFlattening"><a href="#controlFlowFlattening" class="headerlink" title="controlFlowFlattening"></a><code>controlFlowFlattening</code></h3><p>Type: <code>boolean</code> Default: <code>false</code></p><p><strong>此选项极大地影响性能，最多可使运行时速度慢1.5倍。使用<code>controlFlowFlatteningThreshold</code>值来设置受控制流扁平化影响的节点百分比。</strong></p><p>启用代码控制流扁平化。控制流扁平化是一种阻碍程序理解的源代码结构转换。</p><p>Example:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// input</span><br>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">var</span> sum = <span class="hljs-number">1</span> + <span class="hljs-number">2</span>;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>);<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>);<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">4</span>);<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">5</span>);<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">6</span>);<br>    &#125;;<br>  &#125;<br><br>  <span class="hljs-title function_">foo</span>()();<br>&#125;)();<br><br><span class="hljs-comment">// output</span><br>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x3bfc5c</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x3260a5 = &#123;<br>        <span class="hljs-title class_">WtABe</span>: <span class="hljs-string">&quot;4|0|6|5|3|2|1&quot;</span>,<br>        <span class="hljs-title class_">GokKo</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">_0xf87260</span>(<span class="hljs-params">_0x427a8e, _0x43354c</span>) &#123;<br>          <span class="hljs-keyword">return</span> _0x427a8e + _0x43354c;<br>        &#125;,<br>      &#125;;<br>      <span class="hljs-keyword">var</span> _0x1ad4d6 = _0x3260a5[<span class="hljs-string">&quot;WtABe&quot;</span>][<span class="hljs-string">&quot;split&quot;</span>](<span class="hljs-string">&quot;|&quot;</span>),<br>        _0x1a7b12 = <span class="hljs-number">0x0</span>;<br>      <span class="hljs-keyword">while</span> (!![]) &#123;<br>        <span class="hljs-keyword">switch</span> (_0x1ad4d6[_0x1a7b12++]) &#123;<br>          <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;0&quot;</span>:<br>            <span class="hljs-variable language_">console</span>[<span class="hljs-string">&quot;log&quot;</span>](<span class="hljs-number">0x1</span>);<br>            <span class="hljs-keyword">continue</span>;<br>          <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;1&quot;</span>:<br>            <span class="hljs-variable language_">console</span>[<span class="hljs-string">&quot;log&quot;</span>](<span class="hljs-number">0x6</span>);<br>            <span class="hljs-keyword">continue</span>;<br>          <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;2&quot;</span>:<br>            <span class="hljs-variable language_">console</span>[<span class="hljs-string">&quot;log&quot;</span>](<span class="hljs-number">0x5</span>);<br>            <span class="hljs-keyword">continue</span>;<br>          <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;3&quot;</span>:<br>            <span class="hljs-variable language_">console</span>[<span class="hljs-string">&quot;log&quot;</span>](<span class="hljs-number">0x4</span>);<br>            <span class="hljs-keyword">continue</span>;<br>          <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;4&quot;</span>:<br>            <span class="hljs-keyword">var</span> _0x1f2f2f = _0x3260a5[<span class="hljs-string">&quot;GokKo&quot;</span>](<span class="hljs-number">0x1</span>, <span class="hljs-number">0x2</span>);<br>            <span class="hljs-keyword">continue</span>;<br>          <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;5&quot;</span>:<br>            <span class="hljs-variable language_">console</span>[<span class="hljs-string">&quot;log&quot;</span>](<span class="hljs-number">0x3</span>);<br>            <span class="hljs-keyword">continue</span>;<br>          <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;6&quot;</span>:<br>            <span class="hljs-variable language_">console</span>[<span class="hljs-string">&quot;log&quot;</span>](<span class="hljs-number">0x2</span>);<br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br>        <span class="hljs-keyword">break</span>;<br>      &#125;<br>    &#125;;<br>  &#125;<br><br>  <span class="hljs-title function_">_0x3bfc5c</span>()();<br>&#125;)();<br></code></pre></td></tr></table></figure><h3 id="controlFlowFlatteningThreshold"><a href="#controlFlowFlatteningThreshold" class="headerlink" title="controlFlowFlatteningThreshold"></a><code>controlFlowFlatteningThreshold</code></h3><p>Type: <code>number</code> Default: <code>0.75</code> Min: <code>0</code> Max: <code>1</code></p><p><code>controlFlowFlattening</code>变换将应用于任何给定节点的概率。</p><p>此设置对于大代码特别有用，因为大量的控制流转换会降低代码速度并增加代码大小。</p><p><code>controlFlowFlatteningThreshold: 0</code> 等于 <code>controlFlowFlattening: false</code>.</p><h3 id="deadCodeInjection"><a href="#deadCodeInjection" class="headerlink" title="deadCodeInjection"></a><code>deadCodeInjection</code></h3><p>Type: <code>boolean</code> Default: <code>false</code></p><p><strong>显著增加混淆代码的大小(高达200%)，仅在混淆代码的大小无关紧要时使用。使用<code>deadCodeInjectionThreshold</code>设置受死代码注入影响的节点百分比。</strong></p><p><strong>该选项强制启用<code>stringArray</code>选项。</strong></p><p>使用此选项，随机的死代码块将被添加到混淆的代码中。</p><p>Example:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// input</span><br>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) &#123;<br>    <span class="hljs-keyword">var</span> foo = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;abc&quot;</span>);<br>    &#125;;<br>    <span class="hljs-keyword">var</span> bar = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;def&quot;</span>);<br>    &#125;;<br>    <span class="hljs-keyword">var</span> baz = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;ghi&quot;</span>);<br>    &#125;;<br>    <span class="hljs-keyword">var</span> bark = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;jkl&quot;</span>);<br>    &#125;;<br>    <span class="hljs-keyword">var</span> hawk = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;mno&quot;</span>);<br>    &#125;;<br><br>    <span class="hljs-title function_">foo</span>();<br>    <span class="hljs-title function_">bar</span>();<br>    <span class="hljs-title function_">baz</span>();<br>    <span class="hljs-title function_">bark</span>();<br>    <span class="hljs-title function_">hawk</span>();<br>  &#125;<br>&#125;)();<br><br><span class="hljs-comment">// output</span><br><span class="hljs-keyword">var</span> _0x37b8 = [<br>  <span class="hljs-string">&quot;YBCtz&quot;</span>,<br>  <span class="hljs-string">&quot;GlrkA&quot;</span>,<br>  <span class="hljs-string">&quot;urPbb&quot;</span>,<br>  <span class="hljs-string">&quot;abc&quot;</span>,<br>  <span class="hljs-string">&quot;NMIhC&quot;</span>,<br>  <span class="hljs-string">&quot;yZgAj&quot;</span>,<br>  <span class="hljs-string">&quot;zrAId&quot;</span>,<br>  <span class="hljs-string">&quot;EtyJA&quot;</span>,<br>  <span class="hljs-string">&quot;log&quot;</span>,<br>  <span class="hljs-string">&quot;mno&quot;</span>,<br>  <span class="hljs-string">&quot;jkl&quot;</span>,<br>  <span class="hljs-string">&quot;def&quot;</span>,<br>  <span class="hljs-string">&quot;Quzya&quot;</span>,<br>  <span class="hljs-string">&quot;IWbBa&quot;</span>,<br>  <span class="hljs-string">&quot;ghi&quot;</span>,<br>];<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x43a7</span>(<span class="hljs-params">_0x12cf56, _0x587376</span>) &#123;<br>  _0x43a7 = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x2f87a8, _0x47eac2</span>) &#123;<br>    _0x2f87a8 = _0x2f87a8 - (<span class="hljs-number">0x16a7</span> * <span class="hljs-number">0x1</span> + <span class="hljs-number">0x5</span> * <span class="hljs-number">0x151</span> + -<span class="hljs-number">0x1c92</span>);<br>    <span class="hljs-keyword">var</span> _0x341e03 = _0x37b8[_0x2f87a8];<br>    <span class="hljs-keyword">return</span> _0x341e03;<br>  &#125;;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x43a7</span>(_0x12cf56, _0x587376);<br>&#125;<br>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">if</span> (!![]) &#123;<br>    <span class="hljs-keyword">var</span> _0xbbe28f = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x2fc85f = _0x43a7;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">_0x2fc85f</span>(<span class="hljs-number">0xaf</span>) === <span class="hljs-title function_">_0x2fc85f</span>(<span class="hljs-number">0xae</span>)) &#123;<br>        _0x1dd94f[<span class="hljs-title function_">_0x2fc85f</span>(<span class="hljs-number">0xb2</span>)](<span class="hljs-title function_">_0x2fc85f</span>(<span class="hljs-number">0xb5</span>));<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-variable language_">console</span>[<span class="hljs-title function_">_0x2fc85f</span>(<span class="hljs-number">0xb2</span>)](<span class="hljs-title function_">_0x2fc85f</span>(<span class="hljs-number">0xad</span>));<br>      &#125;<br>    &#125;;<br>    <span class="hljs-keyword">var</span> _0x5e46bc = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x15b472 = _0x43a7;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">_0x15b472</span>(<span class="hljs-number">0xb6</span>) !== <span class="hljs-title function_">_0x15b472</span>(<span class="hljs-number">0xaa</span>)) &#123;<br>        <span class="hljs-variable language_">console</span>[<span class="hljs-title function_">_0x15b472</span>(<span class="hljs-number">0xb2</span>)](<span class="hljs-title function_">_0x15b472</span>(<span class="hljs-number">0xb5</span>));<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        _0x47eac2[<span class="hljs-title function_">_0x15b472</span>(<span class="hljs-number">0xb2</span>)](<span class="hljs-title function_">_0x15b472</span>(<span class="hljs-number">0xad</span>));<br>      &#125;<br>    &#125;;<br>    <span class="hljs-keyword">var</span> _0x3669e8 = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x47a442 = _0x43a7;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">_0x47a442</span>(<span class="hljs-number">0xb7</span>) !== <span class="hljs-title function_">_0x47a442</span>(<span class="hljs-number">0xb0</span>)) &#123;<br>        <span class="hljs-variable language_">console</span>[<span class="hljs-title function_">_0x47a442</span>(<span class="hljs-number">0xb2</span>)](<span class="hljs-title function_">_0x47a442</span>(<span class="hljs-number">0xb8</span>));<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        _0x24e0bf[<span class="hljs-title function_">_0x47a442</span>(<span class="hljs-number">0xb2</span>)](<span class="hljs-title function_">_0x47a442</span>(<span class="hljs-number">0xb3</span>));<br>      &#125;<br>    &#125;;<br>    <span class="hljs-keyword">var</span> _0x28b05a = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x497902 = _0x43a7;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">_0x497902</span>(<span class="hljs-number">0xb1</span>) === <span class="hljs-title function_">_0x497902</span>(<span class="hljs-number">0xb1</span>)) &#123;<br>        <span class="hljs-variable language_">console</span>[<span class="hljs-title function_">_0x497902</span>(<span class="hljs-number">0xb2</span>)](<span class="hljs-title function_">_0x497902</span>(<span class="hljs-number">0xb4</span>));<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        _0x59c9c6[<span class="hljs-title function_">_0x497902</span>(<span class="hljs-number">0xb2</span>)](<span class="hljs-title function_">_0x497902</span>(<span class="hljs-number">0xb4</span>));<br>      &#125;<br>    &#125;;<br>    <span class="hljs-keyword">var</span> _0x402a54 = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x1906b7 = _0x43a7;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">_0x1906b7</span>(<span class="hljs-number">0xab</span>) === <span class="hljs-title function_">_0x1906b7</span>(<span class="hljs-number">0xac</span>)) &#123;<br>        _0xb89cd0[<span class="hljs-title function_">_0x1906b7</span>(<span class="hljs-number">0xb2</span>)](<span class="hljs-title function_">_0x1906b7</span>(<span class="hljs-number">0xb8</span>));<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-variable language_">console</span>[<span class="hljs-title function_">_0x1906b7</span>(<span class="hljs-number">0xb2</span>)](<span class="hljs-title function_">_0x1906b7</span>(<span class="hljs-number">0xb3</span>));<br>      &#125;<br>    &#125;;<br>    <span class="hljs-title function_">_0xbbe28f</span>();<br>    <span class="hljs-title function_">_0x5e46bc</span>();<br>    <span class="hljs-title function_">_0x3669e8</span>();<br>    <span class="hljs-title function_">_0x28b05a</span>();<br>    <span class="hljs-title function_">_0x402a54</span>();<br>  &#125;<br>&#125;)();<br></code></pre></td></tr></table></figure><h3 id="deadCodeInjectionThreshold"><a href="#deadCodeInjectionThreshold" class="headerlink" title="deadCodeInjectionThreshold"></a><code>deadCodeInjectionThreshold</code></h3><p>Type: <code>number</code> Default: <code>0.4</code> Min: <code>0</code> Max: <code>1</code></p><p>允许设置受<code>deadCodeInjection</code>影响的节点百分比。</p><h3 id="debugProtection"><a href="#debugProtection" class="headerlink" title="debugProtection"></a><code>debugProtection</code></h3><p>Type: <code>boolean</code> Default: <code>false</code></p><p><strong>如果打开开发者工具，则可以冻结浏览器。</strong></p><p>这个选项使得几乎不可能使用开发人员工具的调试器功能(无论是在基于webkit的还是在Mozilla Firefox上)。</p><h3 id="debugProtectionInterval"><a href="#debugProtectionInterval" class="headerlink" title="debugProtectionInterval"></a><code>debugProtectionInterval</code></h3><p>Type: <code>number</code> Default: <code>0</code></p><p><strong>可以冻结您的浏览器！使用风险自负。！2.6.0版本类型为<code>boolean</code>,默认<code>false</code></strong></p><p>如果设置了，将使用以毫秒为单位的间隔强制控制台选项卡上的调试模式，从而使使用开发者工具的其他功能更加困难。启用<code>debugProtection</code>时生效。建议取值范围是2000 ~ 4000毫秒。<br>2.6.0版本的描述：如果选中，则会使用一个间隔来强制“console”选项卡上的调试模式，从而使开发人员工具的其他功能更难使用。如果启用了<code>debugProtection</code>，则有效。</p><h3 id="disableConsoleOutput"><a href="#disableConsoleOutput" class="headerlink" title="disableConsoleOutput"></a><code>disableConsoleOutput</code></h3><p>Type: <code>boolean</code> Default: <code>false</code></p><p><strong>此选项全局禁用所有脚本的<code>console</code>调用</strong></p><p>禁用 <code>console.log</code>, <code>console.info</code>, <code>console.error</code>, <code>console.warn</code>, <code>console.debug</code>, <code>console.exception</code> 和 <code>console.trace</code> 通过用空函数替换它们。这使得调试器的使用更加困难。</p><h3 id="domainLock"><a href="#domainLock" class="headerlink" title="domainLock"></a><code>domainLock</code></h3><p>Type: <code>string[]</code> Default: <code>[]</code></p><p><strong>此选项不适用于<code>target: &#39;node&#39;</code></strong></p><p>允许只在特定的域和&#x2F;或子域上运行混淆的源代码。这使得别人很难复制粘贴您的源代码并在其他地方运行。</p><p>如果源代码没有在此选项指定的域上运行，浏览器将被重定向到传递给<code>domainLockRedirectUrl</code>选项URL的地址。</p><h5 id="多个域和子域"><a href="#多个域和子域" class="headerlink" title="多个域和子域"></a>多个域和子域</h5><p>可以将代码锁定到多个域或子域。例如，要锁定它，使代码仅在<code>www.example.com</code>上运行，请添加<code>www.example.com</code>。要使它在包括任何子域（<code>example.com</code>，<code>sub.example.com</code>）在根域上工作，请使用<code>.example.com</code>。</p><h3 id="domainLockRedirectUrl"><a href="#domainLockRedirectUrl" class="headerlink" title="domainLockRedirectUrl"></a><code>domainLockRedirectUrl</code></h3><p>Type: <code>string</code> Default: <code>about:blank</code></p><p><strong>此选项不适用于<code>target: &#39;node&#39;</code></strong></p><p>如果源代码未在<code>domainLock</code>指定的域上运行，则允许将浏览器重定向到传递的URL</p><h3 id="exclude"><a href="#exclude" class="headerlink" title="exclude"></a><code>exclude</code></h3><p>Type: <code>string[]</code> Default: <code>[]</code></p><p>一种文件名或globs，表示要从混淆处理中排除的文件。</p><h3 id="forceTransformStrings"><a href="#forceTransformStrings" class="headerlink" title="forceTransformStrings"></a><code>forceTransformStrings</code></h3><p>Type: <code>string[]</code> Default: <code>[]</code></p><p>启用字符串文字的强制转换，这些文字由传递的RegExp模式匹配。</p><p><strong>此选项只影响不应该由<code>stringArrayThreshold</code>（或将来可能的其他阈值）转换的字符串</strong></p><p>该选项的优先级高于<code>reservedStrings</code>选项，但没有高于条件注释的优先级。</p><p>Example:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript">&#123;<br>  <span class="hljs-attr">forceTransformStrings</span>: [<span class="hljs-string">&quot;some-important-value&quot;</span>, <span class="hljs-string">&quot;some-string_d&quot;</span>];<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="identifierNamesCache"><a href="#identifierNamesCache" class="headerlink" title="identifierNamesCache"></a><code>identifierNamesCache</code></h3><p>Type: <code>Object | null</code> Default: <code>null</code></p><p>该选项的主要目标是在混淆多个源&#x2F;文件时使用相同的标识符名称。</p><p>目前支持两种类型的标识符：</p><ul><li>全局标识符：<ul><li>所有全局标识符将被写入缓存;</li><li>所有匹配的未声明的全局标识符将被缓存中的值替换。</li></ul></li><li>属性标识符，仅当启用<code>renameProperties</code>选项时：<ul><li>所有属性标识符都将写入缓存；</li><li>所有匹配的属性标识符将被缓存中的值替换。</li></ul></li></ul><h4 id="Node-js-API"><a href="#Node-js-API" class="headerlink" title="Node.js API"></a>Node.js API</h4><p>如果传递了<code>null</code>值，则完全禁用缓存。</p><p>如果传递了一个空对象（<code>&#123;&#125;</code>），则启用将标识符名称写入缓存对象（<code>TIdentifierNamesCache</code>类型）。将通过<code>ObfuscationResult</code>对象的<code>getIdentifierNamesCache</code>方法调用来访问此缓存对象。</p><p>生成的缓存对象接下来可以用作<code>identifierNamesGenerator</code>选项值，用于在混淆下一个源的所有匹配标识符名称期间使用这些名称。</p><p>Example:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> source1ObfuscationResult = <span class="hljs-title class_">JavaScriptObfuscator</span>.<span class="hljs-title function_">obfuscate</span>(<br>  <span class="hljs-string">`</span><br><span class="hljs-string">        function foo(arg) &#123;</span><br><span class="hljs-string">           console.log(arg)</span><br><span class="hljs-string">        &#125;</span><br><span class="hljs-string">        </span><br><span class="hljs-string">        function bar() &#123;</span><br><span class="hljs-string">            var bark = 2;</span><br><span class="hljs-string">        &#125;</span><br><span class="hljs-string">    `</span>,<br>  &#123;<br>    <span class="hljs-attr">compact</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">identifierNamesCache</span>: &#123;&#125;,<br>    <span class="hljs-attr">renameGlobals</span>: <span class="hljs-literal">true</span>,<br>  &#125;<br>);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(source1ObfuscationResult.<span class="hljs-title function_">getIdentifierNamesCache</span>());<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">    &#123; </span><br><span class="hljs-comment">        globalIdentifiers: &#123;</span><br><span class="hljs-comment">            foo: &#x27;_0x5de86d&#x27;,</span><br><span class="hljs-comment">            bar: &#x27;_0x2a943b&#x27;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-keyword">const</span> source2ObfuscationResult = <span class="hljs-title class_">JavaScriptObfuscator</span>.<span class="hljs-title function_">obfuscate</span>(<br>  <span class="hljs-string">`</span><br><span class="hljs-string">        // Expecting that these global functions are defined in another obfuscated file</span><br><span class="hljs-string">        foo(1);</span><br><span class="hljs-string">        bar();</span><br><span class="hljs-string">        </span><br><span class="hljs-string">        // Expecting that this global function is defined in third-party package</span><br><span class="hljs-string">        baz();</span><br><span class="hljs-string">    `</span>,<br>  &#123;<br>    <span class="hljs-attr">compact</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">identifierNamesCache</span>: source1ObfuscationResult.<span class="hljs-title function_">getIdentifierNamesCache</span>(),<br>    <span class="hljs-attr">renameGlobals</span>: <span class="hljs-literal">true</span>,<br>  &#125;<br>);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(source2ObfuscationResult.<span class="hljs-title function_">getObfuscatedCode</span>());<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">    _0x5de86d(0x1);</span><br><span class="hljs-comment">    _0x2a943b();</span><br><span class="hljs-comment">    baz();</span><br><span class="hljs-comment"> */</span><br></code></pre></td></tr></table></figure><h4 id="CLI"><a href="#CLI" class="headerlink" title="CLI"></a>CLI</h4><p>CLI有一个不同的选项<code>--identifier-names-cache-path</code>，它允许定义现有<code>.json</code>文件的路径，该文件将用于读取和写入标识符名称缓存。</p><p>如果将传递到空文件的路径，则标识符名称缓存将写入该文件。</p><p>这个具有现有缓存的文件可以再次用作<code>--identifier-names-cache-path</code>选项值，用于在混淆下一个文件的所有匹配的标识符名称时使用这些名称。</p><h3 id="identifierNamesGenerator"><a href="#identifierNamesGenerator" class="headerlink" title="identifierNamesGenerator"></a><code>identifierNamesGenerator</code></h3><p>Type: <code>string</code> Default: <code>hexadecimal</code></p><p>设置标识符名称生成器。</p><p>可用值：</p><ul><li><code>dictionary</code>: 标识符中的<code>identifiersDictionary</code>列表</li><li><code>hexadecimal</code>: 标识符名称，如<code>_0xabc123</code></li><li><code>mangled</code>: 短标识符名称，如 <code>a</code>, <code>b</code>, <code>c</code></li><li><code>mangled-shuffled</code>: 同等与 <code>mangled</code> 但是使用混乱的字母</li></ul><h3 id="identifiersDictionary"><a href="#identifiersDictionary" class="headerlink" title="identifiersDictionary"></a><code>identifiersDictionary</code></h3><p>Type: <code>string[]</code> Default: <code>[]</code></p><p>为<code>identifierNamesGenerator</code>:<code>dictionary</code>选项设置标识符字典。字典中的每个标识符都将在几个变体中使用，每个字符的大小写不同。因此，字典中标识符的数量应该取决于原始源代码中的标识符数量。</p><h3 id="identifiersPrefix"><a href="#identifiersPrefix" class="headerlink" title="identifiersPrefix"></a><code>identifiersPrefix</code></h3><p>Type: <code>string</code> Default: <code>&#39;&#39;</code></p><p>为所有全局标识符设置前缀。</p><p>当您想要混淆多个文件时，请使用此选项。此选项有助于避免这些文件的全局标识符之间的冲突。每个文件的前缀应该不同。</p><h3 id="ignoreImports"><a href="#ignoreImports" class="headerlink" title="ignoreImports"></a><code>ignoreImports</code></h3><p>Type: <code>boolean</code> Default: <code>false</code></p><p>防止混淆<code>require</code>。在某些情况下，当运行时环境出于某种原因只需要使用静态字符串进行这些导入时，可能会有所帮助。</p><h3 id="inputFileName"><a href="#inputFileName" class="headerlink" title="inputFileName"></a><code>inputFileName</code></h3><p>Type: <code>string</code> Default: <code>&#39;&#39;</code></p><p>允许使用源代码设置输入文件的名称。此名称将在内部用于生成源映射。<br>使用NodeJS API时需要，并且<code>sourceMapSourcesMode</code>选项具有<code>sources</code>值&#96;。</p><h3 id="log"><a href="#log" class="headerlink" title="log"></a><code>log</code></h3><p>Type: <code>boolean</code> Default: <code>false</code></p><p>启用将信息记录到控制台</p><h3 id="numbersToExpressions"><a href="#numbersToExpressions" class="headerlink" title="numbersToExpressions"></a><code>numbersToExpressions</code></h3><p>Type: <code>boolean</code> Default: <code>false</code></p><p>启用数字转换为表达式</p><p>Example:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// input</span><br><span class="hljs-keyword">const</span> foo = <span class="hljs-number">1234</span>;<br><br><span class="hljs-comment">// output</span><br><span class="hljs-keyword">const</span> foo = -<span class="hljs-number">0xd93</span> + -<span class="hljs-number">0x10b4</span> + <span class="hljs-number">0x41</span> * <span class="hljs-number">0x67</span> + <span class="hljs-number">0x84e</span> * <span class="hljs-number">0x3</span> + -<span class="hljs-number">0xff8</span>;<br></code></pre></td></tr></table></figure><h3 id="optionsPreset"><a href="#optionsPreset" class="headerlink" title="optionsPreset"></a><code>optionsPreset</code></h3><p>Type: <code>string</code> Default: <code>default</code></p><p>允许设置预设选项(<code>options preset</code>)。</p><p>可用值：</p><ul><li><code>default</code>;</li><li><code>low-obfuscation</code>;</li><li><code>medium-obfuscation</code>;</li><li><code>high-obfuscation</code>.</li></ul><p>所有添加选项将与预设的选定选项合并。</p><h3 id="renameGlobals"><a href="#renameGlobals" class="headerlink" title="renameGlobals"></a><code>renameGlobals</code></h3><p>Type: <code>boolean</code> Default: <code>false</code></p><p><strong>此选项可能会破坏您的代码。只有当你知道它的作用时才启用它！</strong></p><p>使用声明启用全局变量和函数名的混淆处理。</p><h3 id="renameProperties"><a href="#renameProperties" class="headerlink" title="renameProperties"></a><code>renameProperties</code></h3><p>Type: <code>boolean</code> Default: <code>false</code></p><p><strong>此选项可能会破坏您的代码。只有当你知道它的作用时才启用它！</strong></p><p>允许重命名属性名。所有内置DOM属性和核心JavaScript类中的属性都将被忽略。</p><p>要在该选项的安全模式和不安全模式之间切换，请使用<code>renamePropertiesMode</code>选项。</p><p>要设置重命名属性名的格式，请使用<code>identifierNamesGenerator</code>选项。</p><p>要控制重命名哪些属性，请使用<code>reservedNames</code>选项。</p><p>Example:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// input</span><br>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> foo = &#123;<br>    <span class="hljs-attr">prop1</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">prop2</span>: <span class="hljs-number">2</span>,<br>    <span class="hljs-attr">calc</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">prop1</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">prop2</span>;<br>    &#125;,<br>  &#125;;<br><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo.<span class="hljs-title function_">calc</span>());<br>&#125;)();<br><br><span class="hljs-comment">// output</span><br>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> _0x46529b = &#123;<br>    <span class="hljs-attr">_0x10cec7</span>: <span class="hljs-number">0x1</span>,<br>    <span class="hljs-attr">_0xc1c0ca</span>: <span class="hljs-number">0x2</span>,<br>    <span class="hljs-attr">_0x4b961d</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>[<span class="hljs-string">&quot;_0x10cec7&quot;</span>] + <span class="hljs-variable language_">this</span>[<span class="hljs-string">&quot;_0xc1c0ca&quot;</span>];<br>    &#125;,<br>  &#125;;<br>  <span class="hljs-variable language_">console</span>[<span class="hljs-string">&quot;log&quot;</span>](_0x46529b[<span class="hljs-string">&quot;_0x4b961d&quot;</span>]());<br>&#125;)();<br></code></pre></td></tr></table></figure><h3 id="renamePropertiesMode"><a href="#renamePropertiesMode" class="headerlink" title="renamePropertiesMode"></a><code>renamePropertiesMode</code></h3><p>Type: <code>string</code> Default: <code>safe</code></p><p><strong>即使在 <code>safe</code> 模式，<code>renameProperties</code>选项也可能破坏你的代码。</strong></p><p>指定<code>renameProperties</code>选项模式：</p><ul><li><code>safe</code> - 2.11.0发布后的默认行为。试图以更安全的方式重命名属性以防止运行时错误。在这种模式下，一些属性将被排除在重命名之外。</li><li><code>unsafe</code> - 2.11.0发布前的默认行为。以不安全的方式重命名属性，没有任何限制。</li></ul><p>如果一个文件使用来自其他文件的属性，则使用<code>identifierNamesCache</code>选项在这些文件之间保持相同的属性名称。</p><h3 id="reservedNames"><a href="#reservedNames" class="headerlink" title="reservedNames"></a><code>reservedNames</code></h3><p>Type: <code>string[]</code> Default: <code>[]</code></p><p>禁用标识符的混淆和生成，由传递的RegExp模式匹配。</p><p>Example:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript">&#123;<br>  <span class="hljs-attr">reservedNames</span>: [<span class="hljs-string">&quot;^someVariable&quot;</span>, <span class="hljs-string">&quot;functionParameter_d&quot;</span>];<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="reservedStrings"><a href="#reservedStrings" class="headerlink" title="reservedStrings"></a><code>reservedStrings</code></h3><p>Type: <code>string[]</code> Default: <code>[]</code></p><p>禁用由传递的RegExp模式匹配的字符串字面量的转换。</p><p>Example:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript">&#123;<br>  <span class="hljs-attr">reservedStrings</span>: [<span class="hljs-string">&quot;react-native&quot;</span>, <span class="hljs-string">&quot;./src/test&quot;</span>, <span class="hljs-string">&quot;some-string_d&quot;</span>];<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="seed"><a href="#seed" class="headerlink" title="seed"></a><code>seed</code></h3><p>Type: <code>string|number</code> Default: <code>0</code></p><p>此选项为随机生成器设置seed。这对于创建可重复的结果很有用。</p><p>如果seed是0 -随机发生器将工作没有seed。</p><h3 id="selfDefending"><a href="#selfDefending" class="headerlink" title="selfDefending"></a><code>selfDefending</code></h3><p>Type: <code>boolean</code> Default: <code>false</code></p><p><strong>在使用此选项后，不要以任何方式更改被混淆的代码，因为任何像丑陋代码这样的更改都会触发自我防御，代码将不再工作!</strong></p><p><strong>此选项强制将<code>compact</code>值设置为<code>true</code></strong></p><p>此选项使输出代码在格式化和变量重命名时具有弹性。如果试图在混淆的代码上使用JavaScript美化器，代码将不再工作，使其更难理解和修改。</p><h3 id="simplify"><a href="#simplify" class="headerlink" title="simplify"></a><code>simplify</code></h3><p>Type: <code>boolean</code> Default: <code>true</code></p><p>通过简化实现额外的代码混淆。</p><p><strong>在以后的版本中，<code>boolean</code>字面值的混淆(<code>true</code> &#x3D;&gt; <code>!![]</code>)将被移到这个选项下。</strong></p><p>Example:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// input</span><br><span class="hljs-keyword">if</span> (condition1) &#123;<br>  <span class="hljs-keyword">const</span> foo = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">const</span> bar = <span class="hljs-number">2</span>;<br><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo);<br><br>  <span class="hljs-keyword">return</span> bar;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (condition2) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>);<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>);<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">4</span>;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">5</span>;<br>&#125;<br><br><span class="hljs-comment">// output</span><br><span class="hljs-keyword">if</span> (condition1) &#123;<br>  <span class="hljs-keyword">const</span> foo = <span class="hljs-number">0x1</span>,<br>    bar = <span class="hljs-number">0x2</span>;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>[<span class="hljs-string">&quot;log&quot;</span>](foo), bar;<br>&#125; <span class="hljs-keyword">else</span><br>  <span class="hljs-keyword">return</span> condition2<br>    ? (<span class="hljs-variable language_">console</span>[<span class="hljs-string">&quot;log&quot;</span>](<span class="hljs-number">0x1</span>), <span class="hljs-variable language_">console</span>[<span class="hljs-string">&quot;log&quot;</span>](<span class="hljs-number">0x2</span>), <span class="hljs-variable language_">console</span>[<span class="hljs-string">&quot;log&quot;</span>](<span class="hljs-number">0x3</span>), <span class="hljs-number">0x4</span>)<br>    : <span class="hljs-number">0x5</span>;<br></code></pre></td></tr></table></figure><h3 id="sourceMap"><a href="#sourceMap" class="headerlink" title="sourceMap"></a><code>sourceMap</code></h3><p>Type: <code>boolean</code> Default: <code>false</code></p><p>为混淆的代码启用源映射生成。</p><p>源映射可以帮助您调试混淆的JavaScript源代码。如果希望或需要在生产环境中进行调试，可以将单独的源映射文件上传到一个秘密位置，然后将浏览器指向该位置。</p><h3 id="sourceMapBaseUrl"><a href="#sourceMapBaseUrl" class="headerlink" title="sourceMapBaseUrl"></a><code>sourceMapBaseUrl</code></h3><p>Type: <code>string</code> Default: &#96;&#96;</p><p>当<code>sourceMapMode: &#39;separate&#39;</code>时，将基本url设置为源映射导入url。</p><p>CLI example:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">javascript-obfuscator <span class="hljs-selector-tag">input</span><span class="hljs-selector-class">.js</span> <span class="hljs-attr">--output</span> out<span class="hljs-selector-class">.js</span> <span class="hljs-attr">--source-map</span> true <span class="hljs-attr">--source-map-base-url</span> <span class="hljs-string">&#x27;http://localhost:9000&#x27;</span><br></code></pre></td></tr></table></figure><p>Result:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">//# </span><span class="language-bash">sourceMappingURL=http://localhost:9000/out.js.map</span><br></code></pre></td></tr></table></figure><h3 id="sourceMapFileName"><a href="#sourceMapFileName" class="headerlink" title="sourceMapFileName"></a><code>sourceMapFileName</code></h3><p>Type: <code>string</code> Default: &#96;&#96;</p><p>当<code>sourceMapMode: &#39;separate&#39;</code>时，设置输出源映射的文件名。</p><p>CLI example:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">javascript-obfuscator <span class="hljs-built_in">input</span>.js --output out.js --<span class="hljs-keyword">source</span>-<span class="hljs-keyword">map</span> true --<span class="hljs-keyword">source</span>-<span class="hljs-keyword">map</span>-base-url <span class="hljs-string">&#x27;http://localhost:9000&#x27;</span> --<span class="hljs-keyword">source</span>-<span class="hljs-keyword">map</span>-<span class="hljs-keyword">file</span>-name example<br></code></pre></td></tr></table></figure><p>Result:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">//# </span><span class="language-bash">sourceMappingURL=http://localhost:9000/example.js.map</span><br></code></pre></td></tr></table></figure><h3 id="sourceMapMode"><a href="#sourceMapMode" class="headerlink" title="sourceMapMode"></a><code>sourceMapMode</code></h3><p>Type: <code>string</code> Default: <code>separate</code></p><p>指定源映射生成模式:</p><ul><li><code>inline</code> - 在每个.js文件的末尾添加源映射;</li><li><code>separate</code> - 生成相应的<code>.map &#39;文件与源映射。如果你通过CLI运行混淆器-添加链接到源映射文件的文件末尾与混淆的代码</code>&#x2F;&#x2F;# sourceMappingUrl&#x3D;file.js.map&#96;。</li></ul><h3 id="sourceMapSourcesMode"><a href="#sourceMapSourcesMode" class="headerlink" title="sourceMapSourcesMode"></a><code>sourceMapSourcesMode</code></h3><p>Type: <code>string</code> Default: <code>sources-content</code></p><p>允许控制<code>sources</code>和<code>sourcesContent</code>映射源的字段:</p><ul><li><code>sources-content</code> - 添加虚拟<code>sources</code>字段，添加原始源代码的<code>sourcesContent</code>字段;</li><li><code>sources</code> - 使用有效的源描述添加<code>sources</code>字段，不添加<code>sourcesContent</code>字段。当使用NodeJS API时，需要定义<code>inputFileName</code>选项，该选项将用作<code>source</code>字段值。</li></ul><h3 id="splitStrings"><a href="#splitStrings" class="headerlink" title="splitStrings"></a><code>splitStrings</code></h3><p>Type: <code>boolean</code> Default: <code>false</code></p><p>将字面值字符串分割为长度为<code>splitStringsChunkLength</code>选项值的块。</p><p>Example:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// input</span><br>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> test = <span class="hljs-string">&quot;abcdefg&quot;</span>;<br>&#125;)();<br><br><span class="hljs-comment">// output</span><br>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> _0x5a21 = <span class="hljs-string">&quot;ab&quot;</span> + <span class="hljs-string">&quot;cd&quot;</span> + <span class="hljs-string">&quot;ef&quot;</span> + <span class="hljs-string">&quot;g&quot;</span>;<br>&#125;)();<br></code></pre></td></tr></table></figure><h3 id="splitStringsChunkLength"><a href="#splitStringsChunkLength" class="headerlink" title="splitStringsChunkLength"></a><code>splitStringsChunkLength</code></h3><p>Type: <code>number</code> Default: <code>10</code></p><p>设置<code>splitStrings</code>选项的块长度。</p><h3 id="stringArray"><a href="#stringArray" class="headerlink" title="stringArray"></a><code>stringArray</code></h3><p>Type: <code>boolean</code> Default: <code>true</code></p><p>删除字符串字面量并将其放置在特殊数组中。例如，字符串<code>&quot;Hello World&quot;</code>在<code>var m = &quot;Hello World&quot;;</code>将被替换为类似<code>var m = _0x12c456[0x1];</code></p><h3 id="stringArrayCallsTransform"><a href="#stringArrayCallsTransform" class="headerlink" title="stringArrayCallsTransform"></a><code>stringArrayCallsTransform</code></h3><p>Type: <code>boolean</code> Default: <code>false</code></p><p><strong>必须启用<code>stringArray</code>选项</strong></p><p>启用对<code>stringArray</code>的调用转换。这些调用的所有参数都可以根据<code>stringArrayCallsTransformThreshold</code>的值提取到不同的对象。<br>这使得自动查找字符串数组的调用变得更加困难。</p><p>Example:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> k = &#123;<br>        <span class="hljs-attr">c</span>: <span class="hljs-number">0x2f2</span>,<br>        <span class="hljs-attr">d</span>: <span class="hljs-string">&#x27;0x396&#x27;</span>,<br>        <span class="hljs-attr">e</span>: <span class="hljs-string">&#x27;0x397&#x27;</span>,<br>        <span class="hljs-attr">f</span>: <span class="hljs-string">&#x27;0x39a&#x27;</span>,<br>        <span class="hljs-attr">g</span>: <span class="hljs-string">&#x27;0x39d&#x27;</span>,<br>        <span class="hljs-attr">h</span>: <span class="hljs-number">0x398</span>,<br>        <span class="hljs-attr">l</span>: <span class="hljs-number">0x394</span>,<br>        <span class="hljs-attr">m</span>: <span class="hljs-string">&#x27;0x39b&#x27;</span>,<br>        <span class="hljs-attr">n</span>: <span class="hljs-string">&#x27;0x39f&#x27;</span>,<br>        <span class="hljs-attr">o</span>: <span class="hljs-number">0x395</span>,<br>        <span class="hljs-attr">p</span>: <span class="hljs-number">0x395</span>,<br>        <span class="hljs-attr">q</span>: <span class="hljs-number">0x399</span>,<br>        <span class="hljs-attr">r</span>: <span class="hljs-string">&#x27;0x399&#x27;</span><br>    &#125;;<br>    <span class="hljs-keyword">var</span> c = i(k.d, k.e);<br>    <span class="hljs-keyword">var</span> d = i(k.f, k.g);<br>    <span class="hljs-keyword">var</span> e = i(k.h, k.l);<br>    <span class="hljs-keyword">var</span> f = i(k.m, k.n);<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">i</span>(<span class="hljs-params">c, d</span>) &#123;<br>        <span class="hljs-keyword">return</span> b(c - k.c, d);<br>    &#125;<br>    <span class="hljs-keyword">var</span> g = i(k.o, k.p);<br>    <span class="hljs-keyword">var</span> h = i(k.q, k.r);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">j</span>(<span class="hljs-params">c, d</span>) &#123;<br>    <span class="hljs-keyword">var</span> l = &#123; <span class="hljs-attr">c</span>: <span class="hljs-number">0x14b</span> &#125;;<br>    <span class="hljs-keyword">return</span> b(c - -l.c, d);<br>&#125;<br><span class="hljs-built_in">console</span>[j(-<span class="hljs-string">&#x27;0xa6&#x27;</span>, -<span class="hljs-string">&#x27;0xa6&#x27;</span>)](foo());<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">b</span>(<span class="hljs-params">c, d</span>) &#123;<br>    <span class="hljs-keyword">var</span> e = a();<br>    b = <span class="hljs-keyword">function</span> (<span class="hljs-params">f, g</span>) &#123;<br>        f = f - <span class="hljs-number">0xa3</span>;<br>        <span class="hljs-keyword">var</span> h = e[f];<br>        <span class="hljs-keyword">return</span> h;<br>    &#125;;<br>    <span class="hljs-keyword">return</span> b(c, d);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> m = [<br>        <span class="hljs-string">&#x27;string5&#x27;</span>,<br>        <span class="hljs-string">&#x27;string1&#x27;</span>,<br>        <span class="hljs-string">&#x27;log&#x27;</span>,<br>        <span class="hljs-string">&#x27;string3&#x27;</span>,<br>        <span class="hljs-string">&#x27;string6&#x27;</span>,<br>        <span class="hljs-string">&#x27;string2&#x27;</span>,<br>        <span class="hljs-string">&#x27;string4&#x27;</span><br>    ];<br>    a = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> m;<br>    &#125;;<br>    <span class="hljs-keyword">return</span> a();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="stringArrayCallsTransformThreshold"><a href="#stringArrayCallsTransformThreshold" class="headerlink" title="stringArrayCallsTransformThreshold"></a><code>stringArrayCallsTransformThreshold</code></h3><p>Type: <code>number</code> Default: <code>0.5</code></p><p><strong>必须启用<code>stringArray</code>和<code>stringArrayCallsTransformThreshold</code>选项</strong></p><p>您可以使用此设置调整对字符串数组的调用将被转换的概率(从0到1)。</p><h3 id="stringArrayEncoding"><a href="#stringArrayEncoding" class="headerlink" title="stringArrayEncoding"></a><code>stringArrayEncoding</code></h3><p>Type: <code>string[]</code> Default: <code>[]</code></p><p><strong>必须启用<code>stringArray</code>选项</strong></p><p>这个选项会降低脚本的速度。</p><p>使用<code>base64</code>或<code>rc4</code>编码<code>stringArray</code>的所有字符串字面量，并插入用于在运行时解码的特殊代码。</p><p>每个<code>stringArray</code>值都将使用从传递列表中随机选择的编码进行编码。这使得使用多种编码成为可能。</p><p>可用的值:</p><ul><li><code>&#39;none&#39;</code> (<code>boolean</code>): 不编码<code>stringArray</code>的值</li><li><code>&#39;base64&#39;</code> (<code>string</code>): 使用<code>base64</code>编码<code>stringArray</code>值</li><li><code>&#39;rc4&#39;</code> (<code>string</code>): 使用<code>rc4</code>编码<code>stringArray</code>值。**大约比base64慢30-50%**，但更难获得初始值。建议在使用<code>rc4</code>编码时禁用<code>unicodeEscapeSequence</code>选项，以防止非常大尺寸的混淆代码。</li></ul><p>例如，对于以下选项值，一些<code>stringArray</code>值将不会被编码，而一些值将使用<code>base64</code>和<code>rc4</code>编码:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-attr">stringArrayEncoding</span>: [<span class="hljs-string">&quot;none&quot;</span>, <span class="hljs-string">&quot;base64&quot;</span>, <span class="hljs-string">&quot;rc4&quot;</span>];<br></code></pre></td></tr></table></figure><h3 id="stringArrayIndexesType"><a href="#stringArrayIndexesType" class="headerlink" title="stringArrayIndexesType"></a><code>stringArrayIndexesType</code></h3><p>Type: <code>string[]</code> Default: <code>[&#39;hexadecimal-number&#39;]</code></p><p><strong>必须启用<code>stringArray</code>选项</strong></p><p>允许控制字符串数组调用索引的类型。</p><p>每个<code>stringArray</code>调用索引将由从传递的列表中随机选择的类型进行转换。这使得使用多种类型成为可能。</p><p>可用的值:</p><ul><li><code>&#39;hexadecimal-number&#39;</code> (<code>default</code>): 将字符串数组调用索引转换为十六进制数</li><li><code>&#39;hexadecimal-numeric-string&#39;</code>: 将字符串数组调用索引转换为十六进制数字字符串</li></ul><p>在<code>2.9.0</code>发布之前，<code>javascript-obfuscator</code>将所有字符串数组调用索引转换为<code>hexadecimal-numeric-string</code>类型。这使得一些手动去混淆稍微困难一些，但它允许自动去混淆器轻松检测这些调用。</p><p>新的<code>hexadecimal-number</code>类型方法使代码中更难自动检测字符串数组调用模式。</p><p>未来将添加更多类型。</p><h3 id="stringArrayIndexShift"><a href="#stringArrayIndexShift" class="headerlink" title="stringArrayIndexShift"></a><code>stringArrayIndexShift</code></h3><p>Type: <code>boolean</code> Default: <code>true</code></p><p>** <code>stringArray</code> option must be enabled**</p><p>Enables additional index shift for all string array calls</p><h3 id="stringArrayRotate"><a href="#stringArrayRotate" class="headerlink" title="stringArrayRotate"></a><code>stringArrayRotate</code></h3><p>Type: <code>boolean</code> Default: <code>true</code></p><p><strong>必须启用<code>stringArray</code>选项</strong></p><p>将<code>stringArray</code>数组移动到固定和随机的位置(在代码混淆时生成)。这使得将删除的字符串的顺序匹配到原始位置变得更加困难。</p><h3 id="stringArrayShuffle"><a href="#stringArrayShuffle" class="headerlink" title="stringArrayShuffle"></a><code>stringArrayShuffle</code></h3><p>Type: <code>boolean</code> Default: <code>true</code></p><p><strong>必须启用<code>stringArray</code>选项</strong></p><p>随机打乱<code>stringArray</code>数组项。</p><h3 id="stringArrayWrappersCount"><a href="#stringArrayWrappersCount" class="headerlink" title="stringArrayWrappersCount"></a><code>stringArrayWrappersCount</code></h3><p>Type: <code>number</code> Default: <code>1</code></p><p><strong>必须启用<code>stringArray</code>选项</strong></p><p>为每个根或函数作用域内的<code>string array</code>设置包装器的计数。<br>每个作用域中包装器的实际数量受限于该作用域中文字节点的数量。</p><p>Example:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// Input</span><br><span class="hljs-keyword">const</span> foo = <span class="hljs-string">&quot;foo&quot;</span>;<br><span class="hljs-keyword">const</span> bar = <span class="hljs-string">&quot;bar&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> baz = <span class="hljs-string">&quot;baz&quot;</span>;<br>  <span class="hljs-keyword">const</span> bark = <span class="hljs-string">&quot;bark&quot;</span>;<br>  <span class="hljs-keyword">const</span> hawk = <span class="hljs-string">&quot;hawk&quot;</span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> eagle = <span class="hljs-string">&quot;eagle&quot;</span>;<br><br><span class="hljs-comment">// Output, stringArrayWrappersCount: 5</span><br><span class="hljs-keyword">const</span> _0x3f6c = [<span class="hljs-string">&quot;bark&quot;</span>, <span class="hljs-string">&quot;bar&quot;</span>, <span class="hljs-string">&quot;foo&quot;</span>, <span class="hljs-string">&quot;eagle&quot;</span>, <span class="hljs-string">&quot;hawk&quot;</span>, <span class="hljs-string">&quot;baz&quot;</span>];<br><span class="hljs-keyword">const</span> _0x48f96e = _0x2e13;<br><span class="hljs-keyword">const</span> _0x4dfed8 = _0x2e13;<br><span class="hljs-keyword">const</span> _0x55e970 = _0x2e13;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x2e13</span>(<span class="hljs-params">_0x33c4f5, _0x3f6c62</span>) &#123;<br>  _0x2e13 = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x2e1388, _0x60b1e</span>) &#123;<br>    _0x2e1388 = _0x2e1388 - <span class="hljs-number">0xe2</span>;<br>    <span class="hljs-keyword">let</span> _0x53d475 = _0x3f6c[_0x2e1388];<br>    <span class="hljs-keyword">return</span> _0x53d475;<br>  &#125;;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x2e13</span>(_0x33c4f5, _0x3f6c62);<br>&#125;<br><span class="hljs-keyword">const</span> foo = <span class="hljs-title function_">_0x48f96e</span>(<span class="hljs-number">0xe4</span>);<br><span class="hljs-keyword">const</span> bar = <span class="hljs-title function_">_0x4dfed8</span>(<span class="hljs-number">0xe3</span>);<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> _0x1c262f = _0x2e13;<br>  <span class="hljs-keyword">const</span> _0x54d7a4 = _0x2e13;<br>  <span class="hljs-keyword">const</span> _0x5142fe = _0x2e13;<br>  <span class="hljs-keyword">const</span> _0x1392b0 = <span class="hljs-title function_">_0x1c262f</span>(<span class="hljs-number">0xe7</span>);<br>  <span class="hljs-keyword">const</span> _0x201a58 = <span class="hljs-title function_">_0x1c262f</span>(<span class="hljs-number">0xe2</span>);<br>  <span class="hljs-keyword">const</span> _0xd3a7fb = <span class="hljs-title function_">_0x1c262f</span>(<span class="hljs-number">0xe6</span>);<br>&#125;<br><span class="hljs-keyword">const</span> eagle = <span class="hljs-title function_">_0x48f96e</span>(<span class="hljs-number">0xe5</span>);<br></code></pre></td></tr></table></figure><h3 id="stringArrayWrappersChainedCalls"><a href="#stringArrayWrappersChainedCalls" class="headerlink" title="stringArrayWrappersChainedCalls"></a><code>stringArrayWrappersChainedCalls</code></h3><p>Type: <code>boolean</code> Default: <code>true</code></p><p><strong>必须启用<code>stringArray</code>和<code>stringArrayWrappersCount</code>选项</strong></p><p>启用<code>string array</code>包装器之间的链式调用。</p><p>Example:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// Input</span><br><span class="hljs-keyword">const</span> foo = <span class="hljs-string">&quot;foo&quot;</span>;<br><span class="hljs-keyword">const</span> bar = <span class="hljs-string">&quot;bar&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> baz = <span class="hljs-string">&quot;baz&quot;</span>;<br>  <span class="hljs-keyword">const</span> bark = <span class="hljs-string">&quot;bark&quot;</span>;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">test1</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> hawk = <span class="hljs-string">&quot;hawk&quot;</span>;<br>    <span class="hljs-keyword">const</span> eagle = <span class="hljs-string">&quot;eagle&quot;</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// Output, stringArrayWrappersCount: 5, stringArrayWrappersChainedCalls: true</span><br><span class="hljs-keyword">const</span> _0x40c2 = [<span class="hljs-string">&quot;bar&quot;</span>, <span class="hljs-string">&quot;bark&quot;</span>, <span class="hljs-string">&quot;hawk&quot;</span>, <span class="hljs-string">&quot;eagle&quot;</span>, <span class="hljs-string">&quot;foo&quot;</span>, <span class="hljs-string">&quot;baz&quot;</span>];<br><span class="hljs-keyword">const</span> _0x31c087 = _0x3280;<br><span class="hljs-keyword">const</span> _0x31759a = _0x3280;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x3280</span>(<span class="hljs-params">_0x1f52ee, _0x40c2a2</span>) &#123;<br>  _0x3280 = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x3280a4, _0xf07b02</span>) &#123;<br>    _0x3280a4 = _0x3280a4 - <span class="hljs-number">0x1c4</span>;<br>    <span class="hljs-keyword">let</span> _0x57a182 = _0x40c2[_0x3280a4];<br>    <span class="hljs-keyword">return</span> _0x57a182;<br>  &#125;;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x3280</span>(_0x1f52ee, _0x40c2a2);<br>&#125;<br><span class="hljs-keyword">const</span> foo = <span class="hljs-title function_">_0x31c087</span>(<span class="hljs-number">0x1c8</span>);<br><span class="hljs-keyword">const</span> bar = <span class="hljs-title function_">_0x31c087</span>(<span class="hljs-number">0x1c4</span>);<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> _0x848719 = _0x31759a;<br>  <span class="hljs-keyword">const</span> _0x2693bf = _0x31c087;<br>  <span class="hljs-keyword">const</span> _0x2c08e8 = <span class="hljs-title function_">_0x848719</span>(<span class="hljs-number">0x1c9</span>);<br>  <span class="hljs-keyword">const</span> _0x359365 = <span class="hljs-title function_">_0x2693bf</span>(<span class="hljs-number">0x1c5</span>);<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x175e90</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> _0x310023 = _0x848719;<br>    <span class="hljs-keyword">const</span> _0x2302ef = _0x2693bf;<br>    <span class="hljs-keyword">const</span> _0x237437 = <span class="hljs-title function_">_0x310023</span>(<span class="hljs-number">0x1c6</span>);<br>    <span class="hljs-keyword">const</span> _0x56145c = <span class="hljs-title function_">_0x310023</span>(<span class="hljs-number">0x1c7</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="stringArrayWrappersParametersMaxCount"><a href="#stringArrayWrappersParametersMaxCount" class="headerlink" title="stringArrayWrappersParametersMaxCount"></a><code>stringArrayWrappersParametersMaxCount</code></h3><p>Type: <code>number</code> Default: <code>2</code></p><p><strong>必须启用<code>stringArray</code>选项</strong></p><p><strong>目前该选项仅影响由<code>stringArrayWrappersType``function</code> 选项值添加的包装器</strong></p><p>允许控制字符串数组包装器参数的最大数量。<br>默认值和最小值为2。建议值为2 ~ 5。</p><h3 id="stringArrayWrappersType"><a href="#stringArrayWrappersType" class="headerlink" title="stringArrayWrappersType"></a><code>stringArrayWrappersType</code></h3><p>Type: <code>string</code> Default: <code>variable</code></p><p><strong>必须启用<code>stringArray</code>和<code>stringArrayWrappersCount</code>选项</strong></p><p>允许选择由<code>stringArrayWrappersCount</code>选项附加的包装器类型。</p><p>可用的值:</p><ul><li><code>&#39;variable&#39;</code>: 在每个作用域的顶部追加变量包装器。快速的性能。</li><li><code>&#39;function&#39;</code>: 在每个作用域内的随机位置追加函数包装器。性能比变量更慢，但提供了更严格的混淆。</li></ul><p>当性能损失对被混淆的应用程序影响不大时，强烈建议使用<code>function</code>包装器来实现更严重的混淆。</p><p>‘function’选项值的示例:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// input</span><br><span class="hljs-keyword">const</span> foo = <span class="hljs-string">&quot;foo&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> bar = <span class="hljs-string">&quot;bar&quot;</span>;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo, bar);<br>&#125;<br><br><span class="hljs-title function_">test</span>();<br><br><span class="hljs-comment">// output</span><br><span class="hljs-keyword">const</span> a = [<span class="hljs-string">&quot;log&quot;</span>, <span class="hljs-string">&quot;bar&quot;</span>, <span class="hljs-string">&quot;foo&quot;</span>];<br><span class="hljs-keyword">const</span> foo = <span class="hljs-title function_">d</span>(<span class="hljs-number">0x567</span>, <span class="hljs-number">0x568</span>);<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">b</span>(<span class="hljs-params">c, d</span>) &#123;<br>  b = <span class="hljs-keyword">function</span> (<span class="hljs-params">e, f</span>) &#123;<br>    e = e - <span class="hljs-number">0x185</span>;<br>    <span class="hljs-keyword">let</span> g = a[e];<br>    <span class="hljs-keyword">return</span> g;<br>  &#125;;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">b</span>(c, d);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> c = <span class="hljs-title function_">e</span>(<span class="hljs-number">0x51c</span>, <span class="hljs-number">0x51b</span>);<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">e</span>(<span class="hljs-params">c, g</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">b</span>(c - <span class="hljs-number">0x396</span>, g);<br>  &#125;<br>  <span class="hljs-variable language_">console</span>[<span class="hljs-title function_">f</span>(<span class="hljs-number">0x51b</span>, <span class="hljs-number">0x51d</span>)](foo, c);<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">c, g</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">b</span>(c - <span class="hljs-number">0x396</span>, g);<br>  &#125;<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">d</span>(<span class="hljs-params">c, g</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">b</span>(g - <span class="hljs-number">0x3e1</span>, c);<br>&#125;<br><span class="hljs-title function_">test</span>();<br></code></pre></td></tr></table></figure><h3 id="stringArrayThreshold"><a href="#stringArrayThreshold" class="headerlink" title="stringArrayThreshold"></a><code>stringArrayThreshold</code></h3><p>Type: <code>number</code> Default: <code>0.8</code> Min: <code>0</code> Max: <code>1</code></p><p><strong>必须启用<code>stringArray</code>选项</strong></p><p>您可以使用此设置来调整将字符串字面值插入到<code>stringArray</code>的概率(从0到1)。</p><p>此设置对于大代码特别有用，因为它会重复调用字符串数组，并降低代码速度。</p><p><code>stringArrayThreshold: 0</code> 等于 <code>stringArray: false</code>.</p><h3 id="target"><a href="#target" class="headerlink" title="target"></a><code>target</code></h3><p>Type: <code>string</code> Default: <code>browser</code></p><p>允许为混淆的代码设置目标环境。</p><p>可用的值:</p><ul><li><code>browser</code>;</li><li><code>browser-no-eval</code>;</li><li><code>node</code>.</li></ul><p>目前<code>browser</code>和<code>node</code>目标的输出代码是相同的，但某些浏览器特定的选项不允许与<code>节点</code>目标一起使用。<br><code>browser-no-eval</code>目标的输出代码没有使用<code>eval</code>。</p><h3 id="transformObjectKeys"><a href="#transformObjectKeys" class="headerlink" title="transformObjectKeys"></a><code>transformObjectKeys</code></h3><p>Type: <code>boolean</code> Default: <code>false</code></p><p>启用对象键的转换。</p><p>Example:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// input</span><br>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> <span class="hljs-built_in">object</span> = &#123;<br>    <span class="hljs-attr">foo</span>: <span class="hljs-string">&quot;test1&quot;</span>,<br>    <span class="hljs-attr">bar</span>: &#123;<br>      <span class="hljs-attr">baz</span>: <span class="hljs-string">&quot;test2&quot;</span>,<br>    &#125;,<br>  &#125;;<br>&#125;)();<br><br><span class="hljs-comment">// output</span><br><span class="hljs-keyword">var</span> _0x4735 = [<span class="hljs-string">&quot;foo&quot;</span>, <span class="hljs-string">&quot;baz&quot;</span>, <span class="hljs-string">&quot;bar&quot;</span>, <span class="hljs-string">&quot;test1&quot;</span>, <span class="hljs-string">&quot;test2&quot;</span>];<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x390c</span>(<span class="hljs-params">_0x33d6b6, _0x4735f4</span>) &#123;<br>  _0x390c = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x390c37, _0x1eed85</span>) &#123;<br>    _0x390c37 = _0x390c37 - <span class="hljs-number">0x198</span>;<br>    <span class="hljs-keyword">var</span> _0x2275f8 = _0x4735[_0x390c37];<br>    <span class="hljs-keyword">return</span> _0x2275f8;<br>  &#125;;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x390c</span>(_0x33d6b6, _0x4735f4);<br>&#125;<br>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> _0x17d1b7 = _0x390c;<br>  <span class="hljs-keyword">var</span> _0xc9b6bb = &#123;&#125;;<br>  _0xc9b6bb[<span class="hljs-title function_">_0x17d1b7</span>(<span class="hljs-number">0x199</span>)] = <span class="hljs-title function_">_0x17d1b7</span>(<span class="hljs-number">0x19c</span>);<br>  <span class="hljs-keyword">var</span> _0x3d959a = &#123;&#125;;<br>  _0x3d959a[<span class="hljs-title function_">_0x17d1b7</span>(<span class="hljs-number">0x198</span>)] = <span class="hljs-title function_">_0x17d1b7</span>(<span class="hljs-number">0x19b</span>);<br>  _0x3d959a[<span class="hljs-title function_">_0x17d1b7</span>(<span class="hljs-number">0x19a</span>)] = _0xc9b6bb;<br>  <span class="hljs-keyword">var</span> _0x41fd86 = _0x3d959a;<br>&#125;)();<br></code></pre></td></tr></table></figure><h3 id="unicodeEscapeSequence"><a href="#unicodeEscapeSequence" class="headerlink" title="unicodeEscapeSequence"></a><code>unicodeEscapeSequence</code></h3><p>Type: <code>boolean</code> Default: <code>false</code></p><p>允许启用&#x2F;禁用字符串转换到unicode转义序列。</p><p>Unicode转义序列极大地增加了代码大小，并且字符串可以很容易地恢复到原始视图。建议仅对小源代码启用此选项。</p><h2 id="预设选项"><a href="#预设选项" class="headerlink" title="预设选项"></a>预设选项</h2><p>配置<code>optionsPreset</code>的选项</p><h3 id="高混淆，低性能（high-obfuscation）"><a href="#高混淆，低性能（high-obfuscation）" class="headerlink" title="高混淆，低性能（high-obfuscation）"></a>高混淆，低性能（high-obfuscation）</h3><p>性能将比没有混淆时慢得多</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>    <span class="hljs-attr">compact</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">controlFlowFlattening</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">controlFlowFlatteningThreshold</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">deadCodeInjection</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">deadCodeInjectionThreshold</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">debugProtection</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">debugProtectionInterval</span>: <span class="hljs-number">4000</span>,<br>    <span class="hljs-attr">disableConsoleOutput</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">identifierNamesGenerator</span>: <span class="hljs-string">&#x27;hexadecimal&#x27;</span>,<br>    <span class="hljs-attr">log</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">numbersToExpressions</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">renameGlobals</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">selfDefending</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">simplify</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">splitStrings</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">splitStringsChunkLength</span>: <span class="hljs-number">5</span>,<br>    <span class="hljs-attr">stringArray</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayCallsTransform</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayEncoding</span>: [<span class="hljs-string">&#x27;rc4&#x27;</span>],<br>    <span class="hljs-attr">stringArrayIndexShift</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayRotate</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayShuffle</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayWrappersCount</span>: <span class="hljs-number">5</span>,<br>    <span class="hljs-attr">stringArrayWrappersChainedCalls</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayWrappersParametersMaxCount</span>: <span class="hljs-number">5</span>,<br>    <span class="hljs-attr">stringArrayWrappersType</span>: <span class="hljs-string">&#x27;function&#x27;</span>,<br>    <span class="hljs-attr">stringArrayThreshold</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">transformObjectKeys</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">unicodeEscapeSequence</span>: <span class="hljs-literal">false</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="中等混淆，性能最佳（medium-obfuscation）"><a href="#中等混淆，性能最佳（medium-obfuscation）" class="headerlink" title="中等混淆，性能最佳（medium-obfuscation）"></a>中等混淆，性能最佳（medium-obfuscation）</h3><p>性能会比没有混淆时慢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>    <span class="hljs-attr">compact</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">controlFlowFlattening</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">controlFlowFlatteningThreshold</span>: <span class="hljs-number">0.75</span>,<br>    <span class="hljs-attr">deadCodeInjection</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">deadCodeInjectionThreshold</span>: <span class="hljs-number">0.4</span>,<br>    <span class="hljs-attr">debugProtection</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">debugProtectionInterval</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">disableConsoleOutput</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">identifierNamesGenerator</span>: <span class="hljs-string">&#x27;hexadecimal&#x27;</span>,<br>    <span class="hljs-attr">log</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">numbersToExpressions</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">renameGlobals</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">selfDefending</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">simplify</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">splitStrings</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">splitStringsChunkLength</span>: <span class="hljs-number">10</span>,<br>    <span class="hljs-attr">stringArray</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayCallsTransform</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayCallsTransformThreshold</span>: <span class="hljs-number">0.75</span>,<br>    <span class="hljs-attr">stringArrayEncoding</span>: [<span class="hljs-string">&#x27;base64&#x27;</span>],<br>    <span class="hljs-attr">stringArrayIndexShift</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayRotate</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayShuffle</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayWrappersCount</span>: <span class="hljs-number">2</span>,<br>    <span class="hljs-attr">stringArrayWrappersChainedCalls</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayWrappersParametersMaxCount</span>: <span class="hljs-number">4</span>,<br>    <span class="hljs-attr">stringArrayWrappersType</span>: <span class="hljs-string">&#x27;function&#x27;</span>,<br>    <span class="hljs-attr">stringArrayThreshold</span>: <span class="hljs-number">0.75</span>,<br>    <span class="hljs-attr">transformObjectKeys</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">unicodeEscapeSequence</span>: <span class="hljs-literal">false</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="低混淆，高性能（low-obfuscation）"><a href="#低混淆，高性能（low-obfuscation）" class="headerlink" title="低混淆，高性能（low-obfuscation）"></a>低混淆，高性能（low-obfuscation）</h3><p>性能将处于一个相对正常的水平</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>    <span class="hljs-attr">compact</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">controlFlowFlattening</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">deadCodeInjection</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">debugProtection</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">debugProtectionInterval</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">disableConsoleOutput</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">identifierNamesGenerator</span>: <span class="hljs-string">&#x27;hexadecimal&#x27;</span>,<br>    <span class="hljs-attr">log</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">numbersToExpressions</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">renameGlobals</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">selfDefending</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">simplify</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">splitStrings</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">stringArray</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayCallsTransform</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">stringArrayEncoding</span>: [],<br>    <span class="hljs-attr">stringArrayIndexShift</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayRotate</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayShuffle</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayWrappersCount</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">stringArrayWrappersChainedCalls</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayWrappersParametersMaxCount</span>: <span class="hljs-number">2</span>,<br>    <span class="hljs-attr">stringArrayWrappersType</span>: <span class="hljs-string">&#x27;variable&#x27;</span>,<br>    <span class="hljs-attr">stringArrayThreshold</span>: <span class="hljs-number">0.75</span>,<br>    <span class="hljs-attr">unicodeEscapeSequence</span>: <span class="hljs-literal">false</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="默认设置，高性能（default）"><a href="#默认设置，高性能（default）" class="headerlink" title="默认设置，高性能（default）"></a>默认设置，高性能（default）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>    <span class="hljs-attr">compact</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">controlFlowFlattening</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">deadCodeInjection</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">debugProtection</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">debugProtectionInterval</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">disableConsoleOutput</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">identifierNamesGenerator</span>: <span class="hljs-string">&#x27;hexadecimal&#x27;</span>,<br>    <span class="hljs-attr">log</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">numbersToExpressions</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">renameGlobals</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">selfDefending</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">simplify</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">splitStrings</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">stringArray</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayCallsTransform</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">stringArrayCallsTransformThreshold</span>: <span class="hljs-number">0.5</span>,<br>    <span class="hljs-attr">stringArrayEncoding</span>: [],<br>    <span class="hljs-attr">stringArrayIndexShift</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayRotate</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayShuffle</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayWrappersCount</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">stringArrayWrappersChainedCalls</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">stringArrayWrappersParametersMaxCount</span>: <span class="hljs-number">2</span>,<br>    <span class="hljs-attr">stringArrayWrappersType</span>: <span class="hljs-string">&#x27;variable&#x27;</span>,<br>    <span class="hljs-attr">stringArrayThreshold</span>: <span class="hljs-number">0.75</span>,<br>    <span class="hljs-attr">unicodeEscapeSequence</span>: <span class="hljs-literal">false</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】.prettierrc.json配置详解</title>
    <link href="/node/%E3%80%90node%E3%80%91.prettierrc.json%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/"/>
    <url>/node/%E3%80%90node%E3%80%91.prettierrc.json%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>.prettierrc.json配置详解</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> prettierrc = &#123;<br>  <span class="hljs-attr">$schema</span>: <span class="hljs-string">&quot;http://json-schema.org/draft-04/schema#&quot;</span>,<br>  <span class="hljs-attr">definitions</span>: &#123;<br>    <span class="hljs-attr">optionsDefinition</span>: &#123;<br>      <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;object&quot;</span>,<br>      <span class="hljs-attr">properties</span>: &#123;<br>        <span class="hljs-attr">arrowParens</span>: &#123;<br>          <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;在箭头函数单参数周围包括括号。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-string">&quot;always&quot;</span>,<br>          <span class="hljs-attr">oneOf</span>: [<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;always&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;始终包括括号。示例: `(x) =&gt; x`&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;avoid&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;尽可能省略括号。示例：`x =&gt; x`&quot;</span>,<br>            &#125;,<br>          ],<br>        &#125;,<br>        <span class="hljs-attr">bracketSameLine</span>: &#123;<br>          <span class="hljs-attr">description</span>:<br>            <span class="hljs-string">&quot;将&gt;的开始标记放在最后一行，而不是放在新一行。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;boolean&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">bracketSpacing</span>: &#123;<br>          <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;在括号之间打印空格。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-literal">true</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;boolean&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">cursorOffset</span>: &#123;<br>          <span class="hljs-attr">description</span>:<br>            <span class="hljs-string">&quot;打印（到stderr），在格式化后，给定位置的光标将移动到该位置。此选项不能与--range start和--range end一起使用。&quot;</span>,<br>          <span class="hljs-attr">default</span>: -<span class="hljs-number">1</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;integer&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">editorconfig</span>: &#123;<br>          <span class="hljs-attr">description</span>:<br>            <span class="hljs-string">&quot;是否分析项目中的.editorconfig文件并将其财产转换为相应的Prettier配置。此配置将被.fileterrc等覆盖。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;boolean&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">embeddedLanguageFormatting</span>: &#123;<br>          <span class="hljs-attr">description</span>:<br>            <span class="hljs-string">&quot;控制Prettier如何格式化嵌入文件中的引用代码。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-string">&quot;auto&quot;</span>,<br>          <span class="hljs-attr">oneOf</span>: [<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;auto&quot;</span>],<br>              <span class="hljs-attr">description</span>:<br>                <span class="hljs-string">&quot;如果Prettier能够自动识别嵌入代码，则设置嵌入代码的格式。&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;off&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;永远不要自动格式化嵌入的代码。&quot;</span>,<br>            &#125;,<br>          ],<br>        &#125;,<br>        <span class="hljs-attr">endOfLine</span>: &#123;<br>          <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;要应用的行尾字符。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-string">&quot;lf&quot;</span>,<br>          <span class="hljs-attr">oneOf</span>: [<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;lf&quot;</span>],<br>              <span class="hljs-attr">description</span>:<br>                <span class="hljs-string">&quot;仅限换行符（\n），在Linux和macOS上以及git repos内部常见&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;crlf&quot;</span>],<br>              <span class="hljs-attr">description</span>:<br>                <span class="hljs-string">&quot;回车+换行字符（\r\n），在Windows上常见&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;cr&quot;</span>],<br>              <span class="hljs-attr">description</span>:<br>                <span class="hljs-string">&quot;仅限回车符（\r），很少使用&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;auto&quot;</span>],<br>              <span class="hljs-attr">description</span>:<br>                <span class="hljs-string">&quot;维护现有\n（一个文件中的混合值通过查看第一行之后使用的内容进行标准化）&quot;</span>,<br>            &#125;,<br>          ],<br>        &#125;,<br>        <span class="hljs-attr">filepath</span>: &#123;<br>          <span class="hljs-attr">description</span>:<br>            <span class="hljs-string">&quot;指定输入文件路径。这将用于进行解析器推理。&quot;</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;string&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">htmlWhitespaceSensitivity</span>: &#123;<br>          <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;如何处理HTML中的空白。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-string">&quot;css&quot;</span>,<br>          <span class="hljs-attr">oneOf</span>: [<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;css&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;尊重CSS显示属性的默认值。&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;strict&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;空白被认为是敏感的。&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;ignore&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;空白被认为是不敏感的。&quot;</span>,<br>            &#125;,<br>          ],<br>        &#125;,<br>        <span class="hljs-attr">insertPragma</span>: &#123;<br>          <span class="hljs-attr">description</span>:<br>            <span class="hljs-string">&quot;在文件的第一个文档块注释中插入@format pragma。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;boolean&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">jsxSingleQuote</span>: &#123;<br>          <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;在JSX中使用单引号。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;boolean&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">parser</span>: &#123;<br>          <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;要使用的解析器。&quot;</span>,<br>          <span class="hljs-attr">anyOf</span>: [<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;flow&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Flow&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;babel&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;JavaScript&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;babel-flow&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Flow&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;babel-ts&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;TypeScript&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;typescript&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;TypeScript&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;acorn&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;JavaScript&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;espree&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;JavaScript&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;meriyah&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;JavaScript&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;css&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;CSS&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;less&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Less&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;scss&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;SCSS&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;json&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;JSON&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;json5&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;JSON5&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;json-stringify&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;JSON.stringify&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;graphql&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;GraphQL&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;markdown&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Markdown&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;mdx&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;MDX&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;vue&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Vue&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;yaml&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;YAML&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;glimmer&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Ember / Handlebars&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;html&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;HTML&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;angular&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Angular&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;lwc&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Lightning Web Components&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;string&quot;</span>,<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Custom parser&quot;</span>,<br>            &#125;,<br>          ],<br>        &#125;,<br>        <span class="hljs-attr">pluginSearchDirs</span>: &#123;<br>          <span class="hljs-attr">description</span>:<br>            <span class="hljs-string">&quot;在node_modules子目录中包含更漂亮插件的自定义目录。Overrides在相对于Prettier的位置搜索插件时的默认行为。可接受多个值。&quot;</span>,<br>          <span class="hljs-attr">default</span>: [],<br>          <span class="hljs-attr">oneOf</span>: [<br>            &#123;<br>              <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;array&quot;</span>,<br>              <span class="hljs-attr">items</span>: &#123;<br>                <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;string&quot;</span>,<br>              &#125;,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-literal">false</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;禁用插件自动加载。&quot;</span>,<br>            &#125;,<br>          ],<br>        &#125;,<br>        <span class="hljs-attr">plugins</span>: &#123;<br>          <span class="hljs-attr">description</span>:<br>            <span class="hljs-string">&quot;添加一个插件。多个插件可以作为单独的`--plugin`传递。&quot;</span>,<br>          <span class="hljs-attr">default</span>: [],<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;array&quot;</span>,<br>          <span class="hljs-attr">items</span>: &#123;<br>            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;string&quot;</span>,<br>          &#125;,<br>        &#125;,<br>        <span class="hljs-attr">printWidth</span>: &#123;<br>          <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;一行超过设置值长度将尝试进行换行。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-number">80</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;integer&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">proseWrap</span>: &#123;<br>          <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;如何包装散文。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-string">&quot;preserve&quot;</span>,<br>          <span class="hljs-attr">oneOf</span>: [<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;always&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;如果超过打印宽度，请换行。&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;never&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;不要把散文包装起来。&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;preserve&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;按原样包装散文。&quot;</span>,<br>            &#125;,<br>          ],<br>        &#125;,<br>        <span class="hljs-attr">quoteProps</span>: &#123;<br>          <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;当对象中的属性被引用时更改。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-string">&quot;as-needed&quot;</span>,<br>          <span class="hljs-attr">oneOf</span>: [<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;as-needed&quot;</span>],<br>              <span class="hljs-attr">description</span>:<br>                <span class="hljs-string">&quot;只在需要的地方在对象属性周围添加引号。&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;consistent&quot;</span>],<br>              <span class="hljs-attr">description</span>:<br>                <span class="hljs-string">&quot;如果对象中至少有一个属性需要引用，则需要引用所有属性。&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;preserve&quot;</span>],<br>              <span class="hljs-attr">description</span>:<br>                <span class="hljs-string">&quot;尊重对象属性中引号的输入使用。&quot;</span>,<br>            &#125;,<br>          ],<br>        &#125;,<br>        <span class="hljs-attr">rangeEnd</span>: &#123;<br>          <span class="hljs-attr">description</span>:<br>            <span class="hljs-string">&quot;格式化以给定字符偏移量(不包含)结束的代码。范围将向前扩展到所选语句的末尾。此选项不能与--cursor-offset一起使用。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-literal">null</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;integer&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">rangeStart</span>: &#123;<br>          <span class="hljs-attr">description</span>:<br>            <span class="hljs-string">&quot;从给定字符偏移量开始格式化代码。范围将向后扩展到包含所选语句的第一行的开头。此选项不能与--cursor-offset一起使用。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-number">0</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;integer&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">requirePragma</span>: &#123;<br>          <span class="hljs-attr">description</span>:<br>            <span class="hljs-string">&quot;要求在文件的第一个文档块注释中出现&#x27;@pretty &#x27;或&#x27;@format&#x27;，以便对其进行格式化。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;boolean&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">semi</span>: &#123;<br>          <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;添加分号。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-literal">true</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;boolean&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">singleAttributePerLine</span>: &#123;<br>          <span class="hljs-attr">description</span>:<br>            <span class="hljs-string">&quot;在HTML、Vue和JSX中强制每行使用单个属性。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;boolean&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">singleQuote</span>: &#123;<br>          <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;用单引号代替双引号。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;boolean&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">tabWidth</span>: &#123;<br>          <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;每个缩进级别的空格数。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-number">2</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;integer&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">trailingComma</span>: &#123;<br>          <span class="hljs-attr">description</span>:<br>            <span class="hljs-string">&quot;多行时尽可能打印尾随逗号。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-string">&quot;es5&quot;</span>,<br>          <span class="hljs-attr">oneOf</span>: [<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;es5&quot;</span>],<br>              <span class="hljs-attr">description</span>:<br>                <span class="hljs-string">&quot;尾随逗号在ES5中有效(对象、数组等)&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;none&quot;</span>],<br>              <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;后面没有逗号。&quot;</span>,<br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">enum</span>: [<span class="hljs-string">&quot;all&quot;</span>],<br>              <span class="hljs-attr">description</span>:<br>                <span class="hljs-string">&quot;尽可能以逗号结尾(包括函数参数)。&quot;</span>,<br>            &#125;,<br>          ],<br>        &#125;,<br>        <span class="hljs-attr">useTabs</span>: &#123;<br>          <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;用制表符而不是空格缩进。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;boolean&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">vueIndentScriptAndStyle</span>: &#123;<br>          <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;缩进Vue文件中的脚本和样式标记。&quot;</span>,<br>          <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;boolean&quot;</span>,<br>        &#125;,<br>      &#125;,<br>    &#125;,<br>    <span class="hljs-attr">overridesDefinition</span>: &#123;<br>      <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;object&quot;</span>,<br>      <span class="hljs-attr">properties</span>: &#123;<br>        <span class="hljs-attr">overrides</span>: &#123;<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;array&quot;</span>,<br>          <span class="hljs-attr">description</span>:<br>            <span class="hljs-string">&quot;提供一个模式列表来覆盖prettier的配置。&quot;</span>,<br>          <span class="hljs-attr">items</span>: &#123;<br>            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;object&quot;</span>,<br>            <span class="hljs-attr">required</span>: [<span class="hljs-string">&quot;files&quot;</span>],<br>            <span class="hljs-attr">properties</span>: &#123;<br>              <span class="hljs-attr">files</span>: &#123;<br>                <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;在重写中包含这些文件。&quot;</span>,<br>                <span class="hljs-attr">oneOf</span>: [<br>                  &#123;<br>                    <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;string&quot;</span>,<br>                  &#125;,<br>                  &#123;<br>                    <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;array&quot;</span>,<br>                    <span class="hljs-attr">items</span>: &#123;<br>                      <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;string&quot;</span>,<br>                    &#125;,<br>                  &#125;,<br>                ],<br>              &#125;,<br>              <span class="hljs-attr">excludeFiles</span>: &#123;<br>                <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;从重写中排除这些文件。&quot;</span>,<br>                <span class="hljs-attr">oneOf</span>: [<br>                  &#123;<br>                    <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;string&quot;</span>,<br>                  &#125;,<br>                  &#123;<br>                    <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;array&quot;</span>,<br>                    <span class="hljs-attr">items</span>: &#123;<br>                      <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;string&quot;</span>,<br>                    &#125;,<br>                  &#125;,<br>                ],<br>              &#125;,<br>              <span class="hljs-attr">options</span>: &#123;<br>                <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;object&quot;</span>,<br>                <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;用于应用此覆盖的选项。&quot;</span>,<br>                <span class="hljs-attr">$ref</span>: <span class="hljs-string">&quot;#/definitions/optionsDefinition&quot;</span>,<br>              &#125;,<br>            &#125;,<br>            <span class="hljs-attr">additionalProperties</span>: <span class="hljs-literal">false</span>,<br>          &#125;,<br>        &#125;,<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>  <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;https://json.schemastore.org/prettierrc.json&quot;</span>,<br>  <span class="hljs-attr">oneOf</span>: [<br>    &#123;<br>      <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;object&quot;</span>,<br>      <span class="hljs-attr">allOf</span>: [<br>        &#123;<br>          <span class="hljs-attr">$ref</span>: <span class="hljs-string">&quot;#/definitions/optionsDefinition&quot;</span>,<br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">$ref</span>: <span class="hljs-string">&quot;#/definitions/overridesDefinition&quot;</span>,<br>        &#125;,<br>      ],<br>    &#125;,<br>    &#123;<br>      <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;string&quot;</span>,<br>    &#125;,<br>  ],<br>  <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Schema for .prettierrc&quot;</span>,<br>&#125;;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【linux】centos安装redis</title>
    <link href="/linux/%E3%80%90linux%E3%80%91centos%E5%AE%89%E8%A3%85redis/"/>
    <url>/linux/%E3%80%90linux%E3%80%91centos%E5%AE%89%E8%A3%85redis/</url>
    
    <content type="html"><![CDATA[<h1 id="下载源码包"><a href="#下载源码包" class="headerlink" title="下载源码包"></a>下载源码包</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://download.redis.io/releases/redis-6.2.2.tar.gz<br></code></pre></td></tr></table></figure><h1 id="解压源码包"><a href="#解压源码包" class="headerlink" title="解压源码包"></a>解压源码包</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tar -zxvf redis-6.2.2.tar.gz<br></code></pre></td></tr></table></figure><h1 id="进入源码目录"><a href="#进入源码目录" class="headerlink" title="进入源码目录"></a>进入源码目录</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> redis-6.2.2<br></code></pre></td></tr></table></figure><h1 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h1><p>redis 源码包已有 Makefile 文件，直接编译即可。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make<br></code></pre></td></tr></table></figure><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make install PREFIX=/usr/local/redis<br></code></pre></td></tr></table></figure><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> redis.conf /usr/local/redis/<br></code></pre></td></tr></table></figure><h1 id="systemctl-管理"><a href="#systemctl-管理" class="headerlink" title="systemctl 管理"></a>systemctl 管理</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /etc/systemd/system/redis.service<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">[Unit]<br>Description=Redis In-Memory Data Store<br>After=network.target<br><br>[Service]<br>ExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/redis.conf<br>ExecStop=/usr/local/redis/bin/redis-cli shutdown<br>Restart=always<br>User=root<br><br>[Install]<br>WantedBy=multi-user.target<br></code></pre></td></tr></table></figure><h1 id="重新加载-systemd-配置"><a href="#重新加载-systemd-配置" class="headerlink" title="重新加载 systemd 配置"></a>重新加载 systemd 配置</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl daemon-reload<br></code></pre></td></tr></table></figure><h1 id="启动-redis"><a href="#启动-redis" class="headerlink" title="启动 redis"></a>启动 redis</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl start redis<br></code></pre></td></tr></table></figure><h1 id="停止-redis"><a href="#停止-redis" class="headerlink" title="停止 redis"></a>停止 redis</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl stop redis<br></code></pre></td></tr></table></figure><h1 id="查看-redis-状态"><a href="#查看-redis-状态" class="headerlink" title="查看 redis 状态"></a>查看 redis 状态</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl status redis<br></code></pre></td></tr></table></figure><h1 id="设置-Redis-服务开机自启"><a href="#设置-Redis-服务开机自启" class="headerlink" title="设置 Redis 服务开机自启"></a>设置 Redis 服务开机自启</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl <span class="hljs-built_in">enable</span> redis<br></code></pre></td></tr></table></figure><h1 id="验证-Redis-是否启动成功"><a href="#验证-Redis-是否启动成功" class="headerlink" title="验证 Redis 是否启动成功"></a>验证 Redis 是否启动成功</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">/usr/local/redis/bin/redis-cli ping<br></code></pre></td></tr></table></figure><p>若返回 PONG，则表明 Redis 已成功启动。</p>]]></content>
    
    
    <categories>
      
      <category>nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】创建可写流下载文件</title>
    <link href="/node/%E3%80%90node%E3%80%91%E5%88%9B%E5%BB%BA%E5%8F%AF%E5%86%99%E6%B5%81%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6/"/>
    <url>/node/%E3%80%90node%E3%80%91%E5%88%9B%E5%BB%BA%E5%8F%AF%E5%86%99%E6%B5%81%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>使用axios请求文件数据指定<code>responseType</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;node:fs&quot;</span>);<br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;node:path&quot;</span>);<br><span class="hljs-keyword">const</span> axios = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;axios&quot;</span>);<br><br><span class="hljs-keyword">const</span> savePath = path.<span class="hljs-title function_">resolve</span>(__dirname)<br><span class="hljs-keyword">const</span> writeStream = fs.<span class="hljs-title function_">createWriteStream</span>(savePath);<br><br><span class="hljs-title function_">axios</span>(&#123;<br><span class="hljs-attr">url</span>: <span class="hljs-string">&quot;https://xxxxxxxxx&quot;</span>,<br><span class="hljs-attr">method</span>: <span class="hljs-string">&quot;GET&quot;</span>,<br>    <span class="hljs-attr">responseType</span>: <span class="hljs-string">&quot;stream&quot;</span>,<br>&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>res.<span class="hljs-property">data</span>.<span class="hljs-title function_">pipe</span>(writeStream)<br>&#125;)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【linux】systemctl 开机自启服务</title>
    <link href="/linux/%E3%80%90linux%E3%80%91systemctl%20%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E6%9C%8D%E5%8A%A1/"/>
    <url>/linux/%E3%80%90linux%E3%80%91systemctl%20%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E6%9C%8D%E5%8A%A1/</url>
    
    <content type="html"><![CDATA[<h1 id="service-文件创建"><a href="#service-文件创建" class="headerlink" title="service 文件创建"></a>service 文件创建</h1><p>nginx 为例：新建 <code>nginx.service</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 用户自定义（推荐）</span><br>vim /etc/systemd/system/nginx.service<br></code></pre></td></tr></table></figure><p>或者</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 系统软件包</span><br>vim /usr/lib/systemd/system/nginx.service<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs bash">[Unit]<br><span class="hljs-comment"># 描述服务</span><br>Description=nginx - high performance web server<br>Documentation=https://nginx.org<br>After=network.target remote-fs.target nss-lookup.target<br><br><span class="hljs-comment">#  服务的一些具体运行参数的设置</span><br>[Service]<br><span class="hljs-comment"># 后台运行的形式</span><br>Type=forking<br><span class="hljs-comment"># 启动命令</span><br>ExecStart=/usr/local/nginx-1.24.0/sbin/nginx<br><span class="hljs-comment"># 重启命令</span><br>ExecReload=/usr/local/nginx-1.24.0/sbin/nginx -s reload<br><span class="hljs-comment"># 停止命令</span><br>ExecStop=/usr/local/nginx-1.24.0/sbin/nginx -s stop<br><span class="hljs-comment"># 快速停止</span><br>ExecQuit=/usr/local/nginx-1.24.0/sbin/nginx -s quit<br><span class="hljs-comment"># 给服务分配临时空间</span><br>PrivateTmp=<span class="hljs-literal">true</span><br><span class="hljs-comment"># 发生异常，5s后重启</span><br>RestartSec=5s<br><br>[Install]<br><span class="hljs-comment"># 服务用户的模式</span><br>WantedBy=multi-user.target<br></code></pre></td></tr></table></figure><p>完成后重新加载 <code>systemd</code> 守护进程配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl daemon-reload<br></code></pre></td></tr></table></figure><h1 id="systemctl-常用运行命令"><a href="#systemctl-常用运行命令" class="headerlink" title="systemctl 常用运行命令"></a>systemctl 常用运行命令</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl daemon-reload <span class="hljs-comment"># 刷新配置</span><br><br>systemctl start xxx.service <span class="hljs-comment"># 启动服务</span><br>systemctl stop xxx.service <span class="hljs-comment"># 停止服务</span><br>systemctl <span class="hljs-built_in">enable</span> xxx.service <span class="hljs-comment"># 设置开机自启动</span><br>systemctl <span class="hljs-built_in">disable</span> xxx.service <span class="hljs-comment"># 停止开机自启动</span><br>systemctl restart xxx.service <span class="hljs-comment"># 重新启动某服务</span><br>systemctl status xxx.service <span class="hljs-comment"># 查看服务当前状态</span><br><br><br>systemctl list-units --<span class="hljs-built_in">type</span>=service <span class="hljs-comment"># 查看所有已启动的服务</span><br>systemctl --failed <span class="hljs-comment"># 查看失败的服务列表</span><br>systemctl list-unit-files|grep enabled <span class="hljs-comment"># 查看成功的服务列表</span><br>systemctl reset-failed <span class="hljs-comment"># 删除所有错误的服务 携带服务名则删除指定的服务</span><br></code></pre></td></tr></table></figure><h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p><a href="https://www.freedesktop.org/software/systemd/man/latest/systemd.unit.html">https://www.freedesktop.org/software/systemd/man/latest/systemd.unit.html</a></p><p><a href="https://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html">https://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html</a></p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【nginx】linux(centos&amp;ubuntu)安装nginx</title>
    <link href="/nginx/%E3%80%90nginx%E3%80%91linux(centos&amp;ubuntu)%E5%AE%89%E8%A3%85nginx/"/>
    <url>/nginx/%E3%80%90nginx%E3%80%91linux(centos&amp;ubuntu)%E5%AE%89%E8%A3%85nginx/</url>
    
    <content type="html"><![CDATA[<h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><p>官网：<a href="https://nginx.org/en/download.html">https://nginx.org/en/download.html</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://nginx.org/download/nginx-1.22.1.tar.gz<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90nginx%E3%80%91linux(centos&ubuntu)%E5%AE%89%E8%A3%85nginx/1.png"></p><h1 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tar zxvf nginx-1.22.1.tar.gz<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90nginx%E3%80%91linux(centos&ubuntu)%E5%AE%89%E8%A3%85nginx/2.png"></p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="依赖准备"><a href="#依赖准备" class="headerlink" title="依赖准备"></a>依赖准备</h2><p>安装前需要安装 nginx 编译的依赖环境，依赖的名称在 centos 与 ubuntu 下，会有所不同，以下两种发行版都有。<br>整合全部依赖安装命令（执行后可直接跳至“编译安装”的步骤）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># centos</span><br>yum -y install make gcc gcc-c++ zlib zlib-devel pcre pcre-devel openssl openssl-devel libffi-devel libtool<br><span class="hljs-comment"># ubuntu</span><br>apt-get install make g++ zlib1g zlib1g.dev libpcre3 libpcre3-dev openssl libssl-dev libffi-dev libtool<br></code></pre></td></tr></table></figure><h3 id="make"><a href="#make" class="headerlink" title="make"></a>make</h3><p>编译安装必须需要 make。make 在 centos 与 ubuntu 下名称一样。</p><p><img src="/../../assets/%E3%80%90nginx%E3%80%91linux(centos&ubuntu)%E5%AE%89%E8%A3%85nginx/3.png"></p><h3 id="gcc-c"><a href="#gcc-c" class="headerlink" title="gcc-c++"></a>gcc-c++</h3><p>GCC 用来对 nginx 源码进行编译。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># centos</span><br>yum install gcc-c++<br><span class="hljs-comment"># ubuntu</span><br>apt-get install g++<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90nginx%E3%80%91linux(centos&ubuntu)%E5%AE%89%E8%A3%85nginx/4.png"></p><h3 id="zlib-zlib-devel"><a href="#zlib-zlib-devel" class="headerlink" title="zlib zlib-devel"></a>zlib zlib-devel</h3><p>zlib 库提供了开发人员的压缩算法，在 Nginx 的各种模块中需要使用 gzip 压缩。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># centos</span><br>yum -y install zlib zlib-devel<br><span class="hljs-comment"># ubuntu</span><br>apt-get install zlib1g zlib1g.dev<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90nginx%E3%80%91linux(centos&ubuntu)%E5%AE%89%E8%A3%85nginx/5.png"></p><h3 id="pcre-pcre-devel"><a href="#pcre-pcre-devel" class="headerlink" title="pcre pcre-devel"></a>pcre pcre-devel</h3><p>Nginx 的 Rewrite 模块和 HTTP 核心模块会使用到 PCRE 正则表达式语法。这里需要安装两个安装包 pcre 和 pcre-devel。第一个安装包提供编译版本的库，而第二个提供开发阶段的头文件和编译项目的源代码。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># centos</span><br>yum -y install pcre pcre-devel<br><span class="hljs-comment"># ubuntu</span><br>apt-get install libpcre3 libpcre3-dev<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90nginx%E3%80%91linux(centos&ubuntu)%E5%AE%89%E8%A3%85nginx/6.png"></p><h3 id="openssl-openssl-devel"><a href="#openssl-openssl-devel" class="headerlink" title="openssl openssl-devel"></a>openssl openssl-devel</h3><p>nginx 不仅支持 http 协议，还支持 https（即在 ssl 协议上传输 http）。如果使用了 https，需要安装 OpenSSL 库。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># centos</span><br>yum -y install openssl openssl-devel<br><span class="hljs-comment"># ubuntu</span><br>apt-get install openssl libssl-dev<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90nginx%E3%80%91linux(centos&ubuntu)%E5%AE%89%E8%A3%85nginx/7.png"></p><h2 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h2><p><code>编译安装任何软件基本一致，编译安装所依赖的工具库需准备全！</code></p><p>进入解压后的目录执行<code>./configure</code>，之后会生成 Makefile 文件。<br>可使用 <code>--prefix</code> 指定位置，如： <code>./configure --prefix=/usr/local/nginx</code></p><p>常用的编译安装参数如下（开启 gzip 与 https 模块）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./configure --prefix=/usr/local/nginx --with-http_ssl_module --with-http_gzip_static_module<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90nginx%E3%80%91linux(centos&ubuntu)%E5%AE%89%E8%A3%85nginx/8.png"></p><p><img src="/../../assets/%E3%80%90nginx%E3%80%91linux(centos&ubuntu)%E5%AE%89%E8%A3%85nginx/9.png"></p><p>然后执行<code>make &amp;&amp; make install</code>会进行编译安装。</p><p><img src="/../../assets/%E3%80%90nginx%E3%80%91linux(centos&ubuntu)%E5%AE%89%E8%A3%85nginx/10.png"></p><h2 id="安装完成"><a href="#安装完成" class="headerlink" title="安装完成"></a>安装完成</h2><p>安装完成后进入<code>/usr/local/nginx/sbin</code>下会有<code>nginx可执行文件</code></p><p><img src="/../../assets/%E3%80%90nginx%E3%80%91linux(centos&ubuntu)%E5%AE%89%E8%A3%85nginx/11.png"></p><p>然后访问<code>localhost</code>或者本机 ip，会显示 nginx 的欢迎页</p><p><img src="/../../assets/%E3%80%90nginx%E3%80%91linux(centos&ubuntu)%E5%AE%89%E8%A3%85nginx/12.png"></p><p><img src="/../../assets/%E3%80%90nginx%E3%80%91linux(centos&ubuntu)%E5%AE%89%E8%A3%85nginx/13.png"></p><h1 id="systemctl-管理"><a href="#systemctl-管理" class="headerlink" title="systemctl 管理"></a>systemctl 管理</h1><p>创建 nginx.service 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /usr/lib/systemd/system/nginx.service<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs bash">[Unit]<br><span class="hljs-comment"># 描述服务</span><br>Description=nginx - high performance web server<br>Documentation=https://nginx.org<br>After=network.target remote-fs.target nss-lookup.target<br><br><span class="hljs-comment">#  服务的一些具体运行参数的设置</span><br>[Service]<br><span class="hljs-comment"># 后台运行的形式</span><br>Type=forking<br><span class="hljs-comment"># 启动命令</span><br>ExecStart=/usr/local/nginx-1.24.0/sbin/nginx<br><span class="hljs-comment"># 重启命令</span><br>ExecReload=/usr/local/nginx-1.24.0/sbin/nginx -s reload<br><span class="hljs-comment"># 停止命令</span><br>ExecStop=/usr/local/nginx-1.24.0/sbin/nginx -s stop<br><span class="hljs-comment"># 快速停止</span><br>ExecQuit=/usr/local/nginx-1.24.0/sbin/nginx -s quit<br><span class="hljs-comment"># 给服务分配临时空间</span><br>PrivateTmp=<span class="hljs-literal">true</span><br><span class="hljs-comment"># 发生异常，5s后重启</span><br>RestartSec=5s<br><br>[Install]<br><span class="hljs-comment"># 服务用户的模式</span><br>WantedBy=multi-user.target<br></code></pre></td></tr></table></figure><p>完成后重新加载 <code>systemd</code> 守护进程配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl daemon-reload<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 启动</span><br>systemctl start nginx<br><span class="hljs-comment"># 停止</span><br>systemctl stop nginx<br><span class="hljs-comment"># 重启</span><br>systemctl restart nginx<br><span class="hljs-comment"># 查看状态</span><br>systemctl status nginx<br><span class="hljs-comment"># 设置开机启动</span><br>systemctl <span class="hljs-built_in">enable</span> nginx<br><span class="hljs-comment"># 设置开机不启动</span><br>systemctl <span class="hljs-built_in">disable</span> nginx<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】远程连接redis失败</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5redis%E5%A4%B1%E8%B4%A5/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5redis%E5%A4%B1%E8%B4%A5/</url>
    
    <content type="html"><![CDATA[<p>连接另一台服务器redis服务失败<br>修改配置文件 <code>redis.conf</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">bind</span> 0.0.0.0<br><span class="hljs-comment"># 127.0.0.1 表示只允许本地访问,无法远程连接</span><br><span class="hljs-comment"># 0.0.0.0   表示任何ip都可以访问</span><br><br>protected-mode no<br><span class="hljs-comment"># yes 保护模式，只允许本地链接</span><br><span class="hljs-comment"># no  保护模式关闭</span><br></code></pre></td></tr></table></figure><p>修改完重启redis</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】crypto-js WordArray类型</title>
    <link href="/js/%E3%80%90js%E3%80%91crypto-js%20WordArray%E7%B1%BB%E5%9E%8B/"/>
    <url>/js/%E3%80%90js%E3%80%91crypto-js%20WordArray%E7%B1%BB%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<p>wordArray，我把它理解成 CryptoJS 中定义的 新的 数据类型，叫“单词数组”。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">CryptoJS</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;crypto-js&quot;</span>;<br><br><span class="hljs-comment">// 创建一个空的 WordArray对象</span><br><span class="hljs-keyword">const</span> wordArray = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">lib</span>.<span class="hljs-property">WordArray</span>.<span class="hljs-title function_">create</span>();<br></code></pre></td></tr></table></figure><h1 id="转换演示"><a href="#转换演示" class="headerlink" title="转换演示"></a>转换演示</h1><h2 id="WordArray-对象-转-16-进制字符串"><a href="#WordArray-对象-转-16-进制字符串" class="headerlink" title="WordArray 对象 转 16 进制字符串"></a>WordArray 对象 转 16 进制字符串</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> hexString = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Hex</span>.<span class="hljs-title function_">stringify</span>(wordArray);<br><span class="hljs-comment">// 等价于</span><br><span class="hljs-keyword">const</span> hexString = wordArray.<span class="hljs-title function_">toString</span>(<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Hex</span>);<br></code></pre></td></tr></table></figure><h2 id="16-进制字符串-转-WordArray-对象"><a href="#16-进制字符串-转-WordArray-对象" class="headerlink" title="16 进制字符串 转 WordArray 对象"></a>16 进制字符串 转 WordArray 对象</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> wordArray = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Hex</span>.<span class="hljs-title function_">parse</span>(hexString);<br></code></pre></td></tr></table></figure><h2 id="WordArray-对象-转-utf8-字符串"><a href="#WordArray-对象-转-utf8-字符串" class="headerlink" title="WordArray 对象 转 utf8 字符串"></a>WordArray 对象 转 utf8 字符串</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> utf8String = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>.<span class="hljs-title function_">stringify</span>(wordArray);<br><span class="hljs-comment">//等价于</span><br><span class="hljs-keyword">const</span> utf8String = wordArray.<span class="hljs-title function_">toString</span>(<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>);<br></code></pre></td></tr></table></figure><h2 id="utf8-字符串-转-WordArray-对象"><a href="#utf8-字符串-转-WordArray-对象" class="headerlink" title="utf8 字符串 转 WordArray 对象"></a>utf8 字符串 转 WordArray 对象</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> wordArray = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>.<span class="hljs-title function_">parse</span>(utf8String);<br></code></pre></td></tr></table></figure><h2 id="WordArray-对象-转-Base64-字符串"><a href="#WordArray-对象-转-Base64-字符串" class="headerlink" title="WordArray 对象 转 Base64 字符串"></a>WordArray 对象 转 Base64 字符串</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> base64String = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Base64</span>.<span class="hljs-title function_">stringify</span>(wordArray);<br><span class="hljs-comment">// 等价于</span><br><span class="hljs-keyword">const</span> base64String = wordArray.<span class="hljs-title function_">toString</span>(<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Base64</span>);<br></code></pre></td></tr></table></figure><h2 id="Base64-字符串-转-WordArray-对象"><a href="#Base64-字符串-转-WordArray-对象" class="headerlink" title="Base64 字符串 转 WordArray 对象"></a>Base64 字符串 转 WordArray 对象</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> wordArray = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Base64</span>.<span class="hljs-title function_">parse</span>(base64String);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】crypto-jsDES加密解密</title>
    <link href="/js/%E3%80%90js%E3%80%91crypto-jsDES%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86/"/>
    <url>/js/%E3%80%90js%E3%80%91crypto-jsDES%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86/</url>
    
    <content type="html"><![CDATA[<p>我的应用场景后端对接口数据进行 DES 加密，前端需要解密，前后端需统一 key 值，加密方式，填充方式以及返回数据编码（我这是 base64）；于是使用到了 crypto-js 库，使用这个库时候。需要将数据转换成它内部的数据类型 wordArray，解密出来的数据也是 wordArray 需要转换，crypto-js 库内部提供转换方法。<br>加密的数据：</p><p><img src="/../../assets/%E3%80%90js%E3%80%91crypto-jsDES%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86/1.png"></p><h1 id="安装-crypto-js"><a href="#安装-crypto-js" class="headerlink" title="安装 crypto-js"></a>安装 crypto-js</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install crypto-js<br></code></pre></td></tr></table></figure><h1 id="DES-加密解密"><a href="#DES-加密解密" class="headerlink" title="DES 加密解密"></a>DES 加密解密</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">CryptoJS</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;crypto-js&quot;</span>;<br><br><span class="hljs-comment">// 约定的密钥 DES 一般 64 位（8 个字节），AES 一般 128 位（16 字节）、192 位（24 字节）、256 位（32 字节）</span><br><span class="hljs-keyword">const</span> key = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">&quot;2f4a0f6166b8d404&quot;</span>);<br><span class="hljs-comment">// 以下使用的是 CBC 模式（ECB 模式不需要 IV，但不推荐使用）大小为加密块的大小，这里是 64 位（8 个字节）</span><br><span class="hljs-comment">// 加密块补充： DES 加密块大小为 64 位（8 个字节） AES 加密块大小为 128 位（16 个字节）</span><br><span class="hljs-keyword">const</span> iv = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">lib</span>.<span class="hljs-property">WordArray</span>.<span class="hljs-title function_">random</span>(<span class="hljs-number">8</span>);<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * DES 加密</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">String</span>&#125; <span class="hljs-variable">message</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">String</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">encryptByDES</span>(<span class="hljs-params">message</span>) &#123;<br>  <span class="hljs-keyword">const</span> encrypted = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">DES</span>.<span class="hljs-title function_">encrypt</span>(message, key, &#123;<br>    <span class="hljs-comment">// 约定的方式与填充</span><br>    <span class="hljs-attr">mode</span>: <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">mode</span>.<span class="hljs-property">CBC</span>,<br>    <span class="hljs-attr">padding</span>: <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">pad</span>.<span class="hljs-property">Pkcs7</span>,<br>    iv,<br>  &#125;);<br>  <span class="hljs-comment">// 返回约定的编码数据（base64）</span><br>  <span class="hljs-keyword">return</span> encrypted.<span class="hljs-property">ciphertext</span>.<span class="hljs-title function_">toString</span>(<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Base64</span>);<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * DES 解密</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">String</span>&#125; <span class="hljs-variable">ciphertext</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">String</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">decryptByDES</span>(<span class="hljs-params">ciphertext</span>) &#123;<br>  <span class="hljs-keyword">const</span> cipherParams = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">lib</span>.<span class="hljs-property">CipherParams</span>.<span class="hljs-title function_">create</span>(&#123;<br>    <span class="hljs-attr">ciphertext</span>: <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Base64</span>.<span class="hljs-title function_">parse</span>(ciphertext),<br>  &#125;);<br>  <span class="hljs-keyword">const</span> decrypted = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">DES</span>.<span class="hljs-title function_">decrypt</span>(cipherParams, key, &#123;<br>    <span class="hljs-comment">// 约定的方式与填充</span><br>    <span class="hljs-attr">mode</span>: <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">mode</span>.<span class="hljs-property">CBC</span>,<br>    <span class="hljs-attr">padding</span>: <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">pad</span>.<span class="hljs-property">Pkcs7</span>,<br>    iv,<br>  &#125;);<br>  <span class="hljs-keyword">return</span> decrypted.<span class="hljs-title function_">toString</span>(<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】openssl生成RS256公私钥</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91openssl%E7%94%9F%E6%88%90RS256%E5%85%AC%E7%A7%81%E9%92%A5/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91openssl%E7%94%9F%E6%88%90RS256%E5%85%AC%E7%A7%81%E9%92%A5/</url>
    
    <content type="html"><![CDATA[<p>使用JWT的时候用RS256进行签名；RS256 是使用 RSA 私钥进行签名，使用 RSA 公钥进行验证，公钥即使泄漏了也毫无影响，只要确保私钥的安全就行。<br>使用openssl生成RS256</p><ul><li>mac&#x2F;linux 直接使用终端即可</li><li>windows推荐在git bash终端中操作</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 生成2048位 RSA密钥</span><br>openssl genrsa -out private.key 2048<br><span class="hljs-comment"># 通过密钥生成公钥</span><br>openssl rsa -<span class="hljs-keyword">in</span> private.key -pubout -out public.key<br></code></pre></td></tr></table></figure><p>会在终端当前目录下生成公私钥。</p><p><img src="/../../assets/%E3%80%90RSA%E5%8A%A0%E5%AF%86%E3%80%91%E7%94%9F%E6%88%90RS256%E5%85%AC%E7%A7%81%E9%92%A5/1.png"></p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】Fiddler手机抓包</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91Fiddler%E6%89%8B%E6%9C%BA%E6%8A%93%E5%8C%85/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91Fiddler%E6%89%8B%E6%9C%BA%E6%8A%93%E5%8C%85/</url>
    
    <content type="html"><![CDATA[<h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><p>官网下载：<a href="https://www.telerik.com/fiddler/fiddler-classic">https://www.telerik.com/fiddler/fiddler-classic</a></p><h1 id="配置fiddler"><a href="#配置fiddler" class="headerlink" title="配置fiddler"></a>配置fiddler</h1><p>一.由于fiddler只默认抓取HTTP的请求，若想抓取HTTPS的请求，则需要设置HTTPS的各项值：<br>第一步：在fiddler菜单项选择Tools -&gt; Options -&gt; HTTPS<br>第二步：勾选【Decrypt HTTPS traffic 】【Ignore server certificate errors】，下拉框默认：【from all processes】 即可<br>第三步：点击右边的【Actions】，选择【Trust Root Certificate】点击，弹出窗点击【Yes】按钮即可。<br>第四步：点击【OK】保存</p><p><img src="/../../assets/%E3%80%90%E6%8A%93%E5%8C%85%E3%80%91Fiddler%E6%89%8B%E6%9C%BA%E6%8A%93%E5%8C%85/1.png"></p><p><img src="/../../assets/%E3%80%90%E6%8A%93%E5%8C%85%E3%80%91Fiddler%E6%89%8B%E6%9C%BA%E6%8A%93%E5%8C%85/2.png"></p><p>二.设置fiddler connections的值，允许fiddler远程连接<br>第一步：在fiddler菜单项选择Tools  -&gt;  Options -&gt; connections<br>第二步：勾选【|Allow remote computers to connect】<br>第三步：点击【ok】</p><p><img src="/../../assets/%E3%80%90%E6%8A%93%E5%8C%85%E3%80%91Fiddler%E6%89%8B%E6%9C%BA%E6%8A%93%E5%8C%85/3.png"></p><p>##重要事情说三遍<br>更改完设置一定要重启fiddler！！！<br>更改完设置一定要重启fiddler！！！<br>更改完设置一定要重启fiddler！！！<br>三.在手机上进行相应的设置，为手机抓包做准备<br>1.查看自己本机的IP<br>方法一：电脑——左下角点击Windows图标——输入cmd，打开cmd面板，输入：ipconfig ，查看本机IP地址</p><p><img src="/../../assets/%E3%80%90%E6%8A%93%E5%8C%85%E3%80%91Fiddler%E6%89%8B%E6%9C%BA%E6%8A%93%E5%8C%85/4.png"></p><p>方法二：在fiddler主界面，将鼠标移到【online】上面，就可以查看本地的IP地址了，如果你的fiddler没有显示【online】，可以通过【fiddler菜单——View——Show Toolbar】将【Show Toolbar】勾选中，就会显示【Online】信息了。</p><p><img src="/../../assets/%E3%80%90%E6%8A%93%E5%8C%85%E3%80%91Fiddler%E6%89%8B%E6%9C%BA%E6%8A%93%E5%8C%85/5.png"></p><p>2.手机安装证书。（ios设置和Android设置基本一样）<br>前提条件：<br>手机和电脑要处于同一网络条件下（可以理解为：使用同一个WiFi）<br>fiddler的默认端口是：8888，不需要进行修改，使用默认的就可以。<br>一个手机可以安装多个证书，但是每安装的一个证书里面都设置有IP地址，所以：安装的证书和电脑IP是一一对应的，当前的这个证书只能针对某一台电脑使用，更换电脑后，该证书将不能使用，只能重新安装与更换的电脑的IP相同的证书才能使用。<br>第一步：手机下载证书。打开手机的浏览器，输入：【IP:8888】下载证书。<br>例如：浏览器输入【<a href="http://192.168.xxx.xxx:8888/">http://192.168.xxx.xxx:8888</a>】或者【192.168.xxx.xxx:8888】（这个地方的IP就是你电脑的IP）</p><p><img src="/../../assets/%E3%80%90%E6%8A%93%E5%8C%85%E3%80%91Fiddler%E6%89%8B%E6%9C%BA%E6%8A%93%E5%8C%85/6.png"></p><p>第二步：安装证书.<br> 有的手机可以直接点击已下载的文件进行安装，有的手机则不行。<br>如果不能直接安装证书，我们可以通过以下方法来安装证书。<br>1.Android：安装证书。由于安装系统众多，设置的方法不尽相同，下面几个方法以供参考。<br>方法一：手机——设置——搜索【证书】二字——选择：安装证书或者证书管理：点击安装证书，在你的众多文件里面去选择刚刚下载的fiddler的证书，点击安装<br>（注：选择安装的文件后，需要输入手机的锁屏密码。Android一定要有锁屏密码才能安装证书）</p><p><img src="/../../assets/%E3%80%90%E6%8A%93%E5%8C%85%E3%80%91Fiddler%E6%89%8B%E6%9C%BA%E6%8A%93%E5%8C%85/7.png"></p><p>方法二：在浏览器里面，直接打开已经下载的文件，安装即可，安装步骤是：先输入手机锁屏密码——后到上图为证书命名界面。<br>证书安装好后，查看已信任证书：具体位置在【安全——更多安全设置——加密和凭据——受信任的凭据】</p><p><img src="/../../assets/%E3%80%90%E6%8A%93%E5%8C%85%E3%80%91Fiddler%E6%89%8B%E6%9C%BA%E6%8A%93%E5%8C%85/8.png"></p><p>2.ios安装证书：直接点击已下载的文件安装即可，安装文件成功后，需要在【设置——通用——关于本机——证书信任设置】开启证书信任。<br>第三步：为手机设置代理.（ios和安卓差不多）<br>设置——无线网络（WLAN）——WLAN——长按已连接的WiFi 去修改网络——在高级选项里面——选择【手动代理】——出现以下界面，按图所示操作即可。<br>（或者长按通知栏WiFi按钮进入WiFi界面）<br>（有的机型需要先添加网络才能对网络进行修改，这个看个人手机情况）</p><p><img src="/../../assets/%E3%80%90%E6%8A%93%E5%8C%85%E3%80%91Fiddler%E6%89%8B%E6%9C%BA%E6%8A%93%E5%8C%85/9.png"></p><p>第四步：访问手机浏览器或者任一应用就可以在fiddler里面查看到抓取的请求了<br>最后查看已经抓取到的https的请求：</p><p><img src="/../../assets/%E3%80%90%E6%8A%93%E5%8C%85%E3%80%91Fiddler%E6%89%8B%E6%9C%BA%E6%8A%93%E5%8C%85/10.png"></p><p>【转载】<a href="https://blog.csdn.net/Vandalism520/article/details/124930187">https://blog.csdn.net/Vandalism520/article/details/124930187</a></p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】app-隐私政策-示例</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91app-%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96-%E7%A4%BA%E4%BE%8B/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91app-%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96-%E7%A4%BA%E4%BE%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="隐私政策"><a href="#隐私政策" class="headerlink" title="隐私政策"></a>隐私政策</h1><p>欢迎您使用本软件（以下简称“本软件”），本软件是由xxx科技有限公司（以下简称“本公司”）向用户提供的<strong>xxx应用</strong>。<br>本公司将会采取合法、合理的措施保护用户的个人信息，非经法定原因或用户事先许可，本公司不会向任何第三方透露您的密码、姓名、手机号码等非公开信息。<br>我们的产品基于**DCloud uni-app(5+ App&#x2F;Wap2App)**开发，应用运行期间需要收集您的设备唯一识别码（IMEI&#x2F;android ID&#x2F;DEVICE_ID&#x2F;IDFA、SIM 卡 IMSI 信息）以提供统计分析服务，并通过应用启动数据及异常错误日志分析改进性能和用户体验，为用户提供更好的服务。详情内容请访问《DCloud用户服务条款》。 （DCloud用户服务条款超链至：<a href="https://ask.dcloud.net.cn/protocol.html">https://ask.dcloud.net.cn/protocol.html</a>）<br>本应用尊重并保护所有使用服务用户的个人隐私权。为了给您提供更准确、更有个性化的服务，本应用会按照本隐私权政策的规定使用和披露您的个人信息。但本应用将以高度的勤勉、审慎义务对待这些信息。除本隐私权政策另有规定外，在未征得您事先许可的情况下，本应用不会将这些信息对外披露或向第三方提供。本应用会不时更新本隐私权政策。 您在同意本应用服务使用协议之时，即视为您已经同意本隐私权政策全部内容。本隐私权政策属于本应用服务使用协议不可分割的一部分。</p><ul><li>应用名称：<strong>xxx</strong></li><li>开发者：<strong>xxx科技有限公司</strong></li><li>开发者联系方式：<strong>xxx-xxxxxxxx</strong></li><li>最新更新日期：<strong>2021-4-21</strong></li></ul><h3 id="适用范围"><a href="#适用范围" class="headerlink" title="适用范围"></a>适用范围</h3><ul><li>在您注册本应用帐号时，您根据本应用要求提供的个人注册信息；</li><li>在您使用本应用网络服务，或访问本应用平台网页时，本应用自动接收并记录的您的浏览器和计算机上的信息，仅包括<strong>您的 IP 地址、浏览器的类型、使用的语言、访问日期和时间、设备信息等数据</strong>；</li><li>本应用通过合法途径从商业伙伴处取得的用户个人数据。</li></ul><p>您了解并同意，以下信息不适用本隐私权政策：</p><ul><li>您在使用本应用平台提供的搜索服务时输入的关键字信息；</li><li>本应用收集到的您在本应用发布的有关信息数据，包括但不限于参与活动、成交信息及评价详情；</li><li>违反法律规定或违反本应用规则行为及本应用已对您采取的措施。</li></ul><h3 id="我们如何收集和使用您的用户信息"><a href="#我们如何收集和使用您的用户信息" class="headerlink" title="我们如何收集和使用您的用户信息"></a>我们如何收集和使用您的用户信息</h3><p>（一）您使用我司产品或服务过程中我们收集和使用的信息<br>我们仅会出于本政策所述的业务功能，收集和使用您的用户信息，收集用户信息的目的在于向您提供产品或服务，您有权自行选择是否提供该信息，但多数情况下，如果您不提供，我们可能无法向您提供相应的服务，也无法回应您遇到的问题：<br>在您使用我们的服务时，允许我们收集您自行向我们提供的或为向您提供服务所必要的信息包括：<strong>网络日志、设备信息、位置信息</strong>等。<br>对于我们收集的用户信息，我们将用于为您提供网页浏览、文件下载、资源收藏等功能。<br>您提供的上述信息，将在您使用本服务期间持续授权我们使用。在您停止使用推送服务时，我们将停止使用并删除上述信息。<br>我们保证会依法对收集后的用户信息进行去标识化或匿名化处理，对于无法单独或者与其他信息结合识别自然人个人身份的信息，不属于法律意义上的个人信息。如果我们将非个人信息与其他信息结合识别到您的个人身份时，或者与您的个人信息结合使用时，我们会在结合使用期间，将此类信息作为您的个人信息按照本隐私政策对其进行处理和保护。<br>为了更好运营和改善我们的技术和服务，或出于商业策略的变化，当我们提供的产品或服务所需的用户信息收集、使用、处理超出上述范围或者要将收集到的用户信息用于本隐私政策未载明的其他用途，或当我们要将基于特定目的收集而来的信息用于其他目的时，我们会在获取用户信息后的合理期限内或处理用户信息前通知您，并获得您的授权同意。<br>（二）征得授权同意的例外<br>请您理解，根据法律法规及相关国家标准，以下情形中，我们收集和使用您的用户信息无需征得您的授权同意：</p><ul><li>与国家安全、国防安全直接相关的；</li><li>与公共安全、公共卫生、重大公共利益直接相关的；</li><li>与犯罪侦查、起诉、审判和判决执行等直接相关的；</li><li>出于维护您或其他个人的生命、财产等重大合法权益但又很难得到本人同意的；</li><li>所收集的您的用户信息是您自行向社会公众公开的；</li><li>从合法公开披露的信息中收集的您的用户信息，如合法的新闻报道、政府信息公开等渠道；</li><li>根据您的要求签订或履行合同所必需的；</li><li>用于维护软件及相关服务的安全稳定运行所必需的，例如发现、处置软件及相关服务的故障；</li><li>个人信息控制者为新闻单位且其在开展合法的新闻报道所必需的；</li><li>学术研究机构基于公共利益开展统计或学术研究所必要，且对外提供学术研究或描述的结果时，对结果中所包含的个人信息进行去标识化处理的。</li><li>法律法规规定的其他情形。</li></ul><h3 id="信息披露"><a href="#信息披露" class="headerlink" title="信息披露"></a>信息披露</h3><p>在如下情况下，本应用将依据您的个人意愿或法律的规定全部或部分的披露您的个人信息：</p><ul><li>经您事先同意，向第三方披露；</li><li>为提供您所要求的产品和服务，而必须和第三方分享您的个人信息；</li><li>根据法律的有关规定，或者行政或司法机构的要求，向第三方或者行政、司法机构披露；</li><li>如您出现违反中国有关法律、法规或者本应用服务协议或相关规则的情况，需要向第三方披露；</li><li>如您是适格的知识产权投诉人并已提起投诉，应被投诉人要求，向被投诉人披露，以便双方处理可能的权利纠纷；</li><li>在本应用平台上创建的某一交易中，如交易任何一方履行或部分履行了交易义务并提出信息披露请求的，本应用有权决定向该用户提供其交易对方的联络方式等必要信息，以促成交易的完成或纠纷的解决。</li><li>其它本应用根据法律、法规或者网站政策认为合适的披露。</li></ul><h3 id="信息存储和交换"><a href="#信息存储和交换" class="headerlink" title="信息存储和交换"></a>信息存储和交换</h3><p>本应用收集的有关您的信息和资料将保存在本应用及（或）其关联公司的服务器上，这些信息和资料可能传送至您所在国家、地区或本应用收集信息和资料所在地的境外并在境外被访问、存储和展示。</p><h3 id="Cookie-的使用"><a href="#Cookie-的使用" class="headerlink" title="Cookie 的使用"></a>Cookie 的使用</h3><ul><li>在您未拒绝接受 <strong>cookies</strong> 的情况下，本应用会在您的计算机上设定或取用 cookies ，以便您能登录或使用依赖于 cookies 的本应用平台服务或功能。本应用使用 cookies 可为您提供更加周到的个性化服务，包括推广服务。</li><li>您有权选择接受或拒绝接受 cookies 。您可以通过修改浏览器设置的方式拒绝接受 cookies 。但如果您选择拒绝接受 cookies ，则您可能无法登录或使用依赖于 cookies 的本应用网络服务或功能。</li><li>通过本应用所设 cookies 所取得的有关信息，将适用本政策。</li></ul><h3 id="信息安全"><a href="#信息安全" class="headerlink" title="信息安全"></a>信息安全</h3><ul><li>本应用帐号均有安全保护功能，请妥善保管您的用户名及密码信息。本应用将通过对用户密码进行加密等安全措施确保您的信息不丢失，不被滥用和变造。尽管有前述安全措施，但同时也请您注意在信息网络上不存在“完善的安全措施”。</li><li>在使用本应用网络服务进行网上交易时，您不可避免的要向交易对方或潜在的交易对方披露自己的个人信息，如联络方式或者邮政地址。请您妥善保护自己的个人信息，仅在必要的情形下向他人提供。如您发现自己的个人信息泄密，尤其是本应用用户名及密码发生泄露，请您立即联络本应用客服，以便本应用采取相应措施。</li></ul><h3 id="您的权利"><a href="#您的权利" class="headerlink" title="您的权利"></a>您的权利</h3><p>按照中国相关的法律、法规、标准，以及其他国家、地区的通行做法，我们保障您对自己的用户信息行使以下权利：</p><h4 id="访问您的用户信息"><a href="#访问您的用户信息" class="headerlink" title="访问您的用户信息"></a>访问您的用户信息</h4><p>您有权访问您的用户信息，法律法规规定的例外情况除外。如果您想行使数据访问权，可以通过以下方式自行访问：APP &gt; 我的<br>如果您无法通过上述链接访问这些用户信息，您可以随时使用我们的 Web 表单联系，或发送电子邮件至<a href="mailto:&#x72;&#111;&#x63;&#121;&#x75;&#x61;&#110;&#64;&#108;&#117;&#x6f;&#x6a;&#105;&#x6e;&#103;&#x2e;&#116;&#x6f;&#x70;">&#x72;&#111;&#x63;&#121;&#x75;&#x61;&#110;&#64;&#108;&#117;&#x6f;&#x6a;&#105;&#x6e;&#103;&#x2e;&#116;&#x6f;&#x70;</a>。我们将在30天内回复您的访问请求。<br>对于您在使用我们的产品或服务过程中产生的其他用户信息，只要我们不需要过多投入，我们会向您提供。如果您想行使数据访问权，请发送电子邮件至<a href="mailto:&#114;&#x6f;&#x63;&#121;&#117;&#97;&#x6e;&#x40;&#108;&#x75;&#111;&#x6a;&#105;&#110;&#103;&#46;&#116;&#111;&#x70;">&#114;&#x6f;&#x63;&#121;&#117;&#97;&#x6e;&#x40;&#108;&#x75;&#111;&#x6a;&#105;&#110;&#103;&#46;&#116;&#111;&#x70;</a>。</p><h4 id="更正您的用户信息"><a href="#更正您的用户信息" class="headerlink" title="更正您的用户信息"></a>更正您的用户信息</h4><p>当您发现我们处理的关于您的用户信息有错误时，您有权要求我们作出更正。您可以通过“（一）访问您的用户信息”中罗列的方式提出更正申请。 如果您无法通过上述链接更正这些用户信息，您可以随时使用我们的 Web 表单联系，或发送电子邮件至<a href="mailto:&#x72;&#111;&#x63;&#121;&#117;&#x61;&#110;&#x40;&#x6c;&#117;&#x6f;&#106;&#x69;&#110;&#103;&#46;&#116;&#111;&#x70;">&#x72;&#111;&#x63;&#121;&#117;&#x61;&#110;&#x40;&#x6c;&#117;&#x6f;&#106;&#x69;&#110;&#103;&#46;&#116;&#111;&#x70;</a>。我们将在30天内回复您的更正请求。</p><h4 id="（三）删除您的用户信息"><a href="#（三）删除您的用户信息" class="headerlink" title="（三）删除您的用户信息"></a>（三）删除您的用户信息</h4><p>在以下情形中，您可以向我们提出删除用户信息的请求：</p><ul><li>如果我们处理用户信息的行为违反法律法规；</li><li>如果我们收集、使用您的用户信息，却未征得您的同意；</li><li>如果我们处理用户信息的行为违反了与您的约定；</li><li>如果您不再使用我们的产品或服务，或您注销了账号；</li><li>如果我们不再为您提供产品或服务。</li></ul><p>我们将会根据您的删除请求进行评估，若满足相应规定，我们将会采取相应步骤进行处理。当您向我们提出删除请求时，我们可能会要求您进行身份验证，以保障账户的安全。当您从我们的服务中删除信息后，因为适用的法律和安全技术，我们可能不会立即从备份系统中删除相应的信息，我们将安全存储您的信息直到备份可以清除或实现匿名化。</p><h4 id="用户信息主体注销账户"><a href="#用户信息主体注销账户" class="headerlink" title="用户信息主体注销账户"></a>用户信息主体注销账户</h4><p>您随时可注销此前注册的账户，您可以通过以下方式自行操作：<strong>APP &gt; 我的 &gt; 注销账号</strong><br>在注销账户之后，我们将停止为您提供产品或服务并依据您的要求，删除或匿名化您的信息，法律法规另有规定的除外。这也将可能导致您失去对您账户中数据的访问权，请您谨慎操作。</p><h4 id="用户信息主体获取用户信息副本"><a href="#用户信息主体获取用户信息副本" class="headerlink" title="用户信息主体获取用户信息副本"></a>用户信息主体获取用户信息副本</h4><p>您有权获取您的用户信息副本，您可以通过以下方式自行操作：补充获取用户信息副本的操作方式<br>在技术可行的前提下，例如数据接口匹配，我们还可按您的要求，直接将您的用户信息副本传输给您指定的第三方。</p><h4 id="约束信息系统自动决策"><a href="#约束信息系统自动决策" class="headerlink" title="约束信息系统自动决策"></a>约束信息系统自动决策</h4><p>在某些业务功能中，我们可能仅依据信息系统、算法等在内的非人工自动决策机制作出决定。如果这些决定显著影响您的合法权益，您有权要求我们作出解释，我们也将提供适当的救济方式。</p><h4 id="响应您的上述请求"><a href="#响应您的上述请求" class="headerlink" title="响应您的上述请求"></a>响应您的上述请求</h4><p>为保障安全，您可能需要提供书面请求，或以其他方式证明您的身份。我们可能会先要求您验证自己的身份，然后再处理您的请求。<br>我们将在三十天内作出答复。如您不满意，还可以通过以下途径投诉：打电话：<strong>xxx-xxxxxxxx</strong><br>对于您合理的请求，我们原则上不收取费用，但对多次重复、超出合理限度的请求，我们将视情况收取一定成本费用。对于那些无端重复、需要过多技术手段（例如，需要开发新系统或从根本上改变现行惯例）、给他人合法权益带来风险或者非常不切实际的请求，我们可能会予以拒绝。也请您理解，出于安全保障的考虑、相关法律法规的要求或技术上的限制，对于您的某些请求我们可能无法做出响应，例如以下情形：</p><ul><li>与用户信息控制者履行法律法规规定的义务相关的；</li><li>与国家安全、国防安全直接相关的；</li><li>与公共安全、公共卫生、重大公共利益直接相关的；</li><li>与犯罪侦查、起诉、审判和执行判决等直接相关的；</li><li>用户信息控制者有充分证据表明用户信息主体存在主观恶意或滥用权利的；</li><li>出于维护用户信息主体或其他个人的生命、财产等重大合法权益但又很难得到本人同意的；</li><li>响应用户信息主体的请求将导致用户信息主体或其他个人、组织的合法权益受到严重损害的；</li><li>涉及商业秘密的。</li></ul><h4 id="（九）查看最新的隐私政策"><a href="#（九）查看最新的隐私政策" class="headerlink" title="（九）查看最新的隐私政策"></a>（九）查看最新的隐私政策</h4><p>当我们的隐私政策变更时，我们会通过您提供的联系方式，第一时间通知能知晓。可通过打开 <strong>APP &gt; 我的 &gt; 隐私政策</strong> 查看最新版本。</p>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】app-服务协议-示例</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91app-%E6%9C%8D%E5%8A%A1%E5%8D%8F%E8%AE%AE-%E7%A4%BA%E4%BE%8B/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91app-%E6%9C%8D%E5%8A%A1%E5%8D%8F%E8%AE%AE-%E7%A4%BA%E4%BE%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="服务协议"><a href="#服务协议" class="headerlink" title="服务协议"></a>服务协议</h1><p>开发者：xxx科技有限公司 应用名称：xxx。<br>《用户服务协议》（以下简称 “协议”）及其条款，系确立您与xxx科技有限公司之间就下载、安装及使用该软件（以下简称“本软件”或“本应用”）所订立的、描述您与本应用之间权利义务的协议。<br>在注册前务必认真阅读本协议的内容、充分理解各条款内容，如有异议，您可选择不进入本应用。一旦您确认本用户注册协议后，本协议即在您和本应用之间产生法律效力，意味着您完全同意并接受协议的全部条款。请您审慎阅读并选择接受或不接受协议（未成年人应在法定监护人陪同下阅读）。<br>用户使用：<br>用户按照页面给与的提示完成全部注册步骤或者是联系我司企业的客服人员等进行商务洽谈之后设立独有的账户信息，即成为本应用的用户，用户应自行保管账号及密码，并准确、安全地使用其账号及密码。本应用可通过用户自行设定，向用户提供个性化信息服务。<br>用户充分了解并同意，本应用为用户提供个性化信息服务，用户须为自己注册账号下的行为负责，包括用户所导入、上载、传送的任何内容以及由此产生的任何后果，用户应对本应用中的内容自行加以判断，并承担因使用内容而引起的所有风险。本应用不对因用户行为而导致的损失承担责任。<br>用户须对在本应用上所传送信息的真实性、合法性、有效性等负责，与用户所传播的信息相关的任何法律责任由用户自行承担，与本应用无关。用户在本应用中记录的或通过本应用服务所传送的任何内容并不反映本应用的观点或政策，本应用对此不承担责任。<br>用户提供的个人信息或发布的信息不真实、不准确、不合法；发表内容不符合本协议或发表内容不符合法律法规的，本应用有权暂停或终止用户使用本平台的服务。用户如果对本应用的暂停或者终止或收回其账号行为有异议，客户可向平台提出意见，要求其继续提供服务。本应用收到客户此类信息的投诉与意见，会审核相关信息，并及时对用户给予反馈。若信息确实不真实或不准确或不合法有效，本应用平台要求用户提供符合要求的信息。<br>为避免用户终端数据丢失、更好服务用户之目的，本应用将向注册用户提供数据备份服务，经注册用户授权，本应用将存储于注册用户终端的本应用数据库中的数据资料上载至本应用服务器，并且提供恢复到终端设备服务。</p><ul><li>用户不得利用本应用服务制作、上载、复制、发布、传播或者转载如下内容：</li><li>反对宪法所确定的基本原则的；</li><li>危害国家安全，泄露国家秘密，颠覆国家政权，破坏国家统一的；</li><li>损害国家荣誉和利益的；</li><li>煽动民族仇恨、民族歧视，破坏民族团结的；</li><li>破坏国家宗教政策，宣扬邪教和封建迷信的；</li><li>散布谣言，扰乱社会秩序，破坏社会稳定的；</li><li>散布淫秽、色情、赌博、暴力、凶杀、恐怖或者教唆犯罪的；</li><li>侮辱或者诽谤他人，侵害他人合法权益的；</li><li>法律、行政法规禁止的其他内容。</li></ul><p>本应用有权针对用户发表的内容进行审核，若用户实施违反本条所述使用规则及法律法规的行为，本应用平台有权视行为严重程度，根据《侵权责任法》《信息网络传播权保护条例》等法律法规要求用户立即采取纠正、改正、恢复原状、消除影响等行为，且本应用有权自行采取合法有效且必要的措施（包括但不限于更改或删除相关侵权信息、暂停或终止用户使用本网络服务等），同时本应用保留进一步追究用户法律责任的权利。<br>同时，论坛社区版块发起者、管理者应当履行与本协议权利、法律法规相适应的义务，对违反法律规定和协议约定、履行责任义务不到位的服务提供者应当依法依约限制（更改或删除相关侵权信息、暂停使用）或取消其管理权限，直至封禁或者关闭有关账号、版块。<br>用户禁止以文字、语音、图片等任何形式刻意宣传其他竞争平台；也禁止以相同的方式宣传非本应用联系方式，如果有聊天需求，可告知听众使用本应用私信联系。<br>本应用提供的服务中可能包含广告，用户同意在使用过程中显示本应用和第三方供应商、合作伙伴提供的广告。用户因就第三方提供的服务、产品与第三方产生争议的，由用户与第三方自行解决，本应用不承担责任。<br>本应用保留因业务发展需要，单方面对其服务器所提供的全部或部分服务内容在任何时候不经任何通知的情况下变更、暂停、限制、终止或撤销服务的权利。</p>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【linux】配置文件</title>
    <link href="/linux/%E3%80%90linux%E3%80%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/"/>
    <url>/linux/%E3%80%90linux%E3%80%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="profile文件环境变量配置"><a href="#profile文件环境变量配置" class="headerlink" title="profile文件环境变量配置"></a>profile文件环境变量配置</h2><p>位置：&#x2F;etc&#x2F;profile</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># /etc/profile: system-wide .profile file for the Bourne shell (sh(1))</span><br><span class="hljs-comment"># and Bourne compatible shells (bash(1), ksh(1), ash(1), ...).</span><br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;`id -u`&quot;</span> -eq 0 ]; <span class="hljs-keyword">then</span><br>  PATH=<span class="hljs-string">&quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br><span class="hljs-keyword">else</span><br>  PATH=<span class="hljs-string">&quot;/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/sbin:/usr/sbin&quot;</span><br><span class="hljs-keyword">fi</span><br><span class="hljs-built_in">export</span> PATH<br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$PS1</span>&quot;</span> ]; <span class="hljs-keyword">then</span><br>  <span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$BASH</span>&quot;</span> ] &amp;&amp; [ <span class="hljs-string">&quot;<span class="hljs-variable">$BASH</span>&quot;</span> != <span class="hljs-string">&quot;/bin/sh&quot;</span> ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-comment"># The file bash.bashrc already sets the default PS1.</span><br>    <span class="hljs-comment"># PS1=&#x27;\h:\w\$ &#x27;</span><br>    <span class="hljs-keyword">if</span> [ -f /etc/bash.bashrc ]; <span class="hljs-keyword">then</span><br>      . /etc/bash.bashrc<br>    <span class="hljs-keyword">fi</span><br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;`id -u`&quot;</span> -eq 0 ]; <span class="hljs-keyword">then</span><br>      PS1=<span class="hljs-string">&#x27;# &#x27;</span><br>    <span class="hljs-keyword">else</span><br>      PS1=<span class="hljs-string">&#x27;$ &#x27;</span><br>    <span class="hljs-keyword">fi</span><br>  <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-keyword">if</span> [ -d /etc/profile.d ]; <span class="hljs-keyword">then</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> /etc/profile.d/*.sh; <span class="hljs-keyword">do</span><br>    <span class="hljs-keyword">if</span> [ -r <span class="hljs-variable">$i</span> ]; <span class="hljs-keyword">then</span><br>      . <span class="hljs-variable">$i</span><br>    <span class="hljs-keyword">fi</span><br>  <span class="hljs-keyword">done</span><br>  <span class="hljs-built_in">unset</span> i<br><span class="hljs-keyword">fi</span><br><span class="hljs-built_in">tty</span> | egrep -q <span class="hljs-built_in">tty</span>[1-6] &amp;&amp; <span class="hljs-built_in">export</span> LC_ALL=C<br><span class="hljs-comment">#set node</span><br><span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;<span class="hljs-variable">$PATH</span>:/home/rocyuan/software/node-v14.19.1-linux-x64/bin&quot;</span><br><br><span class="hljs-comment">#set java env</span><br><span class="hljs-built_in">export</span> JAVA_HOME=/usr/lib/jdk/jdk1.8.0_311<br><span class="hljs-built_in">export</span> JRE_HOME=<span class="hljs-variable">$&#123;JAVA_HOME&#125;</span>/jre <br><span class="hljs-built_in">export</span> CLASSPATH=.:<span class="hljs-variable">$&#123;JAVA_HOME&#125;</span>/lib:<span class="hljs-variable">$&#123;JRE_HOME&#125;</span>/lib <br><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="hljs-variable">$PATH</span><br><br><span class="hljs-comment">#set maven</span><br><span class="hljs-built_in">export</span> MAVEN_HOME=/usr/local/apache-maven-3.8.5<br><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$&#123;MAVEN_HOME&#125;</span>/bin:<span class="hljs-variable">$PATH</span><br><br><br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90linux%E3%80%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/1.jpg"></p><h2 id="bashrc文件配置"><a href="#bashrc文件配置" class="headerlink" title=".bashrc文件配置"></a>.bashrc文件配置</h2><p>位置：&#x2F;home&#x2F;(username)&#x2F;.bashrc<br>解决每次需要source &#x2F;etc&#x2F;profile配置才生效<br>.baserc文件添加 source &#x2F;etc&#x2F;profile</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#解决每次需要source /etc/profile配置才生效</span><br><span class="hljs-built_in">source</span> /etc/profile<br><span class="hljs-comment"># ~/.bashrc: executed by bash(1) for non-login shells.</span><br><span class="hljs-comment"># see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)</span><br><span class="hljs-comment"># for examples</span><br><br><span class="hljs-comment"># If not running interactively, don&#x27;t do anything</span><br><span class="hljs-keyword">case</span> $- <span class="hljs-keyword">in</span><br>    *i*) ;;<br>      *) <span class="hljs-built_in">return</span>;;<br><span class="hljs-keyword">esac</span><br><br><span class="hljs-comment"># don&#x27;t put duplicate lines or lines starting with space in the history.</span><br><span class="hljs-comment"># See bash(1) for more options</span><br>HISTCONTROL=ignoreboth<br><br><span class="hljs-comment"># append to the history file, don&#x27;t overwrite it</span><br><span class="hljs-built_in">shopt</span> -s histappend<br><br><span class="hljs-comment"># for setting history length see HISTSIZE and HISTFILESIZE in bash(1)</span><br>HISTSIZE=1000<br>HISTFILESIZE=2000<br><br><span class="hljs-comment"># check the window size after each command and, if necessary,</span><br><span class="hljs-comment"># update the values of LINES and COLUMNS.</span><br><span class="hljs-built_in">shopt</span> -s checkwinsize<br><br><span class="hljs-comment"># If set, the pattern &quot;**&quot; used in a pathname expansion context will</span><br><span class="hljs-comment"># match all files and zero or more directories and subdirectories.</span><br><span class="hljs-comment">#shopt -s globstar</span><br><br><span class="hljs-comment"># make less more friendly for non-text input files, see lesspipe(1)</span><br><span class="hljs-comment">#[ -x /usr/bin/lesspipe ] &amp;&amp; eval &quot;$(SHELL=/bin/sh lesspipe)&quot;</span><br><br><span class="hljs-comment"># set variable identifying the chroot you work in (used in the prompt below)</span><br><span class="hljs-keyword">if</span> [ -z <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;debian_chroot:-&#125;</span>&quot;</span> ] &amp;&amp; [ -r /etc/debian_chroot ]; <span class="hljs-keyword">then</span><br>    debian_chroot=$(<span class="hljs-built_in">cat</span> /etc/debian_chroot)<br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># set a fancy prompt (non-color, unless we know we &quot;want&quot; color)</span><br><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;<span class="hljs-variable">$TERM</span>&quot;</span> <span class="hljs-keyword">in</span><br>    xterm-color|*-256color) color_prompt=<span class="hljs-built_in">yes</span>;;<br><span class="hljs-keyword">esac</span><br><br><span class="hljs-comment"># uncomment for a colored prompt, if the terminal has the capability; turned</span><br><span class="hljs-comment"># off by default to not distract the user: the focus in a terminal window</span><br><span class="hljs-comment"># should be on the output of commands, not on the prompt</span><br><span class="hljs-comment"># source /etc/profile 后bash颜色变化</span><br>force_color_prompt=<span class="hljs-built_in">yes</span><br><br><span class="hljs-keyword">if</span> [ -n <span class="hljs-string">&quot;<span class="hljs-variable">$force_color_prompt</span>&quot;</span> ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-keyword">if</span> [ -x /usr/bin/tput ] &amp;&amp; tput setaf 1 &gt;&amp;/dev/null; <span class="hljs-keyword">then</span><br><span class="hljs-comment"># We have color support; assume it&#x27;s compliant with Ecma-48</span><br><span class="hljs-comment"># (ISO/IEC-6429). (Lack of such support is extremely rare, and such</span><br><span class="hljs-comment"># a case would tend to support setf rather than setaf.)</span><br>color_prompt=<span class="hljs-built_in">yes</span><br>    <span class="hljs-keyword">else</span><br>color_prompt=<br>    <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$color_prompt</span>&quot;</span> = <span class="hljs-built_in">yes</span> ]; <span class="hljs-keyword">then</span><br>    PS1=<span class="hljs-string">&#x27;$&#123;debian_chroot:+($debian_chroot)&#125;\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ &#x27;</span><br><span class="hljs-keyword">else</span><br>    PS1=<span class="hljs-string">&#x27;$&#123;debian_chroot:+($debian_chroot)&#125;\u@\h:\w\$ &#x27;</span><br><span class="hljs-keyword">fi</span><br><span class="hljs-built_in">unset</span> color_prompt force_color_prompt<br><br><span class="hljs-comment"># If this is an xterm set the title to user@host:dir</span><br><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;<span class="hljs-variable">$TERM</span>&quot;</span> <span class="hljs-keyword">in</span><br>xterm*|rxvt*)<br>    PS1=<span class="hljs-string">&quot;\[\e]0;<span class="hljs-variable">$&#123;debian_chroot:+($debian_chroot)&#125;</span>\u@\h: \w\a\]<span class="hljs-variable">$PS1</span>&quot;</span><br>    ;;<br>*)<br>    ;;<br><span class="hljs-keyword">esac</span><br><br><span class="hljs-comment"># enable color support of ls and also add handy aliases</span><br><span class="hljs-keyword">if</span> [ -x /usr/bin/dircolors ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">test</span> -r ~/.dircolors &amp;&amp; <span class="hljs-built_in">eval</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(dircolors -b ~/.dircolors)</span>&quot;</span> || <span class="hljs-built_in">eval</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(dircolors -b)</span>&quot;</span><br>    <span class="hljs-built_in">alias</span> <span class="hljs-built_in">ls</span>=<span class="hljs-string">&#x27;ls --color=auto&#x27;</span><br>    <span class="hljs-comment">#alias dir=&#x27;dir --color=auto&#x27;</span><br>    <span class="hljs-comment">#alias vdir=&#x27;vdir --color=auto&#x27;</span><br><br>    <span class="hljs-comment">#alias grep=&#x27;grep --color=auto&#x27;</span><br>    <span class="hljs-comment">#alias fgrep=&#x27;fgrep --color=auto&#x27;</span><br>    <span class="hljs-comment">#alias egrep=&#x27;egrep --color=auto&#x27;</span><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># colored GCC warnings and errors</span><br><span class="hljs-comment">#export GCC_COLORS=&#x27;error=01;31:warning=01;35:note=01;36:caret=01;32:locus=01:quote=01&#x27;</span><br><br><span class="hljs-comment"># some more ls aliases</span><br><span class="hljs-comment">#alias ll=&#x27;ls -l&#x27;</span><br><span class="hljs-comment">#alias la=&#x27;ls -A&#x27;</span><br><span class="hljs-comment">#alias l=&#x27;ls -CF&#x27;</span><br><br><span class="hljs-comment"># Alias definitions.</span><br><span class="hljs-comment"># You may want to put all your additions into a separate file like</span><br><span class="hljs-comment"># ~/.bash_aliases, instead of adding them here directly.</span><br><span class="hljs-comment"># See /usr/share/doc/bash-doc/examples in the bash-doc package.</span><br><br><span class="hljs-keyword">if</span> [ -f ~/.bash_aliases ]; <span class="hljs-keyword">then</span><br>    . ~/.bash_aliases<br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># enable programmable completion features (you don&#x27;t need to enable</span><br><span class="hljs-comment"># this, if it&#x27;s already enabled in /etc/bash.bashrc and /etc/profile</span><br><span class="hljs-comment"># sources /etc/bash.bashrc).</span><br><span class="hljs-keyword">if</span> ! <span class="hljs-built_in">shopt</span> -oq posix; <span class="hljs-keyword">then</span><br>  <span class="hljs-keyword">if</span> [ -f /usr/share/bash-completion/bash_completion ]; <span class="hljs-keyword">then</span><br>    . /usr/share/bash-completion/bash_completion<br>  <span class="hljs-keyword">elif</span> [ -f /etc/bash_completion ]; <span class="hljs-keyword">then</span><br>    . /etc/bash_completion<br>  <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">fi</span><br><span class="hljs-comment"># Set LS_COLORS environment by Deepin</span><br><span class="hljs-keyword">if</span> [[ (<span class="hljs-string">&quot;<span class="hljs-variable">$TERM</span>&quot;</span> = *256color || <span class="hljs-string">&quot;<span class="hljs-variable">$TERM</span>&quot;</span> = screen* || <span class="hljs-string">&quot;<span class="hljs-variable">$TERM</span>&quot;</span> = xterm* ) &amp;&amp; -f /etc/lscolor-256color ]]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">eval</span> $(<span class="hljs-built_in">dircolors</span> -b /etc/lscolor-256color)<br><span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">eval</span> $(<span class="hljs-built_in">dircolors</span>)<br><span class="hljs-keyword">fi</span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【linux】centos7安装nodejs</title>
    <link href="/linux/%E3%80%90linux%E3%80%91centos7%E5%AE%89%E8%A3%85nodejs/"/>
    <url>/linux/%E3%80%90linux%E3%80%91centos7%E5%AE%89%E8%A3%85nodejs/</url>
    
    <content type="html"><![CDATA[<h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">wget</span> https://nodejs.org/dist/v16.<span class="hljs-number">14</span>.<span class="hljs-number">0</span>/node-v16.<span class="hljs-number">14</span>.<span class="hljs-number">0</span>-linux-x64.tar.xz<br></code></pre></td></tr></table></figure><h1 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h1><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">tar xzvf <span class="hljs-keyword">node</span><span class="hljs-title">-v16</span>.<span class="hljs-number">14.0</span>-linux-x64.tar.xz<br></code></pre></td></tr></table></figure><h1 id="软连接命令"><a href="#软连接命令" class="headerlink" title="软连接命令"></a>软连接命令</h1><p>这种方式会存在npm全局安装指令无法使用，建议配置环境变量</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">ln -s /home/rocyuan/software/<span class="hljs-keyword">node</span><span class="hljs-title">-v16</span>.<span class="hljs-number">14.0</span>-linux-x64/bin/npm /usr/local/bin/npm<br>ln -s /home/rocyuan/software/<span class="hljs-keyword">node</span><span class="hljs-title">-v16</span>.<span class="hljs-number">14.0</span>-linux-x64/bin/<span class="hljs-keyword">node</span> <span class="hljs-title">/usr</span>/local/bin/<span class="hljs-keyword">node</span><span class="hljs-title"></span><br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90linux%E3%80%91centos7%E5%AE%89%E8%A3%85nodejs/1.png"></p><h1 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h1><p>修改配置文件（配置PATH环境变量）</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vi</span> /etc/<span class="hljs-keyword">profile</span><br></code></pre></td></tr></table></figure><p>加上</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">export <span class="hljs-title class_">PATH</span>=<span class="hljs-variable">$PATH</span><span class="hljs-symbol">:/home/rocyuan/software/node-v16</span>.<span class="hljs-number">14.0</span>-linux-x64/bin/<br></code></pre></td></tr></table></figure><h1 id="更新配置文件"><a href="#更新配置文件" class="headerlink" title="更新配置文件"></a>更新配置文件</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> /etc/profile<br></code></pre></td></tr></table></figure><h1 id="使用nvm"><a href="#使用nvm" class="headerlink" title="使用nvm"></a>使用nvm</h1><p>nvm github中的git安装教程</p><p><a href="https://github.com/nvm-sh/nvm?tab=readme-ov-file#git-install">https://github.com/nvm-sh/nvm?tab=readme-ov-file#git-install</a></p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】eslint和prettier使用</title>
    <link href="/node/%E3%80%90node%E3%80%91eslint%E5%92%8Cprettier%E4%BD%BF%E7%94%A8/"/>
    <url>/node/%E3%80%90node%E3%80%91eslint%E5%92%8Cprettier%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>需要使用到以下四个库：<br>eslint：用来检查js代码质量<br>prettier：用来格式化美化代码风格<br>eslint-plugin-prettier：按 eslint 规则运行 prettier<br>eslint-config-prettier：关闭 eslint 与 prettier 冲突的规则</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>分别安装 eslint、prettier、eslint-plugin-prettier、eslint-config-prettier</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i -D eslint prettier eslint-plugin-prettier eslint-config-prettier<br></code></pre></td></tr></table></figure><h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><p>eslint配置文件：.eslintrc.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">parserOptions</span>: &#123;<br>    <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-number">2015</span>,<br>    <span class="hljs-attr">sourceType</span>: <span class="hljs-string">&#x27;module&#x27;</span><br>  &#125;,<br>  <span class="hljs-attr">extends</span>: [<span class="hljs-string">&#x27;prettier&#x27;</span>],<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-string">&#x27;prettier&#x27;</span>],<br>  <span class="hljs-attr">rules</span>: &#123;<br>    <span class="hljs-string">&#x27;prettier/prettier&#x27;</span>: [<br>      <span class="hljs-string">&#x27;error&#x27;</span>,<br>      &#123;<br>        <span class="hljs-attr">endOfLine</span>: <span class="hljs-string">&#x27;auto&#x27;</span>,<br>      &#125;,<br>    ],<br>  &#125;,<br>&#125;<br><br></code></pre></td></tr></table></figure><p>prettier配置文件：.prettierrc.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;semi&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;tabWidth&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;useTabs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;singleQuote&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;jsxSingleQuote&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;printWidth&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;endOfLine&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;lf&quot;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><h1 id="脚本定义"><a href="#脚本定义" class="headerlink" title="脚本定义"></a>脚本定义</h1><p>定义格式化代码脚本，方便格式化全部代码，打开 package.json，定义 format 脚本<br>–write . 格式化全部代码<br>–write src&#x2F; 格式化 src 目录下代码<br>……</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;format&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;prettier --write .&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;devDependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;eslint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^8.51.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;eslint-config-prettier&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^9.0.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;eslint-plugin-prettier&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^5.0.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;prettier&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.0.3&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h1 id="vscode保存自动格式化配置"><a href="#vscode保存自动格式化配置" class="headerlink" title="vscode保存自动格式化配置"></a>vscode保存自动格式化配置</h1><p>根目录创建 .vscode 文件夹，创建 settings.json 配置文件</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;editor.codeActionsOnSave&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">// 保存使用eslint进行修复（格式化）代码</span><br>    <span class="hljs-attr">&quot;source.fixAll.eslint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><h1 id="在ts项目下"><a href="#在ts项目下" class="headerlink" title="在ts项目下"></a>在ts项目下</h1><p>安装插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev @typescript-eslint/parser @typescript-eslint/eslint-plugin<br></code></pre></td></tr></table></figure><p>配置.eslintrc.js</p><p>TypeScript 的最佳实践和推荐规则：<code>plugin:@typescript-eslint/recommended</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">parserOptions</span>: &#123;<br>    <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-number">2015</span>,<br>    <span class="hljs-attr">sourceType</span>: <span class="hljs-string">&#x27;module&#x27;</span><br>  &#125;,<br>  <span class="hljs-attr">parser</span>: <span class="hljs-string">&#x27;@typescript-eslint/parser&#x27;</span>,<br>  <span class="hljs-attr">extends</span>: [<span class="hljs-string">&#x27;plugin:@typescript-eslint/recommended&#x27;</span>],<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-string">&#x27;@typescript-eslint&#x27;</span>],<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="末尾分号问题"><a href="#末尾分号问题" class="headerlink" title="末尾分号问题"></a>末尾分号问题</h2><p>eslint + prettier 末尾分号开启 eslint 报错问题； 在 .eslintrc.js 中添加</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs prolog">&#123;<br>  overrides: [<br>    &#123;<br>      files: [<span class="hljs-string">&#x27;*.js&#x27;</span>, <span class="hljs-string">&#x27;*.jsx&#x27;</span>, <span class="hljs-string">&#x27;*.ts&#x27;</span>, <span class="hljs-string">&#x27;*.tsx&#x27;</span>],<br>      rules: &#123;<br>        <span class="hljs-string">&#x27;prettier/prettier&#x27;</span>: [<span class="hljs-string">&#x27;error&#x27;</span>, &#123; semi: true &#125;],<br>      &#125;,<br>    &#125;,<br>  ],<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】创建UI库并上传npm私有仓库</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>文章中的演示上传的并非npm官网仓库，只是npm源不同而已。</p><h1 id="准备ui库项目"><a href="#准备ui库项目" class="headerlink" title="准备ui库项目"></a>准备ui库项目</h1><h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p>使用vue-cli准备一个vue项目进行改造，创建项目过程不在演示 <code>vue create xxx</code></p><h2 id="修改依赖"><a href="#修改依赖" class="headerlink" title="修改依赖"></a>修改依赖</h2><p>创建完成后，我们将<code>package.json</code>生产时依赖改到开发时依赖（因为我们是开发库文件，不应该将vue等打包到库项目中），然后重新安装依赖，重新安装依赖前，个人删除了<code>node_modules文件夹</code>与npm锁定文件<code>package.lock.json</code>。</p><p><img src="/../../assets/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/1.png"></p><h2 id="目录修改与vue脚手架配置"><a href="#目录修改与vue脚手架配置" class="headerlink" title="目录修改与vue脚手架配置"></a>目录修改与vue脚手架配置</h2><p>默认情况下vue-cli创建项目入口目录是<code>src</code>，我们参考<code>element-ui</code>目录结构，将<code>src</code>更改为<code>examples</code>作为项目演示目录。再新建目录<code>packages</code>作为库文件组件存放目录。</p><p><img src="/../../assets/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/2.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title function_">defineConfig</span>(&#123;<br>  <span class="hljs-attr">transpileDependencies</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">productionSourceMap</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">// 配置参考：https://cli.vuejs.org/zh/config/#pages</span><br>  <span class="hljs-attr">pages</span>: &#123;<br>    <span class="hljs-attr">index</span>: &#123;<br>      <span class="hljs-comment">// 入口</span><br>      <span class="hljs-attr">entry</span>: <span class="hljs-string">&quot;examples/main.js&quot;</span>,<br>      <span class="hljs-comment">// 模板</span><br>      <span class="hljs-attr">template</span>: <span class="hljs-string">&quot;public/index.html&quot;</span>,<br>      <span class="hljs-comment">// 打包输出的html</span><br>      <span class="hljs-attr">filename</span>: <span class="hljs-string">&quot;index.html&quot;</span>,<br>    &#125;,<br>  &#125;,<br>  <span class="hljs-comment">// 配置参考：https://cli.vuejs.org/zh/config/#chainwebpack</span><br>  <span class="hljs-attr">chainWebpack</span>: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>    config.<span class="hljs-property">module</span><br>      .<span class="hljs-title function_">rule</span>(<span class="hljs-string">&quot;js&quot;</span>)<br>      .<span class="hljs-property">include</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;/packages&quot;</span>)<br>      .<span class="hljs-title function_">end</span>()<br>      .<span class="hljs-title function_">use</span>(<span class="hljs-string">&quot;babel&quot;</span>)<br>      .<span class="hljs-title function_">loader</span>(<span class="hljs-string">&quot;babel-loader&quot;</span>);<br>  &#125;,<br>&#125;);<br><br></code></pre></td></tr></table></figure><h2 id="配置脚本构建目标"><a href="#配置脚本构建目标" class="headerlink" title="配置脚本构建目标"></a>配置脚本构建目标</h2><p>参考：<a href="https://cli.vuejs.org/zh/guide/build-targets.html">https://cli.vuejs.org/zh/guide/build-targets.html</a></p><p>vue-cli默认构建目标是应用，需要修改为库，<code>--target lib</code>指定为构建为库，<code>--name rocyuan-ui</code>指定名字，<code>--dest lib</code>指定构建完的目录，<code>packages/index.js</code>指定构建入口，稍后开发完组件运行这个脚本</p><p><img src="/../../assets/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/3.png"></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;lib&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;vue-cli-service build --target lib --name rocyuan-ui --dest lib packages/index.js&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h1 id="开始写组件"><a href="#开始写组件" class="headerlink" title="开始写组件"></a>开始写组件</h1><h2 id="组件目录划分"><a href="#组件目录划分" class="headerlink" title="组件目录划分"></a>组件目录划分</h2><p>例如写一个input组件，目录结构及写法借鉴element-ui<br>在<code>packages</code>目录创建<code>index.js</code>入口，创建<code>input</code>目录，其他组件则创建其他组件的目录，组件目录分<code>index.js</code>入口文件与<code>src</code>目录组件封装源文件目录</p><p><img src="/../../assets/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/4.png"></p><h2 id="组件代码"><a href="#组件代码" class="headerlink" title="组件代码"></a>组件代码</h2><p>packages&#x2F;index.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">RocInput</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./input&quot;</span>;<br><br><span class="hljs-keyword">const</span> components = [<span class="hljs-title class_">RocInput</span>];<br><span class="hljs-comment">// 定义 install 方法，使用use方法注册需要暴露 install 方法（参考vue官网 use方法）</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">install</span> = (<span class="hljs-params">Vue</span>) =&gt; &#123;<br>  <span class="hljs-keyword">if</span> (install.<span class="hljs-property">installed</span>) <span class="hljs-keyword">return</span>;<br>  install.<span class="hljs-property">installed</span> = <span class="hljs-literal">true</span><br>  components.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">component</span>) =&gt;</span> <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(component.<span class="hljs-property">name</span>, component));<br>&#125;;<br><span class="hljs-comment">// 判断是否是直接引入文件</span><br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">&quot;undefined&quot;</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">Vue</span>) &#123;<br>  <span class="hljs-title function_">install</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">Vue</span>);<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  install,<br>  ...components,<br>&#125;;<br><br><br></code></pre></td></tr></table></figure><p>packages&#x2F;input&#x2F;index.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Button</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./src/main&quot;</span>;<br><br><span class="hljs-title class_">Button</span>.<span class="hljs-property">install</span> = <span class="hljs-function">(<span class="hljs-params">Vue</span>) =&gt;</span> &#123;<br>  <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-title class_">Button</span>.<span class="hljs-property">name</span>, <span class="hljs-title class_">Button</span>);<br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Button</span>;<br></code></pre></td></tr></table></figure><p>packages&#x2F;input&#x2F;src&#x2F;main.vue</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;roc-input&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">:maxlength</span>=<span class="hljs-string">&quot;maxlength&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;value&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;handleInput&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123;</span></span></span><br><span class="hljs-string"><span class="hljs-tag"><span class="language-xml">        borderColor: borderColor,</span></span></span><br><span class="hljs-string"><span class="hljs-tag"><span class="language-xml">        borderRadius: borderRadius</span></span></span><br><span class="hljs-string"><span class="hljs-tag"><span class="language-xml">      &#125;&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    &gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;RocInput&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">props</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">value</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">maxlength</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">borderColor</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">default</span>: <span class="hljs-string">&#x27;#ddd&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">borderRadius</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">default</span>: <span class="hljs-string">&#x27;20px&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">methods</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">handleInput</span>(<span class="hljs-params">e</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">&quot;input&quot;</span>, e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="language-css"><span class="language-xml"><span class="hljs-selector-class">.roc-input</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-selector-tag">input</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-attribute">outline</span>: none;</span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">10px</span>;</span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-attribute">margin</span>: <span class="hljs-number">4px</span> <span class="hljs-number">0</span>;</span></span><br><span class="language-css"><span class="language-xml">  &#125;</span></span><br><span class="language-css"><span class="language-xml">&#125;</span></span><br><span class="language-css"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br><br></code></pre></td></tr></table></figure><h2 id="库项目中调试效果"><a href="#库项目中调试效果" class="headerlink" title="库项目中调试效果"></a>库项目中调试效果</h2><p>引入packages&#x2F;index.js，在examples&#x2F;main.js中引入并注册，然后使用（与平时在项目中使用一致），启动项目后查看效果（必须修改上面提到的脚手架配置）<code>npm run serve</code></p><p><img src="/../../assets/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/5.png"></p><p><img src="/../../assets/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/6.png"></p><p><img src="/../../assets/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/7.png"></p><h1 id="上传npm"><a href="#上传npm" class="headerlink" title="上传npm"></a>上传npm</h1><h2 id="上传前配置"><a href="#上传前配置" class="headerlink" title="上传前配置"></a>上传前配置</h2><h3 id="设置package-json"><a href="#设置package-json" class="headerlink" title="设置package.json"></a>设置package.json</h3><p>运行<code>npm run lib</code>后 会收件生成ui库，在lib目录，设置<code>package.json</code>中设置描述、关键字、及入口文件：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;roc-ui&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;main&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;lib/rocyuan-ui.umd.min.js&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;keyword&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;rocyuan roc-ui vue&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/8.png"></p><h3 id="设置上传npm忽略的文件"><a href="#设置上传npm忽略的文件" class="headerlink" title="设置上传npm忽略的文件"></a>设置上传npm忽略的文件</h3><p>项目根目录下创建<code>.npmignore</code></p><p><img src="/../../assets/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/9.png"></p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><br># 忽略目录<br>examples/<br>packages/<br><span class="hljs-keyword">public</span>/<br>node_modules/<br> <br># 忽略指定文件<br>vue.config.js<br>babel.config.js<br>*.map<br><br></code></pre></td></tr></table></figure><h2 id="npm设置"><a href="#npm设置" class="headerlink" title="npm设置"></a>npm设置</h2><p>上传前需要在命令行登陆npm（注意确保你的npm当前源是你想上传的源）查看当前源：<code>npm get registry</code></p><p><img src="/../../assets/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/10.png"></p><p>我是要上传私有仓库，官方仓库源应该为：<code>https://registry.npmjs.org/</code><br>注意：如果需要登陆、提交的源本身就是当前npm设置的源，不需要指定源 <code>--registry http://xxxxxxxxxx</code><br>确定源后使用<code>npm login</code>登陆登陆成功后，可使用<code>npm whoami</code>查看当前登陆的账号</p><p><img src="/../../assets/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/11.png"></p><p>登陆成功后使用<code>npm publish</code>发布到npm，发布完成后如下：</p><p><img src="/../../assets/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/12.png"></p><h1 id="使用我们上传的ui库"><a href="#使用我们上传的ui库" class="headerlink" title="使用我们上传的ui库"></a>使用我们上传的ui库</h1><p>创建vue项目不做演示，已创建好</p><p><img src="/../../assets/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/13.png"></p><p>安装使用</p><p><img src="/../../assets/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/14.png"></p><p><img src="/../../assets/%E3%80%90vue%E3%80%91%E5%88%9B%E5%BB%BAUI%E5%BA%93%E5%B9%B6%E4%B8%8A%E4%BC%A0npm%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/15.png"></p>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】nexus搭建私服npm仓库</title>
    <link href="/node/%E3%80%90node%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/"/>
    <url>/node/%E3%80%90node%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<h1 id="下载nexus"><a href="#下载nexus" class="headerlink" title="下载nexus"></a>下载nexus</h1><p>官网下载：<a href="https://help.sonatype.com/repomanager3/product-information/download/download-archives---repository-manager-3">https://help.sonatype.com/repomanager3/product-information/download/download-archives---repository-manager-3</a></p><p>百度网盘下载：<a href="https://pan.baidu.com/s/1SgfjT0MhcX9ceIT0sCTmGQ?pwd=66sj">https://pan.baidu.com/s/1SgfjT0MhcX9ceIT0sCTmGQ?pwd=66sj</a> 提取码：66sj</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>下载完后进行解压 <code>tar -zxvf nexus-3.21.2-03-unix.tar.gz</code><br>进入解压后目录 nexus-3.21.2-03&#x2F;bin 运行<code>./nexus</code>，会提示nexus的命令<code>Usage: ./nexus &#123;start|stop|run|run-redirect|status|restart|force-reload&#125;</code><br>启动运行<code>./nexus start</code><br>查看状态<code>./nexus status</code></p><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/1.png"></p><p><code>./nexus status</code>是看不到打印日志的；使用<code>./nexus run</code>可以看到打印日志。</p><h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><p>配置文件是<code>nexus-3.21.2-03/etc/nexus-default.properties</code> 可以看到默认配置端口是8081</p><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/2.png"></p><h1 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h1><p>访问<code>ip:8081</code>即可访问，打不开的请检查端口是否开放，服务器配置安全组。</p><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/3.png"></p><h1 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h1><p>登录管理员，用户名为：admin密码存放在<code>sonatype-work/nexus3/admin.password</code>；登录后根据提示设置新密码。</p><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/4.png"></p><h1 id="创建npm仓库"><a href="#创建npm仓库" class="headerlink" title="创建npm仓库"></a>创建npm仓库</h1><p>创建顺序：</p><ol><li>npm(proxy) 代理仓库 可以设置官方源或者镜像源</li><li>npm(hosted) 本地仓库</li><li>npm(group) 组仓库</li></ol><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/5.png"></p><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/6.png"></p><h1 id="创建npm代理仓库"><a href="#创建npm代理仓库" class="headerlink" title="创建npm代理仓库"></a>创建npm代理仓库</h1><p>填写仓库唯一标识（名称）和源地址，其他默认，点击创建仓库(Create repository)</p><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/7.png"></p><h1 id="创建npm本地仓库"><a href="#创建npm本地仓库" class="headerlink" title="创建npm本地仓库"></a>创建npm本地仓库</h1><p>填写仓库唯一标识（名称）和设置允许重新部署，其他默认，点击创建仓库(Create repository)</p><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/8.png"></p><h1 id="创建npm组仓库"><a href="#创建npm组仓库" class="headerlink" title="创建npm组仓库"></a>创建npm组仓库</h1><p>填写仓库唯一标识（名称）和设置之前创建的本地仓库和代理仓库（注意优先级，优先本地仓库，其次代理仓库），其他默认，点击创建仓库(Create repository)</p><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/9.png"></p><h1 id="创建完成"><a href="#创建完成" class="headerlink" title="创建完成"></a>创建完成</h1><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/10.png"></p><h1 id="设置npm使用创建的npm-group源"><a href="#设置npm使用创建的npm-group源" class="headerlink" title="设置npm使用创建的npm-group源"></a>设置npm使用创建的npm-group源</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 设置源</span><br>npm config <span class="hljs-built_in">set</span> registry=http://192.168.10.15:8081/repository/npm-group/<br><span class="hljs-comment">#查看源</span><br>npm config get registry<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/11.png"></p><h1 id="npm安装"><a href="#npm安装" class="headerlink" title="npm安装"></a>npm安装</h1><p>以安装vue为例，安装完成后会被拉取到自己服务器上，下次安装就会优先使用本地仓库。</p><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/12.png"></p><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/13.png"></p><h1 id="发布npm私有包"><a href="#发布npm私有包" class="headerlink" title="发布npm私有包"></a>发布npm私有包</h1><h2 id="注册用户"><a href="#注册用户" class="headerlink" title="注册用户"></a>注册用户</h2><p>发布前需要在命令行登录（建议新建用户登录），可以创建角色（我这块使用admin角色）</p><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/14.png"></p><h2 id="命令行登录"><a href="#命令行登录" class="headerlink" title="命令行登录"></a>命令行登录</h2><p>注意：登录的时候需要指定本地仓库源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm login --registry=http://192.168.10.15:8081/repository/npm-hosted/<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/15.png"></p><h2 id="发布包"><a href="#发布包" class="headerlink" title="发布包"></a>发布包</h2><p>发布前需要添加<code>npm Bearer Token Realm</code></p><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/16.png"></p><p>创建项目<code>npm init -y</code>随便写个测试包，我起的名字为：<code>npmtest</code></p><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/17.png"></p><p>发布</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm publish --registry=http://192.168.10.15:8081/repository/npm-hosted/<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/18.png"></p><h1 id="测试引入刚才发布的私有包"><a href="#测试引入刚才发布的私有包" class="headerlink" title="测试引入刚才发布的私有包"></a>测试引入刚才发布的私有包</h1><p>创建一个项目（rocyuan666）<code>npm install npmtest</code>引入npmtest；打印出了npmtest包中的打印</p><p><img src="/../../assets/%E3%80%90npm%E3%80%91nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8Dnpm%E4%BB%93%E5%BA%93/19.png"></p>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【ts】typescript笔记</title>
    <link href="/ts/%E3%80%90ts%E3%80%91typescript%E7%AC%94%E8%AE%B0/"/>
    <url>/ts/%E3%80%90ts%E3%80%91typescript%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="类型基本用法："><a href="#类型基本用法：" class="headerlink" title="类型基本用法："></a>类型基本用法：</h2><h3 id="字符串-string"><a href="#字符串-string" class="headerlink" title="字符串 string"></a>字符串 string</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span> = <span class="hljs-number">100</span>;<br></code></pre></td></tr></table></figure><h3 id="数字-number"><a href="#数字-number" class="headerlink" title="数字 number"></a>数字 number</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;<br></code></pre></td></tr></table></figure><h3 id="数组-xxxtype"><a href="#数组-xxxtype" class="headerlink" title="数组 xxxtype[]"></a>数组 xxxtype[]</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">&quot;roc1&quot;</span>, <span class="hljs-string">&quot;roc2&quot;</span>];<br></code></pre></td></tr></table></figure><h3 id="null"><a href="#null" class="headerlink" title="null"></a>null</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;<br></code></pre></td></tr></table></figure><h3 id="undefined"><a href="#undefined" class="headerlink" title="undefined"></a>undefined</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;<br></code></pre></td></tr></table></figure><h3 id="任意-any"><a href="#任意-any" class="headerlink" title="任意 any"></a>任意 any</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 任意类型，不做类型判断，等同于使用js原生，可以随意使用</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-built_in">any</span> = <span class="hljs-string">&quot;roc&quot;</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">b</span>: <span class="hljs-built_in">any</span> = <span class="hljs-number">123</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">c</span>: <span class="hljs-built_in">string</span> = b; <span class="hljs-comment">// success any类型可以随意使用</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c)<br></code></pre></td></tr></table></figure><h3 id="未知-unknown"><a href="#未知-unknown" class="headerlink" title="未知 unknown"></a>未知 unknown</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 不知道类型，与any不同，不可随意使用</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-built_in">unknown</span> = <span class="hljs-string">&quot;roc&quot;</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">b</span>: <span class="hljs-built_in">unknown</span> = <span class="hljs-number">123</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">c</span>: <span class="hljs-built_in">string</span> = b; <span class="hljs-comment">// error unknown类型不能赋值给string类型</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c)<br></code></pre></td></tr></table></figure><h3 id="空-void"><a href="#空-void" class="headerlink" title="空 void"></a>空 void</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 空值，也可返回 null undefined</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> &#123;<br><span class="hljs-comment">// return null</span><br>  <span class="hljs-comment">// return undefined</span><br>  <span class="hljs-comment">// 也可不写</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="从未-never"><a href="#从未-never" class="headerlink" title="从未 never"></a>从未 never</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 从未（永不可能的意思）</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">never</span> &#123;<br><span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;&#125;<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">arg: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>) &#123;<br><span class="hljs-keyword">switch</span> (<span class="hljs-keyword">typeof</span> arg) &#123;<br><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;string&quot;</span>:<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;string类型处理&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;number&quot;</span>:<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;number类型处理&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-attr">default</span>:<br><span class="hljs-keyword">const</span> <span class="hljs-attr">check</span>: <span class="hljs-built_in">never</span> = arg;<br>&#125;<br>&#125;<br><span class="hljs-title function_">fn</span>(<span class="hljs-string">&quot;roc&quot;</span>)<br><span class="hljs-title function_">fn</span>(<span class="hljs-literal">true</span>) <span class="hljs-comment">// error, 比如封装fn方法，指定类型做处理，其他类型报错（利用never类型永远不可能被其他类型赋值，警告调用者）</span><br></code></pre></td></tr></table></figure><h3 id="元组-tuple-xxxtype"><a href="#元组-tuple-xxxtype" class="headerlink" title="元组 tuple [xxxtype]"></a>元组 tuple [xxxtype]</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 多种元素的组合（指定位数及类型的数组），比如react hook中的useState的返回值</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>] = [<span class="hljs-string">&quot;roc&quot;</span>, <span class="hljs-number">18</span>, <span class="hljs-number">200</span>]<br></code></pre></td></tr></table></figure><h3 id="函数参数-返回值类型"><a href="#函数参数-返回值类型" class="headerlink" title="函数参数&amp;返回值类型"></a>函数参数&amp;返回值类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 1.普通函数</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> &#123;<br><span class="hljs-keyword">return</span> a + b;<br>&#125;<br><span class="hljs-comment">// 2.匿名函数</span><br><span class="hljs-comment">// 如下：匿名函数的&quot;item&quot;不需要指定类型（当然写上&quot;: string&quot;也可以），因为arr里每一项的类型都是确定的，ts内部会自动推导出&quot;item&quot;类型</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">arr</span>: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">&quot;roc1&quot;</span>, <span class="hljs-string">&quot;roc2&quot;</span>, <span class="hljs-string">&quot;roc3&quot;</span>];<br>arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item);<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型 {}"></a>对象类型 {}</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">obj</span>: &#123;<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">string</span>&#125; = &#123;<span class="hljs-attr">a</span>: <span class="hljs-number">123</span>, <span class="hljs-attr">b</span>: <span class="hljs-string">&quot;roc&quot;</span>&#125;<br></code></pre></td></tr></table></figure><h3 id="可选类型"><a href="#可选类型" class="headerlink" title="可选类型 ?"></a>可选类型 ?</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 用 &quot;?&quot; 可选类型，可传可不传；不传的话则是undefined</span><br><span class="hljs-comment">// 实际上c属性就是：number与undefined的联合类型</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">obj</span>: &#123;<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">string</span>, c?: <span class="hljs-built_in">number</span>&#125; = &#123;<span class="hljs-attr">a</span>: <span class="hljs-number">123</span>, <span class="hljs-attr">b</span>: <span class="hljs-string">&quot;roc&quot;</span>, <span class="hljs-attr">c</span>: <span class="hljs-number">200</span>&#125;<br></code></pre></td></tr></table></figure><h3 id="联合类型"><a href="#联合类型" class="headerlink" title="联合类型 |"></a>联合类型 |</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript">用 <span class="hljs-string">&quot;|&quot;</span> 可以有多个类型；但是内部一般需要进行类型判断处理<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span></span>) &#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(id);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="类型别名-type"><a href="#类型别名-type" class="headerlink" title="类型别名 type"></a>类型别名 type</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript">用<span class="hljs-string">&quot;type&quot;</span>关键字定义类型<br><span class="hljs-keyword">type</span> myType = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">my</span>: myType = <span class="hljs-string">&quot;roc&quot;</span>;<br><br><span class="hljs-keyword">type</span> objType = &#123;<br><span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span>,<br>  <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span><br>&#125;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">obj</span>: objType = &#123;<br><span class="hljs-attr">a</span>: <span class="hljs-string">&quot;roc&quot;</span>,<br>  <span class="hljs-attr">b</span>: <span class="hljs-number">18</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="类型断言-as"><a href="#类型断言-as" class="headerlink" title="类型断言 as"></a>类型断言 as</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 我们明确知道改数据的类型时，可以用 as 指定</span><br><br><span class="hljs-comment">// 此时el的类型是 HTMLElement，并没有 src属性</span><br><span class="hljs-keyword">const</span> el <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;roc&quot;</span>)<br>el.<span class="hljs-property">src</span> = <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment">// error</span><br><br><span class="hljs-comment">// 但是我们如果是一个img元素，id为“roc”,那它就应该有src属性</span><br><span class="hljs-keyword">const</span> el <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;roc&quot;</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLImageElement</span><br>el.<span class="hljs-property">src</span> = <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment">// success</span><br><br>不推荐使用<br><span class="hljs-keyword">let</span> a = <span class="hljs-string">&quot;roc&quot;</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span> = a <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">c</span>: <span class="hljs-built_in">number</span> = a <span class="hljs-keyword">as</span> <span class="hljs-built_in">unknown</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;<br></code></pre></td></tr></table></figure><h3 id="非空类型断言"><a href="#非空类型断言" class="headerlink" title="非空类型断言 !"></a>非空类型断言 !</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 表示可以确定某个标识符是有值的，跳过ts在编译阶段的检查</span><br><br><span class="hljs-comment">// 下面代码编译时会报错，因为msg是可选的 也可能是undefined类型</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">printMsg</span>(<span class="hljs-params">msg?: <span class="hljs-built_in">string</span></span>) &#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg.<span class="hljs-property">length</span>);<br>&#125;<br><br><span class="hljs-comment">// 使用非空断言，编译通过</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">printMsg</span>(<span class="hljs-params">msg?: <span class="hljs-built_in">string</span></span>) &#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg!.<span class="hljs-property">length</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="可选链"><a href="#可选链" class="headerlink" title="可选链 ?."></a>可选链 ?.</h3><p>它不是ts的语法特性，是ES11（ES2020）的语法特性</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 作用是当属性不存在的时候会短路，会返回undefined</span><br><span class="hljs-keyword">type</span> infoType = &#123;<br><span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>,<br>age?: <span class="hljs-built_in">number</span>,<br>friend?: &#123;<br><span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>,<br>age?: <span class="hljs-built_in">number</span><br>&#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">info</span>: infoType = &#123;<br><span class="hljs-attr">name</span>: <span class="hljs-string">&quot;roc&quot;</span>,<br><span class="hljs-attr">friend</span>: &#123;<br><span class="hljs-attr">name</span>: <span class="hljs-string">&quot;abc&quot;</span><br>&#125;<br>&#125;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(info.<span class="hljs-property">name</span>)<br><span class="hljs-comment">// console.log(info.friend.name) // error 因为info.friend很有可能是不存在的，当然也可以使用ts的非空断言!，但是它会跳过检查，不推荐</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(info.<span class="hljs-property">friend</span>?.<span class="hljs-property">name</span>) <span class="hljs-comment">// success</span><br></code></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title="!!"></a>!!</h3><p>本就是javascript语法</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// !! 把其他类型转换为boolean 实际上就是 两次取反</span><br><span class="hljs-keyword">let</span> a = <span class="hljs-string">&quot;hello&quot;</span>;<br><span class="hljs-keyword">let</span> b = !!a <span class="hljs-comment">// 相当于 先!a隐式类型转换为false，再次进行取反!false -&gt; true</span><br><br></code></pre></td></tr></table></figure><h3 id="-1"><a href="#-1" class="headerlink" title="??"></a>??</h3><p>空值合并操作符是一个逻辑操作符；当左侧是null或者undefined时，返回右侧的操作数，否则返回左侧的操作数；与逻辑或 || 类似</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> = <span class="hljs-string">&quot;roc&quot;</span>;<br><span class="hljs-keyword">let</span> b = a ?? <span class="hljs-string">&quot;rocyuan&quot;</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b) <span class="hljs-comment">// roc</span><br><br><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">let</span> b = a ?? <span class="hljs-string">&quot;rocyuan&quot;</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b) <span class="hljs-comment">// rocyuan</span><br></code></pre></td></tr></table></figure><h3 id="字面量类型"><a href="#字面量类型" class="headerlink" title="字面量类型"></a>字面量类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 赋值必须与字面量的类型一致</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-string">&quot;roc&quot;</span> = <span class="hljs-string">&quot;roc&quot;</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">b</span>: <span class="hljs-number">123</span> = <span class="hljs-number">123</span>;<br><span class="hljs-comment">// 一般结合联合类型使用</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">c</span>: <span class="hljs-string">&quot;right&quot;</span> | <span class="hljs-string">&quot;left&quot;</span> | <span class="hljs-string">&quot;top&quot;</span> | <span class="hljs-string">&quot;bottom&quot;</span> = <span class="hljs-string">&quot;top&quot;</span><br></code></pre></td></tr></table></figure><h2 id="函数详解"><a href="#函数详解" class="headerlink" title="函数详解"></a>函数详解</h2><h3 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 1. function定义函数的类型</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> &#123;<br><span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-comment">// 2. 函数作为 参数 的类型</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn1</span>(<span class="hljs-params">fn: () =&gt; <span class="hljs-built_in">void</span></span>) &#123;<br>  <span class="hljs-title function_">fn</span>()<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn2</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;我是fn2&quot;</span>)<br>&#125;<br><span class="hljs-title function_">fn1</span>(fn2)<br><br><span class="hljs-comment">// 3. 函数作为 变量 的类型</span><br><span class="hljs-comment">// 注意：定义类型的函数参数名字可以不同，但是不能省略</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">TypeFn</span> = <span class="hljs-function">(<span class="hljs-params">a1: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">string</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">fn</span>: <span class="hljs-title class_">TypeFn</span> = <span class="hljs-function">(<span class="hljs-params">a: <span class="hljs-built_in">string</span></span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> a;<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">fn</span>(<span class="hljs-string">&quot;rocyuan&quot;</span>))<br><br></code></pre></td></tr></table></figure><h3 id="参数可选"><a href="#参数可选" class="headerlink" title="参数可选"></a>参数可选</h3><p>结合可选类型</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 注意：可选类型必须写到必选类型后面</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">a: <span class="hljs-built_in">string</span>, b?: <span class="hljs-built_in">string</span></span>)&#123;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="参数的默认值"><a href="#参数的默认值" class="headerlink" title="参数的默认值"></a>参数的默认值</h3><p>属于ES6的知识点</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span> = <span class="hljs-number">666</span></span>)&#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a, b)<br>&#125;<br><span class="hljs-title function_">fn</span>(<span class="hljs-number">20</span>)<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span> = <span class="hljs-number">666</span>, b: <span class="hljs-built_in">number</span></span>)&#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a, b)<br>&#125;<br><span class="hljs-title function_">fn</span>(<span class="hljs-number">666</span>, <span class="hljs-number">20</span>) <span class="hljs-comment">// 要么传默认值</span><br><span class="hljs-title function_">fn</span>(<span class="hljs-literal">undefined</span>, <span class="hljs-number">20</span>) <span class="hljs-comment">// 要么传undefined</span><br></code></pre></td></tr></table></figure><h3 id="函数的剩余参数"><a href="#函数的剩余参数" class="headerlink" title="函数的剩余参数"></a>函数的剩余参数</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">...nums: <span class="hljs-built_in">number</span>[]</span>): <span class="hljs-built_in">number</span> &#123;<br>  <span class="hljs-keyword">let</span> <span class="hljs-attr">sum</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;<br>nums.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br>  sum += item<br>  &#125;)<br>  <span class="hljs-keyword">return</span> sum<br>&#125;<br><span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>);<br></code></pre></td></tr></table></figure><h3 id="函数的重载"><a href="#函数的重载" class="headerlink" title="函数的重载"></a>函数的重载</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 重载方法类型</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">string</span>, b: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span>;<br><br><span class="hljs-comment">// 重载方法的实现（重载方法的实现不能直接调用）</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">any</span>, b: <span class="hljs-built_in">any</span></span>): <span class="hljs-built_in">any</span> &#123;<br><span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-keyword">let</span> res1 = <span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br><span class="hljs-keyword">let</span> res2 = <span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;roc&quot;</span>, <span class="hljs-string">&quot;yuan&quot;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res1, res2);<br></code></pre></td></tr></table></figure><h2 id="类-class"><a href="#类-class" class="headerlink" title="类 class"></a>类 class</h2><h3 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h3><h4 id="public"><a href="#public" class="headerlink" title="public"></a>public</h4><p>在所有类都可访问</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Roc</span>&#123;<br><span class="hljs-keyword">public</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">&quot;rocyuan&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="private"><a href="#private" class="headerlink" title="private"></a>private</h4><p>只在当前类中能访问</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Roc</span>&#123;<br><span class="hljs-keyword">private</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">&quot;rocyuan&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="protected"><a href="#protected" class="headerlink" title="protected"></a>protected</h4><p>在类中和子类中可访问</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Roc</span>&#123;<br><span class="hljs-keyword">protected</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">&quot;rocyuan&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a>readonly</h4><p>只读的  可以在构造器中赋值，赋值后不可修改</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Roc</span>&#123;<br><span class="hljs-keyword">readonly</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">&quot;rocyuan&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="访问器-get-set"><a href="#访问器-get-set" class="headerlink" title="访问器 get set"></a>访问器 get set</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Roc</span>&#123;<br><span class="hljs-keyword">private</span> <span class="hljs-attr">_name</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">_name</span> = name;<br>  &#125;<br>  <br>  <span class="hljs-comment">// setter</span><br>  <span class="hljs-keyword">set</span> <span class="hljs-title function_">name</span>(<span class="hljs-params">newName</span>) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">_name</span> = newName;<br>  &#125;<br>  <span class="hljs-comment">// getter</span><br>  <span class="hljs-keyword">get</span> <span class="hljs-title function_">name</span>() &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_name</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">roc</span>: <span class="hljs-title class_">Roc</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Roc</span>(<span class="hljs-string">&quot;roc&quot;</span>);<br><br>roc.<span class="hljs-property">name</span> = <span class="hljs-string">&quot;rocyuan&quot;</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(roc.<span class="hljs-property">name</span>);<br></code></pre></td></tr></table></figure><h3 id="静态成员-static"><a href="#静态成员-static" class="headerlink" title="静态成员 static"></a>静态成员 static</h3><p>可以通过类本身访问</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Roc</span>&#123;<br><span class="hljs-keyword">static</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">&quot;rocyaun&quot;</span><br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Roc</span>.<span class="hljs-property">name</span>)<br></code></pre></td></tr></table></figure><h3 id="抽象类-abstract"><a href="#抽象类-abstract" class="headerlink" title="抽象类 abstract"></a>抽象类 abstract</h3><p>抽象方法必须存在于抽象类里面，抽象类不能被实例化，抽象方法必须被子类实现。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 实现不管传入什么图形都能计算出面积</span><br><span class="hljs-comment">// !!! 这里的any类型很不严谨 !!! 什么类型的都能传</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">function makeArea(shape: any) &#123;</span><br><span class="hljs-comment">return shape.getArea()</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-comment">// 将抽象类作为shape参数的 类型，可以避免使用者乱传其他类型参数，也可以避免传入new Shape()</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">makeArea</span>(<span class="hljs-params">shape: Shape</span>) &#123;<br><span class="hljs-keyword">return</span> shape.<span class="hljs-title function_">getArea</span>()<br>&#125;<br><br><span class="hljs-comment">// 定义抽象类 抽象方法</span><br><span class="hljs-comment">// 为了避免给makeArea传入new Shape(), 所以将Shape类定义成抽象类，抽象类不可以被实例化</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> &#123;<br>  <span class="hljs-comment">// 抽象方法不能有实现体，但是必须被子类实现</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-title function_">getArea</span>();<br>&#125; <br><br><span class="hljs-comment">// 矩形</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Shape</span> &#123;<br><span class="hljs-keyword">private</span> <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">width: <span class="hljs-built_in">number</span>, height: <span class="hljs-built_in">number</span></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> = width;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> = height;<br>  &#125;<br>  <br>  <span class="hljs-title function_">getArea</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// 圆形</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Shape</span> &#123;<br><span class="hljs-keyword">private</span> <span class="hljs-attr">r</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">r: <span class="hljs-built_in">number</span></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">r</span> = r;<br>  &#125;<br>  <br>  <span class="hljs-title function_">getArea</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">r</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">r</span> * <span class="hljs-number">3.14</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">makeArea</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Rectangle</span>(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)))<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">makeArea</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>(<span class="hljs-number">3</span>)))<br></code></pre></td></tr></table></figure><h3 id="继承-extends"><a href="#继承-extends" class="headerlink" title="继承 extends"></a>继承 extends</h3><p>继承只能单继承（继承一个类）</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Roc</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">RocYuan</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="接口-interface"><a href="#接口-interface" class="headerlink" title="接口 interface"></a>接口 interface</h2><h3 id="接口声明"><a href="#接口声明" class="headerlink" title="接口声明"></a>接口声明</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IInfo</span> &#123;<br><span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span><br>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-keyword">readonly</span> height?: <span class="hljs-built_in">number</span><br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-attr">info</span>: <span class="hljs-title class_">IInfo</span> = &#123;<br><span class="hljs-attr">name</span>: <span class="hljs-string">&quot;rocyuan&quot;</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-number">18</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="索引类型"><a href="#索引类型" class="headerlink" title="索引类型"></a>索引类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IInfo</span> &#123;<br>[<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>]: <span class="hljs-built_in">string</span><br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-attr">info</span>: <span class="hljs-title class_">IInfo</span> = &#123;<br><span class="hljs-number">0</span>: <span class="hljs-string">&quot;字符串&quot;</span>,<br>  <span class="hljs-number">1</span>: <span class="hljs-string">&quot;字符串&quot;</span>,<br>  <span class="hljs-number">2</span>: <span class="hljs-string">&quot;字符串&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="函数类型-1"><a href="#函数类型-1" class="headerlink" title="函数类型"></a>函数类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IFn</span> &#123;<br>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span><br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">fn</span>: <span class="hljs-title class_">IFn</span> = <span class="hljs-function">(<span class="hljs-params">a: <span class="hljs-built_in">number</span></span>) =&gt;</span> &#123;<br><span class="hljs-keyword">return</span> a;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="接口继承"><a href="#接口继承" class="headerlink" title="接口继承"></a>接口继承</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IFn1</span> &#123;<br><span class="hljs-attr">getName</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">string</span><br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IFn2</span> &#123;<br><span class="hljs-attr">getAge</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">number</span><br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IFn3</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IFn1</span>, <span class="hljs-title class_">IFn2</span> &#123;<br><span class="hljs-attr">getHeight</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">number</span><br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">roc</span>: <span class="hljs-title class_">IFn3</span> = &#123;<br><span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;rocyuan&quot;</span><br>  &#125;,<br>  <span class="hljs-title function_">getAge</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">18</span><br>  &#125;,<br>  <span class="hljs-title function_">getHeight</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">188</span><br>  &#125;<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(roc.<span class="hljs-title function_">getName</span>())<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(roc.<span class="hljs-title function_">getAge</span>())<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(roc.<span class="hljs-title function_">getHeight</span>())<br></code></pre></td></tr></table></figure><h3 id="接口实现"><a href="#接口实现" class="headerlink" title="接口实现"></a>接口实现</h3><p>一个类是可以实现多个接口，用”,”分割；继承只能继承一个（单继承）</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IStudent1</span> &#123;<br><span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span><br>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">running</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span><br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IStudent2</span> &#123;<br>  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span><br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IStudent1</span>, <span class="hljs-title class_">IStudent2</span> &#123;<br>name = <span class="hljs-string">&quot;rocyuan&quot;</span><br>  age = <span class="hljs-number">18</span><br>  height = <span class="hljs-number">188</span><br>  <span class="hljs-title function_">running</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;跑&quot;</span>)<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> roc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br>roc.<span class="hljs-title function_">running</span>()<br></code></pre></td></tr></table></figure><h3 id="交叉类型（合并类型）"><a href="#交叉类型（合并类型）" class="headerlink" title="交叉类型（合并类型）"></a>交叉类型（合并类型）</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IFn1</span> &#123;<br><span class="hljs-attr">getName</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">string</span><br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IFn2</span> &#123;<br><span class="hljs-attr">getAge</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">number</span><br>&#125;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">TFn3</span> = <span class="hljs-title class_">IFn1</span> &amp; <span class="hljs-title class_">IFn2</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">fn</span>: <span class="hljs-title class_">TFn3</span> = &#123;<br><span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;rocyuan&quot;</span><br>  &#125;,<br>  <span class="hljs-title function_">getAge</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">18</span><br>  &#125;<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(fn.<span class="hljs-title function_">getName</span>())<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(fn.<span class="hljs-title function_">getAge</span>())<br></code></pre></td></tr></table></figure><h3 id="interface与type的区别"><a href="#interface与type的区别" class="headerlink" title="interface与type的区别"></a>interface与type的区别</h3><p>interface 命名可以相同，如果名字一旦相同，则会合并定义的接口<br>type 是定义的别名，别名是不可以相同的</p><h2 id="枚举enum"><a href="#枚举enum" class="headerlink" title="枚举enum"></a>枚举enum</h2><p>枚举类型默认的值是数字，比如我们经常用数字记录某些数据，判断数字处理逻辑，比如女，男，保密(0， 1， 2)…，使用枚举，可以大大增强代码可读性。<br>可简单理解为定义一常量。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 默认第一位是0后面的1,2,3...</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">ESex</span> &#123;<br><span class="hljs-variable constant_">GRIL</span>,<br>  <span class="hljs-variable constant_">MALE</span>,<br>  <span class="hljs-variable constant_">SEC</span><br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">ESex</span>.<span class="hljs-property">GRIL</span>) <span class="hljs-comment">// 0</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">ESex</span>.<span class="hljs-property">MALE</span>) <span class="hljs-comment">// 1</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">ESex</span>.<span class="hljs-property">SEC</span>) <span class="hljs-comment">// 2</span><br><br><span class="hljs-comment">/* ======================================= */</span><br><br><span class="hljs-comment">// 可以更改，比如第一位改为10，后面的是11,12,13...</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">ESex</span> &#123;<br><span class="hljs-variable constant_">GRIL</span> = <span class="hljs-number">10</span>,<br>  <span class="hljs-variable constant_">MALE</span>,<br>  <span class="hljs-variable constant_">SEC</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><h3 id="认识泛型"><a href="#认识泛型" class="headerlink" title="认识泛型"></a>认识泛型</h3><p>泛型就是将类型参数化；调用者将类型以参数的形式赋值过来</p><h3 id="泛型类型参数"><a href="#泛型类型参数" class="headerlink" title="泛型类型参数"></a>泛型类型参数</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> roc&lt;<span class="hljs-title class_">Type</span>&gt;(<span class="hljs-attr">num</span>: <span class="hljs-title class_">Type</span>): <span class="hljs-title class_">Type</span> &#123;<br><span class="hljs-keyword">return</span> num;<br>&#125;<br><br><span class="hljs-comment">// 1. 明确的传入了类型</span><br>roc&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">666</span>);<br>roc&lt;&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&quot;rocyuan&quot;</span>&#125;&gt;(<span class="hljs-string">&quot;rocyuan&quot;</span>);<br><br><span class="hljs-comment">// 2. 类型推导</span><br><span class="hljs-title function_">roc</span>(<span class="hljs-number">50</span>)<br><span class="hljs-title function_">roc</span>(<span class="hljs-string">&quot;roc&quot;</span>)<br></code></pre></td></tr></table></figure><p>可接受多个参数 </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> foo&lt;T, E&gt;(<span class="hljs-attr">a1</span>: T, <span class="hljs-attr">a2</span>: E) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a1, a2);<br>&#125;<br>foo&lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>&gt;(<span class="hljs-number">666</span>, <span class="hljs-string">&quot;rocyuan&quot;</span>)<br><span class="hljs-comment">// ts会进行类型推导</span><br><span class="hljs-comment">// function foo&lt;number, string&gt;(a1: number, a2: string): void</span><br><span class="hljs-title function_">foo</span>(<span class="hljs-number">666</span>, <span class="hljs-string">&quot;rocyuan&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="泛型接口"><a href="#泛型接口" class="headerlink" title="泛型接口"></a>泛型接口</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IPerson</span>&lt;T1 = <span class="hljs-built_in">string</span>, T2 = <span class="hljs-built_in">number</span>&gt; &#123;<br><span class="hljs-attr">name</span>: <span class="hljs-variable constant_">T1</span><br>  <span class="hljs-attr">age</span>: <span class="hljs-variable constant_">T2</span><br>&#125;<br><br><span class="hljs-comment">// 没有类型推导</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">roc</span>: <span class="hljs-title class_">IPerson</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = &#123;<br><span class="hljs-attr">name</span>: <span class="hljs-string">&quot;rocyuan&quot;</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-number">18</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="泛型类"><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span>&lt;T&gt; &#123;<br><span class="hljs-attr">x</span>: T<br>  <span class="hljs-attr">y</span>: T<br>  <span class="hljs-attr">z</span>: T<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">x: T, y: T, z: T</span>) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> = x;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> = y;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> = z;<br>  &#125;<br>&#125;<br><span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Point</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">&quot;12.12&quot;</span>, <span class="hljs-string">&quot;13.13&quot;</span>, <span class="hljs-string">&quot;14.14&quot;</span>)<br><span class="hljs-keyword">const</span> <span class="hljs-attr">p2</span>: <span class="hljs-title class_">Point</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Point</span>(<span class="hljs-string">&quot;12.12&quot;</span>, <span class="hljs-string">&quot;13.13&quot;</span>, <span class="hljs-string">&quot;14.14&quot;</span>)<br><span class="hljs-comment">// 会有类型推导</span><br><span class="hljs-keyword">const</span> p3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Point</span>(<span class="hljs-string">&quot;12.12&quot;</span>, <span class="hljs-string">&quot;13.13&quot;</span>, <span class="hljs-string">&quot;14.14&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="泛型的类型约束"><a href="#泛型的类型约束" class="headerlink" title="泛型的类型约束"></a>泛型的类型约束</h3><p>对传入的泛型限制类型</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ILength</span> &#123;<br><span class="hljs-attr">length</span>: <span class="hljs-built_in">number</span><br>&#125;<br><span class="hljs-keyword">function</span> getLength&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ILength</span>&gt;(<span class="hljs-attr">arg</span>: T) &#123;<br><span class="hljs-keyword">return</span> arg.<span class="hljs-property">length</span>;<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getLength</span>(<span class="hljs-string">&quot;rocyuan&quot;</span>))<br><span class="hljs-comment">// getLength(123) // error number类型的没有length属性</span><br></code></pre></td></tr></table></figure><h2 id="命名空间-namespace"><a href="#命名空间-namespace" class="headerlink" title="命名空间 namespace"></a>命名空间 namespace</h2><p>最早期的时候叫内部模块，js没有模块化时候会使用，现在使用较少。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 同一文件中：</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">namespace</span> roc1 &#123;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">format</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;2020-02-02&quot;</span><br>  &#125;<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">namespace</span> roc2 &#123;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">format</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;22.22&quot;</span><br>  &#125;<br>&#125;<br>  <br>roc1.<span class="hljs-title function_">format</span>()<br>roc2.<span class="hljs-title function_">format</span>()<br><br><span class="hljs-comment">// 不同文件（需要导出namespace）</span><br><span class="hljs-keyword">import</span> &#123;roc1, roc2&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;xxx&quot;</span><br>roc1.<span class="hljs-title function_">format</span>()<br>roc2.<span class="hljs-title function_">format</span>()<br><br></code></pre></td></tr></table></figure><h2 id="ts对类型的管理与查找规则（-d-ts文件，-types-xxx仓库）"><a href="#ts对类型的管理与查找规则（-d-ts文件，-types-xxx仓库）" class="headerlink" title="ts对类型的管理与查找规则（.d.ts文件，@types&#x2F;xxx仓库）"></a>ts对类型的管理与查找规则（.d.ts文件，@types&#x2F;xxx仓库）</h2><p>文件后缀名为 .ts 是编写ts代码的最终会输出js代码文件。<br>文件后缀名为 .d.ts 是类型声明文件用来做类型检测的，它仅仅用来做类型检测，告知ts我们有哪些类型。<br>有的第三方库没有.d.ts声明文件引入后就会报错</p><h3 id="内置类型声明"><a href="#内置类型声明" class="headerlink" title="内置类型声明"></a>内置类型声明</h3><p>内置类型都是ts自带的</p><h3 id="外部声明文件（第三方库类型声明）"><a href="#外部声明文件（第三方库类型声明）" class="headerlink" title="外部声明文件（第三方库类型声明）"></a>外部声明文件（第三方库类型声明）</h3><ol><li>下载第三方库时候第三方库里面有 .d.ts ；正常使用即可</li><li>Ts社区维护的类型声明仓库：<a href="https://github.com/DefinitelyTyped/DefinitelyTyped">https://github.com/DefinitelyTyped/DefinitelyTyped</a>，用npm安装：@types&#x2F;xxx，比如react就有：@types&#x2F;react；查询自己所使用的第三方库在这个仓库中有没有类型声明文件:<a href="https://www.typescriptlang.org/dt/search?search=">https://www.typescriptlang.org/dt/search?search=</a>，如果这里还没有那就得自己写了。</li></ol><h3 id="自定义声明文件"><a href="#自定义声明文件" class="headerlink" title="自定义声明文件"></a>自定义声明文件</h3><p>自己编写声明文件，新建xxx.d.ts，ts会自动识别</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* =============== xxx.d.ts文件 ============== */</span><br><span class="hljs-comment">// 声明模块</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;lodash&#x27;</span> &#123;<br>  <span class="hljs-comment">// 不在这里声明join，下面文件使用_.join会报错</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">join</span>(<span class="hljs-params">arr: <span class="hljs-built_in">any</span>[]</span>): <span class="hljs-built_in">void</span><br>&#125;<br><span class="hljs-comment">// 声明 变量、函数...</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">let</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">roc</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span><br><span class="hljs-comment">// 声明文件</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;*.jpg&#x27;</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;*.png&#x27;</span><br><span class="hljs-comment">// 声明命名空间（相当于全局变量）</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">namespace</span> $&#123;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ajax</span>(<span class="hljs-params">settings: <span class="hljs-built_in">any</span></span>): <span class="hljs-built_in">any</span><br>&#125;<br><br><span class="hljs-comment">/* =============== 使用lodash的文件 ============== */</span><br><span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;lodash&quot;</span>;<br><span class="hljs-keyword">import</span> roc <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;xxx/xx.jpg&quot;</span>;<br>_.<span class="hljs-title function_">join</span>([<span class="hljs-string">&quot;aaa&quot;</span>, <span class="hljs-string">&quot;bbb&quot;</span>])<br>  <br>$.<span class="hljs-title function_">ajax</span>(&#123;&#125;)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ts</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【ts】tsconfig属性</title>
    <link href="/ts/%E3%80%90ts%E3%80%91tsconfig%E5%B1%9E%E6%80%A7/"/>
    <url>/ts/%E3%80%90ts%E3%80%91tsconfig%E5%B1%9E%E6%80%A7/</url>
    
    <content type="html"><![CDATA[<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">/* Visit https://aka.ms/tsconfig.json to read more about this file */</span><br><br>    <span class="hljs-comment">/* Basic Options 基本选项 */</span><br>    <span class="hljs-comment">// &quot;incremental&quot;: true,                         /* 启用增量编译 */</span><br>    <span class="hljs-attr">&quot;target&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;es5&quot;</span><span class="hljs-punctuation">,</span>                                <span class="hljs-comment">/* 指定 ECMAScript 目标版本：&#x27;ES3&#x27;（默认）、&#x27;ES5&#x27;、&#x27;ES2015&#x27;、&#x27;ES2016&#x27;、&#x27;ES2017&#x27;、&#x27;ES2018&#x27;、&#x27;ES2019&#x27;、&#x27;ES2020&#x27; 或 &#x27;ESNEXT&#x27;。 */</span><br>    <span class="hljs-attr">&quot;module&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;commonjs&quot;</span><span class="hljs-punctuation">,</span>                           <span class="hljs-comment">/* 指定模块代码生成：“none”、“commonjs”、“amd”、“system”、“umd”、“es2015”、“es2020”或“ESNext”。 */</span><br>    <span class="hljs-comment">// &quot;lib&quot;: [],                                   /* 指定要包含在编译中的库文件。 */</span><br>    <span class="hljs-comment">// &quot;allowJs&quot;: true,                             /* 允许编译 javascript 文件。 */</span><br>    <span class="hljs-comment">// &quot;checkJs&quot;: true,                             /* 报告 .js 文件中的错误。 */</span><br>    <span class="hljs-comment">// &quot;jsx&quot;: &quot;preserve&quot;,                           /* 指定 JSX 代码生成：&#x27;preserve&#x27;、&#x27;react-native&#x27;、&#x27;react&#x27;、&#x27;react-jsx&#x27; 或 &#x27;react-jsxdev&#x27;。 */</span><br>    <span class="hljs-comment">// &quot;declaration&quot;: true,                         /* 生成相应的“.d.ts”文件。 */</span><br>    <span class="hljs-comment">// &quot;declarationMap&quot;: true,                      /* 为每个对应的“.d.ts”文件生成一个源映射。 */</span><br>    <span class="hljs-comment">// &quot;sourceMap&quot;: true,                           /* 生成相应的“.map”文件。 */</span><br>    <span class="hljs-comment">// &quot;outFile&quot;: &quot;./&quot;,                             /* 连接输出到单个文件。 */</span><br>    <span class="hljs-comment">// &quot;outDir&quot;: &quot;./&quot;,                              /* 将输出结构重定向到目录。 */</span><br>    <span class="hljs-comment">// &quot;rootDir&quot;: &quot;./&quot;,                             /* 指定输入文件的根目录。用于通过 --outDir 控制输出目录结构。 */</span><br>    <span class="hljs-comment">// &quot;composite&quot;: true,                           /* 启用项目编译 */</span><br>    <span class="hljs-comment">// &quot;tsBuildInfoFile&quot;: &quot;./&quot;,                     /* 指定文件存放增量编译信息 */</span><br>    <span class="hljs-comment">// &quot;removeComments&quot;: true,                      /* 不要向输出发出注释。 */</span><br>    <span class="hljs-comment">// &quot;noEmit&quot;: true,                              /* 不发出输出。 */</span><br>    <span class="hljs-comment">// &quot;importHelpers&quot;: true,                       /* 从 &#x27;tslib&#x27; 导入发射助手。 */</span><br>    <span class="hljs-comment">// &quot;downlevelIteration&quot;: true,                  /* 以“ES5”或“ES3”为目标时，为“for-of”、展开和解构中的迭代提供全面支持。 */</span><br>    <span class="hljs-comment">// &quot;isolatedModules&quot;: true,                     /* 将每个文件转换为一个单独的模块（类似于 &#x27;ts.transpileModule&#x27;）。 */</span><br><br>    <span class="hljs-comment">/* Strict Type-Checking Options 严格的类型检查选项 */</span><br>    <span class="hljs-attr">&quot;strict&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>                                 <span class="hljs-comment">/* 启用所有严格的类型检查选项。 */</span><br>    <span class="hljs-comment">// &quot;noImplicitAny&quot;: true,                       /* 使用隐含的“任何”类型在表达式和声明上引发错误。 */</span><br>    <span class="hljs-comment">// &quot;strictNullChecks&quot;: true,                    /* 启用严格的空检查。 */</span><br>    <span class="hljs-comment">// &quot;strictFunctionTypes&quot;: true,                 /* 启用函数类型的严格检查。 */</span><br>    <span class="hljs-comment">// &quot;strictBindCallApply&quot;: true,                 /* 在函数上启用严格的“绑定”、“调用”和“应用”方法。 */</span><br>    <span class="hljs-comment">// &quot;strictPropertyInitialization&quot;: true,        /* 启用对类中属性初始化的严格检查。 */</span><br>    <span class="hljs-comment">// &quot;noImplicitThis&quot;: true,                      /* 使用隐含的 &#x27;any&#x27; 类型在 &#x27;this&#x27; 表达式上引发错误。 */</span><br>    <span class="hljs-comment">// &quot;alwaysStrict&quot;: true,                        /* 以严格模式解析并为每个源文件发出“使用严格”。 */</span><br><br>    <span class="hljs-comment">/* Additional Checks 额外检查 */</span><br>    <span class="hljs-comment">// &quot;noUnusedLocals&quot;: true,                      /* 报告未使用的本地人的错误。 */</span><br>    <span class="hljs-comment">// &quot;noUnusedParameters&quot;: true,                  /* 报告未使用参数的错误。 */</span><br>    <span class="hljs-comment">// &quot;noImplicitReturns&quot;: true,                   /* 不是函数中的所有代码路径都返回值时报告错误。 */</span><br>    <span class="hljs-comment">// &quot;noFallthroughCasesInSwitch&quot;: true,          /* 在 switch 语句中报告失败情况的错误。 */</span><br>    <span class="hljs-comment">// &quot;noUncheckedIndexedAccess&quot;: true,            /* 在索引签名结果中包含 &#x27;undefined&#x27; */</span><br>    <span class="hljs-comment">// &quot;noPropertyAccessFromIndexSignature&quot;: true,  /* 需要索引签名中未声明的属性才能使用元素访问。 */</span><br><br>    <span class="hljs-comment">/* Module Resolution Options 模块分解选项 */</span><br>    <span class="hljs-comment">// &quot;moduleResolution&quot;: &quot;node&quot;,                  /* 指定模块解析策略：&#x27;node&#x27; (Node.js) 或 &#x27;classic&#x27; (TypeScript pre-1.6)。 */</span><br>    <span class="hljs-comment">// &quot;baseUrl&quot;: &quot;./&quot;,                             /* 解析非绝对模块名称的基目录。 */</span><br>    <span class="hljs-comment">// &quot;paths&quot;: &#123;&#125;,                                 /* 一系列将导入重新映射到相对于“baseUrl”的查找位置的条目。 */</span><br>    <span class="hljs-comment">// &quot;rootDirs&quot;: [],                              /* 根文件夹列表，其组合内容代表运行时项目的结构。 */</span><br>    <span class="hljs-comment">// &quot;typeRoots&quot;: [],                             /* 包含类型定义的文件夹列表。 */</span><br>    <span class="hljs-comment">// &quot;types&quot;: [],                                 /* 类型声明文件要包含在编译中。 */</span><br>    <span class="hljs-comment">// &quot;allowSyntheticDefaultImports&quot;: true,        /* 允许从没有默认导出的模块中默认导入。 这不会影响代码发出，只是类型检查。 */</span><br>    <span class="hljs-attr">&quot;esModuleInterop&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>                        <span class="hljs-comment">/* 通过为所有导入创建命名空间对象，在 CommonJS 和 ES 模块之间启用发射互操作性。 暗示“allowSyntheticDefaultImports”。 */</span><br>    <span class="hljs-comment">// &quot;preserveSymlinks&quot;: true,                    /* 不解析符号链接的真实路径。 */</span><br>    <span class="hljs-comment">// &quot;allowUmdGlobalAccess&quot;: true,                /* 允许从模块访问 UMD 全局变量。 */</span><br><br>    <span class="hljs-comment">/* Source Map Options 源映射选项 */</span><br>    <span class="hljs-comment">// &quot;sourceRoot&quot;: &quot;&quot;,                            /* 指定调试器应该定位 TypeScript 文件而不是源位置的位置。 */</span><br>    <span class="hljs-comment">// &quot;mapRoot&quot;: &quot;&quot;,                               /* 指定调试器应该定位映射文件而不是生成位置的位置。 */</span><br>    <span class="hljs-comment">// &quot;inlineSourceMap&quot;: true,                     /* 发出带有源映射的单个文件，而不是单独的文件。 */</span><br>    <span class="hljs-comment">// &quot;inlineSources&quot;: true,                       /* 在单个文件中与源映射一起发出源； 需要设置“--inlineSourceMap”或“--sourceMap”。 */</span><br><br>    <span class="hljs-comment">/* Experimental Options 实验选项 */</span><br>    <span class="hljs-comment">// &quot;experimentalDecorators&quot;: true,              /* 启用对 ES7 装饰器的实验性支持。 */</span><br>    <span class="hljs-comment">// &quot;emitDecoratorMetadata&quot;: true,               /* 为装饰器的发射类型元数据启用实验性支持。 */</span><br><br>    <span class="hljs-comment">/* Advanced Options 高级选项 */</span><br>    <span class="hljs-attr">&quot;skipLibCheck&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>                           <span class="hljs-comment">/* 跳过声明文件的类型检查。 */</span><br>    <span class="hljs-attr">&quot;forceConsistentCasingInFileNames&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>        <span class="hljs-comment">/* 禁止对同一文件的大小写不一致的引用。 */</span><br>  <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ts</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】大屏适应方案</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E5%A4%A7%E5%B1%8F%E9%80%82%E5%BA%94%E6%96%B9%E6%A1%88/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E5%A4%A7%E5%B1%8F%E9%80%82%E5%BA%94%E6%96%B9%E6%A1%88/</url>
    
    <content type="html"><![CDATA[<h1 id="按比例缩放方案"><a href="#按比例缩放方案" class="headerlink" title="按比例缩放方案"></a>按比例缩放方案</h1><p>个人常用，原理是css3缩放属性<br>已封装为组件发布至npm（vue2、vue3两种版本）<br><a href="https://www.npmjs.com/package/vue2-scale-box">https://www.npmjs.com/package/vue2-scale-box</a><br><a href="https://www.npmjs.com/package/vue3-scale-box">https://www.npmjs.com/package/vue3-scale-box</a></p><h2 id="vue-组件方案"><a href="#vue-组件方案" class="headerlink" title="vue-组件方案"></a>vue-组件方案</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div<br>    class=&quot;ScaleBox&quot;<br>    ref=&quot;ScaleBox&quot;<br>    :style=&quot;&#123;<br>      width: width + &#x27;px&#x27;,<br>      height: height + &#x27;px&#x27;,<br>    &#125;&quot;<br>  &gt;<br>    &lt;slot&gt;&lt;/slot&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  name: &quot;ScaleBox&quot;,<br>  props: &#123;&#125;,<br>  data() &#123;<br>    return &#123;<br>      scale: 0,<br>      width: 1920,<br>      height: 1080,<br>    &#125;;<br>  &#125;,<br>  mounted() &#123;<br>    this.setScale();<br>    window.addEventListener(&quot;resize&quot;, this.debounce(this.setScale));<br>  &#125;,<br>  methods: &#123;<br>    getScale() &#123;<br>      // 固定好16：9的宽高比，计算出最合适的缩放比<br>      const &#123; width, height &#125; = this;<br>      const wh = window.innerHeight / height;<br>      const ww = window.innerWidth / width;<br>      return ww &lt; wh ? ww : wh;<br>    &#125;,<br>    setScale() &#123;<br>      // 获取到缩放比例，设置它<br>      this.scale = this.getScale();<br>      if (this.$refs.ScaleBox) &#123;<br>        this.$refs.ScaleBox.style.setProperty(&quot;--scale&quot;, this.scale);<br>      &#125;<br>    &#125;,<br>    debounce(fn, delay) &#123;<br>      const delays = delay || 100;<br>      let timer;<br>      return function () &#123;<br>        const th = this;<br>        const args = arguments;<br>        if (timer) &#123;<br>          clearTimeout(timer);<br>        &#125;<br>        timer = setTimeout(function () &#123;<br>          timer = null;<br>          fn.apply(th, args);<br>        &#125;, delays);<br>      &#125;;<br>    &#125;,<br>  &#125;,<br>&#125;;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;scss&quot;&gt;<br>#ScaleBox &#123;<br>  --scale: 1;<br>&#125;<br>.ScaleBox &#123;<br>  position: absolute;<br>  transform: scale(var(--scale)) translate(-50%, -50%);<br>  display: flex;<br>  flex-direction: column;<br>  transform-origin: 0 0;<br>  left: 50%;<br>  top: 50%;<br>  transition: 0.3s;<br>  z-index: 999;<br>  background: rgba(255, 0, 0, 0.3);<br>&#125;<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><h2 id="vue-mixins方案"><a href="#vue-mixins方案" class="headerlink" title="vue-mixins方案"></a>vue-mixins方案</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 屏幕适配 mixin 函数</span><br><span class="hljs-comment">// * 默认缩放值</span><br><span class="hljs-keyword">const</span> scale = &#123;<br>  <span class="hljs-attr">width</span>: <span class="hljs-string">&quot;1&quot;</span>,<br>  <span class="hljs-attr">height</span>: <span class="hljs-string">&quot;1&quot;</span>,<br>&#125;;<br><br><span class="hljs-comment">// * 设计稿尺寸（px）</span><br><span class="hljs-keyword">const</span> baseWidth = <span class="hljs-number">1920</span>;<br><span class="hljs-keyword">const</span> baseHeight = <span class="hljs-number">1080</span>;<br><br><span class="hljs-comment">// * 需保持的比例（默认1.77778）</span><br><span class="hljs-keyword">const</span> baseProportion = <span class="hljs-built_in">parseFloat</span>((baseWidth / baseHeight).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">5</span>));<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-comment">// * 定时函数</span><br>      <span class="hljs-attr">drawTiming</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">isScale</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//是否进行全局适配</span><br>    &#125;;<br>  &#125;,<br>  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isScale</span>) &#123;<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calcRate</span>();<br>    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;resize&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">resize</span>);<br>  &#125;,<br>  <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&quot;resize&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">resize</span>);<br>  &#125;,<br>  <span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">calcRate</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-comment">/*</span><br><span class="hljs-comment">        给最外层起ref！！！</span><br><span class="hljs-comment">      */</span><br>      <span class="hljs-keyword">const</span> appRef = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>[<span class="hljs-string">&quot;appRef&quot;</span>];<br>      <span class="hljs-keyword">if</span> (!appRef) <span class="hljs-keyword">return</span>;<br>      <span class="hljs-comment">// 当前宽高比</span><br>      <span class="hljs-keyword">const</span> currentRate = <span class="hljs-built_in">parseFloat</span>((<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">5</span>));<br>      <span class="hljs-keyword">if</span> (appRef) &#123;<br>        <span class="hljs-keyword">if</span> (currentRate &gt; baseProportion) &#123;<br>          <span class="hljs-comment">// 表示更宽</span><br>          scale.<span class="hljs-property">width</span> = ((<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> * baseProportion) / baseWidth).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">5</span>);<br>          scale.<span class="hljs-property">height</span> = (<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> / baseHeight).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">5</span>);<br>          appRef.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`scale(<span class="hljs-subst">$&#123;scale.width&#125;</span>, <span class="hljs-subst">$&#123;scale.height&#125;</span>) translate(-50%, -50%)`</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-comment">// 表示更高</span><br>          scale.<span class="hljs-property">height</span> = (<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / baseProportion / baseHeight).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">5</span>);<br>          scale.<span class="hljs-property">width</span> = (<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / baseWidth).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">5</span>);<br>          appRef.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`scale(<span class="hljs-subst">$&#123;scale.width&#125;</span>, <span class="hljs-subst">$&#123;scale.height&#125;</span>) translate(-50%, -50%)`</span>;<br>        &#125;<br>      &#125;<br>    &#125;,<br>    <span class="hljs-title function_">resize</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isScale</span>) &#123;<br>        <span class="hljs-keyword">return</span>;<br>      &#125;<br>      <span class="hljs-built_in">clearTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">drawTiming</span>);<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">drawTiming</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calcRate</span>();<br>      &#125;, <span class="hljs-number">200</span>);<br>    &#125;,<br>  &#125;,<br>&#125;;<br><br></code></pre></td></tr></table></figure><h1 id="rem"><a href="#rem" class="headerlink" title="rem"></a>rem</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/*</span><br><span class="hljs-comment">  github 大数据可视化展板通用模板 中方案</span><br><span class="hljs-comment">*/</span><br>$(<span class="hljs-variable language_">document</span>).<span class="hljs-title function_">ready</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> whei = $(<span class="hljs-variable language_">window</span>).<span class="hljs-title function_">width</span>();<br>  $(<span class="hljs-string">&quot;html&quot;</span>).<span class="hljs-title function_">css</span>(&#123; <span class="hljs-attr">fontSize</span>: whei / <span class="hljs-number">20</span> &#125;);<br>  $(<span class="hljs-variable language_">window</span>).<span class="hljs-title function_">resize</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> whei = $(<span class="hljs-variable language_">window</span>).<span class="hljs-title function_">width</span>();<br>    $(<span class="hljs-string">&quot;html&quot;</span>).<span class="hljs-title function_">css</span>(&#123; <span class="hljs-attr">fontSize</span>: whei / <span class="hljs-number">20</span> &#125;);<br>  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure><h1 id="echart-resize"><a href="#echart-resize" class="headerlink" title="echart resize"></a>echart resize</h1><p>window变化 或 DOM变化需要改变</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> myEchart = echarts.<span class="hljs-title function_">init</span>(<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;xxx&quot;</span>)<br>);<br><span class="hljs-keyword">const</span> option = &#123;&#125;<br>myEchart.<span class="hljs-title function_">setOption</span>(option);<br><span class="hljs-comment">// window变化</span><br><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;resize&quot;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  myEchart.<span class="hljs-title function_">resize</span>();<br>&#125;);<br><span class="hljs-comment">// DOM变化</span><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  myEchart.<span class="hljs-title function_">resize</span>();<br>&#125;).<span class="hljs-title function_">observe</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>[<span class="hljs-string">&quot;xxx&quot;</span>]);<br></code></pre></td></tr></table></figure><h1 id="动态单位方案"><a href="#动态单位方案" class="headerlink" title="动态单位方案"></a>动态单位方案</h1><p>定义fontSize方法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fontSize</span>(<span class="hljs-params">res</span>) &#123;<br>  <span class="hljs-keyword">let</span> docEl = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>,<br>      clientWidth =<br>      <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> ||<br>      <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientWidth</span> ||<br>      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">clientWidth</span>;<br>  <span class="hljs-keyword">if</span> (!clientWidth) <span class="hljs-keyword">return</span>;<br>  <span class="hljs-comment">// 此处的3840 为设计稿的宽度，记得修改！</span><br>  <span class="hljs-keyword">let</span> fontSize = clientWidth / <span class="hljs-number">3840</span>;<br>  <span class="hljs-keyword">return</span> res * fontSize;<br>&#125;<br></code></pre></td></tr></table></figure><p>使用</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"> <span class="hljs-attr">legend</span>: [<br>    &#123;<br>      <span class="hljs-attr">data</span>: [<span class="hljs-string">&quot;人数&quot;</span>],<br>      <span class="hljs-attr">top</span>: <span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>),<br>      <span class="hljs-attr">right</span>: <span class="hljs-title function_">fontSize</span>(<span class="hljs-number">320</span>),<br>      <span class="hljs-attr">itemWidth</span>: <span class="hljs-title function_">fontSize</span>(<span class="hljs-number">14</span>),<br>      <span class="hljs-attr">textStyle</span>: &#123;<br>        <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;#fff&quot;</span>,<br>        <span class="hljs-attr">fontSize</span>: <span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>),<br>      &#125;,<br>    &#125;,<br>]<br></code></pre></td></tr></table></figure><p>窗口发生变化重绘图表</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 添加窗口大小改变监听事件，当窗口大小改变时，图表会重新绘制，自适应窗口大小</span><br><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;resize&quot;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  chart.<span class="hljs-title function_">resize</span>();<br>&#125;);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【css】iconfont只加icon名显示图标</title>
    <link href="/css/%E3%80%90css%E3%80%91iconfont%E5%8F%AA%E5%8A%A0icon%E5%90%8D%E6%98%BE%E7%A4%BA%E5%9B%BE%E6%A0%87/"/>
    <url>/css/%E3%80%90css%E3%80%91iconfont%E5%8F%AA%E5%8A%A0icon%E5%90%8D%E6%98%BE%E7%A4%BA%E5%9B%BE%E6%A0%87/</url>
    
    <content type="html"><![CDATA[<p>自己在iconfont上下载的图标需要先加上iconfont（或者自己定义的）类名，再加上图标名才能显示图标。</p><p><img src="/../../assets/%E3%80%90css%E3%80%91iconfont%E5%8F%AA%E5%8A%A0icon%E5%90%8D%E6%98%BE%E7%A4%BA%E5%9B%BE%E6%A0%87/1.png"></p><p>修改iconfont.css中的css选择器即可</p><p><img src="/../../assets/%E3%80%90css%E3%80%91iconfont%E5%8F%AA%E5%8A%A0icon%E5%90%8D%E6%98%BE%E7%A4%BA%E5%9B%BE%E6%A0%87/2.png"></p><p><img src="/../../assets/%E3%80%90css%E3%80%91iconfont%E5%8F%AA%E5%8A%A0icon%E5%90%8D%E6%98%BE%E7%A4%BA%E5%9B%BE%E6%A0%87/3.png"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css">// 之前是&quot;<span class="hljs-selector-class">.iconfont</span>&quot;; 修改为class包含&quot;roc-<span class="hljs-attribute">icon</span>-&quot;字符的元素<br><span class="hljs-selector-attr">[class*=<span class="hljs-string">&quot;roc-icon-&quot;</span>]</span> &#123;<br>  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">&quot;iconfont&quot;</span> <span class="hljs-meta">!important</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;<br>  <span class="hljs-attribute">font-style</span>: normal;<br>  -webkit-<span class="hljs-attribute">font-smoothing</span>: antialiased;<br>  -moz-osx-<span class="hljs-attribute">font-smoothing</span>: grayscale;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>css</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】npm深入浅出package.json</title>
    <link href="/node/%E3%80%90node%E3%80%91npm%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BApackage.json/"/>
    <url>/node/%E3%80%90node%E3%80%91npm%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BApackage.json/</url>
    
    <content type="html"><![CDATA[<blockquote><p>作者：yuxiaoliang<br>链接：<a href="https://juejin.cn/post/7099041402771734559">https://juejin.cn/post/7099041402771734559</a><br>来源：稀土掘金</p></blockquote><p>npm是前端开发人员广泛使用的包管理工具，项目中通过package.json来管理项目中所依赖的npm包的配置。package.json就是一个json文件，除了能够描述项目的包依赖外，允许我们使用“语义化版本规则”指明你项目依赖包的版本，让你的构建更好地与其他开发者分享，便于重复使用。     本文主要从最近的实践出发，结合最新的npm和node的版本，介绍一下package.json中一些常见的配置以及如何写一个规范的package.json</p><blockquote><ul><li>package.json</li><li>package.json常用属性</li><li>package.json环境相关属性</li><li>package.json依赖相关属性</li><li>package.json三方属性</li></ul></blockquote><h2 id="一、package-json"><a href="#一、package-json" class="headerlink" title="一、package.json"></a>一、package.json</h2><h3 id="1-package-json简介"><a href="#1-package-json简介" class="headerlink" title="1. package.json简介"></a>1. package.json简介</h3><p>在nodejs项目中，package.json是管理其依赖的配置文件，通常我们在初始化一个nodejs项目的时候会通过：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm init<br></code></pre></td></tr></table></figure><p>然后在你的目录下会生成3个目录&#x2F;文件， node_modules, package.json和 package.lock.json。其中package.json的内容为：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Your project name&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Your project description&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;main&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;app.js&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;test&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;author&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Author name&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;license&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ISC&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;dependency1&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.4.0&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;dependency2&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.5.2&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>上述可以看出，package.json中包含了项目本身的元数据,以及项目的子依赖信息(比如dependicies等)。</p><h3 id="2-package-lock-json"><a href="#2-package-lock-json" class="headerlink" title="2. package-lock.json"></a>2. package-lock.json</h3><p>我们发现在npm init的时候，不仅生成了package.json文件，还生成了package-lock.json文件。那么为什么存在package.json的清空下，还需要生成package-lock.json文件呢。本质上package-lock.json文件是为了锁版本，在package.json中指定的子npm包比如：react: “^16.0.0”，在实际安装中，只要高于react的版本都满足package.json的要求。这样就使得根据同一个package.json文件，两次安装的子依赖版本不能保证一致。</p><p>而package-lock文件如下所示，子依赖dependency1就详细的指定了其版本。起到lock版本的作用。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Your project name&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;lockfileVersion&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;requires&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;dependency1&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.4.0&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;resolved&quot;</span><span class="hljs-punctuation">:</span> <br><span class="hljs-string">&quot;https://registry.npmjs.org/dependency1/-/dependency1-1.4.0.tgz&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;integrity&quot;</span><span class="hljs-punctuation">:</span> <br><span class="hljs-string">&quot;sha512-a+UqTh4kgZg/SlGvfbzDHpgRu7AAQOmmqRHJnxhRZICKFUT91brVhNNt58CMWU9PsBbv3PDCZUHbVxuDiH2mtA==&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;dependency2&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.5.2&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;resolved&quot;</span><span class="hljs-punctuation">:</span> <br><span class="hljs-string">&quot;https://registry.npmjs.org/dependency2/-/dependency2-1.5.2.tgz&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;integrity&quot;</span><span class="hljs-punctuation">:</span> <br><span class="hljs-string">&quot;sha512-WOn21V8AhyE1QqVfPIVxe3tupJacq1xGkPTB4iagT6o+P2cAgEOOwIxMftr4+ZCTI6d551ij9j61DFr0nsP2uQ==&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="二、package-json常用属性"><a href="#二、package-json常用属性" class="headerlink" title="二、package.json常用属性"></a>二、package.json常用属性</h2><p>本章来聊聊package.json中常用的配置属性，形如name，version等属性太过简单，不一一介绍。本章主要介绍一下script、bin和workspaces属性。</p><h3 id="2-1-script"><a href="#2-1-script" class="headerlink" title="2.1 script"></a>2.1 script</h3><p>在npm中使用script标签来定义脚本，每当制定npm run的时候，就会自动创建一个shell脚本，这里需要注意的是，npm run新建的这个 Shell，会将本地目录的node_modules&#x2F;.bin子目录加入PATH变量。</p><p>这意味着，当前目录的node_modules&#x2F;.bin子目录里面的所有脚本，都可以直接用脚本名调用，而不必加上路径。比如，当前项目的依赖里面有 esbuild，只要直接写esbuild xxx 就可以了。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-comment">// ...</span><br>  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;build&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;esbuild index.js&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-comment">// ...</span><br>  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;build&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./node_modules/.bin/esbuild index.js&quot;</span> <br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>上面两种写法是等价的。</p><h3 id="2-2-bin"><a href="#2-2-bin" class="headerlink" title="2.2 bin"></a>2.2 bin</h3><p>bin属性用来将可执行文件加载到全局环境中，指定了bin字段的npm包，一旦在全局安装，就会被加载到全局环境中，可以通过别名来执行该文件。</p><p>比如@bytepack&#x2F;cli的npm包：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-string">&quot;bin&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;bytepack&quot;</span>: <span class="hljs-string">&quot;./bin/index.js&quot;</span><br> &#125;,<br></code></pre></td></tr></table></figure><p>一旦在全局安装了@bytepack&#x2F;cli，就可以直接通过bytepack来执行相应的命令，比如</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">bytepack -v<br>//显示1.11.0<br></code></pre></td></tr></table></figure><p>如果非全局安装，那么会自动连接到项目的node_module&#x2F;.bin目录中。与前面介绍的script标签中所说的一致，可以直接用别名来使用。</p><h3 id="2-3-workspaces"><a href="#2-3-workspaces" class="headerlink" title="2.3 workspaces"></a>2.3 workspaces</h3><p>在项目过大的时候，最近越来越流行monorepo。提到monorepo就绕不看workspaces，早期我们会用yarn workspaces，现在npm官方也支持了workspaces.     workspaces解决了本地文件系统中如何在一个顶层root package下管理多个子packages的问题，在workspaces声明目录下的package会软链到最上层root package的node_modules中。</p><p>直接以官网的例子来说明：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;my-project&quot;</span>,<br>    <span class="hljs-string">&quot;workspaces&quot;</span>: [<br>    <span class="hljs-string">&quot;packages/a&quot;</span><br>  ]<br>&#125;<br></code></pre></td></tr></table></figure><p>在一个npm包名为my-project的npm包中，存在workspaces配置的目录。</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ada">.<br>+<span class="hljs-comment">-- package.json</span><br>+<span class="hljs-comment">-- index.js</span><br>`<span class="hljs-comment">-- packages</span><br>   +<span class="hljs-comment">-- a</span><br>   |  `<span class="hljs-comment">-- package.json</span><br><br></code></pre></td></tr></table></figure><p>并且该最上层的名为my-project的root包，有packages&#x2F;a子包。此时，我们如果npm install,那么在root package中node_modules中安装的npm包a，指向的是本地的package&#x2F;a.</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ada">.<br>+<span class="hljs-comment">-- node_modules</span><br>|  `<span class="hljs-comment">-- packages/a -&gt; ../packages/a</span><br>+<span class="hljs-comment">-- package-lock.json</span><br>+<span class="hljs-comment">-- package.json</span><br>`<span class="hljs-comment">-- packages</span><br>   +<span class="hljs-comment">-- a</span><br>   |   `<span class="hljs-comment">-- package.json</span><br></code></pre></td></tr></table></figure><p>上述的</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">-- packages/a -&gt; ../packages/a<br></code></pre></td></tr></table></figure><p>指的就是从node_modules中a链接到本地npm包的软链</p><h2 id="三、package-json环境相关属性"><a href="#三、package-json环境相关属性" class="headerlink" title="三、package.json环境相关属性"></a>三、package.json环境相关属性</h2><p>常见的环境，基本上分为浏览器browser和node环境两大类，接下来我们来看看package.json中，跟环境相关的配置属性。环境的定义可以简单理解如下：</p><ul><li>browser环境：比如存在一些只有在浏览器中才会存在的全局变量等，比如window，Document等</li><li>node环境: npm包的源文件中存在只有在node环境中才会有的一些变量和内置包，内置函数等。</li></ul><h3 id="3-1-type"><a href="#3-1-type" class="headerlink" title="3.1 type"></a>3.1 type</h3><p>js的模块化规范包含了commonjs、CMD、UMD、AMD和ES module等，最早先在node中支持的仅仅是commonjs字段，但是从node13.2.0开始后，node正式支持了ES module规范，在package.json中可以通过type字段来声明npm包遵循的模块化规范。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//package.json</span><br>&#123;<br>   <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;some package&quot;</span>,<br>   <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;module&quot;</span>||<span class="hljs-string">&quot;commonjs&quot;</span> <br>&#125;<br><br></code></pre></td></tr></table></figure><p>需要注意的是：</p><ul><li>不指定type的时候，type的默认值是commonjs，不过建议npm包都指定一下type</li><li>当type字段指定值为module则采用ESModule规范</li><li>当type字段指定时，目录下的所有.js后缀结尾的文件，都遵循type所指定的模块化规范</li><li>除了type可以指定模块化规范外，通过文件的后缀来指定文件所遵循的模块化规范，以.mjs结尾的文件就是使用的ESModule规范，以.cjs结尾的遵循的是commonjs规范</li></ul><h3 id="3-2-main-module-browser"><a href="#3-2-main-module-browser" class="headerlink" title="3.2 main &amp; module &amp; browser"></a>3.2 main &amp; module &amp; browser</h3><p>除了type外，package.json中还有main,module和browser 3个字段来定义npm包的入口文件。</p><ul><li>main : 定义了 npm 包的入口文件，browser 环境和 node 环境均可使用</li><li>module : 定义 npm 包的 ESM 规范的入口文件，browser 环境和 node - 环境均可使用</li><li>browser : 定义 npm 包在 browser 环境下的入口文件</li></ul><p>我们来看一下这3个字段的使用场景，以及同时存在这3个字段时的优先级。我们假设有一个npm包为demo1,</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">----- dist<br>   |-- index.<span class="hljs-property">browser</span>.<span class="hljs-property">js</span><br>   |-- index.<span class="hljs-property">browser</span>.<span class="hljs-property">mjs</span><br>   |-- index.<span class="hljs-property">js</span><br>   |-- index.<span class="hljs-property">mjs</span><br></code></pre></td></tr></table></figure><p>其package.json中同时指定了main,module和browser这3个字段</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-string">&quot;main&quot;</span>: <span class="hljs-string">&quot;dist/index.js&quot;</span>,  <span class="hljs-comment">// main </span><br><span class="hljs-string">&quot;module&quot;</span>: <span class="hljs-string">&quot;dist/index.mjs&quot;</span>, <span class="hljs-comment">// module</span><br><br><span class="hljs-comment">// browser 可定义成和 main/module 字段一一对应的映射对象，也可以直接定义为字符串</span><br><span class="hljs-string">&quot;browser&quot;</span>: &#123;<br>  <span class="hljs-string">&quot;./dist/index.js&quot;</span>: <span class="hljs-string">&quot;./dist/index.browser.js&quot;</span>, <span class="hljs-comment">// browser+cjs</span><br>  <span class="hljs-string">&quot;./dist/index.mjs&quot;</span>: <span class="hljs-string">&quot;./dist/index.browser.mjs&quot;</span>  <span class="hljs-comment">// browser+mjs</span><br>&#125;,<br><br><span class="hljs-comment">// &quot;browser&quot;: &quot;./dist/index.browser.js&quot; // browser</span><br></code></pre></td></tr></table></figure><p>默认构建和使用，比如我们在项目中引用这个npm包：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> demo <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;demo&#x27;</span><br></code></pre></td></tr></table></figure><p>通过构建工具构建上述代码后，模块的加载循序为：</p><p><em><strong>browser+mjs &gt; module &gt; browser+cjs &gt; main</strong></em></p><p>这个加载顺序是大部分构建工具默认的加载顺序，比如webapck、esbuild等等。可以通过相应的配置修改这个加载顺序，不过大部分场景，我们还是会遵循默认的加载顺序。</p><h3 id="3-3-exports"><a href="#3-3-exports" class="headerlink" title="3.3 exports"></a>3.3 exports</h3><p>如果在package.json中定义了exports字段，那么这个字段所定义的内容就是该npm包的真实和全部的导出，优先级会高于main和file等字段。</p><p>举例来说：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;pkg&quot;</span>,<br>  <span class="hljs-string">&quot;exports&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;.&quot;</span>: <span class="hljs-string">&quot;./main.mjs&quot;</span>,<br>    <span class="hljs-string">&quot;./foo&quot;</span>: <span class="hljs-string">&quot;./foo.js&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; something &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;pkg&quot;</span>; <span class="hljs-comment">// from &quot;pkg/main.mjs&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> &#123; something &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;pkg/foo&quot;</span>); <span class="hljs-comment">// require(&quot;pkg/foo.js&quot;)</span><br></code></pre></td></tr></table></figure><p>从上述的例子来看，exports可以定义不同path的导出。如果存在exports后，以前正常生效的file目录到处会失效，比如require(‘pkg&#x2F;package.json’)，因为在exports中没有指定，就会报错。</p><p>exports还有一个最大的特点，就是条件引用，比如我们可以根据不同的引用方式或者模块化类型，来指定npm包引用不同的入口文件。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// package.json</span><br><span class="hljs-punctuation">&#123;</span> <br>  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;pkg&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;main&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./main-require.cjs&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;exports&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;import&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./main-module.js&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;require&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./main-require.cjs&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;module&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>上述的例子中，如果我们通过</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> p = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;pkg&#x27;</span>)<br></code></pre></td></tr></table></figure><p>引用的就是”.&#x2F;main-require.cjs”。<br>如果通过：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> p <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pkg&#x27;</span><br></code></pre></td></tr></table></figure><p>引用的就是”.&#x2F;main-module.js”</p><p>最后需要注意的是 ： <em><strong>如果存在exports属性，exports属性不仅优先级高于main，同时也高于module和browser字段。</strong></em></p><h2 id="四、package-json依赖相关属性"><a href="#四、package-json依赖相关属性" class="headerlink" title="四、package.json依赖相关属性"></a>四、package.json依赖相关属性</h2><p>package.json中跟依赖相关的配置属性包含了dependencies、devDependencies、peerDependencies和peerDependenciesMeta等。</p><p>dependencies是项目的依赖，而devDependencies是开发所需要的模块，所以我们可以在开发过程中需要的安装上去，来提高我们的开发效率。这里需要注意的时，在自己的项目中尽量的规范使用，形如webpack、babel等是开发依赖，而不是项目本身的依赖，不要放在dependencies中。</p><p>dependencies除了dependencies和devDependencies，本文重点介绍的是peerDependencies和peerDependenciesMeta。</p><h3 id="4-1-peerDependencies"><a href="#4-1-peerDependencies" class="headerlink" title="4.1 peerDependencies"></a>4.1 peerDependencies</h3><p>peerDependencies是package.json中的依赖项,可以解决核心库被下载多次，以及统一核心库版本的问题。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//package/pkg</span><br>----- node_modules<br>   |-- npm-a -&gt; 依赖了react,react-dom<br>   |-- npm-b -&gt; 依赖了react,react-dom<br>   |-- index.<span class="hljs-property">js</span><br></code></pre></td></tr></table></figure><p>比如上述的例子中如果子npm包a,b都以来了react和react-dom,此时如果我们在子npm包a,b的package.json中声明了PeerDependicies后，相应的依赖就不会重新安装。</p><p>需要注意的有两点：</p><ul><li>对于子npm包a,在npm7中，如果单独安装子npm a,其peerDependicies中的包，会被安装下来。但是npm7之前是不会的。</li><li>请规范和详细的指定PeerDependicies的配置，笔者在看到有些react组件库，不在PeerDependicies中指定react和react-dom，或者将react和react-dom放到了dependicies中，这两种不规范的指定都会存在一些问题。</li><li>其二，正确的指定PeerDependicies中npm包的版本，<a href="https://link.juejin.cn/?target=mailto:react-focus-lock@2.8.1">react-focus-lock@2.8.1</a>,peerDependicies指定的是：”react”: “^16.8.0 || ^17.0.0 || ^18.0.0”，但实际上，这个react-focus-lock并不支持18.x的react</li></ul><h3 id="4-2-peerDependenciesMeta"><a href="#4-2-peerDependenciesMeta" class="headerlink" title="4.2 peerDependenciesMeta"></a>4.2 peerDependenciesMeta</h3><p>看到“Meta”就有元数据的意思，这里的peerDependenciesMeta就是详细修饰了peerDependicies，比如在react-redux这个npm包中的package.json中有这么一段：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-string">&quot;peerDependencies&quot;</span>: &#123;<br>   <span class="hljs-string">&quot;react&quot;</span>: <span class="hljs-string">&quot;^16.8.3 || ^17 || ^18&quot;</span><br> &#125;,<br><span class="hljs-string">&quot;peerDependenciesMeta&quot;</span>: &#123;<br>   <span class="hljs-string">&quot;react-dom&quot;</span>: &#123;<br>     <span class="hljs-string">&quot;optional&quot;</span>: <span class="hljs-literal">true</span><br>   &#125;,<br>   <span class="hljs-string">&quot;react-native&quot;</span>: &#123;<br>     <span class="hljs-string">&quot;optional&quot;</span>: <span class="hljs-literal">true</span><br>   &#125;<br> &#125;<br></code></pre></td></tr></table></figure><p>这里指定了”react-dom”,”react-native”在peerDependenciesMeta中，且为可选项，因此如果项目中检测没有安装”react-dom”和”react-native”都不会报错。</p><p>值得注意的是，通过peerDependenciesMeta我们确实是取消了限制，但是这里经常存在非A即B的场景，比如上述例子中，我们需要的是“react-dom”和”react-native”需要安装一个，但是实际上通过上述的声明，我们实现不了这种提示。</p><h2 id="五、package-json三方属性"><a href="#五、package-json三方属性" class="headerlink" title="五、package.json三方属性"></a>五、package.json三方属性</h2><p>package.json中也存在很多三方属性，比如tsc中使用的types、构建工具中使用的sideEffects,git中使用的husky，eslint使用的eslintIgnore，这些扩展的配置，针对特定的开发工具是有意义的这里不一一举例。</p>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【linux】桌面快捷文件</title>
    <link href="/linux/%E3%80%90linux%E3%80%91%E6%A1%8C%E9%9D%A2%E5%BF%AB%E6%8D%B7%E6%96%87%E4%BB%B6/"/>
    <url>/linux/%E3%80%90linux%E3%80%91%E6%A1%8C%E9%9D%A2%E5%BF%AB%E6%8D%B7%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>在 <code>/usr/share/applications/</code> 目录创建 <code>xxx.desktop </code> </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">[Desktop Entry]<br>Name=IDEA<br>Comment=Run IDEA<br>Exec=/opt/idea-IU-201.7223.91/bin/idea.sh<br>Icon=/opt/idea-IU-201.7223.91/bin/idea.svg<br>Type=Application<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90linux%E3%80%91%E6%A1%8C%E9%9D%A2%E5%BF%AB%E6%8D%B7%E6%96%87%E4%BB%B6/1.png"></p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】uniapp使用wxjsSDK</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91uniapp%E4%BD%BF%E7%94%A8wxjsSDK/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91uniapp%E4%BD%BF%E7%94%A8wxjsSDK/</url>
    
    <content type="html"><![CDATA[<p>wxjsSDK官方文档：<a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html#1">https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps&#x2F;JS-SDK.html#1</a></p><p>公众号后台需设置“JS接口安全域名”！</p><h1 id="安装jweixin-module"><a href="#安装jweixin-module" class="headerlink" title="安装jweixin-module"></a>安装jweixin-module</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install jweixin-module<br></code></pre></td></tr></table></figure><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><p>以下例子为 h5微信支付</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> jweixin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;jweixin-module&#x27;</span>);<br><span class="hljs-keyword">const</span> &#123; payJssdkBuildConfig &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@/api/pay&#x27;</span>);<br><br><br><br><br><span class="hljs-keyword">const</span> config = <span class="hljs-keyword">await</span> <span class="hljs-title function_">payJssdkBuildConfig</span>();<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">=== config 是后台返回的 data</span><br><span class="hljs-comment">&#123;</span><br><span class="hljs-comment">    &quot;code&quot;: 1,</span><br><span class="hljs-comment">    &quot;msg&quot;: &quot;&quot;,</span><br><span class="hljs-comment">    &quot;time&quot;: &quot;1670380349&quot;,</span><br><span class="hljs-comment">    &quot;data&quot;: &#123;</span><br><span class="hljs-comment">        &quot;debug&quot;: false, // 开启调试模式,调用的所有 api 的返回值会在客户端 alert 出来，若要查看传入的参数，可以在 pc 端打开，参数信息会通过 log 打出，仅在 pc 端时才会打印。</span><br><span class="hljs-comment">        &quot;appId&quot;: &quot;微信公众号appid&quot;, // 必填，公众号的唯一标识</span><br><span class="hljs-comment">        &quot;jsApiList&quot;: [</span><br><span class="hljs-comment">            &quot;chooseWXPay&quot;</span><br><span class="hljs-comment">        ], // 必填，需要使用的 JS 接口列表</span><br><span class="hljs-comment">        &quot;nonceStr&quot;: &quot;3AwvgHfj2n&quot;, // 必填，生成签名的随机串</span><br><span class="hljs-comment">        &quot;timestamp&quot;: 1670380349, // 必填，生成签名的时间戳</span><br><span class="hljs-comment">        &quot;signature&quot;: &quot;3343130fecb59fb1114f90d975c34a79150c7f15&quot; // 必填，签名</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">if</span>(config) &#123;<br>  jweixin.<span class="hljs-title function_">config</span>(config);<br>  jweixin.<span class="hljs-title function_">ready</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">      data 是后台返回的支付所需信息</span><br><span class="hljs-comment">    */</span><br>    jweixin.<span class="hljs-title function_">chooseWXPay</span>(&#123;<br>      <span class="hljs-attr">timestamp</span>: data.<span class="hljs-property">timeStamp</span>, <span class="hljs-comment">// 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符</span><br>      <span class="hljs-attr">nonceStr</span>: data.<span class="hljs-property">nonce_str</span>, <span class="hljs-comment">// 支付签名随机串，不长于 32 位</span><br>      <span class="hljs-attr">package</span>: <span class="hljs-string">&quot;prepay_id=&quot;</span> + data.<span class="hljs-property">prepay_id</span>, <span class="hljs-comment">// 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\*\*\*）</span><br>      <span class="hljs-attr">signType</span>: <span class="hljs-string">&quot;MD5&quot;</span>, <span class="hljs-comment">// 签名方式，默认为&#x27;SHA1&#x27;，使用新版支付需传入&#x27;MD5&#x27;</span><br>      <span class="hljs-attr">paySign</span>: data.<span class="hljs-property">paySign</span>, <span class="hljs-comment">// 支付签名</span><br>      <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) &#123;<br>        <span class="hljs-comment">// 支付成功后的回调函数</span><br>      &#125;,<br>      <span class="hljs-attr">fail</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) &#123;<br>        uni.<span class="hljs-title function_">showToast</span>(&#123;<br>          <span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;none&quot;</span>,<br>          <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;支付失败&quot;</span><br>        &#125;)<br>      &#125;,<br>    &#125;);<br>  &#125;);<br>  jweixin.<span class="hljs-title function_">error</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) &#123;<br>    uni.<span class="hljs-title function_">showToast</span>(&#123;<br>      <span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;none&quot;</span>,<br>      <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;支付失败&quot;</span><br>    &#125;)<br>  &#125;); <br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  uni.<span class="hljs-title function_">showToast</span>(&#123;<br>    <span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;none&quot;</span>,<br>    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;支付失败&quot;</span><br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【mysql】MySQL安装-centos7</title>
    <link href="/mysql/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85-centos7/"/>
    <url>/mysql/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85-centos7/</url>
    
    <content type="html"><![CDATA[<h1 id="1-下载-rpm-源"><a href="#1-下载-rpm-源" class="headerlink" title="1 下载 rpm 源"></a>1 下载 rpm 源</h1><p>mysql 所有版本 与 KEY 源：<a href="https://repo.mysql.com/">https://repo.mysql.com</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://repo.mysql.com/mysql-community-release-el7.rpm<br></code></pre></td></tr></table></figure><h1 id="2-添加-yum-仓库"><a href="#2-添加-yum-仓库" class="headerlink" title="2 添加 yum 仓库"></a>2 添加 yum 仓库</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install mysql-community-release-el7.rpm<br></code></pre></td></tr></table></figure><p>添加后 &#x2F;etc&#x2F;yum.repos.d&#x2F; 目录下会存在 mysql-community.repo 仓库</p><h1 id="3-下载密钥"><a href="#3-下载密钥" class="headerlink" title="3 下载密钥"></a>3 下载密钥</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://repo.mysql.com/RPM-GPG-KEY-mysql-2023<br></code></pre></td></tr></table></figure><h1 id="4-替换密钥"><a href="#4-替换密钥" class="headerlink" title="4 替换密钥"></a>4 替换密钥</h1><p>查看 mysql-community.repo 中所要安装的包密钥存放位置 gpgkey&#x3D;file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-mysql</p><p>在 &#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F; 目录下将下载的 RPM-GPG-KEY-mysql-2023 密钥更名为 RPM-GPG-KEY-mysql 或 修改 mysql-community.repo 文件中 gpgkey 所指定的文件</p><h1 id="5-安装"><a href="#5-安装" class="headerlink" title="5 安装"></a>5 安装</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install mysql-community-server<br></code></pre></td></tr></table></figure><h1 id="6-启动"><a href="#6-启动" class="headerlink" title="6 启动"></a>6 启动</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl start mysqld<br></code></pre></td></tr></table></figure><h1 id="7-查看临时密码"><a href="#7-查看临时密码" class="headerlink" title="7 查看临时密码"></a>7 查看临时密码</h1><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">cat</span> /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/mysqld.<span class="hljs-keyword">log</span><br></code></pre></td></tr></table></figure><p>找到这行：<br>[Note] [MY-010454] [Server] A temporary password is generated for root@localhost: hz8swEv%h+DN<br>hz8swEv%h+DN 为临时密码</p><h1 id="8-修改临时密码"><a href="#8-修改临时密码" class="headerlink" title="8 修改临时密码"></a>8 修改临时密码</h1><p>在 MySQL 8 中，默认的密码策略要求密码必须包含：小写字母、大写字母、数字和特殊字符，并且长度不能少于 8 个字符。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mysqladmin -u root -p password<br></code></pre></td></tr></table></figure><h1 id="9-登录"><a href="#9-登录" class="headerlink" title="9 登录"></a>9 登录</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mysql -u root -p<br></code></pre></td></tr></table></figure><p>输入密码登录</p><h1 id="10-问题"><a href="#10-问题" class="headerlink" title="10 问题"></a>10 问题</h1><h2 id="启动权限报错"><a href="#启动权限报错" class="headerlink" title="启动权限报错"></a>启动权限报错</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">● mysqld.service - MySQL Server<br>   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)<br>   Active: failed (Result: exit-code) since 一 2024-04-01 10:17:17 CST; 2min 23s ago<br>     Docs: man:mysqld(8)<br>           http://dev.mysql.com/doc/refman/en/using-systemd.html<br>  Process: 2074 ExecStart=/usr/sbin/mysqld <span class="hljs-variable">$MYSQLD_OPTS</span> (code=exited, status=1/FAILURE)<br>  Process: 2051 ExecStartPre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/SUCCESS)<br> Main PID: 2074 (code=exited, status=1/FAILURE)<br>   Status: <span class="hljs-string">&quot;Server shutdown complete&quot;</span><br>    Error: 13 (权限不够)<br><br>4月 01 10:17:17 localhost.localdomain systemd[1]: Starting MySQL Server...<br>4月 01 10:17:17 localhost.localdomain systemd[1]: mysqld.service: main process exited, code=exited, status=1/FAILURE<br>4月 01 10:17:17 localhost.localdomain systemd[1]: Failed to start MySQL Server.<br>4月 01 10:17:17 localhost.localdomain systemd[1]: Unit mysqld.service entered failed state.<br>4月 01 10:17:17 localhost.localdomain systemd[1]: mysqld.service failed.<br></code></pre></td></tr></table></figure><p>解决：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo <span class="hljs-built_in">chown</span> -R mysql:mysql /var/lib/mysql/<br>sudo <span class="hljs-built_in">chmod</span> -R 750 /var/lib/mysql/<br></code></pre></td></tr></table></figure><h1 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h1><p>centos6 编译安装 mysql5.6 参考：</p><p><a href="https://blog.csdn.net/weixin_33729196/article/details/91750709">https://blog.csdn.net/weixin_33729196&#x2F;article&#x2F;details&#x2F;91750709</a></p>]]></content>
    
    
    <categories>
      
      <category>mysql</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【mysql】MySQL学习</title>
    <link href="/mysql/%E3%80%90mysql%E3%80%91MySQL%E5%AD%A6%E4%B9%A0/"/>
    <url>/mysql/%E3%80%90mysql%E3%80%91MySQL%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="数据库备份"><a href="#数据库备份" class="headerlink" title="数据库备份"></a>数据库备份</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mysqldump -u用户名 -p密码 --databases 数据库1 数据库2 &gt; xxx.sql<br></code></pre></td></tr></table></figure><h1 id="字段数据类型"><a href="#字段数据类型" class="headerlink" title="字段数据类型"></a>字段数据类型</h1><p> 可以分为三类：数值、日期、字符串</p><table><thead><tr><th>分类</th><th>数据类型</th><th>大小</th><th>描述</th></tr></thead><tbody><tr><td>数值类型</td><td>tinyint</td><td>1 byte</td><td>小整数值</td></tr><tr><td></td><td>smallint</td><td>2 bytes</td><td>大整数值</td></tr><tr><td></td><td>mediumint</td><td>3 bytes</td><td>大整数值</td></tr><tr><td></td><td>int或integer</td><td>4 bytes</td><td>大整数值age int</td></tr><tr><td></td><td>bigint</td><td>8 bytes</td><td>极大整数值</td></tr><tr><td></td><td>float</td><td>4 bytes</td><td>单精度浮点数值</td></tr><tr><td></td><td>double</td><td>8 bytes</td><td>双精度浮点数值score double(总长度, 保留小数位)如：0-100, 保留两位小数score double(5, 2)</td></tr><tr><td></td><td>decimal</td><td></td><td>小数值</td></tr><tr><td>日期和时间类型</td><td>date</td><td>3</td><td>日期值</td></tr><tr><td></td><td>time</td><td>3</td><td>时间值或持续时间</td></tr><tr><td></td><td>year</td><td>1</td><td>年份值</td></tr><tr><td></td><td>datetime</td><td>8</td><td>混合日期和时间值</td></tr><tr><td></td><td>timestamp</td><td>4</td><td>混合日期和时间值，时间戳</td></tr><tr><td>字符串类型</td><td>char</td><td>0-255 bytes</td><td>定长字符串name char(10) 最长10个字符储存空间，没有存够10个字符也是占10个字符空间。储存性能高，浪费空间</td></tr><tr><td></td><td>varchar</td><td>0-65535 bytes</td><td>变长字符串name varchar(10)最长10个字符储存空间，占了几个字符就是几个字符储存空间。储存性能低，节省空间</td></tr><tr><td></td><td>tinyblob</td><td>0-255 bytes</td><td>不超过 255 个字符的二进制字符串</td></tr><tr><td></td><td>tinytext</td><td>0-255 bytes</td><td>短文本字符串</td></tr><tr><td></td><td>blob</td><td>0-65 535 bytes</td><td>二进制形式的长文本数据</td></tr><tr><td></td><td>text</td><td>0-65 535 bytes</td><td>长文本数据</td></tr><tr><td></td><td>mediumblob</td><td>0-16 777 215 bytes</td><td>二进制形式的中等长度文本数据</td></tr><tr><td></td><td>mediumtext</td><td>0-16 777 215 bytes</td><td>中等长度文本数据</td></tr><tr><td></td><td>longblob</td><td>0-4 294 967 295 bytes</td><td>二进制形式的极大文本数据</td></tr><tr><td></td><td>longtext</td><td>0-4 294 967 295 bytes</td><td>极大文本数据</td></tr></tbody></table><h1 id="DDL-Data-Definition-Language-数据定义语言"><a href="#DDL-Data-Definition-Language-数据定义语言" class="headerlink" title="DDL(Data Definition Language)数据定义语言"></a>DDL(Data Definition Language)数据定义语言</h1><p>用来定义数据库对象：数据库，表，字段等，DDL简单理解就是对数据库，表进行增（Create）删（Delete）改（Update）查（Retrieve）等</p><h2 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查看所有数据库</span><br><span class="hljs-keyword">SHOW</span> DATABASES;<br><br><span class="hljs-comment">-- 新建数据库</span><br><span class="hljs-keyword">CREATE</span> DATABASE 数据库名;<br><span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> 数据库名;<br><br><span class="hljs-comment">-- 删除数据库</span><br><span class="hljs-keyword">DROP</span> DATABASE 数据库名;<br><span class="hljs-keyword">DROP</span> DATABASE IF <span class="hljs-keyword">EXISTS</span> 数据库名;<br><br><span class="hljs-comment">-- 使用数据库</span><br>USE 数据库名;<br><br><span class="hljs-comment">-- 查看当前使用的数据库</span><br><span class="hljs-keyword">SELECT</span> DATABASE();<br></code></pre></td></tr></table></figure><h2 id="操作表"><a href="#操作表" class="headerlink" title="操作表"></a>操作表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查看所有表</span><br><span class="hljs-keyword">SHOW</span> TABLES;<br><br><span class="hljs-comment">-- 查询表结构</span><br><span class="hljs-keyword">DESC</span> 表名;<br><br><span class="hljs-comment">-- 新建表</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> 表名(<br>  字段名<span class="hljs-number">1</span> 字段<span class="hljs-number">1</span>数据类型,<br>  字段名<span class="hljs-number">2</span> 字段<span class="hljs-number">2</span>数据类型,<br>  字段名<span class="hljs-number">3</span> 字段<span class="hljs-number">3</span>数据类型,<br>  ...<br>  字段名n 字段n数据类型<br>);<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> 表名(<br>  字段名<span class="hljs-number">1</span> 字段<span class="hljs-number">1</span>数据类型,<br>  字段名<span class="hljs-number">2</span> 字段<span class="hljs-number">2</span>数据类型,<br>  字段名<span class="hljs-number">3</span> 字段<span class="hljs-number">3</span>数据类型,<br>  ...<br>  字段名n 字段n数据类型<br>);<br><br><span class="hljs-comment">-- 删除表</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> 表名;<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> 表名;<br><br><span class="hljs-comment">-- 修改表</span><br><span class="hljs-comment">-- 修改表名</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 RENAME <span class="hljs-keyword">TO</span> 新表名;<br><span class="hljs-comment">-- 添加字段</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 <span class="hljs-keyword">ADD</span> 字段 字段数据类型;<br><span class="hljs-comment">-- 修改字段数据类型</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 MODIFY 字段名 新的字段数据类型;<br><span class="hljs-comment">-- 修改字段及字段数据类型</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 CHANGE 字段名 新字段 新字段数据类型;<br><span class="hljs-comment">-- 删除字段</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 <span class="hljs-keyword">DROP</span> 字段名;<br><br></code></pre></td></tr></table></figure><h1 id="DML-Data-Manipulation-Language-数据操作语言"><a href="#DML-Data-Manipulation-Language-数据操作语言" class="headerlink" title="DML(Data Manipulation Language)数据操作语言"></a>DML(Data Manipulation Language)数据操作语言</h1><p>用来对数据库中表的数据进行增删改，DML简单理解就对表中数据进行增（insert）删（delete）改（update）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 添加</span><br><span class="hljs-comment">-- 添加指定字段的值，批量添加则在value后跟多组值</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> 表名 (字段<span class="hljs-number">1</span>, 字段<span class="hljs-number">2.</span>..) <span class="hljs-keyword">VALUES</span> (值<span class="hljs-number">1</span>, 值<span class="hljs-number">2.</span>..), (值<span class="hljs-number">1</span>, 值<span class="hljs-number">2.</span>..)...;<br><span class="hljs-comment">-- 添加全部字段的值，也可以在表名后写全部字段值进行添加，，批量添加则在value后跟多组值</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> 表名 <span class="hljs-keyword">VALUES</span> (值<span class="hljs-number">1</span>, 值<span class="hljs-number">2</span>, 值<span class="hljs-number">3.</span>..);<br><br><span class="hljs-comment">-- 修改</span><br><span class="hljs-comment">-- 根据 WHERE条件 修改，不指定 WHERE 则修改表中全部数据！！！</span><br><span class="hljs-comment">-- 修改多个字段SET后多组用“,”隔开</span><br><span class="hljs-keyword">UPDATE</span> 表名 <span class="hljs-keyword">SET</span> 字段<span class="hljs-number">1</span><span class="hljs-operator">=</span>值<span class="hljs-number">1</span>, 字段<span class="hljs-number">2</span><span class="hljs-operator">=</span>值<span class="hljs-number">2.</span>.. <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-number">1</span>;<br><br><span class="hljs-comment">-- 删除</span><br><span class="hljs-comment">-- 根据 WHERE条件 删除，不指定 WHERE 则删除表中全部数据！！！</span><br><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> 表名 <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-number">1</span>;<br><br></code></pre></td></tr></table></figure><h1 id="DQL-Data-Query-Language-数据查询语言"><a href="#DQL-Data-Query-Language-数据查询语言" class="headerlink" title="DQL(Data Query Language)数据查询语言"></a>DQL(Data Query Language)数据查询语言</h1><p>用来查询数据库中表的记录<br>查询的完整写法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span><br>字段列表<br><span class="hljs-keyword">FROM</span><br>表名<br><span class="hljs-keyword">WHERE</span><br>条件列表<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span><br>分组字段<br><span class="hljs-keyword">HAVING</span><br>分组后条件<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span><br>排序字段<br>LIMIT<br>分页限定<br></code></pre></td></tr></table></figure><h2 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查询所有字段的数据</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> 表名;<br><br><span class="hljs-comment">-- 查询指定字段的数据</span><br><span class="hljs-keyword">SELECT</span> 字段<span class="hljs-number">1</span>,字段<span class="hljs-number">2.</span>.. <span class="hljs-keyword">FROM</span> 表名;<br><br><span class="hljs-comment">-- 查询的数据去重</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> 字段 <span class="hljs-keyword">FROM</span> 表名;<br><br><span class="hljs-comment">-- 起别名 AS, AS可以省略</span><br><span class="hljs-keyword">SELECT</span> 字段<span class="hljs-number">1</span> <span class="hljs-keyword">AS</span> 别名<span class="hljs-number">1</span>, 字段<span class="hljs-number">2</span> <span class="hljs-keyword">AS</span> 别名<span class="hljs-number">2</span> <span class="hljs-keyword">FROM</span> 表名;<br><span class="hljs-keyword">SELECT</span> 字段<span class="hljs-number">1</span> 别名<span class="hljs-number">1</span>, 字段<span class="hljs-number">2</span> 别名<span class="hljs-number">2</span> <span class="hljs-keyword">FROM</span> 表名;<br></code></pre></td></tr></table></figure><h2 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h2><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 语法</span><br><span class="hljs-keyword">SELECT</span> 字段列表 <span class="hljs-keyword">FROM</span> 表名 <span class="hljs-keyword">WHERE</span> 条件列表<br></code></pre></td></tr></table></figure><h3 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h3><table><thead><tr><th><strong>符号</strong></th><th><strong>功能</strong></th></tr></thead><tbody><tr><td>&#x3D;</td><td>等于</td></tr><tr><td>&gt;</td><td>大于</td></tr><tr><td>&gt;&#x3D;</td><td>大于等于</td></tr><tr><td>&lt;</td><td>小于</td></tr><tr><td>&lt;&#x3D;</td><td>小于等于</td></tr><tr><td>&lt;&gt;或!&#x3D;</td><td>不等于</td></tr><tr><td>BETWEEN…AND…</td><td>在某个范围内（都包含）</td></tr><tr><td>IN(…)</td><td>多选一</td></tr><tr><td>LIKE 占位符</td><td>模糊查询 _单个任意字符 %多个任意字符 []指定范围([a-z])或者集合[abcd]</td></tr><tr><td>IS NULL</td><td>是NULL</td></tr><tr><td>IS NOT NULL</td><td>不是NULL</td></tr><tr><td>AND或&amp;&amp;</td><td>并且</td></tr><tr><td>OR或&#124;&#124;</td><td>或者</td></tr><tr><td>NOT或!</td><td>不</td></tr></tbody></table><h2 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 语法 排序方式分为 ASC 升序  DESC降序</span><br><span class="hljs-comment">-- 如果有多个排序条件，第一个数据一样时，才会根据第二个进行排序...</span><br><span class="hljs-keyword">SELECT</span> 字段列表 <span class="hljs-keyword">FROM</span> 表名 <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> 字段<span class="hljs-number">1</span> [排序方式<span class="hljs-number">1</span>], 字段<span class="hljs-number">2</span> [排序方式<span class="hljs-number">2</span>];<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span>  表名 <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> age <span class="hljs-keyword">ASC</span>, name <span class="hljs-keyword">DESC</span>;<br></code></pre></td></tr></table></figure><h2 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h2><p>聚合函数就是将一列数据（某个字段的数据）进行计算（纵向计算）。</p><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 注意！！！所有聚合函数都不会计算null值</span><br><span class="hljs-keyword">SELECT</span> 聚合函数(字段名) <span class="hljs-keyword">from</span> 表名;<br></code></pre></td></tr></table></figure><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><table><thead><tr><th><strong>函数名</strong></th><th><strong>功能</strong></th></tr></thead><tbody><tr><td>count(字段)</td><td>统计数量（一般选择没有null的列，建议写*）</td></tr><tr><td>max(字段)</td><td>最大值</td></tr><tr><td>min(字段)</td><td>最小值</td></tr><tr><td>sum(字段)</td><td>求和</td></tr><tr><td>avg(字段)</td><td>平均值</td></tr></tbody></table><h2 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h2><p>注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义！！！</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 字段列表 <span class="hljs-keyword">FROM</span> 表名 [<span class="hljs-keyword">WHERE</span> 分组前条件查询] <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> 分组字段名 [<span class="hljs-keyword">HAVING</span> 分组后条件过滤];<br></code></pre></td></tr></table></figure><p>where与having区别：</p><ul><li>执行实际不同：where是在分组前执行，不满足where条件的不进行分组；having是分组后执行，对分组后的数据进行过滤。</li><li>可以判断的条件不同：where不能对聚合函数进行判断，而having可以。</li></ul><h2 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h2><p>注意：索引从0开始！！！</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 字段列表 <span class="hljs-keyword">FROM</span> 数据库 LIMIT 起始索引, 查的条数;<br></code></pre></td></tr></table></figure><p>起始索引 &#x3D; (当前页码 - 1) * 查的条数</p><h1 id="DCL-Data-Control-Language-数据控制语言"><a href="#DCL-Data-Control-Language-数据控制语言" class="headerlink" title="DCL(Data Control Language)数据控制语言"></a>DCL(Data Control Language)数据控制语言</h1><p> 用来定义数据库的访问权限和安全级别，及创建用户 DML简单理解就是对数据库进行权限控制。比如我让某一个数据库表只能让某一个用户进行操作等</p><h1 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h1><h2 id="分类-1"><a href="#分类-1" class="headerlink" title="分类"></a>分类</h2><table><thead><tr><th>类型</th><th>关键字</th><th>描述</th></tr></thead><tbody><tr><td>非空约束</td><td>NOT NULL</td><td>所有列中数据不允许有null值</td></tr><tr><td>唯一约束</td><td>UNIQUE</td><td>所有列中数据不能相同</td></tr><tr><td>主键约束</td><td>PRIMARY KEY</td><td>主键是数据的唯一标识，要求唯一且非空。</td></tr><tr><td>检查约束</td><td>CHECK</td><td>保证某一列数据在某个范围.注意：mysql不支持检查约束，只能通过代码进行限制。</td></tr><tr><td>默认约束</td><td>DEFAULT</td><td>添加默认值</td></tr><tr><td>外键约束</td><td>FOREIGN KEY</td><td>外键用来让两张表的数据建立连接</td></tr></tbody></table><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 部门表 （自动增长示例）</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> tb_dept(<br>id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key auto_increment,<br>dep_name <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>),<br>addr <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>)<br>);<br><br><span class="hljs-comment">-- =================== 外键约束语法 =====================</span><br><span class="hljs-comment">-- 创建表时添加外键约束语法</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> 表名(<br>  列名 数据类型,<br>  …<br>  [<span class="hljs-keyword">CONSTRAINT</span>] [外键名称] <span class="hljs-keyword">FOREIGN</span> KEY(外键列名) <span class="hljs-keyword">REFERENCES</span> 主表(主表列名)<br>);<br><span class="hljs-comment">-- 建完表后添加外键约束</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> 外键名称 <span class="hljs-keyword">FOREIGN</span> KEY (外键字段名称) <span class="hljs-keyword">REFERENCES</span> 主表名称(主表列名称);<br><span class="hljs-comment">-- 删除外键约束</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">FOREIGN</span> KEY 外键名称;<br><span class="hljs-comment">-- =================== 外键约束语法 =====================</span><br><br><span class="hljs-comment">-- 员工表 （添加外链示例）</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> tb_emp(<br>id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key auto_increment,<br>name <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>),<br>age <span class="hljs-type">int</span>,<br>dep_id <span class="hljs-type">int</span>,<br><span class="hljs-comment">-- 添加外键 dep_id,关联 dept 表的id主键</span><br><span class="hljs-keyword">CONSTRAINT</span> fk_emp_dept <span class="hljs-keyword">FOREIGN</span> KEY(dep_id) <span class="hljs-keyword">REFERENCES</span> tb_dept(id)<br>);<br></code></pre></td></tr></table></figure><h1 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 从表名1和表名2中查询所有字段（会把每种交集情况的数据全部查询出来，一般需要去除无效数据）</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> 表名<span class="hljs-number">1</span>, 表名<span class="hljs-number">2</span>;<br><br><span class="hljs-comment">-- 去除无效数据</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> 表名<span class="hljs-number">1</span>, 表名<span class="hljs-number">2</span> <span class="hljs-keyword">WHERE</span> 表名<span class="hljs-number">1.</span>字段(一般是外键字段) <span class="hljs-operator">=</span> 表名<span class="hljs-number">2.</span>字段(被外键连接的字段)<br></code></pre></td></tr></table></figure><h2 id="内连接查询"><a href="#内连接查询" class="headerlink" title="内连接查询"></a>内连接查询</h2><p>相当于查询两表交集数据。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 隐式内连接</span><br><span class="hljs-keyword">SELECT</span> 字段列表 <span class="hljs-keyword">FROM</span> 表名<span class="hljs-number">1</span>, 表名<span class="hljs-number">2</span>,... <span class="hljs-keyword">WHERE</span> 条件;<br><br><span class="hljs-comment">-- 显示内连接 INNER 可省略</span><br><span class="hljs-keyword">SELECT</span> 字段列表 <span class="hljs-keyword">FROM</span> 表名<span class="hljs-number">1</span> [<span class="hljs-keyword">INNER</span>] <span class="hljs-keyword">JOIN</span> 表<span class="hljs-number">2</span> <span class="hljs-keyword">ON</span> 条件;<br></code></pre></td></tr></table></figure><h1 id="外连接查询"><a href="#外连接查询" class="headerlink" title="外连接查询"></a>外连接查询</h1><p>分为左外连接，右外连接<br>左外连接：查询左边表所有数据和交集部分数据<br>右外连接：查询右边表所有数据和交集部分数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 左外连接</span><br><span class="hljs-keyword">SELECT</span> 字段列表 <span class="hljs-keyword">FROM</span> 表名<span class="hljs-number">1</span> <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> 表名<span class="hljs-number">2</span> <span class="hljs-keyword">ON</span> 条件;<br><br><span class="hljs-comment">-- 右外连接</span><br><span class="hljs-keyword">SELECT</span> 字段列表 <span class="hljs-keyword">FROM</span> 表名<span class="hljs-number">1</span> <span class="hljs-keyword">RIGHT</span> <span class="hljs-keyword">JOIN</span> 表名<span class="hljs-number">2</span> <span class="hljs-keyword">ON</span> 条件;<br></code></pre></td></tr></table></figure><h1 id="子查询（嵌套查询）"><a href="#子查询（嵌套查询）" class="headerlink" title="子查询（嵌套查询）"></a>子查询（嵌套查询）</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 示例如下:</span><br><span class="hljs-keyword">SELECT</span> 字段名 <span class="hljs-keyword">FROM</span> 表名 <span class="hljs-keyword">WHERE</span> xxx字段 <span class="hljs-operator">&gt;</span> (<span class="hljs-keyword">SELECT</span> xxx字段 <span class="hljs-keyword">FROM</span> 表名 <span class="hljs-keyword">WHERE</span> 条件);<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> emp <span class="hljs-keyword">WHERE</span> dep_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> id <span class="hljs-keyword">from</span> dept <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;市场部&#x27;</span> <span class="hljs-keyword">OR</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;财务部&#x27;</span>);<br></code></pre></td></tr></table></figure><h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><p>数据库事务是一个操作序列，包含了一组数据库命令，要么同时成功，要么同时失败；一组命令中其中一个出错之前执行的命令都可以被回滚。</p><h2 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 开启事务</span><br><span class="hljs-keyword">START</span> TRANSACTION;<br><span class="hljs-comment">-- 或者</span><br><span class="hljs-keyword">BEGIN</span>;<br><br><span class="hljs-comment">-- 提交事务</span><br><span class="hljs-keyword">COMMIT</span>;<br><br><span class="hljs-comment">-- 回滚事务</span><br><span class="hljs-keyword">ROLLBACK</span>;<br></code></pre></td></tr></table></figure><p>mysql中事务是自动提交的，不添加事务执行sql语句，语句执行完会自动提交事务。<br>通过<code>SELECT @@autocommit;</code>查询提交方式，<code>SET @@autocommit = 1 || 0;</code> 修改（1自动提交，0手动提交）。</p><h2 id="事务四大特征（ACID）"><a href="#事务四大特征（ACID）" class="headerlink" title="事务四大特征（ACID）"></a>事务四大特征（ACID）</h2><ul><li>原子性（Atomicity）: 事务是不可分割的最小操作单位，要么同时成功，要么同时失败</li><li>一致性（Consistency） :事务完成时，必须使所有的数据都保持一致状态</li><li>隔离性（Isolation） :多个事务之间，操作的可见性</li><li>持久性（Durability） :事务一旦提交或回滚，它对数据库中的数据的改变就是永久的</li></ul><h1 id="连接池-Druid（德鲁伊）"><a href="#连接池-Druid（德鲁伊）" class="headerlink" title="连接池 - Druid（德鲁伊）"></a>连接池 - Druid（德鲁伊）</h1><ul><li>导入jar包</li><li>定义配置文件</li><li>加载配置文件</li><li>获取数据库连接池</li><li>获取连接</li><li><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">driverClassName</span>=<span class="hljs-string">com.mysql.jdbc.Driver</span><br><span class="hljs-attr">url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/dbname?useSSL=false&amp;useServerPrepStmts=true</span><br><span class="hljs-attr">username</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">password</span>=<span class="hljs-string">root</span><br><span class="hljs-comment"># 初始化连接数量</span><br><span class="hljs-attr">initialSize</span>=<span class="hljs-string">5</span><br><span class="hljs-comment"># 最大连接数</span><br><span class="hljs-attr">maxActive</span>=<span class="hljs-string">10</span><br><span class="hljs-comment"># 最大等待时间</span><br><span class="hljs-attr">maxWait</span>=<span class="hljs-string">3000</span><br></code></pre></td></tr></table></figure></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DruidDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//  1 导入连接池的jar包 druid</span><br>        <span class="hljs-comment">//  2 定义配置文件</span><br>        <span class="hljs-comment">//  3 加载配置文件</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">prop</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        prop.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;02-jdbc/src/druid.properties&quot;</span>));<br>        <span class="hljs-comment">//  4 获取数据库连接池对象</span><br>        <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> DruidDataSourceFactory.createDataSource(prop);<br>        <span class="hljs-comment">//  5 获取连接</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br>        <span class="hljs-comment">//  获取到连接对象以后的操作与之前一样...</span><br>        <span class="hljs-type">Statement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> conn.createStatement();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;UPDATE users set name=&#x27;rocyuan&#x27; where id=1&quot;</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> stmt.executeUpdate(sql);<br>        System.out.println(code);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>mysql</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【mysql】MySQL安装-windows</title>
    <link href="/mysql/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85-windows/"/>
    <url>/mysql/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85-windows/</url>
    
    <content type="html"><![CDATA[<h2 id="一、下载"><a href="#一、下载" class="headerlink" title="一、下载"></a>一、下载</h2><p>点开下面的链接：<br><a href="https://downloads.mysql.com/archives/community/">https://downloads.mysql.com/archives/community/</a></p><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/1.png"></p><p>选择选择和自己<strong>系统位数</strong>相对应的版本点击右边的<code>Download</code>，此时会进到另一个页面，同样在接近页面底部的地方找到如下图所示的位置：</p><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/2.png"></p><p>不用理会上面的登录和注册按钮，直接点击<code>No thanks, just start my download.</code>就可以下载。</p><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/3.png"></p><hr><h2 id="二、安装-解压"><a href="#二、安装-解压" class="headerlink" title="二、安装(解压)"></a>二、安装(解压)</h2><p>下载完成后我们得到的是一个压缩包，将其解压，我们就可以得到MySQL 5.7.24的软件本体了(就是一个文件夹)，我们可以把它放在你想安装的位置。</p><hr><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/4.png"></p><h2 id="三、配置"><a href="#三、配置" class="headerlink" title="三、配置"></a>三、配置</h2><h3 id="1-添加环境变量"><a href="#1-添加环境变量" class="headerlink" title="1. 添加环境变量"></a>1. 添加环境变量</h3><blockquote><p>环境变量里面有很多选项，这里我们只用到<code>Path</code>这个参数。为什么在初始化的开始要添加环境变量呢？<br>在黑框(即CMD)中输入一个可执行程序的名字，Windows会先在环境变量中的<code>Path</code>所指的路径中寻找一遍，如果找到了就直接执行，没找到就在当前工作目录找，如果还没找到，就报错。我们添加环境变量的目的就是能够在任意一个黑框直接调用MySQL中的相关程序而不用总是修改工作目录，大大简化了操作。</p></blockquote><p>右键<code>此电脑</code>→<code>属性</code>，点击<code>高级系统设置</code></p><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/5.png"></p><p>点击<code>环境变量</code></p><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/6.png"></p><p>在<code>系统变量</code>中新建MYSQL_HOME</p><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/7.png"></p><p>在<code>系统变量</code>中找到并<strong>双击</strong><code>Path</code></p><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/8.png"></p><p>点击<code>新建</code></p><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/9.png"></p><p>最后点击确定。</p><p><strong>如何验证是否添加成功？</strong></p><p>右键开始菜单(就是屏幕左下角)，选择<code>命令提示符(管理员)</code>，打开黑框，敲入<code>mysql</code>，回车。<br>如果提示<code>Can&#39;t connect to MySQL server on &#39;localhost&#39;</code>则证明添加成功；<br>如果提示<code>mysql不是内部或外部命令，也不是可运行的程序或批处理文件</code>则表示添加添加失败，请重新检查步骤并重试。</p><h3 id="2-新建配置文件"><a href="#2-新建配置文件" class="headerlink" title="2. 新建配置文件"></a>2. 新建配置文件</h3><p>新建一个文本文件，内容如下：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">[mysql]</span><br><span class="hljs-attr">default-character-set</span>=<span class="hljs-string">utf8</span><br><br><span class="hljs-attr">[mysqld]</span><br><span class="hljs-attr">character-set-server</span>=<span class="hljs-string">utf8</span><br><span class="hljs-attr">default-storage-engine</span>=<span class="hljs-string">INNODB</span><br><span class="hljs-attr">sql_mode</span>=<span class="hljs-string">STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span><br></code></pre></td></tr></table></figure><p>把上面的文本文件另存为，在保存类型里选<code>所有文件 (*.*)</code>，文件名叫<code>my.ini</code>，存放的路径为MySQL的<code>根目录</code>(例如我的是<code>D:\software\mysql-5.7.24-winx64</code>,根据自己的MySQL目录位置修改)。</p><h3 id="3-初始化MySQL"><a href="#3-初始化MySQL" class="headerlink" title="3. 初始化MySQL"></a>3. 初始化MySQL</h3><p>在刚才的黑框中敲入<code>mysqld --initialize-insecure</code>，回车，稍微等待一会，如果出现没有出现报错信息(如下图)则证明data目录初始化没有问题，此时再查看MySQL目录下已经有data目录生成。</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">mysqld <span class="hljs-comment">--initialize-insecure</span><br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/10.png"></p><p>tips：如果出现如下错误</p><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/11.png"></p><p>是由于权限不足导致的，去<code>C:\Windows\System32</code> 下以管理员方式运行 cmd.exe</p><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/12.png"></p><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/13.png"></p><h3 id="4-注册MySQL服务"><a href="#4-注册MySQL服务" class="headerlink" title="4. 注册MySQL服务"></a>4. 注册MySQL服务</h3><p>在黑框里敲入<code>mysqld -install</code>，回车。</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">mysqld -<span class="hljs-keyword">install</span><br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/14.png"></p><p>现在你的计算机上已经安装好了MySQL服务了。</p><p>MySQL服务器</p><h3 id="5-启动MySQL服务"><a href="#5-启动MySQL服务" class="headerlink" title="5. 启动MySQL服务"></a>5. 启动MySQL服务</h3><p>在黑框里敲入<code>net start mysql</code>，回车。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">net start mysql  <span class="hljs-comment">// 启动mysql服务</span><br>    <br>net stop mysql  <span class="hljs-comment">// 停止mysql服务</span><br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/15.png"></p><h3 id="6-修改默认账户密码"><a href="#6-修改默认账户密码" class="headerlink" title="6. 修改默认账户密码"></a>6. 修改默认账户密码</h3><p>在黑框里敲入<code>mysqladmin -u root password 1234</code>，这里的<code>1234</code>就是指默认管理员(即root账户)的密码，可以自行修改成你喜欢的。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mysqladmin -uroot -p password<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/16.png"></p><p><strong>至此，MySQL 5.7 解压版安装完毕！</strong></p><hr><h2 id="四、登录MySQL"><a href="#四、登录MySQL" class="headerlink" title="四、登录MySQL"></a>四、登录MySQL</h2><p>右键开始菜单，选择<code>命令提示符</code>，打开黑框。<br>在黑框中输入，<code>mysql -uroot -p1234</code>，回车，出现下图且左下角为<code>mysql&gt;</code>，则登录成功。</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">mysql</span> -uroot -p1234<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/17.png"></p><p><strong>到这里你就可以开始你的MySQL之旅了！</strong></p><p>退出mysql：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-keyword">exit</span><br>quit<br></code></pre></td></tr></table></figure><p>登陆参数：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">mysql</span> -u用户名 -p密码 -h要连接的mysql服务器的ip地址(默认<span class="hljs-number">127.0.0.1</span>) -P端口号(默认<span class="hljs-number">3306</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="五、卸载MySQL"><a href="#五、卸载MySQL" class="headerlink" title="五、卸载MySQL"></a>五、卸载MySQL</h2><p>如果你想卸载MySQL，也很简单。</p><p>右键开始菜单，选择<code>命令提示符(管理员)</code>，打开黑框。</p><ol><li>敲入<code>net stop mysql</code>，回车。</li></ol><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">net stop mysql<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/18.png"></p><ol start="2"><li>再敲入<code>mysqld -remove mysql</code>，回车。</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">mysqld -<span class="hljs-built_in">remove</span> mysql<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90mysql%E3%80%91MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/19.png"></p><ol start="3"><li>最后删除MySQL目录及相关的环境变量。</li></ol><p><strong>至此，MySQL卸载完成！</strong></p>]]></content>
    
    
    <categories>
      
      <category>mysql</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【linux】应用市场</title>
    <link href="/linux/%E3%80%90linux%E3%80%91%E5%BA%94%E7%94%A8%E5%B8%82%E5%9C%BA/"/>
    <url>/linux/%E3%80%90linux%E3%80%91%E5%BA%94%E7%94%A8%E5%B8%82%E5%9C%BA/</url>
    
    <content type="html"><![CDATA[<p>玲珑官网：<a href="https://linglong.dev/">https://linglong.dev/</a><br>玲珑网页商店：<a href="https://store.linglong.dev/">https://store.linglong.dev/</a><br>优麒麟应用商店：<a href="https://ubuntukylin.com/applications/">https://ubuntukylin.com/applications/</a></p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【linux】编译安装常用环境</title>
    <link href="/linux/%E3%80%90linux%E3%80%91%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E7%8E%AF%E5%A2%83/"/>
    <url>/linux/%E3%80%90linux%E3%80%91%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E7%8E%AF%E5%A2%83/</url>
    
    <content type="html"><![CDATA[<h1 id="centos"><a href="#centos" class="headerlink" title="centos"></a>centos</h1><p>编译安装 nginx、python3、git、php、mysql 依赖集合</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install -y make cmake gcc gcc-c++ zlib zlib-devel pcre pcre-devel openssl openssl-devel libffi-devel libtool curl-devel expat-devel gettext-devel perl perl-devel perl-ExtUtils-Embed perl-ExtUtils-MakeMaker autoconf libxml2 libxml2-devel bzip2-devel libcurl-devel libjpeg-devel libpng-devel freetype-devel gmp-devel libmcrypt-devel libicu-devel sqlite-devel oniguruma-devel readline-devel ncurses ncurses-devel libaio libaio-devel libtirpc-devel rpcgen libxslt-devel gd-devel glibc-devel GeoIP GeoIP-devel GeoIP-data<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【linux】分区方案参考</title>
    <link href="/linux/%E3%80%90linux%E3%80%91%E5%88%86%E5%8C%BA%E6%96%B9%E6%A1%88%E5%8F%82%E8%80%83/"/>
    <url>/linux/%E3%80%90linux%E3%80%91%E5%88%86%E5%8C%BA%E6%96%B9%E6%A1%88%E5%8F%82%E8%80%83/</url>
    
    <content type="html"><![CDATA[<p>个人 linux 分区方案参考，以 16 GB 内存 + 1TB 硬盘为例</p><table><thead><tr><th>分区</th><th>大小</th></tr></thead><tbody><tr><td>&#x2F;boot&#x2F;efi</td><td>200 MB</td></tr><tr><td>&#x2F;boot</td><td>1024 MB</td></tr><tr><td>swap</td><td>4 GB（物理内存 &gt;&#x3D; 16 GB ? 4 GB : 8 GB）</td></tr><tr><td>&#x2F;usr</td><td>100 GB（约总大小的 1&#x2F;10）</td></tr><tr><td>&#x2F;var</td><td>100 GB（约总大小的 1&#x2F;10）</td></tr><tr><td>&#x2F;</td><td>20 GB</td></tr><tr><td>&#x2F;data 或 &#x2F;home</td><td>剩余空间</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【nginx】开启目录模式</title>
    <link href="/nginx/%E3%80%90nginx%E3%80%91%E5%BC%80%E5%90%AF%E7%9B%AE%E5%BD%95%E6%A8%A1%E5%BC%8F/"/>
    <url>/nginx/%E3%80%90nginx%E3%80%91%E5%BC%80%E5%90%AF%E7%9B%AE%E5%BD%95%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span><br>&#123;<br><span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;<br>  <span class="hljs-attribute">server_name</span> <span class="hljs-number">192.168.0.147</span>;<br>  <span class="hljs-attribute">index</span> index.php index.html index.htm default.php default.htm default.html;<br>  <span class="hljs-attribute">root</span> /www/wwwroot/<span class="hljs-number">192.168.0.147</span>;<br><br><span class="hljs-comment"># 目录模式配置</span><br>  <span class="hljs-section">location</span> /<br>  &#123;<br>    <span class="hljs-attribute">autoindex</span> <span class="hljs-literal">on</span>; <span class="hljs-comment"># 开启目录模式</span><br>    <span class="hljs-attribute">autoindex_exact_size</span> <span class="hljs-literal">off</span>; <span class="hljs-comment"># 关闭准确大小（显示KB\MB\GB）</span><br>    <span class="hljs-attribute">autoindex_localtime</span> <span class="hljs-literal">on</span>; <span class="hljs-comment"># 显示服务器本地时间</span><br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】vuedraggable中文文档</title>
    <link href="/vue/%E3%80%90vue%E3%80%91vuedraggable%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3/"/>
    <url>/vue/%E3%80%90vue%E3%80%91vuedraggable%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3/</url>
    
    <content type="html"><![CDATA[<p>itxst（IT小书童）<a href="https://www.itxst.com/vue-draggable/tutorial.html">https://www.itxst.com/vue-draggable/tutorial.html</a></p>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】rollup使用</title>
    <link href="/node/%E3%80%90node%E3%80%91rollup%E4%BD%BF%E7%94%A8/"/>
    <url>/node/%E3%80%90node%E3%80%91rollup%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>项目中使用的开源插件需要进行二次开发，插件源码生产环境使用 rollup 打包构建，学习了下 rollup，记录下。</p><h1 id="安装-rollup"><a href="#安装-rollup" class="headerlink" title="安装 rollup"></a>安装 rollup</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -D rollup<br></code></pre></td></tr></table></figure><h1 id="配置文件方式"><a href="#配置文件方式" class="headerlink" title="配置文件方式"></a>配置文件方式</h1><p>创建 <code>rollup.config.js</code></p><p><img src="/../../assets/%E3%80%90rollup%E3%80%91rollup%E4%BD%BF%E7%94%A8/1.png"></p><p>package.json 配置脚本</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;build:lib&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;rollup -c rollup.config.js&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><h1 id="JSAPI-方式"><a href="#JSAPI-方式" class="headerlink" title="JSAPI 方式"></a>JSAPI 方式</h1><p>创建 <code>build.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; rollup &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rollup&quot;</span>;<br><br><span class="hljs-comment">// 接收一个 RollupOptions 对象</span><br><span class="hljs-title function_">rollup</span>(&#123;<br>  <span class="hljs-attr">input</span>: <span class="hljs-string">&quot;./lib/index.js&quot;</span>,<br>  <span class="hljs-attr">external</span>: [],<br>  <span class="hljs-attr">plugins</span>: [],<br>&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">bundle</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// 接收一个 OutputOptions 对象</span><br>  bundle.<span class="hljs-title function_">write</span>(&#123;<br>    <span class="hljs-attr">format</span>: <span class="hljs-string">&quot;es&quot;</span>,<br>    <span class="hljs-attr">file</span>: <span class="hljs-string">`dist/roc.es.js`</span>,<br>    <span class="hljs-attr">compact</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">banner</span>: <span class="hljs-string">&quot;/** 文档注释... */&quot;</span>,<br>  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure><p>package.json 配置脚本</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;build:lib&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;node build.js&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><h1 id="配置项"><a href="#配置项" class="headerlink" title="配置项"></a>配置项</h1><p>无论使用哪种方式，配置项目是相同的，以下是常用的配置项参考。</p><h2 id="常用配置"><a href="#常用配置" class="headerlink" title="常用配置"></a>常用配置</h2><p>详细配置参考官网</p><p>中文站：<a href="https://www.rollupjs.com/guide/big-list-of-options">https://www.rollupjs.com/guide/big-list-of-options</a></p><p>英文官网：<a href="https://rollupjs.org/guide/en/#big-list-of-options">https://rollupjs.org/guide/en/#big-list-of-options</a></p><h3 id="input"><a href="#input" class="headerlink" title="input"></a>input</h3><p>入口文件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>  <span class="hljs-attr">input</span>: <span class="hljs-string">&quot;./lib/index.js&quot;</span>,<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="output"><a href="#output" class="headerlink" title="output"></a>output</h3><p>出口文件，当需要打多个 js 包时（xxx.js 与 xxx.min.js）传数组</p><h4 id="file"><a href="#file" class="headerlink" title="file"></a>file</h4><p>要写入的文件</p><h4 id="dir"><a href="#dir" class="headerlink" title="dir"></a>dir</h4><p>放置所有生成的块的目录。如果生成多个块，则需要此选项。否则，可以使用<code>file</code>选项。</p><h4 id="format"><a href="#format" class="headerlink" title="format"></a>format</h4><p>支持六种输出格式：amd &#x2F; cjs &#x2F;es &#x2F; iife &#x2F; umd &#x2F; system(不常用，但官网有)</p><h4 id="name"><a href="#name" class="headerlink" title="name"></a>name</h4><p>当<code>format</code>为<code>iife</code>和<code>umd</code>时必须提供，将作为全局变量挂在 window(浏览器环境)下：<br>window[name 值]&#x3D;…</p><h4 id="entryFileNames"><a href="#entryFileNames" class="headerlink" title="entryFileNames"></a>entryFileNames</h4><p>打包资源名格式配置，默认[name].js，一共三种格式 format &#x2F; hash:长度 &#x2F; name</p><h4 id="banner"><a href="#banner" class="headerlink" title="banner"></a>banner</h4><p>打包到块中的字符串，常用与顶部文档注释</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> &#123; terser &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;rollup-plugin-terser&quot;</span>);<br><br>&#123;<br>  <span class="hljs-attr">output</span>: [<br>    &#123;<br>      <span class="hljs-attr">dir</span>: <span class="hljs-string">&quot;dist&quot;</span>,<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Roc&quot;</span>,<br>      <span class="hljs-attr">entryFileNames</span>: <span class="hljs-string">&quot;roc.min.js&quot;</span>,<br>      <span class="hljs-attr">format</span>: <span class="hljs-string">&quot;umd&quot;</span>,<br>      <span class="hljs-attr">banner</span>: <span class="hljs-string">&quot;/** 文档注释... */&quot;</span>,<br>      <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">terser</span>()], <span class="hljs-comment">// 给这个出口文件 单独配置插件</span><br>    &#125;,<br>    <span class="hljs-comment">// ...</span><br>  ];<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="external"><a href="#external" class="headerlink" title="external"></a>external</h3><p>告诉 rollup 不要将 某些库(下列示例：jquery) 打包，而作为外部依赖。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>  <span class="hljs-attr">external</span>: [<span class="hljs-string">&quot;jquery&quot;</span>];<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="globals"><a href="#globals" class="headerlink" title="globals"></a>globals</h3><p>告诉 <code>rollup</code> <code>jquery</code> 是外部依赖，并且 <code>jquery</code> 模块的 ID 为全局变量 <code>$</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>  <span class="hljs-string">&quot;jquery&quot;</span>: <span class="hljs-string">&quot;$&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="plugins"><a href="#plugins" class="headerlink" title="plugins"></a>plugins</h3><p>rollup 插件配置，比如引入压缩代码插件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> &#123; terser &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;rollup-plugin-terser&quot;</span>);<br><br>&#123;<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">terser</span>()];<br>&#125;<br></code></pre></td></tr></table></figure><p><code>plugins</code>配置，需要熟悉很多 rollup 插件的用途及配置。</p><h1 id="rollup-插件"><a href="#rollup-插件" class="headerlink" title="rollup 插件"></a>rollup 插件</h1><p>记录使用到的插件，官方 github 或 npm 仓库链接地址中有详细配置说明。</p><h2 id="rollup-plugin-buble"><a href="#rollup-plugin-buble" class="headerlink" title="@rollup&#x2F;plugin-buble"></a>@rollup&#x2F;plugin-buble</h2><p><a href="https://github.com/rollup/plugins/tree/master/packages/buble/#readme">https://github.com/rollup/plugins/tree/master/packages/buble/#readme</a></p><p>使用 Buble 编译器转换 ES6+代码的插件。</p><h2 id="rollup-plugin-commonjs"><a href="#rollup-plugin-commonjs" class="headerlink" title="@rollup&#x2F;plugin-commonjs"></a>@rollup&#x2F;plugin-commonjs</h2><p><a href="https://github.com/rollup/plugins/tree/master/packages/commonjs/#readme">https://github.com/rollup/plugins/tree/master/packages/commonjs/#readme</a></p><p>用于将 CommonJS 模块转换为 ES6</p><h2 id="rollup-plugin-terser"><a href="#rollup-plugin-terser" class="headerlink" title="@rollup&#x2F;plugin-terser"></a><strong>@rollup&#x2F;plugin-terser</strong></h2><p><a href="https://github.com/rollup/plugins/tree/master/packages/terser#readme">https://github.com/rollup/plugins/tree/master/packages/terser#readme</a></p><p>Rollup 插件，用于生成精简的 js 包（min.js）</p><h2 id="rollup-plugin-javascript-obfuscator"><a href="#rollup-plugin-javascript-obfuscator" class="headerlink" title="rollup-plugin-javascript-obfuscator"></a>rollup-plugin-javascript-obfuscator</h2><p><a href="https://www.npmjs.com/package/rollup-plugin-javascript-obfuscator">https://www.npmjs.com/package/rollup-plugin-javascript-obfuscator</a></p><p>js 代码混淆处理插件</p><h2 id="rollup-plugin-babel"><a href="#rollup-plugin-babel" class="headerlink" title="@rollup&#x2F;plugin-babel"></a>@rollup&#x2F;plugin-babel</h2><p><a href="https://github.com/rollup/plugins/tree/master/packages/babel#readme">https://github.com/rollup/plugins/tree/master/packages/babel#readme</a></p><p>用于 Rollup 和 Babel 之间的无缝集成。</p><h2 id="rollup-plugin-node-resolve"><a href="#rollup-plugin-node-resolve" class="headerlink" title="@rollup&#x2F;plugin-node-resolve"></a>@rollup&#x2F;plugin-node-resolve</h2><p><a href="https://github.com/rollup/plugins/tree/master/packages/node-resolve/#readme">https://github.com/rollup/plugins/tree/master/packages/node-resolve/#readme</a></p><p>在 node_modules 中查找并捆绑第三方依赖项（使用后会将使用到的第三方依赖打包进来，不需要打包进来配合选项“external”使用）</p><h2 id="rollup-plugin-replace"><a href="#rollup-plugin-replace" class="headerlink" title="@rollup&#x2F;plugin-replace"></a>@rollup&#x2F;plugin-replace</h2><p><a href="https://github.com/rollup/plugins/tree/master/packages/replace#readme">https://github.com/rollup/plugins/tree/master/packages/replace#readme</a></p><p>打包时替换文件中的字符串</p><h2 id="rollup-plugin-node-externals"><a href="#rollup-plugin-node-externals" class="headerlink" title="rollup-plugin-node-externals"></a>rollup-plugin-node-externals</h2><p><a href="https://github.com/Septh/rollup-plugin-node-externals#readme">https://github.com/Septh/rollup-plugin-node-externals#readme</a></p><p>在汇总配置中自动将 NodeJS 内置模块和 npm 依赖项声明为“external（外部）”</p><h2 id="rollup-plugin-postcss"><a href="#rollup-plugin-postcss" class="headerlink" title="rollup-plugin-postcss"></a>rollup-plugin-postcss</h2><p><a href="https://github.com/egoist/rollup-plugin-postcss#readme">https://github.com/egoist/rollup-plugin-postcss#readme</a></p><p>Rollup 和 PostCSS 之间的无缝集成。</p><h2 id="rollup-plugin-visualizer"><a href="#rollup-plugin-visualizer" class="headerlink" title="rollup-plugin-visualizer"></a>rollup-plugin-visualizer</h2><p><a href="https://github.com/btd/rollup-plugin-visualizer">https://github.com/btd/rollup-plugin-visualizer</a></p><p>可视化并分析 Rollup 打包，以查看哪些模块正在占用空间。</p><h2 id="rollup-plugin-vue"><a href="#rollup-plugin-vue" class="headerlink" title="rollup-plugin-vue"></a>rollup-plugin-vue</h2><p><a href="https://www.npmjs.com/package/rollup-plugin-vue">https://www.npmjs.com/package/rollup-plugin-vue</a></p><p>vue SFC（.vue 文件）处理</p><h2 id="rollup-plugin-typescript"><a href="#rollup-plugin-typescript" class="headerlink" title="rollup-plugin-typescript"></a>rollup-plugin-typescript</h2><p><a href="https://github.com/rollup/rollup-plugin-typescript">https://github.com/rollup/rollup-plugin-typescript</a></p><p>ts 处理 已更换为：<code>@rollup/plugin-typescript</code> 但是与 vue3ts 配合打包出错！<br>可与 rollup-plugin-vue 配合解析 vue3 SFC ts</p><h2 id="vue-template-compiler"><a href="#vue-template-compiler" class="headerlink" title="vue-template-compiler"></a>vue-template-compiler</h2><p><a href="https://www.npmjs.com/package/vue-template-compiler">https://www.npmjs.com/package/vue-template-compiler</a></p><p>Vue 2.0 模板编译器</p><h2 id="rollup-plugin-typescript-1"><a href="#rollup-plugin-typescript-1" class="headerlink" title="@rollup&#x2F;plugin-typescript"></a>@rollup&#x2F;plugin-typescript</h2><p><a href="https://www.npmjs.com/package/@rollup/plugin-typescript">https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;@rollup&#x2F;plugin-typescript</a></p><p>Rollup 插件用于 Rollup 和 Typescript 之间的无缝集成。（依赖 tslib 模块 <code>npm install -D tslib</code>）</p><h2 id="babel-plugin-transform-class-properties"><a href="#babel-plugin-transform-class-properties" class="headerlink" title="@babel&#x2F;plugin-transform-class-properties"></a>@babel&#x2F;plugin-transform-class-properties</h2><p><a href="https://www.npmjs.com/package/@babel/plugin-transform-class-properties">https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;@babel&#x2F;plugin-transform-class-properties</a></p><p>用于将 ES2015 及更高版本的类属性（Class Properties）转换为 ES5 兼容的语法</p><h2 id="babel-plugin-transform-private-methods"><a href="#babel-plugin-transform-private-methods" class="headerlink" title="@babel&#x2F;plugin-transform-private-methods"></a>@babel&#x2F;plugin-transform-private-methods</h2><p><a href="https://www.npmjs.com/package/@babel/plugin-transform-private-methods">https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;@babel&#x2F;plugin-transform-private-methods</a></p><p>用于转换 class 私有类方法</p><h2 id="rollup-plugin-copy"><a href="#rollup-plugin-copy" class="headerlink" title="rollup-plugin-copy"></a>rollup-plugin-copy</h2><p><a href="https://www.npmjs.com/package/rollup-plugin-copy">https://www.npmjs.com/package/rollup-plugin-copy</a></p><p>复制文件和文件夹</p><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><h2 id="react-redux-官方-rollup-配置"><a href="#react-redux-官方-rollup-配置" class="headerlink" title="react-redux 官方 rollup 配置"></a>react-redux 官方 rollup 配置</h2><p>react-redux 库 rollup 配置文件：</p><p><a href="https://github.com/reduxjs/react-redux/blob/master/rollup.config.js">https://github.com/reduxjs/react-redux/blob/master/rollup.config.js</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> nodeResolve <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@rollup/plugin-node-resolve&quot;</span>;<br><span class="hljs-keyword">import</span> babel <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@rollup/plugin-babel&quot;</span>;<br><span class="hljs-keyword">import</span> replace <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@rollup/plugin-replace&quot;</span>;<br><span class="hljs-keyword">import</span> commonjs <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@rollup/plugin-commonjs&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; terser &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rollup-plugin-terser&quot;</span>;<br><span class="hljs-keyword">import</span> pkg <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./package.json&quot;</span>;<br><br><span class="hljs-keyword">const</span> env = process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span>;<br><br><span class="hljs-keyword">const</span> extensions = [<span class="hljs-string">&quot;.js&quot;</span>, <span class="hljs-string">&quot;.ts&quot;</span>, <span class="hljs-string">&quot;.tsx&quot;</span>, <span class="hljs-string">&quot;.json&quot;</span>];<br><br><span class="hljs-keyword">const</span> config = &#123;<br>  <span class="hljs-attr">input</span>: <span class="hljs-string">&quot;src/index.ts&quot;</span>,<br>  <span class="hljs-attr">external</span>: <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(pkg.<span class="hljs-property">peerDependencies</span> || &#123;&#125;).<span class="hljs-title function_">concat</span>(<span class="hljs-string">&quot;react-dom&quot;</span>),<br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-attr">format</span>: <span class="hljs-string">&quot;umd&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;ReactRedux&quot;</span>,<br>    <span class="hljs-attr">globals</span>: &#123;<br>      <span class="hljs-attr">react</span>: <span class="hljs-string">&quot;React&quot;</span>,<br>      <span class="hljs-attr">redux</span>: <span class="hljs-string">&quot;Redux&quot;</span>,<br>      <span class="hljs-string">&quot;react-dom&quot;</span>: <span class="hljs-string">&quot;ReactDOM&quot;</span>,<br>    &#125;,<br>  &#125;,<br>  <span class="hljs-attr">plugins</span>: [<br>    <span class="hljs-title function_">nodeResolve</span>(&#123;<br>      extensions,<br>    &#125;),<br>    <span class="hljs-title function_">babel</span>(&#123;<br>      <span class="hljs-attr">include</span>: <span class="hljs-string">&quot;src/**/*&quot;</span>,<br>      <span class="hljs-attr">exclude</span>: <span class="hljs-string">&quot;**/node_modules/**&quot;</span>,<br>      <span class="hljs-attr">babelHelpers</span>: <span class="hljs-string">&quot;runtime&quot;</span>,<br>      extensions,<br>    &#125;),<br>    <span class="hljs-title function_">replace</span>(&#123;<br>      <span class="hljs-string">&quot;process.env.NODE_ENV&quot;</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(env),<br>      <span class="hljs-attr">preventAssignment</span>: <span class="hljs-literal">true</span>,<br>    &#125;),<br>    <span class="hljs-title function_">commonjs</span>(),<br>  ],<br>&#125;;<br><br><span class="hljs-keyword">if</span> (env === <span class="hljs-string">&quot;production&quot;</span>) &#123;<br>  config.<span class="hljs-property">plugins</span>.<span class="hljs-title function_">push</span>(<br>    <span class="hljs-title function_">terser</span>(&#123;<br>      <span class="hljs-attr">compress</span>: &#123;<br>        <span class="hljs-attr">pure_getters</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">unsafe</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">unsafe_comps</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">warnings</span>: <span class="hljs-literal">false</span>,<br>      &#125;,<br>    &#125;)<br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> config;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】vscode设置默认bash</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91vscode%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4bash/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91vscode%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4bash/</url>
    
    <content type="html"><![CDATA[<p>settings.json文件</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;terminal.integrated.profiles.windows&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;GitBash&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;D:\\Git\\bin\\bash.exe&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;terminal.integrated.defaultProfile.windows&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;GitBash&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【linux】安装shadowsocks</title>
    <link href="/linux/%E3%80%90linux%E3%80%91%E5%AE%89%E8%A3%85shadowsocks/"/>
    <url>/linux/%E3%80%90linux%E3%80%91%E5%AE%89%E8%A3%85shadowsocks/</url>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get install shadowsocks-qt5<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90linux%E3%80%91%E5%AE%89%E8%A3%85shadowsocks/1.png"></p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】id,pid扁平数据转换为树形</title>
    <link href="/js/%E3%80%90js%E3%80%91id,pid%E6%89%81%E5%B9%B3%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%A0%91%E5%BD%A2/"/>
    <url>/js/%E3%80%90js%E3%80%91id,pid%E6%89%81%E5%B9%B3%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%A0%91%E5%BD%A2/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 树形数据转换</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125; <span class="hljs-variable">data</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125; <span class="hljs-variable">id</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125; <span class="hljs-variable">pid</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">treeDataTranslate</span> (data, id = <span class="hljs-string">&#x27;id&#x27;</span>, pid = <span class="hljs-string">&#x27;pid&#x27;</span>) &#123;<br>  <span class="hljs-keyword">var</span> res = []<br>  <span class="hljs-keyword">var</span> temp = &#123;&#125;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; data.<span class="hljs-property">length</span>; i++) &#123;<br>    temp[data[i][id]] = data[i]<br>  &#125;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k = <span class="hljs-number">0</span>; k &lt; data.<span class="hljs-property">length</span>; k++) &#123;<br>    <span class="hljs-keyword">if</span> (!temp[data[k][pid]] || data[k][id] === data[k][pid]) &#123;<br>      res.<span class="hljs-title function_">push</span>(data[k])<br>      <span class="hljs-keyword">continue</span><br>    &#125;<br>    <span class="hljs-keyword">if</span> (!temp[data[k][pid]][<span class="hljs-string">&#x27;children&#x27;</span>]) &#123;<br>      temp[data[k][pid]][<span class="hljs-string">&#x27;children&#x27;</span>] = []<br>    &#125;<br>    temp[data[k][pid]][<span class="hljs-string">&#x27;children&#x27;</span>].<span class="hljs-title function_">push</span>(data[k])<br>    data[k][<span class="hljs-string">&#x27;_level&#x27;</span>] = (temp[data[k][pid]].<span class="hljs-property">_level</span> || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span><br>  &#125;<br>  <span class="hljs-keyword">return</span> res<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【linux】ssh连接root用户权限被拒绝</title>
    <link href="/linux/%E3%80%90linux%E3%80%91ssh%E8%BF%9E%E6%8E%A5root%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E8%A2%AB%E6%8B%92%E7%BB%9D/"/>
    <url>/linux/%E3%80%90linux%E3%80%91ssh%E8%BF%9E%E6%8E%A5root%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E8%A2%AB%E6%8B%92%E7%BB%9D/</url>
    
    <content type="html"><![CDATA[<h1 id="连接错误"><a href="#连接错误" class="headerlink" title="连接错误"></a>连接错误</h1><p><img src="/../../assets/%E3%80%90linux%E3%80%91ssh%E8%BF%9E%E6%8E%A5root%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E8%A2%AB%E6%8B%92%E7%BB%9D/1.png"></p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>修改<code>/etc/ssh/sshd_config</code>文件</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">PermitRootLogin yes<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90linux%E3%80%91ssh%E8%BF%9E%E6%8E%A5root%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E8%A2%AB%E6%8B%92%E7%BB%9D/2.png"></p><p><img src="/../../assets/%E3%80%90linux%E3%80%91ssh%E8%BF%9E%E6%8E%A5root%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E8%A2%AB%E6%8B%92%E7%BB%9D/3.png"></p><p>修改完重启下即可</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">systemctl restart sshd<br></code></pre></td></tr></table></figure><h1 id="连接成功"><a href="#连接成功" class="headerlink" title="连接成功"></a>连接成功</h1><p><img src="/../../assets/%E3%80%90linux%E3%80%91ssh%E8%BF%9E%E6%8E%A5root%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E8%A2%AB%E6%8B%92%E7%BB%9D/4.png"></p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】npm常用二进制源配置</title>
    <link href="/node/%E3%80%90node%E3%80%91npm%E5%B8%B8%E7%94%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%BA%90%E9%85%8D%E7%BD%AE/"/>
    <url>/node/%E3%80%90node%E3%80%91npm%E5%B8%B8%E7%94%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%BA%90%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p>npm配置都在<code>~/.npmrc</code>，修改<code>~/.npmrc</code>文件即可。<br>也可使用命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm config <span class="hljs-built_in">set</span> xxx 源地址<br></code></pre></td></tr></table></figure><h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># npm源地址</span><br><span class="hljs-attr">registry</span>=https://registry.npmmirror.com/<br><span class="hljs-comment"># node-sass依赖</span><br><span class="hljs-attr">sass_binary_site</span>=https://npmmirror.com/mirrors/node-sass/<br><span class="hljs-comment"># weex项目依赖phantomjs-prebuilt</span><br><span class="hljs-attr">phantomjs_cdnurl</span>=https://npmmirror.com/mirrors/phantomjs/<br><span class="hljs-comment"># electron依赖</span><br><span class="hljs-attr">electron_mirror</span>=https://npmmirror.com/mirrors/electron/<br><span class="hljs-comment"># sqlite3轻量级数据库依赖</span><br><span class="hljs-attr">sqlite3_binary_host_mirror</span>=http://npmmirror.com/mirrors/<br><span class="hljs-comment"># node-inspector依赖</span><br><span class="hljs-attr">profiler_binary_host_mirror</span>=http://npmmirror.com/mirrors/node-inspector/<br><span class="hljs-comment"># chromedriver安装失败</span><br><span class="hljs-attr">chromedriver_cdnurl</span>=https://npmmirror.com/mirrors/chromedriver<br><span class="hljs-comment"># sentry-cli依赖</span><br><span class="hljs-attr">sentrycli_cdnurl</span>=https://npmmirror.com/mirrors/sentry-cli/<br></code></pre></td></tr></table></figure><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p><code>.npmrc</code>文件<br>linux位置：&#x2F;home&#x2F;rocyuan(自己的用户)&#x2F;.npmrc  （~&#x2F;.npmrc）</p><p><img src="/../../assets/%E3%80%90npm%E3%80%91%E5%B8%B8%E7%94%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%BA%90%E9%85%8D%E7%BD%AE/1.png"></p><p>windows位置：C:\Users\Administrator(自己的用户).npmrc</p><p><img src="/../../assets/%E3%80%90npm%E3%80%91%E5%B8%B8%E7%94%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%BA%90%E9%85%8D%E7%BD%AE/2.png"></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">registry</span>=https://registry.npmmirror.com/<br><span class="hljs-attr">sass_binary_site</span>=https://npmmirror.com/mirrors/node-sass/<br><span class="hljs-attr">phantomjs_cdnurl</span>=https://npmmirror.com/mirrors/phantomjs/<br><span class="hljs-attr">electron_mirror</span>=https://npmmirror.com/mirrors/electron/<br><span class="hljs-attr">sqlite3_binary_host_mirror</span>=http://npmmirror.com/mirrors/<br><span class="hljs-attr">profiler_binary_host_mirror</span>=http://npmmirror.com/mirrors/node-inspector/<br><span class="hljs-attr">chromedriver_cdnurl</span>=https://npmmirror.com/mirrors/chromedriver<br><span class="hljs-attr">sentrycli_cdnurl</span>=https://npmmirror.com/mirrors/sentry-cli/<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【nginx】站点单独配置</title>
    <link href="/nginx/%E3%80%90nginx%E3%80%91%E7%AB%99%E7%82%B9%E5%8D%95%E7%8B%AC%E9%85%8D%E7%BD%AE/"/>
    <url>/nginx/%E3%80%90nginx%E3%80%91%E7%AB%99%E7%82%B9%E5%8D%95%E7%8B%AC%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p>站点服务单独的配置文件；一般不会把所有站点服务全部配置到nginx.conf下，会将每个站点服务配置一个单独的配置文件（*.conf）。</p><p>nginx.conf是整个nginx全局下的配置，在全局配置下引入单独站点的配置文件，如:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 指定 单独站点配置文件（域名.conf） 如luojing.top站点 luojing.top.conf</span><br><span class="hljs-comment"># 这个目录是宝塔默认的目录</span><br>include <span class="hljs-regexp">/www/</span>server<span class="hljs-regexp">/panel/</span>vhost<span class="hljs-regexp">/nginx/</span>*.conf;<br></code></pre></td></tr></table></figure><p>配置时候注意层级</p><p><img src="/../../assets/%E3%80%90nginx%E3%80%91%E7%AB%99%E7%82%B9%E5%8D%95%E7%8B%AC%E9%85%8D%E7%BD%AE/1.png"></p><p>权限全是600（rw——-）</p><p><img src="/../../assets/%E3%80%90nginx%E3%80%91%E7%AB%99%E7%82%B9%E5%8D%95%E7%8B%AC%E9%85%8D%E7%BD%AE/2.png"></p><p><strong>.conf文件示例</strong></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span><br>&#123;<br>    <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;<br>    <span class="hljs-attribute">server_name</span> rms.luojing.top;<br>    <span class="hljs-attribute">index</span> index.php index.html index.htm default.php default.htm default.html;<br>    <span class="hljs-attribute">root</span> /www/wwwroot/rms.luojing.top;<br><br>    <span class="hljs-comment">#SSL-START SSL相关配置，请勿删除或修改下一行带注释的404规则</span><br>    <span class="hljs-comment">#error_page 404/404.html;</span><br>    <span class="hljs-comment">#SSL-END</span><br><br>    <span class="hljs-comment">#ERROR-PAGE-START  错误页配置，可以注释、删除或修改</span><br>    <span class="hljs-comment">#error_page 404 /404.html;</span><br>    <span class="hljs-comment">#error_page 502 /502.html;</span><br>    <span class="hljs-comment">#ERROR-PAGE-END</span><br><br>    <span class="hljs-comment">#PHP-INFO-START  PHP引用配置，可以注释或修改</span><br>    <span class="hljs-attribute">include</span> enable-php-<span class="hljs-number">56</span>.conf;<br>    <span class="hljs-comment">#PHP-INFO-END</span><br><br>    <span class="hljs-comment">#REWRITE-START URL重写规则引用,修改后将导致面板设置的伪静态规则失效</span><br>    <span class="hljs-attribute">include</span> /www/server/panel/vhost/rewrite/rms.luojing.top.conf;<br>    <span class="hljs-comment">#REWRITE-END</span><br><br>    <span class="hljs-comment">#禁止访问的文件或目录</span><br>    <span class="hljs-section">location</span> <span class="hljs-regexp">~ ^/(\.user.ini|\.htaccess|\.git|\.svn|\.project|LICENSE|README.md)</span><br>    &#123;<br>        <span class="hljs-attribute">return</span> <span class="hljs-number">404</span>;<br>    &#125;<br><br>    <span class="hljs-comment">#一键申请SSL证书验证目录相关设置</span><br>    <span class="hljs-section">location</span> <span class="hljs-regexp">~ ^/.well-known/</span>&#123;<br>        <span class="hljs-attribute">allow</span> all;<br>    &#125;<br><br>    <span class="hljs-comment">#禁止在证书验证目录放入敏感文件</span><br>    <span class="hljs-attribute">if</span> ( <span class="hljs-variable">$uri</span> <span class="hljs-regexp">~ &quot;^/\.well-known/.*\.(php|jsp|py|js|css|lua|ts|go|zip|tar\.gz|rar|7z|sql|bak)$&quot;</span> ) &#123;<br>        <span class="hljs-attribute">return</span> <span class="hljs-number">403</span>;<br>    &#125;<br><br>    <span class="hljs-section">location</span> <span class="hljs-regexp">~ .*\.(gif|jpg|jpeg|png|bmp|swf)$</span><br>    &#123;<br>        <span class="hljs-attribute">expires</span>      <span class="hljs-number">30d</span>;<br>        <span class="hljs-attribute">error_log</span> /dev/null;<br>        <span class="hljs-attribute">access_log</span> /dev/null;<br>    &#125;<br><br>    <span class="hljs-section">location</span> <span class="hljs-regexp">~ .*\.(js|css)?$</span><br>    &#123;<br>        <span class="hljs-attribute">expires</span>      <span class="hljs-number">12h</span>;<br>        <span class="hljs-attribute">error_log</span> /dev/null;<br>        <span class="hljs-attribute">access_log</span> /dev/null;<br>    &#125;<br>    <br>    <span class="hljs-section">location</span> / &#123;<br>      <span class="hljs-attribute">try_files</span> <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ /index.html;<br>    &#125;<br>    <br>    <span class="hljs-attribute">access_log</span>  /www/wwwlogs/rms.luojing.top.log;<br>    <span class="hljs-attribute">error_log</span>  /www/wwwlogs/rms.luojing.top.<span class="hljs-literal">error</span>.log;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【nginx】常用命令</title>
    <link href="/nginx/%E3%80%90nginx%E3%80%91%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <url>/nginx/%E3%80%90nginx%E3%80%91%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<p><code>nginx -s reload</code>  重新加载Nginx配置文件，然后以优雅的方式重启Nginx</p><p><code>nginx -s quit</code>  优雅地停止Nginx服务（正常关闭）</p><p><code>nginx -s stop</code>  强制停止Nginx服务（快速关闭）</p><p><code>nginx -s reopen</code>  重新打开日志文件（re-opening log files）</p><p><code>nginx -t</code>  检测配置文件是否有语法错误，然后退出</p><p><code>nginx -?,-h</code>  打开帮助信息</p><p><code>nginx -v</code>  显示版本信息并退出</p><p><code>nginx -V</code>  显示版本和配置选项信息，然后退出</p><p><code>nginx -t</code>  检测配置文件是否有语法错误，然后退出</p><p><code>nginx -T</code>  检测配置文件是否有语法错误，转储并退出</p><p><code>nginx -q</code>  在检测配置文件期间屏蔽非错误信息</p><p><code>nginx -p prefix</code>  设置前缀路径(默认是:&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;)</p><p><code>nginx -c filename</code>  设置配置文件(默认是:&#x2F;etc&#x2F;nginx&#x2F;nginx.conf)</p><p><code>nginx -g directives</code>  设置配置文件外的全局指令</p><p><code>killall nginx</code>  杀死所有nginx进程</p>]]></content>
    
    
    <categories>
      
      <category>nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】项目依赖记录</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96%E8%AE%B0%E5%BD%95/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>常用vue项目依赖记录，前面项目记录过的依赖后者不再记录，只补充。</p><h1 id="vue-element-admin"><a href="#vue-element-admin" class="headerlink" title="vue-element-admin"></a>vue-element-admin</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;axios&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.18.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;clipboard&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2.0.4&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;codemirror&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.45.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;core-js&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3.6.5&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;driver.js&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.9.5&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;dropzone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.5.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;echarts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.2.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;element-ui&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2.13.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;file-saver&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2.0.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;fuse.js&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3.4.4&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;js-cookie&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2.2.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;jsonlint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.6.3&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;jszip&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3.2.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;normalize.css&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;7.0.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;nprogress&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.2.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;path-to-regexp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2.4.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;screenfull&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.2.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;script-loader&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.7.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;sortablejs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.8.4&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;tui-editor&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.3.3&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2.6.10&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue-count-to&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.13&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue-router&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3.0.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue-splitpane&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.4&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vuedraggable&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2.20.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vuex&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3.1.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;xlsx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.14.1&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>clipboard  复制到剪贴板<br>codemirror  web代码编辑器<br>driver.js  web网页用户引导<br>dropzone  拖拽上传<br>file-saver  文件保存<br>fuse.js  轻量级模糊搜索<br>js-cookie  cookie操作<br>jszip  创建、读取和编辑.zip文件（导出.zip文件）<br>nprogress  进度条<br>path-to-regexp  将路径字符串（如&#x2F;user&#x2F;:name）转换为正则表达式<br>screenfull  跨浏览器使用JavaScript全屏API的简单包装器，可以将页面或任何元素带入全屏<br>sortablejs  拖放排序<br>tui-editor  GFM Markdown WYSIWYG编辑器<br>vue-count-to  数字滚动<br>vue-splitpane  拆分窗格组件，可以垂直或水平拆分<br>vuedraggable  vue可拖动组件<br>xlsx  电子表格数据解析器和编写器</p><h1 id="vue-admin-beautiful（admin-pro）"><a href="#vue-admin-beautiful（admin-pro）" class="headerlink" title="vue-admin-beautiful（admin-pro）"></a>vue-admin-beautiful（admin-pro）</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;@logicflow/core&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.7.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;@logicflow/extension&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.7.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;axios&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.23.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;clipboard&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.0.8&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;core-js&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.18.3&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;dayjs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.10.7&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;echarts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^5.2.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;element-ui&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.15.6&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;file-saver&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.0.5&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;js-cookie&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.0.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;jsencrypt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.2.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;jsplumb&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.15.6&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;lodash&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^4.17.21&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;mockjs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.1.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;nprogress&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.2.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;qs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^6.10.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;register-service-worker&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.7.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;resize-detector&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.3.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;screenfull&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^5.1.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vab-contextmenu&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.0.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vab-count&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.0.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vab-cropper&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.0.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vab-icons&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.0.23&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vab-magnifier&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.0.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vab-player&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.0.5&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vab-quill&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.0.4&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.6.14&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue-i18n&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^8.26.5&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue-json-viewer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.2.19&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue-router&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.5.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vuedraggable&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.24.3&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vuex&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.6.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;xlsx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.17.3&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;zx-markdown-editor&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.0.2&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>jsencrypt  用于执行RSA加密、解密和密钥生成的Javascript库<br>jsplumb  流程图<br>qs  query字符串解析和字符串化库<br>resize-detector  元素大小检测<br>vue-json-viewer  json内容展示<br>vab-quill  富文本编辑器</p><h1 id="renren（security-enterprise-admin）"><a href="#renren（security-enterprise-admin）" class="headerlink" title="renren（security-enterprise-admin）"></a>renren（security-enterprise-admin）</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;axios&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.19.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;babel-eslint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^8.0.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;babel-plugin-component&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.1.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;core-js&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.6.5&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;element-theme&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.0.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;element-ui&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.13.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;gulp-autoprefixer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^7.0.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;gulp-clean-css&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^4.3.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;gulp-load-plugins&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.0.3&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;gulp-rename&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.0.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;gulp-sass&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^4.1.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;js-cookie&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.2.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;lodash&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^4.17.19&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;node-sass&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^4.14.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;qs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^6.9.4&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;quill&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.3.7&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;sass-loader&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^9.0.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;screenfull&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^4.2.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;svg-sprite-loader&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^5.0.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.6.11&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue-cron&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.0.9&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue-i18n&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^8.18.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue-router&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.3.4&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vuex&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.5.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vxe-table&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.9.15&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;xe-utils&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.6.5&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>quill  强大的富文本编辑器<br>vue-cron  cron表达式生成插件<br>vxe-table  基于 vue 的 PC 端表格组件，支持增删改查、虚拟列表、虚拟树、懒加载、快捷菜单、数据校验、打印导出、表单渲染、数据分页、弹窗、自定义模板、渲染器、贼灵活的配置项、扩展接口等…<br>xe-utils  JavaScript 函数库、工具类 <a href="https://x-extends.github.io/xe-utils/">https://x-extends.github.io/xe-utils/</a></p><h1 id="d2-admin"><a href="#d2-admin" class="headerlink" title="d2-admin"></a>d2-admin</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;@d2-projects/vue-table-export&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.1.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;@d2-projects/vue-table-import&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.0.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;axios&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.21.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;axios-mock-adapter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.18.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;better-scroll&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.15.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;clipboard-polyfill&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.8.6&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;core-js&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.4.3&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;countup.js&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.0.4&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;dayjs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.8.17&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;element-ui&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.13.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;faker&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^4.1.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;flex.css&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.1.7&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;fuse.js&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^5.2.3&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;github-markdown-css&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^4.0.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;highlight.js&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^10.0.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;hotkeys-js&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.7.3&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;js-cookie&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.2.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;lodash&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^4.17.20&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;lowdb&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.0.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;marked&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.0.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;nprogress&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.2.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;qs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^6.9.4&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;quill&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.3.7&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;screenfull&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^5.0.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;simplemde&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.11.2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;sortablejs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.10.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;ua-parser-js&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.7.20&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vant&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.11.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.6.11&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue-grid-layout&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.3.7&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue-i18n&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^8.15.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue-json-tree-view&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.1.4&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue-router&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.1.3&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue-splitpane&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.0.6&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vue-ueditor-wrap&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.4.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vuex&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.1.2&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>better-scroll  移动端（已支持PC端）各种滚动场景需求的插件<br>countup.js  数字滚动（vue-element-admin 中有 vue-count-to）<br>highlight.js  语法高亮插件，自动语言检测<br>hotkeys-js  定义、调度键盘快捷键<br>lowdb  小型项目的微型本地JSON数据库<br>marked  markdown解析器和编译器<br>simplemde  markdown编辑器具有自动保存和拼写检查功能<br>ua-parser-js  检测浏览器、引擎、操作系统、CPU和设备类型&#x2F;型号。支持浏览器和node.js环境<br>vue-grid-layout  网格布局系统，可拖拽<br>vue-json-tree-view  JSON树视图组件<br>vue-ueditor-wrap  一个“包装”了 UEditor 的 Vue 组件，支持通过 v-model 来绑定富文本编辑器的内容，让 UEditor 的使用简单到像 Input 框一样。<br>vue-cropper 图片裁剪插件</p>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】app上架</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91app%E4%B8%8A%E6%9E%B6/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91app%E4%B8%8A%E6%9E%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="安卓"><a href="#安卓" class="headerlink" title="安卓"></a>安卓</h1><h2 id="隐私政策服务协议"><a href="#隐私政策服务协议" class="headerlink" title="隐私政策服务协议"></a>隐私政策服务协议</h2><p>根据工业和信息化部关于开展APP侵害用户权益专项整治要求，应用启动运行时需弹出隐私政策协议，说明应用采集用户数据，这里将详细介绍如何配置弹出“服务协议和隐私政策”提示框。</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91app%E4%B8%8A%E6%9E%B6/4.png"></p><p>服务协议内容参考：</p><p><a href="/blog/%E3%80%90uniapp%E3%80%91app-%E6%9C%8D%E5%8A%A1%E5%8D%8F%E8%AE%AE-%E7%A4%BA%E4%BE%8B/">app-服务协议-示例</a></p><p>隐私政策内容参考：</p><p><a href="/blog/%E3%80%90uniapp%E3%80%91app-%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96-%E7%A4%BA%E4%BE%8B/">app-隐私政策-示例</a></p><h3 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h3><ol><li>开启“使用原生隐私政策提示框”</li></ol><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91app%E4%B8%8A%E6%9E%B6/1.png"></p><ol start="2"><li>项目根目录添加<code>androidPrivacy.json</code>文件</li></ol><p>message中的链接地址需要更换</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;version&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;prompt&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;template&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;title&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;服务协议和隐私政策&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;message&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;　　请你务必审慎阅读、充分理解“服务协议”和“隐私政策”各条款，包括但不限于：为了更好的向你提供服务，我们需要收集你的设备标识、操作日志等信息用于分析、优化应用性能。&lt;br/&gt;　　你可阅读&lt;a href=\&quot;https://www.xxx.com/fuwuxieyi.html\&quot;&gt;《服务协议》&lt;/a&gt;和&lt;a href=\&quot;https://www.xxx.com/yinsizhengce.html\&quot;&gt;《隐私政策》&lt;/a&gt;了解详细信息。如果你同意，请点击下面按钮开始接受我们的服务。&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;buttonAccept&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;同意并接受&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;buttonRefuse&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;暂不同意&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;second&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;title&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;确认提示&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;message&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;　　进入应用前，你需先同意&lt;a href=\&quot;https://www.xxx.com/fuwuxieyi.html\&quot;&gt;《服务协议》&lt;/a&gt;和&lt;a href=\&quot;https://www.xxx.com/yinsizhengce.html\&quot;&gt;《隐私政策》&lt;/a&gt;，否则将退出应用。&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;buttonAccept&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;同意并继续&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;buttonRefuse&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;退出应用&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;styles&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;backgroundColor&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;#f8f8fb&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;borderRadius&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5px&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;title&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;color&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;#333333&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;buttonAccept&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;color&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;#333333&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;buttonRefuse&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;color&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;#333333&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><h2 id="应用权限说明"><a href="#应用权限说明" class="headerlink" title="应用权限说明"></a>应用权限说明</h2><p>上架应用市场需要说明应用每项权限的用处，可能每个平台存在差异，上架华为应用市场时官方会提供填写说明权限的文档模板。</p><h3 id="应用权限"><a href="#应用权限" class="headerlink" title="应用权限"></a>应用权限</h3><p>可以在manifest.json文件中安卓权限配置中勾选，也可在源码试图中找到。<br>安卓权限有很多，可自行查询意思，如下：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">android<span class="hljs-selector-class">.permission</span><span class="hljs-selector-class">.ACCESS_COARSE_LOCATION</span>      网络定位的权限（比较粗略）<br>android<span class="hljs-selector-class">.permission</span><span class="hljs-selector-class">.ACCESS_FINE_LOCATION</span>      GPS定位的权限（比较精准）<br>android<span class="hljs-selector-class">.permission</span><span class="hljs-selector-class">.CAMERA</span>      使用相机的权限<br>android<span class="hljs-selector-class">.permission</span><span class="hljs-selector-class">.INTERNET</span>      使用网络的权限<br>android<span class="hljs-selector-class">.permission</span><span class="hljs-selector-class">.WRITE_EXTERNAL_STORAGE</span>      写入储存卡的权限<br>android<span class="hljs-selector-class">.permission</span><span class="hljs-selector-class">.READ_EXTERNAL_STORAGE</span>      读取储存卡的权限<br>......<br></code></pre></td></tr></table></figure><p>uniapp云端打包后会自动添加权限：<a href="https://ask.dcloud.net.cn/article/36982">https://ask.dcloud.net.cn/article/36982</a>，可在app上架前检查是否有多余的app权限，进行简化。</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91app%E4%B8%8A%E6%9E%B6/2.png"></p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91app%E4%B8%8A%E6%9E%B6/3.png"></p><h2 id="注销账号"><a href="#注销账号" class="headerlink" title="注销账号"></a>注销账号</h2><p>上架应用市场要求app有注销账号功能，使用户可以自行注销自己的账号，从而在服务器删除自己的信息。</p><h2 id="版权信息"><a href="#版权信息" class="headerlink" title="版权信息"></a>版权信息</h2><p>需要添加版权信息</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91app%E4%B8%8A%E6%9E%B6/5.png"></p><h2 id="资质证书"><a href="#资质证书" class="headerlink" title="资质证书"></a>资质证书</h2><p>开发app的功能不同，所需要的资质证书也就不同，但是软著必须得有；比如app内有发布资讯新闻功能，还得提供新闻信息服务资质许可证…，可根据自己app功能查询需要的证书。</p><h2 id="应用完整度"><a href="#应用完整度" class="headerlink" title="应用完整度"></a>应用完整度</h2><p>app功能不完善的情况下，不要抱着，先上架后期更新的心理去上架，会被打回来的审核不过；未完善的功能可以先隐藏掉。</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91app%E4%B8%8A%E6%9E%B6/6.png"></p>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【react】react-native启动报错</title>
    <link href="/react/%E3%80%90react%E3%80%91react-native%E5%90%AF%E5%8A%A8%E6%8A%A5%E9%94%99/"/>
    <url>/react/%E3%80%90react%E3%80%91react-native%E5%90%AF%E5%8A%A8%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<h2 id="安装app报错"><a href="#安装app报错" class="headerlink" title="安装app报错"></a>安装app报错</h2><p>运行安装app报错：react-native-gesture-handler…</p><p><img src="/../../assets/%E3%80%90react-native%E3%80%91%E5%90%AF%E5%8A%A8%E6%8A%A5%E9%94%99/1.png"></p><p>运行 npx jetify 后重新安装即可</p><h2 id="启动-js服务报错"><a href="#启动-js服务报错" class="headerlink" title="启动 js服务报错"></a>启动 js服务报错</h2><p>打开 node_modules\graceful-fs\polyfills.js 文件，注释掉61~63行，重新启动即可</p><p><img src="/../../assets/%E3%80%90react-native%E3%80%91%E5%90%AF%E5%8A%A8%E6%8A%A5%E9%94%99/2.png"></p><p><img src="/../../assets/%E3%80%90react-native%E3%80%91%E5%90%AF%E5%8A%A8%E6%8A%A5%E9%94%99/3.png"></p>]]></content>
    
    
    <categories>
      
      <category>react</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】powershell禁止运行脚本</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91powershell%E7%A6%81%E6%AD%A2%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91powershell%E7%A6%81%E6%AD%A2%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC/</url>
    
    <content type="html"><![CDATA[<p>使用管理员打开<code>powershell</code>执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">set-ExecutionPolicy RemoteSigned<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】小程序分包详解</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%86%E5%8C%85%E8%AF%A6%E8%A7%A3/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%86%E5%8C%85%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>一般在开发小程序的时候，一不小心就会造成包大小超过2m无法上传，一般处理方法就是图片方面的优化（放在服务器，图片压缩…），删除无用代码（uniapp打包后会分析依赖的代码，删除无用代码），再就是分包加载处理。</p><p>常开发的是微信小程序，以下都以微信小程序为例</p><h2 id="分包加载介绍"><a href="#分包加载介绍" class="headerlink" title="分包加载介绍"></a>分包加载介绍</h2><p>在构建小程序分包项目时，则会输出一个或多个分包。每个有分包的小程序必定含有一个<strong>主包（也就是在&#x2F;pages下）</strong>。通常在主包下放置默认启动页面及tabBar 页面，以及一些所有分包都需用到公共资源（自定义组件、js工具代码、图片等）；而<strong>分包</strong>则是根据开发者的配置进行划分。</p><p>小程序启动时，默认会下载主包并启动主包内页面，当用户点击进入分包内某个页面时，客户端会把对应的分包下载下来，下载完成后再进行展示。</p><h2 id="开启分包"><a href="#开启分包" class="headerlink" title="开启分包"></a>开启分包</h2><p>在uniapp中开启分包时需要在对应的平台开启分包，开启分包的配置在manifest.json文件中，打开文件后HBuilderX会显示视图界面，但是选择<strong>微信小程序配置</strong>是没有开启分包的配置。</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%86%E5%8C%85%E8%AF%A6%E8%A7%A3/1.png"></p><p>无分包配置<br>需要点击最下面的源码试图，在json中配置，打开后找到mp-weixin选项（&#x2F;* 小程序特有相关 *&#x2F;）添加”optimization”:{“subPackages”:true}，至此已经在微信小程序平台打开了分包配置。</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%86%E5%8C%85%E8%AF%A6%E8%A7%A3/2.png"></p><p>添加分包配置</p><h2 id="配置分包"><a href="#配置分包" class="headerlink" title="配置分包"></a>配置分包</h2><p>目前为止（2021-09-09），uniapp只支持mp-weixin、mp-qq、mp-baidu、mp-toutiao开启分包加载。多平台编译的话需要写条件编译进行判断环境。<br>在pages.json文件中根层级（与”pages”选项同级）添加：<br><code>&quot;subPackages&quot;: [&#123;     &quot;root&quot;: &quot;rocA&quot;,     &quot;pages&quot;: [&#123;         &quot;path&quot;: &quot;roc/roc&quot;     &#125;] &#125;]</code></p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%86%E5%8C%85%E8%AF%A6%E8%A7%A3/3.png"></p><p>分包配置对应的目录</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%86%E5%8C%85%E8%AF%A6%E8%A7%A3/4.png"></p><p>如上图可以有多个分包，但是微信小程序规定：</p><ul><li>整个小程序所有分包大小不超过 20M</li><li>单个分包&#x2F;主包大小不能超过 2M</li></ul><h2 id="分包效果"><a href="#分包效果" class="headerlink" title="分包效果"></a>分包效果</h2><p>在微信开发工具中打开代码依赖分析视图可看到，已经分有一个主包和两个分包（rocA、rocB）</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%86%E5%8C%85%E8%AF%A6%E8%A7%A3/5.png"></p><h2 id="主包分包页面之间转跳"><a href="#主包分包页面之间转跳" class="headerlink" title="主包分包页面之间转跳"></a>主包分包页面之间转跳</h2><p>转跳与平时一样写路径转跳就行，个人推荐第一种，如下：</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%86%E5%8C%85%E8%AF%A6%E8%A7%A3/6.png"></p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%86%E5%8C%85%E8%AF%A6%E8%A7%A3/7.png"></p><h2 id="分包资源"><a href="#分包资源" class="headerlink" title="分包资源"></a>分包资源</h2><p>资源（图片、自定义组件、js工具代码）构建在分包中时，只能在分包使用不能在主包中使用；在主包里的资源主包分包都能使用，相当于公共资源。<strong>我这里只列举图片资源</strong>，其他的同理。</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%86%E5%8C%85%E8%AF%A6%E8%A7%A3/8.png"></p><h3 id="在分包中应用的图片资源"><a href="#在分包中应用的图片资源" class="headerlink" title="在分包中应用的图片资源"></a>在分包中应用的图片资源</h3><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%86%E5%8C%85%E8%AF%A6%E8%A7%A3/9.png"></p><h3 id="在主包中应用的图片资源"><a href="#在主包中应用的图片资源" class="headerlink" title="在主包中应用的图片资源"></a>在主包中应用的图片资源</h3><p>roc.jpg是在rocA分包下，所以主包不能使用，报错提示：</p><p><strong>项目资源 rocA&#x2F;static&#x2F;roc.jpg 与页面不在同一个分包中导致无法正常加载</strong></p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%86%E5%8C%85%E8%AF%A6%E8%A7%A3/10.png"></p><h2 id="查看资源所在的包"><a href="#查看资源所在的包" class="headerlink" title="查看资源所在的包"></a>查看资源所在的包</h2><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%86%E5%8C%85%E8%AF%A6%E8%A7%A3/11.png"></p><p>一般建议项目初期就规划好分包构建，通常启动页与tabbar页面及公共组件、js工具、图片等公用的资源在主包，其他的可按照功能模块划分分包。</p>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】中filters里不能使用this解决</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E4%B8%ADfilters%E9%87%8C%E4%B8%8D%E8%83%BD%E4%BD%BF%E7%94%A8this%E8%A7%A3%E5%86%B3/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E4%B8%ADfilters%E9%87%8C%E4%B8%8D%E8%83%BD%E4%BD%BF%E7%94%A8this%E8%A7%A3%E5%86%B3/</url>
    
    <content type="html"><![CDATA[<p>在定义的filters里无法拿到this。<br>根据官方文档可知道，过滤器传入的参数将从第二个形参开始，那么就可以通过过滤器传参实现。<br>在data方法返回的对象中定义that赋值this（data中可以访问到this），在使用过滤器时候将that(this)作为参数传入，那么过滤器内即可拿到that(this)。</p><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;<br>    &lt;p&gt;&#123;&#123; orderDetails.paymentStatus | paymentStatus(that) &#125;&#125;&lt;/p&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      that: this,<br>      orderDetails:&#123;&#125;<br>    &#125;<br>  &#125;,<br>  filters: &#123;<br>    paymentStatus(value, that) &#123;<br>      // 直接拿this是不行的，可以通过过滤器传参的方式间接拿到this<br>      if (value == &#x27;payment&#x27;) &#123;<br>        return that.locales.DingDanXiangQing.YiZhiFu<br>      &#125; else if (value == &#x27;unpayment&#x27;) &#123;<br>        return that.locales.DingDanXiangQing.WeiZhiFu<br>      &#125; else if (value == &#x27;refund&#x27;) &#123;<br>        return that.locales.DingDanXiangQing.YiTuiKuan<br>      &#125; else &#123;<br>        return &#x27;&#x27;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】中web-view引入页面返回问题</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91%E4%B8%ADweb-view%E5%BC%95%E5%85%A5%E9%A1%B5%E9%9D%A2%E8%BF%94%E5%9B%9E%E9%97%AE%E9%A2%98/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91%E4%B8%ADweb-view%E5%BC%95%E5%85%A5%E9%A1%B5%E9%9D%A2%E8%BF%94%E5%9B%9E%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>uniapp中的web-view组件引入页面后，返回失效问题</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E4%B8%ADweb-view%E5%BC%95%E5%85%A5%E9%A1%B5%E9%9D%A2%E8%BF%94%E5%9B%9E%E9%97%AE%E9%A2%98/1.png"></p><p>返回后发现报错：Uncaught ReferenceError: mui is not defined at</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E4%B8%ADweb-view%E5%BC%95%E5%85%A5%E9%A1%B5%E9%9D%A2%E8%BF%94%E5%9B%9E%E9%97%AE%E9%A2%98/2.png"></p><p>有些网页使用MUI框架开发的，所以需要将 mui 的返回关闭</p><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">onReady</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clearMuiBack</span>();<br>&#125;,<br><span class="hljs-attr">methods</span>: &#123;<br>  <span class="hljs-comment">// 关闭mui返回</span><br>  <span class="hljs-title function_">clearMuiBack</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// #ifdef APP-PLUS</span><br>    <span class="hljs-keyword">var</span> currentWebview = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$scope</span>.$getAppWebview().<span class="hljs-title function_">children</span>()[<span class="hljs-number">0</span>];<br>    <span class="hljs-comment">//监听注入的js</span><br>    currentWebview.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;loaded&quot;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>      currentWebview.evalJS(<span class="hljs-string">&quot;mui.init(&#123;keyEventBind: &#123;backbutton: false &#125;&#125;);&quot;</span>);<br>    &#125;);<br>    <span class="hljs-comment">// #endif</span><br>  &#125;,<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】npm源记录</title>
    <link href="/node/%E3%80%90node%E3%80%91npm%E6%BA%90%E8%AE%B0%E5%BD%95/"/>
    <url>/node/%E3%80%90node%E3%80%91npm%E6%BA%90%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>npm ———- <a href="https://registry.npmjs.org/">https://registry.npmjs.org/</a><br>yarn ——— <a href="https://registry.yarnpkg.com/">https://registry.yarnpkg.com/</a><br>tencent —— <a href="https://mirrors.cloud.tencent.com/npm/">https://mirrors.cloud.tencent.com/npm/</a><br>cnpm ——— <a href="https://r.cnpmjs.org/">https://r.cnpmjs.org/</a><br>taobao ——- <a href="https://registry.npmmirror.com/">https://registry.npmmirror.com/</a><br>npmMirror —- <a href="https://skimdb.npmjs.com/registry/">https://skimdb.npmjs.com/registry/</a></p>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】element-ui表格问题</title>
    <link href="/vue/%E3%80%90vue%E3%80%91element-ui%E8%A1%A8%E6%A0%BC%E9%97%AE%E9%A2%98/"/>
    <url>/vue/%E3%80%90vue%E3%80%91element-ui%E8%A1%A8%E6%A0%BC%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="表格展开嵌套表格hover错位问题"><a href="#表格展开嵌套表格hover错位问题" class="headerlink" title="表格展开嵌套表格hover错位问题"></a>表格展开嵌套表格hover错位问题</h1><p>嵌套如下：</p><p><img src="/../../assets/%E3%80%90element-ui%E3%80%91%E8%A1%A8%E6%A0%BC%E9%97%AE%E9%A2%98/1.png"></p><p>解决方案：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;el-table<br>  :row-class-name=&quot;rowClassName&quot;<br>  @cell-mouse-enter=&quot;handleMouseEnter&quot;<br>  @cell-mouse-leave=&quot;handleMouseLeave&quot;<br>&gt;&lt;/el-table&gt;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * mixin</span><br><span class="hljs-comment"> * 动态给表格添加hover</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">cellIndex</span>: -<span class="hljs-number">1</span>,<br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-comment">// 鼠标进入单元格</span><br>    <span class="hljs-title function_">handleMouseEnter</span>(<span class="hljs-params">row</span>) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tableList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (row.<span class="hljs-property">id</span> === item.<span class="hljs-property">id</span>) &#123;<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">cellIndex</span> = row.<span class="hljs-property">id</span><br>        &#125;<br>      &#125;)<br>    &#125;,<br>    <span class="hljs-comment">// 给相应的rowIndex添加类名</span><br>    <span class="hljs-title function_">rowClassName</span>(<span class="hljs-params">&#123; row, rowIndex &#125;</span>) &#123;<br>      <span class="hljs-keyword">let</span> r = -<span class="hljs-number">1</span><br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tableList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">cellIndex</span> === row.<span class="hljs-property">id</span>) &#123;<br>          r = rowIndex<br>        &#125;<br>      &#125;)<br>      <span class="hljs-keyword">if</span> (rowIndex === r) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;roc-hover-row&#x27;</span><br>      &#125;<br>    &#125;,<br>    <span class="hljs-comment">// 鼠标离开</span><br>    <span class="hljs-title function_">handleMouseLeave</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cellIndex</span> = -<span class="hljs-number">1</span><br>    &#125;,<br>  &#125;,<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 表格嵌套 hover错乱bug   配合mixin tableHover.js使用 */</span><br><span class="hljs-selector-class">.hover-row</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span> <span class="hljs-meta">!important</span>;<br>  <span class="hljs-selector-tag">td</span> &#123;<br>    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span> <span class="hljs-meta">!important</span>;<br>  &#125;<br>&#125;<br><span class="hljs-selector-class">.roc-hover-row</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f7fa</span> <span class="hljs-meta">!important</span>;<br>  <span class="hljs-selector-tag">td</span> &#123;<br>    <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f7fa</span> <span class="hljs-meta">!important</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【react】多个表单元素-数据绑定</title>
    <link href="/react/%E3%80%90react%E3%80%91%E5%A4%9A%E4%B8%AA%E8%A1%A8%E5%8D%95%E5%85%83%E7%B4%A0-%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/"/>
    <url>/react/%E3%80%90react%E3%80%91%E5%A4%9A%E4%B8%AA%E8%A1%A8%E5%8D%95%E5%85%83%E7%B4%A0-%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/</url>
    
    <content type="html"><![CDATA[<p>做判断的办法这里就不说了，地球人都知道。<br>有一种比较简单的方案，看代码：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">userName1</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">userName2</span>: <span class="hljs-string">&quot;&quot;</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">_changeInput</span>(<span class="hljs-params">e</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      [e.<span class="hljs-property">target</span>.<span class="hljs-property">name</span>]: e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span><br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> &#123; this._changeInput(e) &#125;&#125; name=&quot;userName1&quot; value=&#123;this.state.userName1&#125; /&gt;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> &#123; this._changeInput(e) &#125;&#125; name=&quot;userName1&quot; value=&#123;this.state.userName1&#125; /&gt;</span><br><span class="language-xml">        </span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> &#123; this._changeInput(e) &#125;&#125; name=&quot;userName2&quot; value=&#123;this.state.userName2&#125; /&gt;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> &#123; this._changeInput(e) &#125;&#125; name=&quot;userName2&quot; value=&#123;this.state.userName2&#125; /&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>利用e.target.name作为data的key，改变data数据，这样写_changeInput方法就不用改动。<br><strong>注意：元素的name属性必须与data的key一致</strong>。<br>看效果：</p><p><img src="/../../assets/%E3%80%90react%E3%80%91%E5%A4%9A%E4%B8%AA%E8%A1%A8%E5%8D%95%E5%85%83%E7%B4%A0-%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/1.gif"></p>]]></content>
    
    
    <categories>
      
      <category>react</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】使用toString方法精确检测对象类型详解</title>
    <link href="/js/%E3%80%90js%E3%80%91%E4%BD%BF%E7%94%A8toString%E6%96%B9%E6%B3%95%E7%B2%BE%E7%A1%AE%E6%A3%80%E6%B5%8B%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E8%AF%A6%E8%A7%A3/"/>
    <url>/js/%E3%80%90js%E3%80%91%E4%BD%BF%E7%94%A8toString%E6%96%B9%E6%B3%95%E7%B2%BE%E7%A1%AE%E6%A3%80%E6%B5%8B%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>准确的说他是通过Object.prototype.toString.call(xxx)来检测对象类型的。</p><h2 id="如何进行检测"><a href="#如何进行检测" class="headerlink" title="如何进行检测"></a>如何进行检测</h2><p>先看下MDN上的概念，当然MDN下面也有说到使用它来检测对象类型。mdn地址：<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toString">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects&#x2F;Object&#x2F;toString</a></p><p><img src="/../../assets/%E3%80%90js%E3%80%91%E4%BD%BF%E7%94%A8toString%E6%96%B9%E6%B3%95%E7%B2%BE%E7%A1%AE%E6%A3%80%E6%B5%8B%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E8%AF%A6%E8%A7%A3/1.png"></p><p>也就是说它返回的是字符串，如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> roc = []<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(roc))<br><span class="hljs-comment">// 打印 [object Array]  Array对象（字符串）</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">其实定义不同的类型它会返回: </span><br><span class="hljs-comment">[object Object]</span><br><span class="hljs-comment">[object String]</span><br><span class="hljs-comment">[object Date]</span><br><span class="hljs-comment">[object Function]</span><br><span class="hljs-comment">[object Number]</span><br><span class="hljs-comment">......</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><p>通过上面的打印判断字符串的方式就可以检测对象类型。<br>而且很多人都是这么做的，包括一些工具库里，在里面它会用Object.prototype.toString.call(xxx)的返回值与上面的字符串做对比判断，从而返回true或false。<br>注意：只能用Object.prototype.toString，因为Array、Number……中的toString都是经过处理后绑定到他们的原型上的。所以不同实例化不同类型的对象会通过原型拿到不同的toString。</p><h2 id="验证它们的toString是不同的方法"><a href="#验证它们的toString是不同的方法" class="headerlink" title="验证它们的toString是不同的方法"></a>验证它们的toString是不同的方法</h2><p>要搞清楚这个问题，必须要了解<strong>原型</strong>、<strong>原型链</strong>、<strong>this指向</strong>与<strong>call方法的使用</strong><br>因为Object的原型对象是原型链的最顶端，通过它的原型对象再去拿对象原型会是null。Array、Number……的toString方法是处理过的toString方法，与Object上的不一样。<br>看下面的代码（用数组举例，其他的同理）：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">toString</span>()) <span class="hljs-comment">// 打印 1,2   不能判断对象类型</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">arr上并没有toString()方法</span><br><span class="hljs-comment">它会去实例化arr的构造方法（Array）的原型上去，</span><br><span class="hljs-comment">也就是arr.__proto__.constructor.prototype 同等于 Array.prototype；</span><br><span class="hljs-comment">所以这里用到的toString方法，Array.prototype.toString()</span><br><span class="hljs-comment">知道call方法的朋友们肯定能想到，它也可以这么调用</span><br><span class="hljs-comment">Array.prototype.toString.call(arr),打印与arr.toString()一样</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">简单提下call：它可以调用某个方法并改变这个方法内部的this指向。</span><br><span class="hljs-comment">用法：functionName.call(thisArg)</span><br><span class="hljs-comment">*/</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>) <span class="hljs-comment">// 打印如下图</span><br></code></pre></td></tr></table></figure><p>代码第二行中是用的这个toString方法</p><p><img src="/../../assets/%E3%80%90js%E3%80%91%E4%BD%BF%E7%94%A8toString%E6%96%B9%E6%B3%95%E7%B2%BE%E7%A1%AE%E6%A3%80%E6%B5%8B%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E8%AF%A6%E8%A7%A3/2.png"></p><p>那如果我们从 arr数组对象 根据原型链的思路找下去找到Object，使用它原型里的toString试试看</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]<br><span class="hljs-comment">// 等价于这样写：const arr = new Array(1, 2)</span><br><span class="hljs-comment">// 打印出 通过原型链思路找到Object构造方法</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">__proto__</span>.<span class="hljs-property">constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span>.<span class="hljs-property">constructor</span>)<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">下来仔细给大家分析下这条链子（了解原型链的朋友们应该很容易明白）</span><br><span class="hljs-comment">1. arr.__proto__.constructor：arr对象通过原型知道自己是哪个构造函数实例化出来的，就是Array，到第二步我们用Array替换arr.__proto__.constructor</span><br><span class="hljs-comment">2. Array.prototype: Array的原型，但它也是一个对象，它是对象那我们就要考虑一个问题，它是谁实例化出来的呢？是的，通过它的原型Array.prototype.__proto__就能知道它是Object实例化出来的。</span><br><span class="hljs-comment">3.Array.prototype.__proto__.constructor: 它就是顺着原型链找过来的Object</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><p>如图打印通过原型链找到的 Object构造方法</p><p><img src="/../../assets/%E3%80%90js%E3%80%91%E4%BD%BF%E7%94%A8toString%E6%96%B9%E6%B3%95%E7%B2%BE%E7%A1%AE%E6%A3%80%E6%B5%8B%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E8%AF%A6%E8%A7%A3/3.png"></p><p>上面我们已经从 arr对象 通过原型链一路追杀到了Object，那么我们就可以使用开头提到的Object.proptotype.toString了，还是看代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/*</span><br><span class="hljs-comment">arr.__proto__.constructor.prototype.__proto__.constructor 等于 Object</span><br><span class="hljs-comment">那意味着我们可以有如下操作</span><br><span class="hljs-comment">*/</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">__proto__</span>.<span class="hljs-property">constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span>.<span class="hljs-property">constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(arr))<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(arr))<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90js%E3%80%91%E4%BD%BF%E7%94%A8toString%E6%96%B9%E6%B3%95%E7%B2%BE%E7%A1%AE%E6%A3%80%E6%B5%8B%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E8%AF%A6%E8%A7%A3/4.png"></p><h2 id="验证删除Array原型上的toString方法后直接使用"><a href="#验证删除Array原型上的toString方法后直接使用" class="headerlink" title="验证删除Array原型上的toString方法后直接使用"></a>验证删除Array原型上的toString方法后直接使用</h2><p>在原型链的理论上我们把Array原型上的toString方法删除后就可以检测对象类型（因为这时候使用的就是Object原型上的toString）上代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]<br><span class="hljs-comment">// 删除前</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">toString</span>())<br><span class="hljs-keyword">delete</span> <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span><br><span class="hljs-comment">// 删除后</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">toString</span>())<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90js%E3%80%91%E4%BD%BF%E7%94%A8toString%E6%96%B9%E6%B3%95%E7%B2%BE%E7%A1%AE%E6%A3%80%E6%B5%8B%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E8%AF%A6%E8%A7%A3/5.png"></p>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】某年某月一共多少天</title>
    <link href="/js/%E3%80%90js%E3%80%91%E6%9F%90%E5%B9%B4%E6%9F%90%E6%9C%88%E4%B8%80%E5%85%B1%E5%A4%9A%E5%B0%91%E5%A4%A9/"/>
    <url>/js/%E3%80%90js%E3%80%91%E6%9F%90%E5%B9%B4%E6%9F%90%E6%9C%88%E4%B8%80%E5%85%B1%E5%A4%9A%E5%B0%91%E5%A4%A9/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getDay</span>(<span class="hljs-params">year, month</span>)&#123;<br>  <span class="hljs-keyword">var</span> y = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(year,month,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">var</span> yd = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(y-<span class="hljs-number">1000</span>);<br>  <span class="hljs-keyword">return</span> yd.<span class="hljs-title function_">getDate</span>();<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】vue3或2中methods不能是箭头函数、this指向研究</title>
    <link href="/vue/%E3%80%90vue%E3%80%91vue3%E6%88%962%E4%B8%ADmethods%E4%B8%8D%E8%83%BD%E6%98%AF%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E3%80%81this%E6%8C%87%E5%90%91%E7%A0%94%E7%A9%B6/"/>
    <url>/vue/%E3%80%90vue%E3%80%91vue3%E6%88%962%E4%B8%ADmethods%E4%B8%8D%E8%83%BD%E6%98%AF%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E3%80%81this%E6%8C%87%E5%90%91%E7%A0%94%E7%A9%B6/</url>
    
    <content type="html"><![CDATA[<p>不管是vue2.x还是vue3.x，官网都有说明 <strong>不应该使用箭头函数来定义 method 函数</strong></p><p><img src="/../../assets/%E3%80%90vue%E3%80%91vue3%E6%88%962%E4%B8%ADmethods%E4%B8%8D%E8%83%BD%E6%98%AF%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E3%80%81this%E6%8C%87%E5%90%91%E7%A0%94%E7%A9%B6/1.png"></p><p><img src="/../../assets/%E3%80%90vue%E3%80%91vue3%E6%88%962%E4%B8%ADmethods%E4%B8%8D%E8%83%BD%E6%98%AF%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E3%80%81this%E6%8C%87%E5%90%91%E7%A0%94%E7%A9%B6/2.png"></p><h2 id="为什么不能是箭头函数？"><a href="#为什么不能是箭头函数？" class="headerlink" title="为什么不能是箭头函数？"></a>为什么不能是箭头函数？</h2><p>箭头函数作用域中不会绑定this，则不会指向实例<strong>（讲道理它本来也不会指向实例，为什么会指向实例？为什么实例上会有methods下定义的方法呢？下面会探讨）</strong>。</p><h2 id="如果是箭头函数this指向哪？"><a href="#如果是箭头函数this指向哪？" class="headerlink" title="如果是箭头函数this指向哪？"></a>如果是箭头函数this指向哪？</h2><p>我们在methods定义一个非箭头函数的方法，再强行定义一个箭头函数方法，打印出this，发现：<br>1、箭头函数的方法中this指向的是window<br>2、非箭头函数的方法指向一个代理对象Proxy（这是vue3的，下面会探讨2与3的指向）</p><p>其实这里的箭头函数指向window，应该是能够理解的，箭头函数不会绑定this，则这里的this会找它上层作用域的this指向，而它上层作用域便是script便签内作用域（window）</p><p>注意：中间的很多花括号并非作用域！</p><p><img src="/../../assets/%E3%80%90vue%E3%80%91vue3%E6%88%962%E4%B8%ADmethods%E4%B8%8D%E8%83%BD%E6%98%AF%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E3%80%81this%E6%8C%87%E5%90%91%E7%A0%94%E7%A9%B6/3.png"></p><p><img src="/../../assets/%E3%80%90vue%E3%80%91vue3%E6%88%962%E4%B8%ADmethods%E4%B8%8D%E8%83%BD%E6%98%AF%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E3%80%81this%E6%8C%87%E5%90%91%E7%A0%94%E7%A9%B6/4.png"></p><h2 id="为什么不是箭头函数指向的是一个Proxy对象？"><a href="#为什么不是箭头函数指向的是一个Proxy对象？" class="headerlink" title="为什么不是箭头函数指向的是一个Proxy对象？"></a>为什么不是箭头函数指向的是一个Proxy对象？</h2><p>不是箭头函数的时候vue2.x与vue3.x是有区别的，区别在于它们的监听原理，vue2使用的Object.defineProperty()，vue3.x使用的Proxy代理。<br>1、vue2.x中this指向的是经过Object.defineProperty()监听处理的vue应用实例。<br>2、vue3.x中this指向的是经过Proxy代理监听处理的vue应用实例。</p><h2 id="为什么会指向实例？为什么可以使用this-xxx执行方法？"><a href="#为什么会指向实例？为什么可以使用this-xxx执行方法？" class="headerlink" title="为什么会指向实例？为什么可以使用this.xxx执行方法？"></a>为什么会指向实例？为什么可以使用this.xxx执行方法？</h2><p>这里就要看源码了，源码里我标了注释。</p><p>之所以会指向实例，是vue内部使用bind方法为我们定义的每一个methods都重新绑定了一个publicThis，并将返回的新方法赋值给了vue实例，实际上我们在使用this.xxx的时候用的就是vue内部处理过后放到实例上的xxx方法。</p><p><img src="/../../assets/%E3%80%90vue%E3%80%91vue3%E6%88%962%E4%B8%ADmethods%E4%B8%8D%E8%83%BD%E6%98%AF%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E3%80%81this%E6%8C%87%E5%90%91%E7%A0%94%E7%A9%B6/5.png"></p>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】nrm报错internal_…</title>
    <link href="/node/%E3%80%90node%E3%80%91nrm%E6%8A%A5%E9%94%99internal_%E2%80%A6/"/>
    <url>/node/%E3%80%90node%E3%80%91nrm%E6%8A%A5%E9%94%99internal_%E2%80%A6/</url>
    
    <content type="html"><![CDATA[<p>执行nrm报错 internal&#x2F;validators.js:124 throw new ERR_INVALID_ARG_TYPE(name, ‘string’, value);</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">C:\Users\Administrator&gt;nrm <span class="hljs-built_in">ls</span><br>internal/validators.js:124<br>    throw new ERR_INVALID_ARG_TYPE(name, <span class="hljs-string">&#x27;string&#x27;</span>, value);<br>    ^<br>[TypeError [ERR_INVALID_ARG_TYPE]: The <span class="hljs-string">&quot;path&quot;</span> argument must be of <span class="hljs-built_in">type</span> string. Received undefined<br>  at validateString (internal/validators.js:124:11)<br>  at Object.<span class="hljs-built_in">join</span> (path.js:375:7)<br>  at Object.&lt;anonymous&gt; (D:\nodejs\node_global\node_modules\nrm\cli.js:17:20)<br>  at Module._compile (internal/modules/cjs/loader.js:1063:30)<br>  at Object.Module._extensions..js (internal/modules/cjs/loader.js:1092:10)<br>  at Module.load (internal/modules/cjs/loader.js:928:32)<br>  at Function.Module._load (internal/modules/cjs/loader.js:769:14)<br>  at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:72:12)<br>  at internal/main/run_main_module.js:17:47<br>] &#123;<br>  code: <span class="hljs-string">&#x27;ERR_INVALID_ARG_TYPE&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>找到安装nrm的文件夹，一般在（AppData为隐藏文件夹）：</p><figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs moonscript"><span class="hljs-name">C</span>:\Users\Administrator\AppData\Roaming\npm\node_modules\nrm<br></code></pre></td></tr></table></figure><p>找到cli.js17行，改成：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//const NRMRC = path.join(process.env.HOME, &#x27;.nrmrc&#x27;); (删除)</span><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">NRMRC</span> = path.<span class="hljs-title function_">join</span>(process.<span class="hljs-property">env</span>[(process.<span class="hljs-property">platform</span> == <span class="hljs-string">&#x27;win32&#x27;</span>) ? <span class="hljs-string">&#x27;USERPROFILE&#x27;</span> : <span class="hljs-string">&#x27;HOME&#x27;</span>], <span class="hljs-string">&#x27;.nrmrc&#x27;</span>);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】创建自己的脚手架工具（cli）</title>
    <link href="/node/%E3%80%90node%E3%80%91%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7%EF%BC%88cli%EF%BC%89/"/>
    <url>/node/%E3%80%90node%E3%80%91%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7%EF%BC%88cli%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>vue-cli、create-react-app、angular-cli…已经有了，为什么还要创建自己的脚手架？</p><p>个人需求：每次使用官方自带的脚手架创建好项目后，总是要删除一大堆垃圾代码，还要重复性配置封装各种常用的库；而且不同项目得使用不同的脚手架工具（这个还可以接受，主要是前者）。</p><p>以下只是提供了简易的创建过程，为了理清思路，通俗易懂，全写在一个js文件中；一般会进行封装，模块化管理。</p><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>使用cli命令行生成项目模板，模板从哪来？其实模板我们可以在github、gitee或自行搭建的git上进行拉取；只不过我们使用cli时候后面跟上项目类型则会拉取不同的git地址。比如我的<a href="https://www.npmjs.com/package/roc-cli">roc-cli</a>的使用。</p><h2 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h2><p>首先使用npm初始化一个项目npm init -y，会在项目根目录生成package.json文件</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;roc-cli-v2&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;main&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;index.js&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;test&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;keywords&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;author&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;license&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ISC&quot;</span><span class="hljs-punctuation">,</span><br>+  <span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>+    <span class="hljs-attr">&quot;commander&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^7.2.0&quot;</span><span class="hljs-punctuation">,</span><br>+    <span class="hljs-attr">&quot;download-git-repo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.0.2&quot;</span><br>+  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="依赖项"><a href="#依赖项" class="headerlink" title="依赖项"></a>依赖项</h2><p>我们需要依赖两个工具commander、download-git-repo</p><p>安装：<code>npm i commander download-git-repo</code>。</p><p>commander：node.js命令行工具，它可以让我们的脚手架运行在命令行。</p><p>npm：<a href="https://www.npmjs.com/package/commander">https://www.npmjs.com/package/commander</a></p><p>github：<a href="https://github.com/tj/commander.js">https://github.com/tj/commander.js</a></p><p>download-git-repo：从节点下载并提取git存储库（GitHub、GitLab、Bitbucket）。虽然官方提到的只有这三个平台，亲测gitee（码云）或自行搭建的git平台也是可以的。</p><p>npm：<a href="https://www.npmjs.com/package/download-git-repo">https://www.npmjs.com/package/download-git-repo</a></p><h2 id="入口文件"><a href="#入口文件" class="headerlink" title="入口文件"></a>入口文件</h2><h3 id="一、package-json中添加："><a href="#一、package-json中添加：" class="headerlink" title="一、package.json中添加："></a>一、package.json中添加：</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;bin&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;yuan&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;index.js&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>“yuan”则是生效的命令，index.js则是入口文件</p><h3 id="二、在index-js中的顶部添加："><a href="#二、在index-js中的顶部添加：" class="headerlink" title="二、在index.js中的顶部添加："></a>二、在index.js中的顶部添加：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/usr/bin/env node</span><br></code></pre></td></tr></table></figure><h3 id="三、测试我们的“yuan”指令"><a href="#三、测试我们的“yuan”指令" class="headerlink" title="三、测试我们的“yuan”指令"></a>三、测试我们的“yuan”指令</h3><p>一般我们全局安装某个脚手架时才能在命令行使用脚手架命令，因为此时npm源并没有我们的脚手架所以我们不能安装，但是可以使用npm link来连接到我们的脚手架模块进行测试。<br>在项目根目录运行：<code>npm link</code></p><h2 id="运行命令"><a href="#运行命令" class="headerlink" title="运行命令"></a>运行命令</h2><p>此时就可以在命令行运行yuan命令，则不会报错“yuan不是内部或外部命令，也不是可运行的程序或批处理文件。”</p><p>但是现在运行yuan后并没有反应。</p><h2 id="commander使用"><a href="#commander使用" class="headerlink" title="commander使用"></a>commander使用</h2><p>以上github地址中有它的详细用法</p><h3 id="版本信息"><a href="#版本信息" class="headerlink" title="版本信息"></a>版本信息</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> program = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;commander&quot;</span>);<br><br><span class="hljs-comment">// 获取版本但是这么写我们的脚手架每次版本更新都要更改业务代码不合适！！！</span><br><span class="hljs-comment">// program.version(&quot;0.0.1&quot;)</span><br><span class="hljs-comment">// 更改成下面这样，会获取package.json中的版本信息</span><br>program.<span class="hljs-title function_">version</span>(<span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;./package.json&quot;</span>).<span class="hljs-property">version</span>)<br><br><span class="hljs-comment">// 解析指令，这点很重要  不解析指令则无效</span><br>program.<span class="hljs-title function_">parse</span>(process.<span class="hljs-property">argv</span>);<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7%EF%BC%88cli%EF%BC%89/1.png"></p><h3 id="帮助信息"><a href="#帮助信息" class="headerlink" title="帮助信息"></a>帮助信息</h3><p>默认就有帮助信息可运行yuan -h，帮助信息中的“版本”与“帮助”是自带的，我们也可使用option进行自定义。</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7%EF%BC%88cli%EF%BC%89/2.png"></p><p>自定义帮助信息：program.option(“-F, –framework”, “指定创建项目的框架，目前支持vue，react”);</p><h3 id="创建指令"><a href="#创建指令" class="headerlink" title="创建指令"></a>创建指令</h3><p>使用command创建命令，option创建选项，action创建执行后的回调</p><p>此时的完整代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-meta">#!/usr/bin/env node</span><br><span class="hljs-keyword">const</span> program = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;commander&quot;</span>);<br><br><span class="hljs-comment">// 版本信息</span><br>program.<span class="hljs-title function_">version</span>(<span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;./package.json&quot;</span>).<span class="hljs-property">version</span>)<br><br><span class="hljs-comment">// 帮助信息</span><br>program.<span class="hljs-title function_">option</span>(<span class="hljs-string">&quot;-F, --framework&quot;</span>, <span class="hljs-string">&quot;指定创建项目的框架，目前支持vue，react&quot;</span>);<br><br><span class="hljs-comment">// 创建指令</span><br>program<br>.<span class="hljs-title function_">command</span>(<span class="hljs-string">&quot;create &lt;projectName&gt;&quot;</span>)<br>.<span class="hljs-title function_">description</span>(<span class="hljs-string">&quot;指令描述&quot;</span>)<br>.<span class="hljs-title function_">option</span>(<span class="hljs-string">&quot;-vue&quot;</span>, <span class="hljs-string">&quot;选项描述&quot;</span>)<br>.<span class="hljs-title function_">option</span>(<span class="hljs-string">&quot;-react&quot;</span>, <span class="hljs-string">&quot;选项描述&quot;</span>) <span class="hljs-comment">// option 可有多个</span><br>.<span class="hljs-title function_">action</span>(<span class="hljs-function">(<span class="hljs-params">projectName, option</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">/*</span><br><span class="hljs-comment">    执行指令的回调方法</span><br><span class="hljs-comment">    projectName：对应创建的项目名</span><br><span class="hljs-comment">    option：对应上面设置的指令的选项（它是一个对象，如命令写有多个option，则对象中会增加属性，如果写了未定义的option，命令行会报错提示“未知选项”）</span><br><span class="hljs-comment">    注意：option设置的时候是 &quot;-vue&quot;下面拿到的是&quot;Vue&quot;、&quot;--vue&quot;回调拿到的是&quot;vue&quot;，我为了cli工具使用方便则用了一个&quot;-&quot;的</span><br><span class="hljs-comment">  */</span><br>  <span class="hljs-comment">// 这里如果用户写多个选项只会生效第一个选项</span><br>  <span class="hljs-keyword">const</span> type = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(option)[<span class="hljs-number">0</span>]<br>  <span class="hljs-keyword">switch</span>(type) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Vue&quot;</span>:<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;创建vue项目&quot;</span>)<br>      <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;React&quot;</span>:<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;创建react项目&quot;</span>)<br>      <span class="hljs-keyword">break</span>;<br>    <span class="hljs-attr">default</span>:<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;未知选项&quot;</span>)<br>  &#125;<br>&#125;)<br><br><span class="hljs-comment">// 解析指令</span><br>program.<span class="hljs-title function_">parse</span>(process.<span class="hljs-property">argv</span>);<br></code></pre></td></tr></table></figure><p>运行：</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7%EF%BC%88cli%EF%BC%89/3.png"></p><p>指令的问题已经搞定，接下来要做的是不同的命令下载不同的git仓库</p><h2 id="download-git-repo使用"><a href="#download-git-repo使用" class="headerlink" title="download-git-repo使用"></a>download-git-repo使用</h2><p>引入后直接使用即可，详细用法参考以上npm官网，东西也比较少</p><p>目前代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-meta">#!/usr/bin/env node</span><br><span class="hljs-keyword">const</span> program = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;commander&quot;</span>);<br><span class="hljs-keyword">const</span> download = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;download-git-repo&quot;</span>);<br><br><span class="hljs-comment">// 版本信息</span><br>program.<span class="hljs-title function_">version</span>(<span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;./package.json&quot;</span>).<span class="hljs-property">version</span>)<br><br><span class="hljs-comment">// 帮助信息</span><br>program.<span class="hljs-title function_">option</span>(<span class="hljs-string">&quot;-F, --framework&quot;</span>, <span class="hljs-string">&quot;指定创建项目的框架，目前支持vue，react&quot;</span>);<br><br><span class="hljs-comment">// 创建指令</span><br>program<br>  .<span class="hljs-title function_">command</span>(<span class="hljs-string">&quot;create &lt;projectName&gt;&quot;</span>)<br>  .<span class="hljs-title function_">description</span>(<span class="hljs-string">&quot;指令描述&quot;</span>)<br>  .<span class="hljs-title function_">option</span>(<span class="hljs-string">&quot;-vue&quot;</span>, <span class="hljs-string">&quot;选项描述&quot;</span>)<br>  .<span class="hljs-title function_">option</span>(<span class="hljs-string">&quot;-react&quot;</span>, <span class="hljs-string">&quot;选项描述&quot;</span>) <span class="hljs-comment">// option 可有多个</span><br>  .<span class="hljs-title function_">action</span>(<span class="hljs-function">(<span class="hljs-params">projectName, option</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">      执行指令的回调方法</span><br><span class="hljs-comment">      projectName：对应创建的项目名</span><br><span class="hljs-comment">      option：对应上面设置的指令的选项（它是一个对象，如命令写有多个option，则对象中会增加属性，如果写了未定义的option，命令行会报错提示“未知选项”）</span><br><span class="hljs-comment">      注意：option设置的时候是 &quot;-vue&quot;下面拿到的是&quot;Vue&quot;、&quot;--vue&quot;回调拿到的是&quot;vue&quot;，我为了cli工具使用方便则用了一个&quot;-&quot;的</span><br><span class="hljs-comment">    */</span><br>    <span class="hljs-comment">// 这里如果用户写多个选项只会生效第一个选项</span><br>    <span class="hljs-keyword">const</span> type = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(option)[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">switch</span> (type) &#123;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Vue&quot;</span>:<br>        <span class="hljs-comment">// 仓库地址（地址前必须加&quot;direct:&quot;），仓库clone的文件夹名，是否clone，成功失败的回调</span><br>        <span class="hljs-title function_">download</span>(<br>          <span class="hljs-string">&quot;direct:https://gitee.com/rocyuan666/roc-cli-vue-template.git&quot;</span>,<br>          projectName,<br>          &#123; <span class="hljs-attr">clone</span>: <span class="hljs-literal">true</span> &#125;,<br>          <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;<br>            <span class="hljs-comment">// 个人分析出的两种错误情况：1 同目录项目名已存在 2 储存库出现问题</span><br>            <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;项目已存在或存储库错误！&quot;</span>);<br>            <span class="hljs-comment">// 创建成功 提示</span><br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;vue项目创建成功&quot;</span>)<br>          &#125;<br>        )<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;React&quot;</span>:<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;创建react项目&quot;</span>)<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-attr">default</span>:<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;未知选项&quot;</span>)<br>    &#125;<br>  &#125;)<br><br><span class="hljs-comment">// 解析指令</span><br>program.<span class="hljs-title function_">parse</span>(process.<span class="hljs-property">argv</span>);<br></code></pre></td></tr></table></figure><p>我只举例了vue项目，其他项目同理。</p><h2 id="完成-·-测试环境运行脚手架"><a href="#完成-·-测试环境运行脚手架" class="headerlink" title="完成 · 测试环境运行脚手架"></a>完成 · 测试环境运行脚手架</h2><p>在命令行执行yuan create vue-demo -vue，就生成了vue-demo的项目，而项目就来自git仓库，后期完善项目模板就直接完善对应的git仓库。</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7%EF%BC%88cli%EF%BC%89/4.png"></p><h2 id="脚手架工具上线至npm"><a href="#脚手架工具上线至npm" class="headerlink" title="脚手架工具上线至npm"></a>脚手架工具上线至npm</h2><p>首先得注册npm账号，在命令行登录你的账号<code>npm login</code>指令登录，登录完成后，在当前应用的目录下执行<code>npm publish</code>将脚手架工具发布到npm官网。</p>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】h5微信公众号授权登录</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91h5%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E6%8E%88%E6%9D%83%E7%99%BB%E5%BD%95/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91h5%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E6%8E%88%E6%9D%83%E7%99%BB%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h1 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h1><ul><li>前端根据微信提供的 oauth2 地址获取code</li><li>调用后端微信登录接口传参：code，返回token（后端可通过code、access_token和微信提供的接口等，完成与系统用户的绑定等操作）</li><li>前端获取到token后与其他登录一样，登录完成后完成业务</li></ul><h1 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h1><p>前端调用微信提供的 oauth2 地址获取code时，所传的参数：redirect_uri （此地址域名必须与微信公众号后台配置的网页授权域名一致）</p><p>官方地址：<a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html">https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps&#x2F;Wechat_webpage_authorization.html</a></p><h1 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">appid</span>: <span class="hljs-string">&quot;xxxxxxxxxxxxxxx&quot;</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-title function_">onLoad</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getWxCode</span>()<br>  &#125;,<br>  <span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 获取微信code</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-title function_">getWxCode</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">const</span> code = <span class="hljs-string">&quot;&quot;</span><br>      <span class="hljs-keyword">let</span> local = <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>; <span class="hljs-comment">// 微信授权重定向的 url</span><br>      code = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUrlParams</span>().<span class="hljs-property">code</span><br>      <span class="hljs-comment">// 如果没有code，则去微信服务器请求</span><br>      <span class="hljs-keyword">if</span> (!code) &#123;<br>        <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">`https://open.weixin.qq.com/connect/oauth2/authorize?appid=<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.appid&#125;</span>&amp;redirect_uri=<span class="hljs-subst">$&#123;<span class="hljs-built_in">encodeURIComponent</span>(local)&#125;</span>&amp;response_type=code&amp;scope=snsapi_userinfo&amp;state=STATE#wechat_redirect`</span><br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">wxLogin</span>(code)<br>      &#125;<br>    &#125;,<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * wx登录</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-title function_">wxLogin</span>(<span class="hljs-params">code</span>) &#123;<br>      <span class="hljs-comment">// 已经拿到code，写登录逻辑......</span><br>    &#125;,<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 获取url中的参数</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-title function_">getUrlParams</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">var</span> url = location.<span class="hljs-property">search</span><br>      <span class="hljs-keyword">var</span> theRequest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>()<br>      <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;?&quot;</span>) != -<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">var</span> str = url.<span class="hljs-title function_">substr</span>(<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">var</span> strs = str.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;&amp;&quot;</span>)<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; strs.<span class="hljs-property">length</span>; i ++) &#123;<br>          theRequest[strs[i].<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;=&quot;</span>)[<span class="hljs-number">0</span>]]=(strs[i].<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;=&quot;</span>)[<span class="hljs-number">1</span>])<br>        &#125;<br>      &#125;<br>      <span class="hljs-keyword">return</span> theRequest<br>    &#125;,<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】app推送通知unipush</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91app%E6%8E%A8%E9%80%81%E9%80%9A%E7%9F%A5unipush/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91app%E6%8E%A8%E9%80%81%E9%80%9A%E7%9F%A5unipush/</url>
    
    <content type="html"><![CDATA[<p>打包需要开通push模块权限</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">onLaunch</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// #ifdef APP-PLUS  </span><br>  <span class="hljs-keyword">const</span> _handlePush = <span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) &#123;  <br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message);<br>    <span class="hljs-comment">//跳转到某个指定的页面</span><br>    <span class="hljs-comment">//uni.navigateTo(&#123;  </span><br>    <span class="hljs-comment">//url: message.payload.pagePath  </span><br>    <span class="hljs-comment">//&#125;);</span><br>  &#125;;<br>  <span class="hljs-comment">//点击通知消息时执行的事件</span><br>  plus.<span class="hljs-property">push</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, _handlePush);  <br>  <span class="hljs-comment">//收到透传消息时执行的事件</span><br>  plus.<span class="hljs-property">push</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;receive&#x27;</span>, _handlePush);  <br>  <span class="hljs-comment">// #endif </span><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;App Launch&#x27;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】高德api地址逆向解析并转跳导航</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91%E9%AB%98%E5%BE%B7api%E5%9C%B0%E5%9D%80%E9%80%86%E5%90%91%E8%A7%A3%E6%9E%90%E5%B9%B6%E8%BD%AC%E8%B7%B3%E5%AF%BC%E8%88%AA/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91%E9%AB%98%E5%BE%B7api%E5%9C%B0%E5%9D%80%E9%80%86%E5%90%91%E8%A7%A3%E6%9E%90%E5%B9%B6%E8%BD%AC%E8%B7%B3%E5%AF%BC%E8%88%AA/</url>
    
    <content type="html"><![CDATA[<p>web解析同理<br>申请两个key：<br>Android平台：用于打包填写maps模块key<br>Web服务：用于逆向解析key（代码里要用，建议提取到项目config.js文件）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 处理 定位地址 导航 cfg为导入的项目config对象</span><br><span class="hljs-title function_">handleNavigation</span>(<span class="hljs-params">address</span>) &#123;<br>  <span class="hljs-keyword">const</span> key = cfg.<span class="hljs-property">webGaoDeKey</span>;<br>  <span class="hljs-comment">// 逆向解析</span><br>  uni.<span class="hljs-title function_">request</span>(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">`https://restapi.amap.com/v3/geocode/geo?address=<span class="hljs-subst">$&#123;address&#125;</span>&amp;key=<span class="hljs-subst">$&#123;key&#125;</span>`</span>,<br>    <span class="hljs-title function_">success</span>(<span class="hljs-params">res</span>) &#123;<br>      <span class="hljs-keyword">if</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">status</span> == <span class="hljs-number">1</span>)&#123;<br>        <span class="hljs-keyword">const</span> [longitude, latitude] = res.<span class="hljs-property">data</span>.<span class="hljs-property">geocodes</span>[<span class="hljs-number">0</span>].<span class="hljs-property">location</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;,&quot;</span>)<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(longitude, <span class="hljs-string">&quot;经度&quot;</span>)<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(latitude, <span class="hljs-string">&quot;维度&quot;</span>)<br>        <span class="hljs-comment">// 打开地图导航</span><br>        uni.<span class="hljs-title function_">openLocation</span>(&#123;<br>          <span class="hljs-attr">longitude</span>: <span class="hljs-title class_">Number</span>(longitude),<br>          <span class="hljs-attr">latitude</span>: <span class="hljs-title class_">Number</span>(latitude),<br>          <span class="hljs-attr">name</span>: address,<br>          <span class="hljs-attr">address</span>: address,<br>          <span class="hljs-title function_">success</span>(<span class="hljs-params">res</span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)<br>          &#125;,<br>          <span class="hljs-title function_">fail</span>(<span class="hljs-params">err</span>)&#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)<br>          &#125;<br>        &#125;)<br>      &#125;<span class="hljs-keyword">else</span>&#123;<br>        uni.<span class="hljs-title function_">showToast</span>(&#123;<br>          <span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;none&quot;</span>,<br>          <span class="hljs-attr">mask</span>: <span class="hljs-literal">true</span>,<br>          <span class="hljs-attr">title</span>: res.<span class="hljs-property">data</span>.<span class="hljs-property">info</span><br>        &#125;)<br>      &#125;<br>    &#125;<br>  &#125;)<br>&#125;,<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【git】git-bash中文问题</title>
    <link href="/git/%E3%80%90git%E3%80%91git-bash%E4%B8%AD%E6%96%87%E9%97%AE%E9%A2%98/"/>
    <url>/git/%E3%80%90git%E3%80%91git-bash%E4%B8%AD%E6%96%87%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>将 win11终端、webstorm终端、vscode终端…，设置为 <code>git bash</code> 时；出现中文删除半个字符问题。</p><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>修改 <code>git bash</code> 的 <code>LANG</code> <code>LC_ALL</code> 的环境变量；打开git安装目录，找到 <code>git bash</code> 的配置文件 <code>git安装目录/etc/bash.bashrc</code> </p><p>在末尾添加如下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> LANG=<span class="hljs-string">&quot;zh_CN.UTF-8&quot;</span><br><span class="hljs-built_in">export</span> LC_ALL=<span class="hljs-string">&quot;zh_CN.UTF-8&quot;</span><br></code></pre></td></tr></table></figure><p>重启即可。</p>]]></content>
    
    
    <categories>
      
      <category>git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】app返回提示：是否保存编辑信息</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91app%E8%BF%94%E5%9B%9E%E6%8F%90%E7%A4%BA%EF%BC%9A%E6%98%AF%E5%90%A6%E4%BF%9D%E5%AD%98%E7%BC%96%E8%BE%91%E4%BF%A1%E6%81%AF/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91app%E8%BF%94%E5%9B%9E%E6%8F%90%E7%A4%BA%EF%BC%9A%E6%98%AF%E5%90%A6%E4%BF%9D%E5%AD%98%E7%BC%96%E8%BE%91%E4%BF%A1%E6%81%AF/</url>
    
    <content type="html"><![CDATA[<p>表单内容过多时，用户编辑表单，编辑到一半，返回时询问保存编辑信息，保存后下次进来自动填写保存的表单内容。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">onBackPress</span>(<span class="hljs-params">e</span>) &#123;<br>  <span class="hljs-keyword">const</span> that = <span class="hljs-variable language_">this</span>;<br>  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">from</span> == <span class="hljs-string">&quot;backbutton&quot;</span>) &#123;<br>    <span class="hljs-keyword">if</span> (!that.<span class="hljs-property">isEdit</span>) &#123;<br>      uni.<span class="hljs-title function_">showModal</span>(&#123;<br>        <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;提示&quot;</span>,<br>        <span class="hljs-attr">content</span>: <span class="hljs-string">&quot;是否保留此次编辑？&quot;</span>,<br>        <span class="hljs-title function_">success</span>(<span class="hljs-params">res</span>) &#123;<br>          <span class="hljs-keyword">if</span> (res.<span class="hljs-property">confirm</span>) &#123;<br>            <span class="hljs-comment">// 保存编辑（执行创建数据缓存的方法）</span><br>            that.<span class="hljs-title function_">createDataStorageSync</span>()<br>            uni.<span class="hljs-title function_">navigateBack</span>()<br>          &#125; <span class="hljs-keyword">else</span> &#123;<br>            uni.<span class="hljs-title function_">navigateBack</span>()<br>          &#125;<br>        &#125;<br>      &#125;)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      uni.<span class="hljs-title function_">navigateBack</span>()<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">//阻止默认返回行为</span><br>  &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】官方文档链接</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E9%93%BE%E6%8E%A5/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E9%93%BE%E6%8E%A5/</url>
    
    <content type="html"><![CDATA[<h1 id="前端基础相关文档"><a href="#前端基础相关文档" class="headerlink" title="前端基础相关文档"></a>前端基础相关文档</h1><p>MDN：<a href="https://developer.mozilla.org/zh-CN/">https://developer.mozilla.org/zh-CN/</a></p><h1 id="Vue相关文档"><a href="#Vue相关文档" class="headerlink" title="Vue相关文档"></a>Vue相关文档</h1><p>vue2.x：<a href="https://cn.vuejs.org/">https://cn.vuejs.org/</a></p><p>vue3.x（新版）：<a href="https://staging-cn.vuejs.org/">https://staging-cn.vuejs.org/</a></p><p>vue-router：<a href="https://router.vuejs.org/zh/">https://router.vuejs.org/zh/</a></p><p>vuex：<a href="https://vuex.vuejs.org/zh/">https://vuex.vuejs.org/zh/</a></p><p>vue-cli：<a href="https://cli.vuejs.org/zh/">https://cli.vuejs.org/zh/</a></p><p>element-ui：<a href="https://element.eleme.cn/#/zh-CN">https://element.eleme.cn/#/zh-CN</a></p><p>vant：<a href="https://vant-contrib.gitee.io/vant/v2/#/zh-CN/">https://vant-contrib.gitee.io/vant/v2/#/zh-CN/</a></p><p>form-create：<a href="http://www.form-create.com/">http://www.form-create.com/</a></p><p>form-create-designer：<a href="http://designer.form-create.com/">http://designer.form-create.com/</a></p><h1 id="uniapp相关文档"><a href="#uniapp相关文档" class="headerlink" title="uniapp相关文档"></a>uniapp相关文档</h1><p>uniapp：<a href="https://uniapp.dcloud.io/">https://uniapp.dcloud.io/</a></p><p>uview：<a href="https://www.uviewui.com/">https://www.uviewui.com/</a></p><h1 id="React相关文档"><a href="#React相关文档" class="headerlink" title="React相关文档"></a>React相关文档</h1><p>React：<a href="https://zh-hans.reactjs.org/">https://zh-hans.reactjs.org/</a></p><p>react-router-dom（v4&#x2F;v5）：<a href="https://v5.reactrouter.com/">https://v5.reactrouter.com/</a></p><p>react-router（v6）：<a href="https://reactrouter.com/">https://reactrouter.com/</a></p><p>redux：<a href="https://redux.js.org/">https://redux.js.org/</a></p><p>redux-thunk：<a href="https://redux.js.org/usage/writing-logic-thunks">https://redux.js.org/usage/writing-logic-thunks</a></p><p>react-redux：<a href="https://react-redux.js.org/">https://react-redux.js.org/</a></p><p>ant-design：<a href="https://ant.design/index-cn">https://ant.design/index-cn</a></p><p>ant-design-mobile：<a href="https://mobile.ant.design/zh">https://mobile.ant.design/zh</a></p><p>umi：<a href="https://umijs.org/zh-CN">https://umijs.org/zh-CN</a></p><h1 id="react-native相关文档"><a href="#react-native相关文档" class="headerlink" title="react-native相关文档"></a>react-native相关文档</h1><p>react-native：<a href="https://reactnative.cn/">https://reactnative.cn/</a></p><p>react-router-native（v4&#x2F;v5）：<a href="https://v5.reactrouter.com/">https://v5.reactrouter.com/</a></p><p>ant-design-mobile-rn：<a href="https://rn.mobile.ant.design/index-cn">https://rn.mobile.ant.design/index-cn</a></p><h1 id="构建工具相关文档"><a href="#构建工具相关文档" class="headerlink" title="构建工具相关文档"></a>构建工具相关文档</h1><p>webpack：<a href="https://webpack.docschina.org/">https://webpack.docschina.org/</a></p><p>rollup：<a href="https://rollupjs.org/guide/zh/">https://rollupjs.org/guide/zh/</a></p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】uniapp授权登录&amp;支付</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91uniapp%E6%8E%88%E6%9D%83%E7%99%BB%E5%BD%95&amp;%E6%94%AF%E4%BB%98/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91uniapp%E6%8E%88%E6%9D%83%E7%99%BB%E5%BD%95&amp;%E6%94%AF%E4%BB%98/</url>
    
    <content type="html"><![CDATA[<p>所有第三方授权登录及支付整体流程大概如下：<br>注册认证账号  —&gt;  在此账号下申请创建应用  —&gt;  再给该应用添加功能（授权登录、支付等功能。）<br>在给应用添加每一项功能时，每个功能的要求都有所不同（不同平台之间也有差异，需按照对应平台的要求缇提供）。比如支付需要有商户、提供上传营业执照等信息。</p><h2 id="授权登录"><a href="#授权登录" class="headerlink" title="授权登录"></a>授权登录</h2><p>uniapp登录鉴权功能需要到第三方开发平台申请应用后获取相关配置参数，并配置到uniapp打包配置中。<br>云端打包第三方授权登录只支持微信、QQ、新浪微博、apple（仅iOS13支持）。<br>参考地址：<a href="https://ask.dcloud.net.cn/article/192">https://ask.dcloud.net.cn/article/192</a></p><h3 id="微信授权登录"><a href="#微信授权登录" class="headerlink" title="微信授权登录"></a>微信授权登录</h3><p>微信授权登录需要：微信开放平台申请应用的AppID、AppSecret、Universal Links（ios平台通用链接）<br>微信登录，微信分享，微信支付配置的信息需要保持一致</p><ul><li>appid：微信开放平台申请应用的AppID值；</li><li>appSecret：微信开放平台申请应用的AppSecret值；</li><li>UniversalLinks：iOS平台通用链接，必须与微信开放平台配置的一致</li></ul><p>微信开放平台地址：<a href="https://open.weixin.qq.com/">https://open.weixin.qq.com/</a><br><strong>注册认证微信开放平台需要的资料：</strong><br><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91uniapp%E6%8E%88%E6%9D%83%E7%99%BB%E5%BD%95&%E6%94%AF%E4%BB%98/1.png"></p><h4 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// #ifdef APP-PLUS</span><br><span class="hljs-title function_">goAppLogin</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">let</span> that = <span class="hljs-variable language_">this</span>;<br>  <span class="hljs-keyword">var</span> all, <span class="hljs-title class_">Service</span>;<br>  plus.<span class="hljs-property">oauth</span>.<span class="hljs-title function_">getServices</span>(<br>    <span class="hljs-keyword">function</span>(<span class="hljs-params">Services</span>) &#123;<br>      all = <span class="hljs-title class_">Services</span>;<br>      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(all).<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (all[key].<span class="hljs-property">id</span> == <span class="hljs-string">&#x27;weixin&#x27;</span>) &#123;<br>          <span class="hljs-title class_">Service</span> = all[key];<br>        &#125;<br>      &#125;);<br>      <span class="hljs-title class_">Service</span>.<span class="hljs-title function_">authorize</span>(<br>        <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>          <span class="hljs-keyword">const</span> sendObj = &#123;<br>            <span class="hljs-attr">code</span>: e.<span class="hljs-property">code</span>,<br>            <span class="hljs-attr">scope</span>: e.<span class="hljs-property">scope</span><br>          &#125;<br>          <span class="hljs-comment">// goAppLogin 后端接口</span><br>          <span class="hljs-keyword">let</span> res = <span class="hljs-keyword">await</span> that.<span class="hljs-property">$api</span>.<span class="hljs-title function_">goAppLogin</span>(sendObj);<br>          <span class="hljs-keyword">if</span>(res.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) &#123;<br>            <span class="hljs-comment">// 失败后业务</span><br>            that.<span class="hljs-property">$u</span>.<span class="hljs-title function_">toast</span>(res.<span class="hljs-property">msg</span>);<br>            <span class="hljs-keyword">return</span><br>          &#125;<br>          <span class="hljs-comment">// 成功后业务</span><br>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">code</span>)<br>        &#125;,<br>        <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>          that.<span class="hljs-property">$u</span>.<span class="hljs-title function_">toast</span>(<span class="hljs-string">&#x27;授权失败！&#x27;</span>);<br>        &#125;<br>      );<br>    &#125;,<br>    <span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err);<br>      that.<span class="hljs-property">$u</span>.<span class="hljs-title function_">toast</span>(<span class="hljs-string">&#x27;授权失败！&#x27;</span>);<br>    &#125;<br>  );<br>&#125;<br><span class="hljs-comment">// #endif</span><br></code></pre></td></tr></table></figure><h3 id="QQ授权登录"><a href="#QQ授权登录" class="headerlink" title="QQ授权登录"></a>QQ授权登录</h3><p>QQ授权登录需要：腾讯QQ开放平台申请应用的AppID</p><ul><li>appid：腾讯QQ开放平台申请应用的AppID值。</li></ul><p>腾讯QQ开放平台地址：<a href="https://connect.qq.com/">https://connect.qq.com/</a><br><strong>注册认证QQ开放平台需要的资料：</strong><br><strong>公司接入：</strong></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91uniapp%E6%8E%88%E6%9D%83%E7%99%BB%E5%BD%95&%E6%94%AF%E4%BB%98/2.png"></p><p><strong>个人接入：</strong></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91uniapp%E6%8E%88%E6%9D%83%E7%99%BB%E5%BD%95&%E6%94%AF%E4%BB%98/3.png"></p><h4 id="代码示例-1"><a href="#代码示例-1" class="headerlink" title="代码示例"></a>代码示例</h4><p>参考微信登录</p><h3 id="新浪微博授权登录"><a href="#新浪微博授权登录" class="headerlink" title="新浪微博授权登录"></a>新浪微博授权登录</h3><p>新浪微博授权登录需要：新浪微博平台应用appkey、appsecret、redirect_uri（授权回调页地址）</p><ul><li>appkey: “新浪微博平台应用appkey”；</li><li>appsecret: “新浪微博平台应用appsecret”；</li><li>redirect_uri: “新浪微博平台应用授权回调页地址”。</li></ul><p>新浪微博开放平台地址：<a href="https://open.weibo.com/">https://open.weibo.com/</a></p><p><strong>注册认证微博开放平台需要的资料</strong></p><p><strong>公司接入：</strong></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91uniapp%E6%8E%88%E6%9D%83%E7%99%BB%E5%BD%95&%E6%94%AF%E4%BB%98/4.png"></p><p><strong>个人接入：</strong></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91uniapp%E6%8E%88%E6%9D%83%E7%99%BB%E5%BD%95&%E6%94%AF%E4%BB%98/5.png"></p><h4 id="代码示例-2"><a href="#代码示例-2" class="headerlink" title="代码示例"></a>代码示例</h4><p>参考微信登录</p><h3 id="apple授权登录"><a href="#apple授权登录" class="headerlink" title="apple授权登录"></a>apple授权登录</h3><p>ios13+支持，App Store审核规范。</p><h2 id="支付"><a href="#支付" class="headerlink" title="支付"></a>支付</h2><p>在使用支付前，需要向各支付平台申请开通支付功能。<br>uniapp支付支持微信、支付宝、Apple应用内支付（ios）。<br>参考地址：<a href="https://ask.dcloud.net.cn/article/71">https://ask.dcloud.net.cn/article/71</a></p><h3 id="微信支付"><a href="#微信支付" class="headerlink" title="微信支付"></a>微信支付</h3><p>微信支付需要到微信开放平台开通支付功能，申请应用后可以获取AppID和AppSecret值。<br>微信登录，微信分享，微信支付配置的信息需要保持一致<br>开通支付功能后可获取支付业务服务器配置数据：</p><ul><li><strong>PARTNER</strong>：财付通商户号</li><li><strong>PARTNER_KEY</strong>：财付通密钥</li><li><strong>PAYSIGNKEY</strong>：支付签名密钥</li></ul><h3 id="支付宝支付"><a href="#支付宝支付" class="headerlink" title="支付宝支付"></a>支付宝支付</h3><p>支付宝支付需要登录支付宝开放平台，创建应用接入支付宝App支付能力。</p><ul><li>创建应用（获取appid）</li><li>开通App支付功能</li><li>配置密钥（获取公钥、私钥）</li></ul><p>支付宝开放平台地址：<a href="https://open.alipay.com/platform/home.htm">https://open.alipay.com/platform/home.htm</a></p><h3 id="Apple应用内支付"><a href="#Apple应用内支付" class="headerlink" title="Apple应用内支付"></a>Apple应用内支付</h3><p>苹果应用内置流程</p>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】app获取uuid</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91app%E8%8E%B7%E5%8F%96uuid/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91app%E8%8E%B7%E5%8F%96uuid/</url>
    
    <content type="html"><![CDATA[<p>uniapp开发app获取uuid，一般开发会通过chrome先进行调试开发，所以获取uuid方法，我使用了条件编译及promise进行了判断封装。<br>为什么要条件编译？在chrome中开发调试是h5环境（h5环境获取不到uuid，但后台uuid是必传的情况下）也不会报错（懂的自然懂）。</p><p>示例代码（已封装）：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 获取uuid</span><br><span class="hljs-comment"> * 使用方法：</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> <span class="hljs-variable">Promise</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-title function_">getUuid</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// #ifdef H5</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// h5中返回随意的字符（不重要）</span><br>    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&quot;864771048534920&quot;</span>);<br>  &#125;)<br>  <span class="hljs-comment">// #endif</span><br>  <br>  <span class="hljs-comment">// #ifdef APP-PLUS</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    plus.<span class="hljs-property">device</span>.<span class="hljs-title function_">getInfo</span>(&#123;<br>      <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) &#123;<br>        <span class="hljs-keyword">const</span> uuidList = res.<span class="hljs-property">uuid</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;,&#x27;</span>)<br>        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">UUID</span> = uuidList[<span class="hljs-number">0</span>]<br>        <span class="hljs-title function_">resolve</span>(<span class="hljs-variable constant_">UUID</span>);<br>      &#125;,<br>      <span class="hljs-attr">fail</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>        <span class="hljs-title function_">reject</span>(e);<br>      &#125;<br>    &#125;);<br>  &#125;)<br>  <span class="hljs-comment">// #endif</span><br>&#125;,<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】app检查版本更新</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91app%E6%A3%80%E6%9F%A5%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91app%E6%A3%80%E6%9F%A5%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0/</url>
    
    <content type="html"><![CDATA[<p>安卓app更新机制：</p><ul><li>证书与包名完全一致的情况下，安装新版本的app会覆盖旧版本的app</li><li>证书一致，包名不一致的情况下，安装新版本的app</li><li>证书不一致，包名一致并且本机已经装了同包名的app的情况下，安装新版本app会出错</li></ul><p>更新分为全量更新(apk包) 增量更新(wgt包) </p><p>示例代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;view class=&quot;content&quot;&gt;<br>    &lt;view&gt;version: &#123;&#123; version &#125;&#125;&lt;/view&gt;<br>    &lt;view&gt;versionCode: &#123;&#123; versionCode &#125;&#125;&lt;/view&gt;<br>    &lt;view&gt;wgtVersion: &#123;&#123; wgtVersion &#125;&#125;&lt;/view&gt;<br>  &lt;/view&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      version: &#x27;&#x27;,<br>      versionCode: &#x27;&#x27;,<br>      wgtVersion: &#x27;&#x27;,<br>    &#125;<br>  &#125;,<br>  onLoad() &#123;<br>    this.getCurrentVersion()<br>  &#125;,<br>  methods: &#123;<br>    /**<br>     * 当前版本信息获取<br>     */<br>    getCurrentVersion() &#123;<br>      const systemInfo = uni.getSystemInfoSync()<br>      this.version = systemInfo.appVersion<br>      this.versionCode = systemInfo.appVersionCode<br>      this.wgtVersion = systemInfo.appWgtVersion<br>    &#125;,<br>    /**<br>     * 全量更新(wgt包)<br>     */<br>    handleUpdateAppApk() &#123;<br>      // #ifdef APP-PLUS<br>      updateApp(&#x27;请求app最新版本信息的接口&#x27;).then((res) =&gt; &#123;<br>        if (res.data.versionCode &gt; this.versionCode) &#123;<br>          uni.showModal(&#123;<br>            // 提醒用户更新 modal 框<br>            title: &#x27;更新提示&#x27;,<br>            content: &#x27;app有新版本，请更新&#x27;,<br>            success: (modalRes) =&gt; &#123;<br>              if (modalRes.confirm) &#123;<br>                // 可以使用 plus.runtime.openURL 打开地址下载 也可以使用 uni.downloadFile 创建下载任务进行下载（下方 wgt 更新使用该方案）<br>                plus.runtime.openURL(res.data.downloadUrl)<br>              &#125;<br>            &#125;,<br>          &#125;)<br>        &#125; else &#123;<br>          plus.nativeUI.toast(&#x27;已最新版本&#x27;)<br>        &#125;<br>      &#125;)<br>      // #endif<br>    &#125;,<br>    /**<br>     * 增量更新(wgt包)<br>     */<br>    handleUpdateAppWgt() &#123;<br>      // #ifdef APP-PLUS<br>      updateApp(&#x27;请求app最新版本信息的接口&#x27;).then((res) =&gt; &#123;<br>        if (res.data.versionCode &gt; this.versionCode) &#123;<br>          // 需要更新<br>          const downloadTask = uni.downloadFile(&#123;<br>            url: res.data.downloadUrl, // 下载地址<br>            success: (downloadResult) =&gt; &#123;<br>              if (downloadResult.statusCode === 200) &#123;<br>                plus.runtime.install(<br>                  downloadResult.tempFilePath,<br>                  &#123;<br>                    // force: 是否强制安装<br>                    // true表示强制安装，不进行版本号的校验；false则需要版本号校验，如果将要安装应用的版本号不高于现有应用的版本号则终止安装，并返回安装失败。 仅安装wgt和wgtu时生效，默认值 false。<br>                    force: false,<br>                  &#125;,<br>                  function () &#123;<br>                    console.log(&#x27;安装成功...&#x27;)<br>                    plus.nativeUI.showWaiting(&#x27;更新完成&#x27;)<br>                    setTimeout(() =&gt; &#123;<br>                      plus.nativeUI.closeWaiting()<br>                      plus.runtime.restart() //重启app<br>                    &#125;, 1500)<br>                  &#125;,<br>                  function (e) &#123;<br>                    console.error(&#x27;安装失败...&#x27;, e)<br>                    plus.nativeUI.toast(`安装失败：$&#123;e.message&#125;`)<br>                  &#125;<br>                )<br>              &#125;<br>            &#125;,<br>            fail: (item) =&gt; &#123;<br>              console.log(item)<br>            &#125;,<br>          &#125;)<br>          downloadTask.onProgressUpdate((item) =&gt; &#123;<br>            console.log(&#x27;下载进度：&#x27;, item.progress, &#x27;%&#x27;)<br>          &#125;)<br>        &#125; else &#123;<br>          plus.nativeUI.toast(&#x27;已最新版本&#x27;)<br>        &#125;<br>      &#125;)<br>      // #endif<br>    &#125;,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】app转跳微信小程序-所需要求</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91app%E8%BD%AC%E8%B7%B3%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E6%89%80%E9%9C%80%E8%A6%81%E6%B1%82/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91app%E8%BD%AC%E8%B7%B3%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E6%89%80%E9%9C%80%E8%A6%81%E6%B1%82/</url>
    
    <content type="html"><![CDATA[<h2 id="微信开放平台账号注册："><a href="#微信开放平台账号注册：" class="headerlink" title="微信开放平台账号注册："></a>微信开放平台账号注册：</h2><p>微信开放平台：<a href="https://open.weixin.qq.com/">https://open.weixin.qq.com/</a></p><p>注册成功后（开发者资质并未认证，认证与未认证区别在本文下方的“转跳规则”），在管理中心 - 移动应用 - 创建移动应用</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91app%E8%BD%AC%E8%B7%B3%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E6%89%80%E9%9C%80%E8%A6%81%E6%B1%82/1.png"></p><h2 id="创建移动应用："><a href="#创建移动应用：" class="headerlink" title="创建移动应用："></a>创建移动应用：</h2><h3 id="第一步："><a href="#第一步：" class="headerlink" title="第一步："></a>第一步：</h3><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91app%E8%BD%AC%E8%B7%B3%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E6%89%80%E9%9C%80%E8%A6%81%E6%B1%82/2.png"></p><h3 id="第二步："><a href="#第二步：" class="headerlink" title="第二步："></a>第二步：</h3><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91app%E8%BD%AC%E8%B7%B3%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E6%89%80%E9%9C%80%E8%A6%81%E6%B1%82/3.png"></p><h2 id="转跳功能介绍"><a href="#转跳功能介绍" class="headerlink" title="转跳功能介绍"></a>转跳功能介绍</h2><p>考虑到部分场景下 APP 需要通过小程序来承载服务，为此 OpenSDK 提供了移动应用（APP）拉起小程序功能。移动应用（APP）接入此功能后，用户可以在 APP 中跳转至微信某一小程序的指定页面，完成服务后再跳回至原 APP 。移动应用拉起小程序功能已向全体开发者开放，开发者在微信开放平台帐号下申请移动应用并<strong>通过审核</strong>后，即可获得移动应用拉起小程序功能权限。</p><h2 id="跳转规则"><a href="#跳转规则" class="headerlink" title="跳转规则"></a>跳转规则</h2><ol><li>对于已通过认证的开放平台账号，其移动应用可以跳转至任何合法的小程序，且不限制跳转的小程序数量。</li><li>对于未通过认证的开放平台账号，其移动应用仅可以跳转至同一开放平台账号下小程序。</li></ol><p>注意：若移动应用未上架，则最多只能跳转小程序100次&#x2F;天，用于满足调试需求。<br>（摘自微信开放文档）</p><p><a href="https://developers.weixin.qq.com/doc/oplatform/Mobile_App/Launching_a_Mini_Program/Launching_a_Mini_Program.html">https://developers.weixin.qq.com/doc/oplatform/Mobile_App&#x2F;Launching_a_Mini_Program&#x2F;Launching_a_Mini_Program.html</a></p><h2 id="账号未认证绑定非本主体的小程序示例："><a href="#账号未认证绑定非本主体的小程序示例：" class="headerlink" title="账号未认证绑定非本主体的小程序示例："></a>账号未认证绑定非本主体的小程序示例：</h2><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91app%E8%BD%AC%E8%B7%B3%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E6%89%80%E9%9C%80%E8%A6%81%E6%B1%82/4.png"></p><h2 id="参考文献："><a href="#参考文献：" class="headerlink" title="参考文献："></a>参考文献：</h2><h3 id="APP拉起小程序的新规则，不再需要开放平台关联小程序，也不做限制"><a href="#APP拉起小程序的新规则，不再需要开放平台关联小程序，也不做限制" class="headerlink" title="APP拉起小程序的新规则，不再需要开放平台关联小程序，也不做限制"></a>APP拉起小程序的新规则，不再需要开放平台关联小程序，也不做限制</h3><p><a href="https://developers.weixin.qq.com/community/develop/article/doc/0002aec12ccf18c57e4a798e25b013">https://developers.weixin.qq.com/community/develop/article/doc/0002aec12ccf18c57e4a798e25b013</a></p>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】app转跳微信小程序</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91app%E8%BD%AC%E8%B7%B3%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91app%E8%BD%AC%E8%B7%B3%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/</url>
    
    <content type="html"><![CDATA[<p>uniapp中app转跳打开微信小程序需要使用<code>plus.share</code>模块，打包时必须勾选share模块，选择微信分享填入appid（此处的appid是微信开放平台申请应用的appid）。<br><strong>注意：没有认证的开放平台账号，只能跳转同主体下的小程序</strong></p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91app%E8%BD%AC%E8%B7%B3%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/1.png"></p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91app%E8%BD%AC%E8%B7%B3%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/2.png"></p><p>需要使用plus.share.getServices，获取微信分享服务对象，再使用launchMiniProgram调用微信小程序。<br>示例代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs vue">towxapp() &#123;<br>  // #ifdef APP-PLUS<br>  plus.share.getServices(function(res) &#123;<br>    var sweixin = null;<br>    for (var i = 0; i &lt; res.length; i++) &#123;<br>      var t = res[i];<br>      if (t.id == &#x27;weixin&#x27;) &#123;<br>        sweixin = t;<br>      &#125;<br>    &#125;<br>    if (sweixin) &#123;<br>      sweixin.launchMiniProgram(&#123;<br>        id: &#x27;gh_24624714f0f9&#x27;,  // 小程序原始id<br>        type: 0,  // 0-正式版； 1-测试版； 2-体验版。 默认值为0<br>      &#125;);<br>    &#125; else &#123;<br>      plus.nativeUI.alert(&#x27;当前环境不支持微信操作!&#x27;);<br>    &#125;<br>  &#125;, function(res) &#123;<br>    console.log(JSON.stringify(res));<br>  &#125;);<br>  // #endif<br>&#125;,<br></code></pre></td></tr></table></figure><p>launchMiniProgram的属性值：</p><ul><li>id: (String 类型 )微信小程序ID；注意：是微信小程序的原始ID（”g_”开头的字符串）。</li><li>path: (String 类型 )微信小程序打开的页面路径</li><li>type: (Number 类型 )微信小程序版本类型；可取值： 0-正式版； 1-测试版； 2-体验版。 默认值为0。</li><li>webUrl: (String 类型 )兼容低版本的网页链接</li></ul><p>示例：</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91app%E8%BD%AC%E8%B7%B3%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/3.png"></p>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】下载文件</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// downSuccessStatus为文本提示</span><br><span class="hljs-comment">// 下载</span><br><span class="hljs-title function_">handleDownload</span>(<span class="hljs-params">url</span>) &#123;<br>  <span class="hljs-keyword">const</span> that = <span class="hljs-variable language_">this</span>;<br>  <span class="hljs-comment">// #ifndef H5</span><br>  that.<span class="hljs-property">downSuccessStatus</span> = <span class="hljs-string">`下载中，请稍等...`</span>;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">downSuccessShow</span> = <span class="hljs-literal">true</span>;<br>  uni.<span class="hljs-title function_">downloadFile</span>(&#123;<br>    <span class="hljs-attr">url</span>: url,<br>    <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (res.<span class="hljs-property">statusCode</span> === <span class="hljs-number">200</span>) &#123;<br>        uni.<span class="hljs-title function_">saveFile</span>(&#123;<br>          <span class="hljs-attr">tempFilePath</span>: res.<span class="hljs-property">tempFilePath</span>,<br>          <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) &#123;<br>            <span class="hljs-keyword">const</span> description = res.<span class="hljs-property">savedFilePath</span>;<br>            that.<span class="hljs-property">downSuccessStatus</span> = <span class="hljs-string">`下载成功，存储路径为: <span class="hljs-subst">$&#123;description&#125;</span>`</span>;<br>          &#125;,<br>          <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;<br>            that.<span class="hljs-property">downSuccessStatus</span> = <span class="hljs-string">`存储文件失败`</span>;<br>          &#125;<br>        &#125;);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        that.<span class="hljs-property">downSuccessStatus</span> = <span class="hljs-string">`下载失败，错误码：<span class="hljs-subst">$&#123;res.statusCode&#125;</span>`</span>;<br>      &#125;<br>    &#125;,<br>    <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;<br>      that.<span class="hljs-property">downSuccessStatus</span> = <span class="hljs-string">`下载失败`</span>;<br>    &#125;<br>  &#125;);<br>  <span class="hljs-comment">// #endif</span><br>  <span class="hljs-comment">// #ifdef H5</span><br>  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(url);<br>  <span class="hljs-comment">// #endif</span><br>&#125;,<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】MD5摘要后输出</title>
    <link href="/js/%E3%80%90js%E3%80%91MD5%E6%91%98%E8%A6%81%E5%90%8E%E8%BE%93%E5%87%BA/"/>
    <url>/js/%E3%80%90js%E3%80%91MD5%E6%91%98%E8%A6%81%E5%90%8E%E8%BE%93%E5%87%BA/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 改为模块化</span><br><span class="hljs-comment"> * 该方法只支持 ASCII 码支持的字符, 其它字符可能会出现异常</span><br><span class="hljs-comment"> * 三个基础方法, 只有一个参数为要加密的字符串</span><br><span class="hljs-comment"> *     roc.md5.hex(string) 摘要算法后 十六进制 输出</span><br><span class="hljs-comment"> *     roc.md5.b64(string) 摘要算法后 base64编码 输出</span><br><span class="hljs-comment"> *     roc.md5.str(string) 摘要算法后转化为 字符串 输出</span><br><span class="hljs-comment"> * 三个高级方法, 第一个参数是秘钥, 第二个参数是要加密的字符串</span><br><span class="hljs-comment"> *     roc.md5.hamcHex(key, data) 摘要加密算法后 十六进制 输出</span><br><span class="hljs-comment"> *     roc.md5.hamcB64(key, data) 摘要加密算法后 base64编码 输出</span><br><span class="hljs-comment"> *     roc.md5.hamcStr(key, data) 摘要机密算法后 字符串 输出</span><br><span class="hljs-comment"> * 三个可配置参数</span><br><span class="hljs-comment"> *     hexcase: 十六进制输出格式, 0 小写, 1 大写</span><br><span class="hljs-comment"> *     b64pad:  base64 缺省字符, &quot;=&quot; 严格遵守 RFC</span><br><span class="hljs-comment"> *     chrsz:   每个输入字符的位, 8-ASCII；16-Unicode</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">const</span> roc = &#123;&#125;;<br>(<span class="hljs-keyword">function</span>(<span class="hljs-params">roc, hexcase, b64pad, chrsz</span>) &#123;<br>roc.<span class="hljs-property">md5</span> = &#123;&#125;;<br>roc.<span class="hljs-property">md5</span>.<span class="hljs-property">hex</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">binl2hex</span>(<span class="hljs-title function_">core_md5</span>(<span class="hljs-title function_">str2binl</span>(s), s.<span class="hljs-property">length</span> * chrsz))<br>&#125;;<br>roc.<span class="hljs-property">md5</span>.<span class="hljs-property">b64</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">binl2b64</span>(<span class="hljs-title function_">core_md5</span>(<span class="hljs-title function_">str2binl</span>(s), s.<span class="hljs-property">length</span> * chrsz))<br>&#125;;<br>roc.<span class="hljs-property">md5</span>.<span class="hljs-property">str</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">binl2str</span>(<span class="hljs-title function_">core_md5</span>(<span class="hljs-title function_">str2binl</span>(s), s.<span class="hljs-property">length</span> * chrsz))<br>&#125;;<br>roc.<span class="hljs-property">md5</span>.<span class="hljs-property">hamcHex</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">key, data</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">binl2hex</span>(<span class="hljs-title function_">core_hmac_md5</span>(key, data))<br>&#125;;<br>roc.<span class="hljs-property">md5</span>.<span class="hljs-property">hamcB64</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">key, data</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">binl2b64</span>(<span class="hljs-title function_">core_hmac_md5</span>(key, data))<br>&#125;;<br>roc.<span class="hljs-property">md5</span>.<span class="hljs-property">hamcStr</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">key, data</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">binl2str</span>(<span class="hljs-title function_">core_hmac_md5</span>(key, data))<br>&#125;;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">md5_vm_test</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">hex_md5</span>(<span class="hljs-string">&quot;abc&quot;</span>) == <span class="hljs-string">&quot;900150983cd24fb0d6963f7d28e17f72&quot;</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">core_md5</span>(<span class="hljs-params">x, len</span>) &#123;<br>x[len &gt;&gt; <span class="hljs-number">5</span>] |= <span class="hljs-number">128</span> &lt;&lt; ((len) % <span class="hljs-number">32</span>);<br>x[(((len + <span class="hljs-number">64</span>) &gt;&gt;&gt; <span class="hljs-number">9</span>) &lt;&lt; <span class="hljs-number">4</span>) + <span class="hljs-number">14</span>] = len;<br><span class="hljs-keyword">var</span> a = <span class="hljs-number">1732584193</span>,<br>b = -<span class="hljs-number">271733879</span>;<br><span class="hljs-keyword">var</span> c = -<span class="hljs-number">1732584194</span>,<br>d = <span class="hljs-number">271733878</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; x.<span class="hljs-property">length</span>; i += <span class="hljs-number">16</span>) &#123;<br><span class="hljs-keyword">var</span> olda = a,<br>oldb = b,<br>oldc = c,<br>oldd = d;<br>a = <span class="hljs-title function_">md5_ff</span>(a, b, c, d, x[i + <span class="hljs-number">0</span>], <span class="hljs-number">7</span>, -<span class="hljs-number">680876936</span>);<br>d = <span class="hljs-title function_">md5_ff</span>(d, a, b, c, x[i + <span class="hljs-number">1</span>], <span class="hljs-number">12</span>, -<span class="hljs-number">389564586</span>);<br>c = <span class="hljs-title function_">md5_ff</span>(c, d, a, b, x[i + <span class="hljs-number">2</span>], <span class="hljs-number">17</span>, <span class="hljs-number">606105819</span>);<br>b = <span class="hljs-title function_">md5_ff</span>(b, c, d, a, x[i + <span class="hljs-number">3</span>], <span class="hljs-number">22</span>, -<span class="hljs-number">1044525330</span>);<br>a = <span class="hljs-title function_">md5_ff</span>(a, b, c, d, x[i + <span class="hljs-number">4</span>], <span class="hljs-number">7</span>, -<span class="hljs-number">176418897</span>);<br>d = <span class="hljs-title function_">md5_ff</span>(d, a, b, c, x[i + <span class="hljs-number">5</span>], <span class="hljs-number">12</span>, <span class="hljs-number">1200080426</span>);<br>c = <span class="hljs-title function_">md5_ff</span>(c, d, a, b, x[i + <span class="hljs-number">6</span>], <span class="hljs-number">17</span>, -<span class="hljs-number">1473231341</span>);<br>b = <span class="hljs-title function_">md5_ff</span>(b, c, d, a, x[i + <span class="hljs-number">7</span>], <span class="hljs-number">22</span>, -<span class="hljs-number">45705983</span>);<br>a = <span class="hljs-title function_">md5_ff</span>(a, b, c, d, x[i + <span class="hljs-number">8</span>], <span class="hljs-number">7</span>, <span class="hljs-number">1770035416</span>);<br>d = <span class="hljs-title function_">md5_ff</span>(d, a, b, c, x[i + <span class="hljs-number">9</span>], <span class="hljs-number">12</span>, -<span class="hljs-number">1958414417</span>);<br>c = <span class="hljs-title function_">md5_ff</span>(c, d, a, b, x[i + <span class="hljs-number">10</span>], <span class="hljs-number">17</span>, -<span class="hljs-number">42063</span>);<br>b = <span class="hljs-title function_">md5_ff</span>(b, c, d, a, x[i + <span class="hljs-number">11</span>], <span class="hljs-number">22</span>, -<span class="hljs-number">1990404162</span>);<br>a = <span class="hljs-title function_">md5_ff</span>(a, b, c, d, x[i + <span class="hljs-number">12</span>], <span class="hljs-number">7</span>, <span class="hljs-number">1804603682</span>);<br>d = <span class="hljs-title function_">md5_ff</span>(d, a, b, c, x[i + <span class="hljs-number">13</span>], <span class="hljs-number">12</span>, -<span class="hljs-number">40341101</span>);<br>c = <span class="hljs-title function_">md5_ff</span>(c, d, a, b, x[i + <span class="hljs-number">14</span>], <span class="hljs-number">17</span>, -<span class="hljs-number">1502002290</span>);<br>b = <span class="hljs-title function_">md5_ff</span>(b, c, d, a, x[i + <span class="hljs-number">15</span>], <span class="hljs-number">22</span>, <span class="hljs-number">1236535329</span>);<br>a = <span class="hljs-title function_">md5_gg</span>(a, b, c, d, x[i + <span class="hljs-number">1</span>], <span class="hljs-number">5</span>, -<span class="hljs-number">165796510</span>);<br>d = <span class="hljs-title function_">md5_gg</span>(d, a, b, c, x[i + <span class="hljs-number">6</span>], <span class="hljs-number">9</span>, -<span class="hljs-number">1069501632</span>);<br>c = <span class="hljs-title function_">md5_gg</span>(c, d, a, b, x[i + <span class="hljs-number">11</span>], <span class="hljs-number">14</span>, <span class="hljs-number">643717713</span>);<br>b = <span class="hljs-title function_">md5_gg</span>(b, c, d, a, x[i + <span class="hljs-number">0</span>], <span class="hljs-number">20</span>, -<span class="hljs-number">373897302</span>);<br>a = <span class="hljs-title function_">md5_gg</span>(a, b, c, d, x[i + <span class="hljs-number">5</span>], <span class="hljs-number">5</span>, -<span class="hljs-number">701558691</span>);<br>d = <span class="hljs-title function_">md5_gg</span>(d, a, b, c, x[i + <span class="hljs-number">10</span>], <span class="hljs-number">9</span>, <span class="hljs-number">38016083</span>);<br>c = <span class="hljs-title function_">md5_gg</span>(c, d, a, b, x[i + <span class="hljs-number">15</span>], <span class="hljs-number">14</span>, -<span class="hljs-number">660478335</span>);<br>b = <span class="hljs-title function_">md5_gg</span>(b, c, d, a, x[i + <span class="hljs-number">4</span>], <span class="hljs-number">20</span>, -<span class="hljs-number">405537848</span>);<br>a = <span class="hljs-title function_">md5_gg</span>(a, b, c, d, x[i + <span class="hljs-number">9</span>], <span class="hljs-number">5</span>, <span class="hljs-number">568446438</span>);<br>d = <span class="hljs-title function_">md5_gg</span>(d, a, b, c, x[i + <span class="hljs-number">14</span>], <span class="hljs-number">9</span>, -<span class="hljs-number">1019803690</span>);<br>c = <span class="hljs-title function_">md5_gg</span>(c, d, a, b, x[i + <span class="hljs-number">3</span>], <span class="hljs-number">14</span>, -<span class="hljs-number">187363961</span>);<br>b = <span class="hljs-title function_">md5_gg</span>(b, c, d, a, x[i + <span class="hljs-number">8</span>], <span class="hljs-number">20</span>, <span class="hljs-number">1163531501</span>);<br>a = <span class="hljs-title function_">md5_gg</span>(a, b, c, d, x[i + <span class="hljs-number">13</span>], <span class="hljs-number">5</span>, -<span class="hljs-number">1444681467</span>);<br>d = <span class="hljs-title function_">md5_gg</span>(d, a, b, c, x[i + <span class="hljs-number">2</span>], <span class="hljs-number">9</span>, -<span class="hljs-number">51403784</span>);<br>c = <span class="hljs-title function_">md5_gg</span>(c, d, a, b, x[i + <span class="hljs-number">7</span>], <span class="hljs-number">14</span>, <span class="hljs-number">1735328473</span>);<br>b = <span class="hljs-title function_">md5_gg</span>(b, c, d, a, x[i + <span class="hljs-number">12</span>], <span class="hljs-number">20</span>, -<span class="hljs-number">1926607734</span>);<br>a = <span class="hljs-title function_">md5_hh</span>(a, b, c, d, x[i + <span class="hljs-number">5</span>], <span class="hljs-number">4</span>, -<span class="hljs-number">378558</span>);<br>d = <span class="hljs-title function_">md5_hh</span>(d, a, b, c, x[i + <span class="hljs-number">8</span>], <span class="hljs-number">11</span>, -<span class="hljs-number">2022574463</span>);<br>c = <span class="hljs-title function_">md5_hh</span>(c, d, a, b, x[i + <span class="hljs-number">11</span>], <span class="hljs-number">16</span>, <span class="hljs-number">1839030562</span>);<br>b = <span class="hljs-title function_">md5_hh</span>(b, c, d, a, x[i + <span class="hljs-number">14</span>], <span class="hljs-number">23</span>, -<span class="hljs-number">35309556</span>);<br>a = <span class="hljs-title function_">md5_hh</span>(a, b, c, d, x[i + <span class="hljs-number">1</span>], <span class="hljs-number">4</span>, -<span class="hljs-number">1530992060</span>);<br>d = <span class="hljs-title function_">md5_hh</span>(d, a, b, c, x[i + <span class="hljs-number">4</span>], <span class="hljs-number">11</span>, <span class="hljs-number">1272893353</span>);<br>c = <span class="hljs-title function_">md5_hh</span>(c, d, a, b, x[i + <span class="hljs-number">7</span>], <span class="hljs-number">16</span>, -<span class="hljs-number">155497632</span>);<br>b = <span class="hljs-title function_">md5_hh</span>(b, c, d, a, x[i + <span class="hljs-number">10</span>], <span class="hljs-number">23</span>, -<span class="hljs-number">1094730640</span>);<br>a = <span class="hljs-title function_">md5_hh</span>(a, b, c, d, x[i + <span class="hljs-number">13</span>], <span class="hljs-number">4</span>, <span class="hljs-number">681279174</span>);<br>d = <span class="hljs-title function_">md5_hh</span>(d, a, b, c, x[i + <span class="hljs-number">0</span>], <span class="hljs-number">11</span>, -<span class="hljs-number">358537222</span>);<br>c = <span class="hljs-title function_">md5_hh</span>(c, d, a, b, x[i + <span class="hljs-number">3</span>], <span class="hljs-number">16</span>, -<span class="hljs-number">722521979</span>);<br>b = <span class="hljs-title function_">md5_hh</span>(b, c, d, a, x[i + <span class="hljs-number">6</span>], <span class="hljs-number">23</span>, <span class="hljs-number">76029189</span>);<br>a = <span class="hljs-title function_">md5_hh</span>(a, b, c, d, x[i + <span class="hljs-number">9</span>], <span class="hljs-number">4</span>, -<span class="hljs-number">640364487</span>);<br>d = <span class="hljs-title function_">md5_hh</span>(d, a, b, c, x[i + <span class="hljs-number">12</span>], <span class="hljs-number">11</span>, -<span class="hljs-number">421815835</span>);<br>c = <span class="hljs-title function_">md5_hh</span>(c, d, a, b, x[i + <span class="hljs-number">15</span>], <span class="hljs-number">16</span>, <span class="hljs-number">530742520</span>);<br>b = <span class="hljs-title function_">md5_hh</span>(b, c, d, a, x[i + <span class="hljs-number">2</span>], <span class="hljs-number">23</span>, -<span class="hljs-number">995338651</span>);<br>a = <span class="hljs-title function_">md5_ii</span>(a, b, c, d, x[i + <span class="hljs-number">0</span>], <span class="hljs-number">6</span>, -<span class="hljs-number">198630844</span>);<br>d = <span class="hljs-title function_">md5_ii</span>(d, a, b, c, x[i + <span class="hljs-number">7</span>], <span class="hljs-number">10</span>, <span class="hljs-number">1126891415</span>);<br>c = <span class="hljs-title function_">md5_ii</span>(c, d, a, b, x[i + <span class="hljs-number">14</span>], <span class="hljs-number">15</span>, -<span class="hljs-number">1416354905</span>);<br>b = <span class="hljs-title function_">md5_ii</span>(b, c, d, a, x[i + <span class="hljs-number">5</span>], <span class="hljs-number">21</span>, -<span class="hljs-number">57434055</span>);<br>a = <span class="hljs-title function_">md5_ii</span>(a, b, c, d, x[i + <span class="hljs-number">12</span>], <span class="hljs-number">6</span>, <span class="hljs-number">1700485571</span>);<br>d = <span class="hljs-title function_">md5_ii</span>(d, a, b, c, x[i + <span class="hljs-number">3</span>], <span class="hljs-number">10</span>, -<span class="hljs-number">1894986606</span>);<br>c = <span class="hljs-title function_">md5_ii</span>(c, d, a, b, x[i + <span class="hljs-number">10</span>], <span class="hljs-number">15</span>, -<span class="hljs-number">1051523</span>);<br>b = <span class="hljs-title function_">md5_ii</span>(b, c, d, a, x[i + <span class="hljs-number">1</span>], <span class="hljs-number">21</span>, -<span class="hljs-number">2054922799</span>);<br>a = <span class="hljs-title function_">md5_ii</span>(a, b, c, d, x[i + <span class="hljs-number">8</span>], <span class="hljs-number">6</span>, <span class="hljs-number">1873313359</span>);<br>d = <span class="hljs-title function_">md5_ii</span>(d, a, b, c, x[i + <span class="hljs-number">15</span>], <span class="hljs-number">10</span>, -<span class="hljs-number">30611744</span>);<br>c = <span class="hljs-title function_">md5_ii</span>(c, d, a, b, x[i + <span class="hljs-number">6</span>], <span class="hljs-number">15</span>, -<span class="hljs-number">1560198380</span>);<br>b = <span class="hljs-title function_">md5_ii</span>(b, c, d, a, x[i + <span class="hljs-number">13</span>], <span class="hljs-number">21</span>, <span class="hljs-number">1309151649</span>);<br>a = <span class="hljs-title function_">md5_ii</span>(a, b, c, d, x[i + <span class="hljs-number">4</span>], <span class="hljs-number">6</span>, -<span class="hljs-number">145523070</span>);<br>d = <span class="hljs-title function_">md5_ii</span>(d, a, b, c, x[i + <span class="hljs-number">11</span>], <span class="hljs-number">10</span>, -<span class="hljs-number">1120210379</span>);<br>c = <span class="hljs-title function_">md5_ii</span>(c, d, a, b, x[i + <span class="hljs-number">2</span>], <span class="hljs-number">15</span>, <span class="hljs-number">718787259</span>);<br>b = <span class="hljs-title function_">md5_ii</span>(b, c, d, a, x[i + <span class="hljs-number">9</span>], <span class="hljs-number">21</span>, -<span class="hljs-number">343485551</span>);<br>a = <span class="hljs-title function_">safe_add</span>(a, olda);<br>b = <span class="hljs-title function_">safe_add</span>(b, oldb);<br>c = <span class="hljs-title function_">safe_add</span>(c, oldc);<br>d = <span class="hljs-title function_">safe_add</span>(d, oldd)<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>(a, b, c, d)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">md5_cmn</span>(<span class="hljs-params">q, a, b, x, s, t</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">safe_add</span>(<span class="hljs-title function_">bit_rol</span>(<span class="hljs-title function_">safe_add</span>(<span class="hljs-title function_">safe_add</span>(a, q), <span class="hljs-title function_">safe_add</span>(x, t)), s), b)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">md5_ff</span>(<span class="hljs-params">a, b, c, d, x, s, t</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">md5_cmn</span>((b &amp; c) | ((~b) &amp; d), a, b, x, s, t)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">md5_gg</span>(<span class="hljs-params">a, b, c, d, x, s, t</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">md5_cmn</span>((b &amp; d) | (c &amp; (~d)), a, b, x, s, t)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">md5_hh</span>(<span class="hljs-params">a, b, c, d, x, s, t</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">md5_cmn</span>(b ^ c ^ d, a, b, x, s, t)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">md5_ii</span>(<span class="hljs-params">a, b, c, d, x, s, t</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">md5_cmn</span>(c ^ (b | (~d)), a, b, x, s, t)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">core_hmac_md5</span>(<span class="hljs-params">key, data</span>) &#123;<br><span class="hljs-keyword">var</span> bkey = <span class="hljs-title function_">str2binl</span>(key);<br><span class="hljs-keyword">if</span> (bkey.<span class="hljs-property">length</span> &gt; <span class="hljs-number">16</span>) &#123;<br>bkey = <span class="hljs-title function_">core_md5</span>(bkey, key.<span class="hljs-property">length</span> * chrsz)<br>&#125;<br><span class="hljs-keyword">var</span> ipad = <span class="hljs-title class_">Array</span>(<span class="hljs-number">16</span>),<br>opad = <span class="hljs-title class_">Array</span>(<span class="hljs-number">16</span>);<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">16</span>; i++) &#123;<br>ipad[i] = bkey[i] ^ <span class="hljs-number">909522486</span>;<br>opad[i] = bkey[i] ^ <span class="hljs-number">1549556828</span><br>&#125;<br><span class="hljs-keyword">var</span> hash = <span class="hljs-title function_">core_md5</span>(ipad.<span class="hljs-title function_">concat</span>(<span class="hljs-title function_">str2binl</span>(data)), <span class="hljs-number">512</span> + data.<span class="hljs-property">length</span> * chrsz);<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">core_md5</span>(opad.<span class="hljs-title function_">concat</span>(hash), <span class="hljs-number">512</span> + <span class="hljs-number">128</span>)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">safe_add</span>(<span class="hljs-params">x, y</span>) &#123;<br><span class="hljs-keyword">var</span> lsw = (x &amp; <span class="hljs-number">65535</span>) + (y &amp; <span class="hljs-number">65535</span>);<br><span class="hljs-keyword">var</span> msw = (x &gt;&gt; <span class="hljs-number">16</span>) + (y &gt;&gt; <span class="hljs-number">16</span>) + (lsw &gt;&gt; <span class="hljs-number">16</span>);<br><span class="hljs-keyword">return</span> (msw &lt;&lt; <span class="hljs-number">16</span>) | (lsw &amp; <span class="hljs-number">65535</span>)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">bit_rol</span>(<span class="hljs-params">num, cnt</span>) &#123;<br><span class="hljs-keyword">return</span> (num &lt;&lt; cnt) | (num &gt;&gt;&gt; (<span class="hljs-number">32</span> - cnt))<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">str2binl</span>(<span class="hljs-params">str</span>) &#123;<br><span class="hljs-keyword">var</span> bin = <span class="hljs-title class_">Array</span>();<br><span class="hljs-keyword">var</span> mask = (<span class="hljs-number">1</span> &lt;&lt; chrsz) - <span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; str.<span class="hljs-property">length</span> * chrsz; i += chrsz) &#123;<br>bin[i &gt;&gt; <span class="hljs-number">5</span>] |= (str.<span class="hljs-title function_">charCodeAt</span>(i / chrsz) &amp; mask) &lt;&lt; (i % <span class="hljs-number">32</span>)<br>&#125;<br><span class="hljs-keyword">return</span> bin<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">binl2str</span>(<span class="hljs-params">bin</span>) &#123;<br><span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;&quot;</span>;<br><span class="hljs-keyword">var</span> mask = (<span class="hljs-number">1</span> &lt;&lt; chrsz) - <span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; bin.<span class="hljs-property">length</span> * <span class="hljs-number">32</span>; i += chrsz) &#123;<br>str += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>((bin[i &gt;&gt; <span class="hljs-number">5</span>] &gt;&gt;&gt; (i % <span class="hljs-number">32</span>)) &amp; mask)<br>&#125;<br><span class="hljs-keyword">return</span> str<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">binl2hex</span>(<span class="hljs-params">binarray</span>) &#123;<br><span class="hljs-keyword">var</span> hex_tab = hexcase ? <span class="hljs-string">&quot;0123456789ABCDEF&quot;</span> : <span class="hljs-string">&quot;0123456789abcdef&quot;</span>;<br><span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;&quot;</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; binarray.<span class="hljs-property">length</span> * <span class="hljs-number">4</span>; i++) &#123;<br>str += hex_tab.<span class="hljs-title function_">charAt</span>((binarray[i &gt;&gt; <span class="hljs-number">2</span>] &gt;&gt; ((i % <span class="hljs-number">4</span>) * <span class="hljs-number">8</span> + <span class="hljs-number">4</span>)) &amp; <span class="hljs-number">15</span>) + hex_tab.<span class="hljs-title function_">charAt</span>((binarray[i &gt;&gt;<br><span class="hljs-number">2</span>] &gt;&gt; ((i % <span class="hljs-number">4</span>) * <span class="hljs-number">8</span>)) &amp; <span class="hljs-number">15</span>)<br>&#125;<br><span class="hljs-keyword">return</span> str<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">binl2b64</span>(<span class="hljs-params">binarray</span>) &#123;<br><span class="hljs-keyword">var</span> tab = <span class="hljs-string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;</span>;<br><span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;&quot;</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; binarray.<span class="hljs-property">length</span> * <span class="hljs-number">4</span>; i += <span class="hljs-number">3</span>) &#123;<br><span class="hljs-keyword">var</span> triplet = (((binarray[i &gt;&gt; <span class="hljs-number">2</span>] &gt;&gt; <span class="hljs-number">8</span> * (i % <span class="hljs-number">4</span>)) &amp; <span class="hljs-number">255</span>) &lt;&lt; <span class="hljs-number">16</span>) | (((binarray[i + <span class="hljs-number">1</span> &gt;&gt; <span class="hljs-number">2</span>] &gt;&gt; <span class="hljs-number">8</span> * ((i +<br><span class="hljs-number">1</span>) % <span class="hljs-number">4</span>)) &amp; <span class="hljs-number">255</span>) &lt;&lt; <span class="hljs-number">8</span>) | ((binarray[i + <span class="hljs-number">2</span> &gt;&gt; <span class="hljs-number">2</span>] &gt;&gt; <span class="hljs-number">8</span> * ((i + <span class="hljs-number">2</span>) % <span class="hljs-number">4</span>)) &amp; <span class="hljs-number">255</span>);<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">4</span>; j++) &#123;<br><span class="hljs-keyword">if</span> (i * <span class="hljs-number">8</span> + j * <span class="hljs-number">6</span> &gt; binarray.<span class="hljs-property">length</span> * <span class="hljs-number">32</span>) &#123;<br>str += b64pad<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>str += tab.<span class="hljs-title function_">charAt</span>((triplet &gt;&gt; <span class="hljs-number">6</span> * (<span class="hljs-number">3</span> - j)) &amp; <span class="hljs-number">63</span>)<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> str<br>&#125;<br>&#125;)(roc, <span class="hljs-number">0</span>, <span class="hljs-string">&quot;=&quot;</span>, <span class="hljs-number">8</span>);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> roc;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】SHA1摘要后输出</title>
    <link href="/js/%E3%80%90js%E3%80%91SHA1%E6%91%98%E8%A6%81%E5%90%8E%E8%BE%93%E5%87%BA/"/>
    <url>/js/%E3%80%90js%E3%80%91SHA1%E6%91%98%E8%A6%81%E5%90%8E%E8%BE%93%E5%87%BA/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 更改为模块化</span><br><span class="hljs-comment"> * 该方法只支持 ASCII 码支持的字符, 其它字符可能会出现异常</span><br><span class="hljs-comment"> * 三个基础方法, 只有一个参数为要加密的字符串</span><br><span class="hljs-comment"> *     roc.sha1.hex(string) 摘要算法后 十六进制 输出</span><br><span class="hljs-comment"> *     roc.sha1.b64(string) 摘要算法后 base64编码 输出</span><br><span class="hljs-comment"> *     roc.sha1.str(string) 摘要算法后转化为 字符串 输出</span><br><span class="hljs-comment"> * 三个高级方法, 第一个参数是秘钥, 第二个参数是要加密的字符串</span><br><span class="hljs-comment"> *     roc.sha1.hamcHex(key, data) 摘要加密算法后 十六进制 输出</span><br><span class="hljs-comment"> *     roc.sha1.hamcB64(key, data) 摘要加密算法后 base64编码 输出</span><br><span class="hljs-comment"> *     roc.sha1.hamcStr(key, data) 摘要机密算法后 字符串 输出</span><br><span class="hljs-comment"> * 三个可配置参数</span><br><span class="hljs-comment"> *     hexcase: 十六进制输出格式, 0 小写, 1 大写</span><br><span class="hljs-comment"> *     b64pad:  base64 缺省字符, &quot;=&quot; 严格遵守 RFC</span><br><span class="hljs-comment"> *     chrsz:   每个输入字符的位, 8-ASCII；16-Unicode</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">const</span> roc = &#123;&#125;;<br>(<span class="hljs-keyword">function</span>(<span class="hljs-params">roc, hexcase, b64pad, chrsz</span>) &#123;<br>roc.<span class="hljs-property">sha1</span> = &#123;&#125;;<br>roc.<span class="hljs-property">sha1</span>.<span class="hljs-property">hex</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">binb2hex</span>(<span class="hljs-title function_">core_sha1</span>(<span class="hljs-title function_">str2binb</span>(s), s.<span class="hljs-property">length</span> * chrsz))<br>&#125;;<br>roc.<span class="hljs-property">sha1</span>.<span class="hljs-property">b64</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">binb2b64</span>(<span class="hljs-title function_">core_sha1</span>(<span class="hljs-title function_">str2binb</span>(s), s.<span class="hljs-property">length</span> * chrsz))<br>&#125;;<br>roc.<span class="hljs-property">sha1</span>.<span class="hljs-property">str</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">binb2str</span>(<span class="hljs-title function_">core_sha1</span>(<span class="hljs-title function_">str2binb</span>(s), s.<span class="hljs-property">length</span> * chrsz))<br>&#125;;<br>roc.<span class="hljs-property">sha1</span>.<span class="hljs-property">hamcHex</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">key, data</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">binb2hex</span>(<span class="hljs-title function_">core_hmac_sha1</span>(key, data))<br>&#125;;<br>roc.<span class="hljs-property">sha1</span>.<span class="hljs-property">hamcB64</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">key, data</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">binb2b64</span>(<span class="hljs-title function_">core_hmac_sha1</span>(key, data))<br>&#125;;<br>roc.<span class="hljs-property">sha1</span>.<span class="hljs-property">hamcStr</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">key, data</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">binb2str</span>(<span class="hljs-title function_">core_hmac_sha1</span>(key, data))<br>&#125;;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">sha1_vm_test</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">hex_sha1</span>(<span class="hljs-string">&quot;abc&quot;</span>) == <span class="hljs-string">&quot;a9993e364706816aba3e25717850c26c9cd0d89d&quot;</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">core_sha1</span>(<span class="hljs-params">x, len</span>) &#123;<br>x[len &gt;&gt; <span class="hljs-number">5</span>] |= <span class="hljs-number">128</span> &lt;&lt; (<span class="hljs-number">24</span> - len % <span class="hljs-number">32</span>);<br>x[((len + <span class="hljs-number">64</span> &gt;&gt; <span class="hljs-number">9</span>) &lt;&lt; <span class="hljs-number">4</span>) + <span class="hljs-number">15</span>] = len;<br><span class="hljs-keyword">var</span> w = <span class="hljs-title class_">Array</span>(<span class="hljs-number">80</span>),<br>a = <span class="hljs-number">1732584193</span>;<br><span class="hljs-keyword">var</span> b = -<span class="hljs-number">271733879</span>,<br>c = -<span class="hljs-number">1732584194</span>;<br><span class="hljs-keyword">var</span> d = <span class="hljs-number">271733878</span>,<br>e = -<span class="hljs-number">1009589776</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; x.<span class="hljs-property">length</span>; i += <span class="hljs-number">16</span>) &#123;<br><span class="hljs-keyword">var</span> olda = a,<br>oldb = b,<br>oldc = c,<br>oldd = d,<br>olde = e;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">80</span>; j++) &#123;<br><span class="hljs-keyword">if</span> (j &lt; <span class="hljs-number">16</span>) &#123;<br>w[j] = x[i + j]<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>w[j] = <span class="hljs-title function_">rol</span>(w[j - <span class="hljs-number">3</span>] ^ w[j - <span class="hljs-number">8</span>] ^ w[j - <span class="hljs-number">14</span>] ^ w[j - <span class="hljs-number">16</span>], <span class="hljs-number">1</span>)<br>&#125;<br><span class="hljs-keyword">var</span> p1 = <span class="hljs-title function_">safe_add</span>(<span class="hljs-title function_">rol</span>(a, <span class="hljs-number">5</span>), <span class="hljs-title function_">sha1_ft</span>(j, b, c, d));<br><span class="hljs-keyword">var</span> p2 = <span class="hljs-title function_">safe_add</span>(<span class="hljs-title function_">safe_add</span>(e, w[j]), <span class="hljs-title function_">sha1_kt</span>(j));<br><span class="hljs-keyword">var</span> t = <span class="hljs-title function_">safe_add</span>(p1, p2);<br>e = d;<br>d = c;<br>c = <span class="hljs-title function_">rol</span>(b, <span class="hljs-number">30</span>);<br>b = a;<br>a = t<br>&#125;<br>a = <span class="hljs-title function_">safe_add</span>(a, olda);<br>b = <span class="hljs-title function_">safe_add</span>(b, oldb);<br>c = <span class="hljs-title function_">safe_add</span>(c, oldc);<br>d = <span class="hljs-title function_">safe_add</span>(d, oldd);<br>e = <span class="hljs-title function_">safe_add</span>(e, olde)<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>(a, b, c, d, e)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">sha1_ft</span>(<span class="hljs-params">t, b, c, d</span>) &#123;<br><span class="hljs-keyword">if</span> (t &lt; <span class="hljs-number">20</span>) &#123;<br><span class="hljs-keyword">return</span> (b &amp; c) | ((~b) &amp; d)<br>&#125;<br><span class="hljs-keyword">if</span> (t &lt; <span class="hljs-number">40</span>) &#123;<br><span class="hljs-keyword">return</span> b ^ c ^ d<br>&#125;<br><span class="hljs-keyword">if</span> (t &lt; <span class="hljs-number">60</span>) &#123;<br><span class="hljs-keyword">return</span> (b &amp; c) | (b &amp; d) | (c &amp; d)<br>&#125;<br><span class="hljs-keyword">return</span> b ^ c ^ d<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">sha1_kt</span>(<span class="hljs-params">t</span>) &#123;<br><span class="hljs-keyword">return</span> (t &lt; <span class="hljs-number">20</span>) ? <span class="hljs-number">1518500249</span> : (t &lt; <span class="hljs-number">40</span>) ? <span class="hljs-number">1859775393</span> : (t &lt; <span class="hljs-number">60</span>) ? -<span class="hljs-number">1894007588</span> : -<span class="hljs-number">899497514</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">core_hmac_sha1</span>(<span class="hljs-params">key, data</span>) &#123;<br><span class="hljs-keyword">var</span> bkey = <span class="hljs-title function_">str2binb</span>(key);<br><span class="hljs-keyword">if</span> (bkey.<span class="hljs-property">length</span> &gt; <span class="hljs-number">16</span>) &#123;<br>bkey = <span class="hljs-title function_">core_sha1</span>(bkey, key.<span class="hljs-property">length</span> * chrsz)<br>&#125;<br><span class="hljs-keyword">var</span> ipad = <span class="hljs-title class_">Array</span>(<span class="hljs-number">16</span>),<br>opad = <span class="hljs-title class_">Array</span>(<span class="hljs-number">16</span>);<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">16</span>; i++) &#123;<br>ipad[i] = bkey[i] ^ <span class="hljs-number">909522486</span>;<br>opad[i] = bkey[i] ^ <span class="hljs-number">1549556828</span><br>&#125;<br><span class="hljs-keyword">var</span> hash = <span class="hljs-title function_">core_sha1</span>(ipad.<span class="hljs-title function_">concat</span>(<span class="hljs-title function_">str2binb</span>(data)), <span class="hljs-number">512</span> + data.<span class="hljs-property">length</span> * chrsz);<br><span class="hljs-keyword">return</span> <span class="hljs-title function_">core_sha1</span>(opad.<span class="hljs-title function_">concat</span>(hash), <span class="hljs-number">512</span> + <span class="hljs-number">160</span>)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">safe_add</span>(<span class="hljs-params">x, y</span>) &#123;<br><span class="hljs-keyword">var</span> lsw = (x &amp; <span class="hljs-number">65535</span>) + (y &amp; <span class="hljs-number">65535</span>);<br><span class="hljs-keyword">var</span> msw = (x &gt;&gt; <span class="hljs-number">16</span>) + (y &gt;&gt; <span class="hljs-number">16</span>) + (lsw &gt;&gt; <span class="hljs-number">16</span>);<br><span class="hljs-keyword">return</span> (msw &lt;&lt; <span class="hljs-number">16</span>) | (lsw &amp; <span class="hljs-number">65535</span>)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">rol</span>(<span class="hljs-params">num, cnt</span>) &#123;<br><span class="hljs-keyword">return</span> (num &lt;&lt; cnt) | (num &gt;&gt;&gt; (<span class="hljs-number">32</span> - cnt))<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">str2binb</span>(<span class="hljs-params">str</span>) &#123;<br><span class="hljs-keyword">var</span> bin = <span class="hljs-title class_">Array</span>();<br><span class="hljs-keyword">var</span> mask = (<span class="hljs-number">1</span> &lt;&lt; chrsz) - <span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; str.<span class="hljs-property">length</span> * chrsz; i += chrsz) &#123;<br>bin[i &gt;&gt; <span class="hljs-number">5</span>] |= (str.<span class="hljs-title function_">charCodeAt</span>(i / chrsz) &amp; mask) &lt;&lt; (<span class="hljs-number">32</span> - chrsz - i % <span class="hljs-number">32</span>)<br>&#125;<br><span class="hljs-keyword">return</span> bin<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">binb2str</span>(<span class="hljs-params">bin</span>) &#123;<br><span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;&quot;</span>;<br><span class="hljs-keyword">var</span> mask = (<span class="hljs-number">1</span> &lt;&lt; chrsz) - <span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; bin.<span class="hljs-property">length</span> * <span class="hljs-number">32</span>; i += chrsz) &#123;<br>str += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>((bin[i &gt;&gt; <span class="hljs-number">5</span>] &gt;&gt;&gt; (<span class="hljs-number">32</span> - chrsz - i % <span class="hljs-number">32</span>)) &amp; mask)<br>&#125;<br><span class="hljs-keyword">return</span> str<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">binb2hex</span>(<span class="hljs-params">binarray</span>) &#123;<br><span class="hljs-keyword">var</span> hex_tab = hexcase ? <span class="hljs-string">&quot;0123456789ABCDEF&quot;</span> : <span class="hljs-string">&quot;0123456789abcdef&quot;</span>;<br><span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;&quot;</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; binarray.<span class="hljs-property">length</span> * <span class="hljs-number">4</span>; i++) &#123;<br>str += hex_tab.<span class="hljs-title function_">charAt</span>((binarray[i &gt;&gt; <span class="hljs-number">2</span>] &gt;&gt; ((<span class="hljs-number">3</span> - i % <span class="hljs-number">4</span>) * <span class="hljs-number">8</span> + <span class="hljs-number">4</span>)) &amp; <span class="hljs-number">15</span>) + hex_tab.<span class="hljs-title function_">charAt</span>((binarray[i &gt;&gt;<br><span class="hljs-number">2</span>] &gt;&gt; ((<span class="hljs-number">3</span> - i % <span class="hljs-number">4</span>) * <span class="hljs-number">8</span>)) &amp; <span class="hljs-number">15</span>)<br>&#125;<br><span class="hljs-keyword">return</span> str<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">binb2b64</span>(<span class="hljs-params">binarray</span>) &#123;<br><span class="hljs-keyword">var</span> tab = <span class="hljs-string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;</span>;<br><span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;&quot;</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; binarray.<span class="hljs-property">length</span> * <span class="hljs-number">4</span>; i += <span class="hljs-number">3</span>) &#123;<br><span class="hljs-keyword">var</span> triplet = (((binarray[i &gt;&gt; <span class="hljs-number">2</span>] &gt;&gt; <span class="hljs-number">8</span> * (<span class="hljs-number">3</span> - i % <span class="hljs-number">4</span>)) &amp; <span class="hljs-number">255</span>) &lt;&lt; <span class="hljs-number">16</span>) | (((binarray[i + <span class="hljs-number">1</span> &gt;&gt; <span class="hljs-number">2</span>] &gt;&gt; <span class="hljs-number">8</span> * (<br><span class="hljs-number">3</span> - (i + <span class="hljs-number">1</span>) % <span class="hljs-number">4</span>)) &amp; <span class="hljs-number">255</span>) &lt;&lt; <span class="hljs-number">8</span>) | ((binarray[i + <span class="hljs-number">2</span> &gt;&gt; <span class="hljs-number">2</span>] &gt;&gt; <span class="hljs-number">8</span> * (<span class="hljs-number">3</span> - (i + <span class="hljs-number">2</span>) % <span class="hljs-number">4</span>)) &amp; <span class="hljs-number">255</span>);<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">4</span>; j++) &#123;<br><span class="hljs-keyword">if</span> (i * <span class="hljs-number">8</span> + j * <span class="hljs-number">6</span> &gt; binarray.<span class="hljs-property">length</span> * <span class="hljs-number">32</span>) &#123;<br>str += b64pad<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>str += tab.<span class="hljs-title function_">charAt</span>((triplet &gt;&gt; <span class="hljs-number">6</span> * (<span class="hljs-number">3</span> - j)) &amp; <span class="hljs-number">63</span>)<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> str<br>&#125;<br>&#125;)(roc, <span class="hljs-number">0</span>, <span class="hljs-string">&quot;=&quot;</span>, <span class="hljs-number">8</span>);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> roc;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】BASE64加密解密</title>
    <link href="/js/%E3%80%90js%E3%80%91BASE64%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86/"/>
    <url>/js/%E3%80%90js%E3%80%91BASE64%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *  更改为模块化</span><br><span class="hljs-comment"> *  roc.base64.encode(string) 编码</span><br><span class="hljs-comment"> *  roc.base64.decode(string) 解码</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">const</span> roc = &#123;&#125;<br>(<span class="hljs-keyword">function</span>(<span class="hljs-params">roc</span>) &#123;<br>_keyStr = <span class="hljs-string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=&quot;</span>;<br>roc.<span class="hljs-property">base64</span> = &#123;&#125;;<br>roc.<span class="hljs-property">base64</span>.<span class="hljs-property">encode</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">input</span>) &#123;<br><span class="hljs-keyword">var</span> output = <span class="hljs-string">&quot;&quot;</span>,<br>i = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">var</span> chr1, chr2, chr3, enc1, enc2, enc3, enc4;<br>input = <span class="hljs-title function_">_utf8_encode</span>(input);<br><span class="hljs-keyword">while</span> (i &lt; input.<span class="hljs-property">length</span>) &#123;<br>chr1 = input.<span class="hljs-title function_">charCodeAt</span>(i++);<br>chr2 = input.<span class="hljs-title function_">charCodeAt</span>(i++);<br>chr3 = input.<span class="hljs-title function_">charCodeAt</span>(i++);<br>enc1 = chr1 &gt;&gt; <span class="hljs-number">2</span>;<br>enc2 = ((chr1 &amp; <span class="hljs-number">3</span>) &lt;&lt; <span class="hljs-number">4</span>) | (chr2 &gt;&gt; <span class="hljs-number">4</span>);<br>enc3 = ((chr2 &amp; <span class="hljs-number">15</span>) &lt;&lt; <span class="hljs-number">2</span>) | (chr3 &gt;&gt; <span class="hljs-number">6</span>);<br>enc4 = chr3 &amp; <span class="hljs-number">63</span>;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(chr2)) &#123;<br>enc3 = enc4 = <span class="hljs-number">64</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(chr3)) &#123;<br>enc4 = <span class="hljs-number">64</span><br>&#125;<br>&#125;<br>output = output + _keyStr.<span class="hljs-title function_">charAt</span>(enc1) + _keyStr.<span class="hljs-title function_">charAt</span>(enc2);<br>output = output + _keyStr.<span class="hljs-title function_">charAt</span>(enc3) + _keyStr.<span class="hljs-title function_">charAt</span>(enc4)<br>&#125;<br><span class="hljs-keyword">return</span> output<br>&#125;;<br>roc.<span class="hljs-property">base64</span>.<span class="hljs-property">decode</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">input</span>) &#123;<br><span class="hljs-keyword">var</span> output = <span class="hljs-string">&quot;&quot;</span>;<br><span class="hljs-keyword">var</span> chr1, chr2, chr3;<br><span class="hljs-keyword">var</span> enc1, enc2, enc3, enc4;<br><span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;<br>input = input.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[^A-Za-z0-9\+\/\=]/g</span>, <span class="hljs-string">&quot;&quot;</span>);<br><span class="hljs-keyword">while</span> (i &lt; input.<span class="hljs-property">length</span>) &#123;<br>enc1 = _keyStr.<span class="hljs-title function_">indexOf</span>(input.<span class="hljs-title function_">charAt</span>(i++));<br>enc2 = _keyStr.<span class="hljs-title function_">indexOf</span>(input.<span class="hljs-title function_">charAt</span>(i++));<br>enc3 = _keyStr.<span class="hljs-title function_">indexOf</span>(input.<span class="hljs-title function_">charAt</span>(i++));<br>enc4 = _keyStr.<span class="hljs-title function_">indexOf</span>(input.<span class="hljs-title function_">charAt</span>(i++));<br>chr1 = (enc1 &lt;&lt; <span class="hljs-number">2</span>) | (enc2 &gt;&gt; <span class="hljs-number">4</span>);<br>chr2 = ((enc2 &amp; <span class="hljs-number">15</span>) &lt;&lt; <span class="hljs-number">4</span>) | (enc3 &gt;&gt; <span class="hljs-number">2</span>);<br>chr3 = ((enc3 &amp; <span class="hljs-number">3</span>) &lt;&lt; <span class="hljs-number">6</span>) | enc4;<br>output = output + <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(chr1);<br><span class="hljs-keyword">if</span> (enc3 != <span class="hljs-number">64</span>) &#123;<br>output = output + <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(chr2)<br>&#125;<br><span class="hljs-keyword">if</span> (enc4 != <span class="hljs-number">64</span>) &#123;<br>output = output + <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(chr3)<br>&#125;<br>&#125;<br>output = <span class="hljs-title function_">_utf8_decode</span>(output);<br><span class="hljs-keyword">return</span> output<br>&#125;;<br>_utf8_encode = <span class="hljs-keyword">function</span>(<span class="hljs-params">string</span>) &#123;<br>string = string.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\r\n/g</span>, <span class="hljs-string">&quot;\n&quot;</span>);<br><span class="hljs-keyword">var</span> utftext = <span class="hljs-string">&quot;&quot;</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n = <span class="hljs-number">0</span>; n &lt; string.<span class="hljs-property">length</span>; n++) &#123;<br><span class="hljs-keyword">var</span> c = string.<span class="hljs-title function_">charCodeAt</span>(n);<br><span class="hljs-keyword">if</span> (c &lt; <span class="hljs-number">128</span>) &#123;<br>utftext += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(c)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">if</span> ((c &gt; <span class="hljs-number">127</span>) &amp;&amp; (c &lt; <span class="hljs-number">2048</span>)) &#123;<br>utftext += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>((c &gt;&gt; <span class="hljs-number">6</span>) | <span class="hljs-number">192</span>);<br>utftext += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>((c &amp; <span class="hljs-number">63</span>) | <span class="hljs-number">128</span>)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>utftext += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>((c &gt;&gt; <span class="hljs-number">12</span>) | <span class="hljs-number">224</span>);<br>utftext += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(((c &gt;&gt; <span class="hljs-number">6</span>) &amp; <span class="hljs-number">63</span>) | <span class="hljs-number">128</span>);<br>utftext += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>((c &amp; <span class="hljs-number">63</span>) | <span class="hljs-number">128</span>)<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> utftext<br>&#125;;<br>_utf8_decode = <span class="hljs-keyword">function</span>(<span class="hljs-params">utftext</span>) &#123;<br><span class="hljs-keyword">var</span> string = <span class="hljs-string">&quot;&quot;</span>;<br><span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">var</span> c, c1, c2, c3, c4;<br><span class="hljs-keyword">while</span> (i &lt; utftext.<span class="hljs-property">length</span>) &#123;<br>c = utftext.<span class="hljs-title function_">charCodeAt</span>(i);<br><span class="hljs-keyword">if</span> (c &lt; <span class="hljs-number">128</span>) &#123;<br>string += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(c);<br>i++<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">if</span> (c &gt; <span class="hljs-number">191</span> &amp;&amp; c &lt; <span class="hljs-number">224</span>) &#123;<br>c2 = utftext.<span class="hljs-title function_">charCodeAt</span>(i + <span class="hljs-number">1</span>);<br>string += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(((c &amp; <span class="hljs-number">31</span>) &lt;&lt; <span class="hljs-number">6</span>) | (c2 &amp; <span class="hljs-number">63</span>));<br>i += <span class="hljs-number">2</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>c2 = utftext.<span class="hljs-title function_">charCodeAt</span>(i + <span class="hljs-number">1</span>);<br>c3 = utftext.<span class="hljs-title function_">charCodeAt</span>(i + <span class="hljs-number">2</span>);<br>c4 = ((c &amp; <span class="hljs-number">15</span>) &lt;&lt; <span class="hljs-number">12</span>) | ((c2 &amp; <span class="hljs-number">63</span>) &lt;&lt; <span class="hljs-number">6</span>) | (c3 &amp; <span class="hljs-number">63</span>);<br>string += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(c4);<br>i += <span class="hljs-number">3</span><br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> string<br>&#125;<br>&#125;)(roc);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> roc;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】HD前端开发规范文档</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HD%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E6%96%87%E6%A1%A3/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HD%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E6%96%87%E6%A1%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h1><p>为了使软件开发过程顺畅，保证软件质量，方便不同成员维护项目，于是编写这份开发规范文档。</p><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><ul><li>项目以功能模块划分分工</li><li>页面样式与逻辑分开</li><li>考虑代码复用性，提取封装通用工具方法</li><li>组件统一，不调用无关组件</li></ul><h1 id="常规开发规范"><a href="#常规开发规范" class="headerlink" title="常规开发规范"></a>常规开发规范</h1><h2 id="页面头部"><a href="#页面头部" class="headerlink" title="页面头部"></a>页面头部</h2><h3 id="DOCTYPE-设置"><a href="#DOCTYPE-设置" class="headerlink" title="DOCTYPE 设置"></a>DOCTYPE 设置</h3><p>文档类型统一使用html5的doctype：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="页面编码"><a href="#页面编码" class="headerlink" title="页面编码"></a>页面编码</h3><p>在html中指定编码，默认UTF-8，如有特殊指定请更换。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="TDK"><a href="#TDK" class="headerlink" title="TDK"></a>TDK</h3><p>TDK指的是title（标题），description（描述），keywords（关键字）的首字母缩写。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>页面标题<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;description&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;页面的描述内容，一般不超过150个字&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;keywords&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;页面关键字,多个关键字用逗号分隔&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><h3 id="页面Meta"><a href="#页面Meta" class="headerlink" title="页面Meta"></a>页面Meta</h3><p><strong>Pc端meta：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Description&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;页面的描述内容&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Keywords&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;页面关键字&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p> <br><strong>移动端meta：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 为了防止页面数字被识别为电话号码，可根据实际需要添加： --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;format-detection&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;telephone=no&quot;</span>&gt;</span> <br><span class="hljs-comment">&lt;!-- 让添加到主屏幕的网页再次打开时全屏展示，可添加：   --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;yes&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mobile-web-app-capable&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;yes&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-mobile-web-app-capable&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Description&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;页面的描述内容&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Keywords&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;页面关键字&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><h3 id="HTML标签"><a href="#HTML标签" class="headerlink" title="HTML标签"></a>HTML标签</h3><ul><li>标签必须合法且闭合、标签名需小写、嵌套正确(嵌套分为语义嵌套与严格嵌套，如a 不允许嵌套 div这种约束属于语义嵌套约束，与之区别的约束还有严格嵌套约束，比如a 不允许嵌套 a)</li><li>标签语法无错误，需要符合语义化</li><li>标签的自定义属性以data-开头，如：<a href="#" data-num='18'></a></li><li>除非有特定的功能、组件要求等，禁止随意使用id来定义元素样式</li></ul><h3 id="HTML注释"><a href="#HTML注释" class="headerlink" title="HTML注释"></a>HTML注释</h3><p><strong>模块注释</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 文章列表模块 S --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;article-list&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 文章列表模块 E --&gt;</span><br></code></pre></td></tr></table></figure><p><strong>区块注释</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">@name: 模块名</span><br><span class="hljs-comment">@description: 模块描述</span><br><span class="hljs-comment">@author: 作者</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><h3 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h3><p><strong>CSS类名命名</strong></p><p>class、id都需小写，命名使用英文，禁止使用特殊字符，名称间隔使用-符号命名词穷了！！！推荐命名神器：<a href="https://unbug.github.io/codelf/">https://unbug.github.io/codelf/</a><br>避免使用层级过深的选择器，尽量最多3级<br>错误示范：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.without-animation</span> <span class="hljs-selector-class">.book-body</span> <span class="hljs-selector-class">.body-inner</span> <span class="hljs-selector-class">.book-header</span> <span class="hljs-selector-class">.dropdown</span> <span class="hljs-selector-class">.dropdown-menu</span> <span class="hljs-selector-class">.buttons</span>&#123;&#125;<br><span class="hljs-selector-class">.without-animation</span> <span class="hljs-selector-class">.book-body</span> <span class="hljs-selector-class">.body-inner</span> <span class="hljs-selector-class">.book-header</span> <span class="hljs-selector-class">.dropdown</span> <span class="hljs-selector-class">.dropdown-right</span> <span class="hljs-selector-class">.buttons</span>&#123;&#125;<br><span class="hljs-selector-class">.without-animation</span> <span class="hljs-selector-class">.book-body</span> <span class="hljs-selector-class">.body-inner</span> <span class="hljs-selector-class">.book-header</span> <span class="hljs-selector-class">.pull-left</span> <span class="hljs-selector-class">.dropdown-menu</span> <span class="hljs-selector-class">.buttons</span>&#123;&#125;<br></code></pre></td></tr></table></figure><ul><li>除非有特定的功能、组件要求等，禁止随意使用id来定义元素样式</li><li>除非是样式reset需要，尽量避免对纯元素选择器设置特定样式，避免样式污染</li></ul><h3 id="样式定义标准"><a href="#样式定义标准" class="headerlink" title="样式定义标准"></a>样式定义标准</h3><ul><li>一般以逗号分隔的属性值，每个逗号后应添加一个空格</li><li>声明语句中的“:”后应添加一个空格</li><li>rgb()、rgba()、hsl()、hsla() 或 rect() 括号内的值，逗号分隔，但逗号后不添加一个空格</li><li>对于属性值或颜色参数，省略小于 1 的小数前面的 0 （例如，.5 代替 0.5；-.5px 代替-0.5px）</li><li>十六进制值应该全部小写和尽量简写，例如，<code>#fff</code> 代替 <code>#ffffff</code></li><li>避免为 0 值指定单位，例如，用 margin: 0; 代替 margin: 0px</li><li>相关属性应为一组，比如position与top、left、right、bottom、z-index等相关的写到一块。</li></ul><h3 id="CSS注释"><a href="#CSS注释" class="headerlink" title="CSS注释"></a>CSS注释</h3><p>模块标注<br>每个css模块，标注对应模块的名称，便于维护。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html">/* 头部导航 */<br>.header-nav&#123;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h2><h3 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h3><ul><li>变量, 使用驼峰命名法</li><li>私有属性、变量和方法以下划线 _ 开头</li><li>函数名，使用驼峰命名法，参数也是用驼峰命名法</li><li>boolean类型的变量使用 is 或 has 开头</li><li>Promise 对象用动宾短语的进行时表达比如：const loadingData &#x3D; new Promise()</li><li></li></ul><h3 id="Jsdoc-注释"><a href="#Jsdoc-注释" class="headerlink" title="Jsdoc &amp; 注释"></a>Jsdoc &amp; 注释</h3><p>行级注释<br>标注说明某一行难理解的语句</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 某一行的说明</span><br></code></pre></td></tr></table></figure><p>方法jsdoc<br>标注说明方法的作用及所用参数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 方法作用...</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">string</span>&#125; p1 参数说明</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">number</span>&#125; p2 参数说明</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> &#123;<span class="hljs-type">void</span>&#125;</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">handelAdd</span>(<span class="hljs-params"></span>) &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p>文档注释</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Author</span>: 作者</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span>: 创建编辑时间</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Version</span>：版本</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@LastEditTime</span>: 最后编辑的时间</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Description</span>: 描述</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><h3 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h3><p>尽量减少不必要的 DOM 操作</p><p>浏览器重绘、重排dom元素的代价是非常昂贵的；频繁的dom操作会让浏览器不停的重绘、重排。简单的优化方案就是当循环创建出来的dom元素,不要把它在循环中插入dom中,应把它们储存到变量中，循环创建完毕后，一并插入dom中，这样就把多次操作dom优化为1次操作。</p><h2 id="文件目录"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录</h2><ul><li>图片文件夹：img</li><li>css文件夹：css</li><li>Js文件夹：js</li><li>三方库文件夹：lib</li><li>字体文件夹：font（一般很少用）</li></ul><p>比如：</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HD%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E6%96%87%E6%A1%A3/1.png"></p><h2 id="移动端注意"><a href="#移动端注意" class="headerlink" title="移动端注意"></a>移动端注意</h2><h3 id="Viewport"><a href="#Viewport" class="headerlink" title="Viewport"></a>Viewport</h3><p>文档中“页面头部”部分也有提到。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="单位—rem布局"><a href="#单位—rem布局" class="headerlink" title="单位—rem布局"></a>单位—rem布局</h3><p>规范只列举了rem布局这一种适配方式，但不是说限制只能用这种布局方式。 无论用何种方式，需要保证在不同比例、不同尺寸的手机上，及主流浏览器无明显错位、变形。</p><h4 id="示例代码（rem配置）"><a href="#示例代码（rem配置）" class="headerlink" title="示例代码（rem配置）"></a>示例代码（rem配置）</h4><p>示例代码中的配置是在750宽的设计稿上 100px &#x3D;&#x3D; 1rem，使用时只需要将设计稿上px单位除100即可，比如：750px &#x3D;&#x3D; 7.5rem</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//屏幕适应 </span><br>(<span class="hljs-keyword">function</span> (<span class="hljs-params">win, doc</span>) &#123;<br>    <span class="hljs-keyword">if</span> (!win.<span class="hljs-property">addEventListener</span>) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">var</span> html = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">setFont</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">var</span> html = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>;<br>        <span class="hljs-keyword">var</span> k = <span class="hljs-number">750</span>;<br>        html.<span class="hljs-property">style</span>.<span class="hljs-property">fontSize</span> = html.<span class="hljs-property">clientWidth</span> / k * <span class="hljs-number">100</span> + <span class="hljs-string">&quot;px&quot;</span>;<br>    &#125;<br>    <span class="hljs-title function_">setFont</span>();<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">setFont</span>();<br>    &#125;, <span class="hljs-number">300</span>);<br>    doc.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;DOMContentLoaded&#x27;</span>, setFont, <span class="hljs-literal">false</span>);<br>    win.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;resize&#x27;</span>, setFont, <span class="hljs-literal">false</span>);<br>    win.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;load&#x27;</span>, setFont, <span class="hljs-literal">false</span>);<br>&#125;)(<span class="hljs-variable language_">window</span>, <span class="hljs-variable language_">document</span>);<br></code></pre></td></tr></table></figure><p> </p><h4 id="使用rem方式布局有以下几点需要注意："><a href="#使用rem方式布局有以下几点需要注意：" class="headerlink" title="使用rem方式布局有以下几点需要注意："></a>使用rem方式布局有以下几点需要注意：</h4><ol><li>页面用不同尺寸的手机进行测试</li><li>因为小于1px浏览器支持不够好为会导致计算会有误差，背景图使用雪碧图时，图标之间多留5px的空隙，同时图片的backgrornd-size属性最好写上图片的宽高(图片宽高对应的rem单位)，不写误差更大。　</li><li>雪碧图，如图片宽高为346px*160px需要设置background-size属性设置为background-size: 3.46rem 1.6rem（1rem &#x3D;&#x3D; 100px）;</li><li>大小为1px的元素不要使用rem，直接用px</li></ol><h1 id="UNI-APP开发规范"><a href="#UNI-APP开发规范" class="headerlink" title="UNI-APP开发规范"></a>UNI-APP开发规范</h1><h2 id="目录及结构"><a href="#目录及结构" class="headerlink" title="目录及结构"></a>目录及结构</h2><ul><li>common目录：项目通用配置文件及项目通用工具类目录</li><li>components目录：引用组件目录</li><li>pages目录：页面目录（主要开发用到的目录）</li><li>static目录：项目资源文件目录（图片、图标、字体等）</li><li>App.vue ：生成项目自带，一般不需要动</li><li>main.js ：生成项目自带，一般不需要动</li><li>manifest.json :打包配置文件（打包时候需要配置该文件）</li><li>pages.json:页面索引，其中第一个标签是app进入后的第一个页面（通常是首页或登录页面）</li><li>README.md:项目说明文件</li><li>uni.scss:uni-app通用样式，一般不需要动</li><li></li></ul><h3 id="common目录"><a href="#common目录" class="headerlink" title="common目录"></a>common目录</h3><ul><li>common&#x2F;config目录 项目相关配置文件放这里，如项目中网络地址配置，页面索引配置，版本内容配置等。</li><li>common&#x2F;utils目录 工具类目录，存放类似：获取日期、转码解码等方法。如有特定模块的公用方法，可创建子目录来存放。</li><li>common&#x2F;data目录 数据目录，可存放测试数据json文件，通用数据等。</li></ul><h3 id="static目录"><a href="#static目录" class="headerlink" title="static目录"></a>static目录</h3><ul><li>font目录：字体文件夹</li><li>img目录：图片图标资源目录，如有需求在该目录下创建子目录</li><li></li></ul><h3 id="pages目录"><a href="#pages目录" class="headerlink" title="pages目录"></a>pages目录</h3><ul><li>根据功能模块分子目录，尽量避免用HbuilderX创建新页面时自动创建目录。</li><li>子目录命名时首字母小写，尽量用能够直接关联到功能模块名称的英文来命名。如有多个英文单词，第二个单词开始首字母大写，如personalCenter</li><li>注意，如果是通过新建vue文件来创建页面的话，还需要在项目根目录的page.json中添加该页面的索引，否则会找不到页面</li><li>如果建立测试页面，在page.json中添加了该页面的索引，在删除该页面时应当同时删掉该页面的vue文件，css样式文件以及page.json中对应的索引项</li></ul><h2 id="命名规范"><a href="#命名规范" class="headerlink" title="命名规范"></a>命名规范</h2><h3 id="页面文件"><a href="#页面文件" class="headerlink" title="页面文件"></a>页面文件</h3><p>页面文件首字母小写，后面的多个英文单词大写开头。如：personalCenter.vue、declareDetail.vue<br>命名应直接与该页面业务功能挂钩，一眼能看出该页面实现的什么功能。<br>相同功能的不同部分应放到同一子目录下，不要创建过多不必要的目录，如declareDetail.vue、declareForm.vue、declareList.vue 可以放到同一目录declare目录下。</p><h3 id="样式文件"><a href="#样式文件" class="headerlink" title="样式文件"></a>样式文件</h3><p>公用样式文件根据该部分样式用途命名，放到common&#x2F;css目录下，如整个APP用到的按钮样式写到同一css文件publicButton.css中，放到common&#x2F;css目录下，在页面的<code>&lt;style&gt;&lt;/style&gt;</code>标签中添加引用:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;style&gt;<br>@import url(&quot;../../common/css/publicButton.css&quot;);<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>页面单独的样式，在页面同目录下创建同名css文件.如login.vue中用的单独样式，在login.vue同级目录下创建login.css来保存。</p><h3 id="逻辑方法js文件"><a href="#逻辑方法js文件" class="headerlink" title="逻辑方法js文件"></a>逻辑方法js文件</h3><p>通用功能逻辑模块根据该部分功能用途命名，放到common&#x2F;utils目录下。<br>页面单独的逻辑js，在页面同目录下创建同名js文件.如login.vue中用的单独逻辑，在login.vue同级目录下创建login.js来保存。</p><h3 id="方法名"><a href="#方法名" class="headerlink" title="方法名"></a>方法名</h3><p>方法名首字母小写，后面的多个英文单词大写开头（驼峰式），方法统一以js的方式声明。<br>示例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">getUserInfo</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>)&#123;<br>  <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="变量命名"><a href="#变量命名" class="headerlink" title="变量命名"></a>变量命名</h3><p>变量名首字母小写，后面的多个英文单词大写开头（驼峰式），有关联性的变量尽量封装到一个对象中。<br>示例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">userInfo：&#123;<br>  <span class="hljs-attr">userId</span>: <span class="hljs-string">&quot;&quot;</span>,<br>  <span class="hljs-attr">userName</span>: <span class="hljs-string">&quot;&quot;</span>,<br>  <span class="hljs-attr">idcard</span>: <span class="hljs-string">&quot;&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="资源文件命名"><a href="#资源文件命名" class="headerlink" title="资源文件命名"></a>资源文件命名</h3><ul><li>图片文件（背景图 banner图等较大的图片）统一命名为img_xxx </li><li>图标文件（应用图标 按钮图标 标题图标等）统一命名为 icon_xxx</li><li>json数据（应用用到的json文件或测试临时数据json文件）统一命名为 jsonData_xxx</li></ul><h2 id="组件引用"><a href="#组件引用" class="headerlink" title="组件引用"></a>组件引用</h2><p>uni-app需要用到一些组件来展现页面，为避免引用效果差的组件，以及app无用组件过多，需要做到组件引用统一。<br>在引用组件之前，应当先在官方示例中找有没有uniapp自带的组件，在满足要实现的功能时，尽量用官方提供的组件，不要在插件市场再去引用<br>避免复制页面代码时直接复制组件和工具类的引用，检查是否用到引用的组件和工具类，无用的删掉</p><h2 id="编码规范"><a href="#编码规范" class="headerlink" title="编码规范"></a>编码规范</h2><h3 id="页面的vue文件顶部添加备注"><a href="#页面的vue文件顶部添加备注" class="headerlink" title="页面的vue文件顶部添加备注"></a>页面的vue文件顶部添加备注</h3><p>中文备注该文件对应的页面中文名，作者日期可选择添加。如：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- </span><br><span class="hljs-comment">app登录页</span><br><span class="hljs-comment">作者：作者名</span><br><span class="hljs-comment">创建时间：2020年8月22日</span><br><span class="hljs-comment"> --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span><br>    ...<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="页面代码保持对齐"><a href="#页面代码保持对齐" class="headerlink" title="页面代码保持对齐"></a>页面代码保持对齐</h3><p>单个标签或组件根据长度决定是否换行</p><ul><li>长度较短：尽量放到一行，减少换行</li><li>长度较长：为了增强代码可读性，可按照以下方式换行</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html">// 没有子节点<br><span class="hljs-tag">&lt;<span class="hljs-name">SomeComponent</span></span><br><span class="hljs-tag">    <span class="hljs-attr">:listData</span>=<span class="hljs-string">&quot;listData&quot;</span></span><br><span class="hljs-tag">    @<span class="hljs-attr">recData</span>=<span class="hljs-string">&quot;recData&quot;</span></span><br><span class="hljs-tag">/&gt;</span><br><br>// 有子节点<br><span class="hljs-tag">&lt;<span class="hljs-name">SomeComponent</span></span><br><span class="hljs-tag">    <span class="hljs-attr">:listData</span>=<span class="hljs-string">&quot;listData&quot;</span></span><br><span class="hljs-tag">    @<span class="hljs-attr">recData</span>=<span class="hljs-string">&quot;recData&quot;</span></span><br><span class="hljs-tag">&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">SomeChild</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">SomeChild</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">SomeComponent</span>&gt;</span><br></code></pre></td></tr></table></figure><p>标签套标签的类型，需保持格式化对齐，方便确定页面层级关系。</p><h3 id="页面自建变量使用层级关系，避免一级堆放过多变量"><a href="#页面自建变量使用层级关系，避免一级堆放过多变量" class="headerlink" title="页面自建变量使用层级关系，避免一级堆放过多变量"></a>页面自建变量使用层级关系，避免一级堆放过多变量</h3><p>应该根据变量意义，自行进行封装，不要无脑往第一层堆放数据，代码维护过程中，层级关系不正确会导致变量不好找，增加维护难度。</p><p>错误写法示例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-attr">userType</span>: <span class="hljs-string">&quot;0&quot;</span>,<br>    <span class="hljs-attr">version</span>: <span class="hljs-string">&quot;1.0.0&quot;</span>,<br>    <span class="hljs-attr">versionCode</span>: <span class="hljs-number">200</span>,<br>    <span class="hljs-attr">userInfo</span>: &#123;&#125;,<br>    <span class="hljs-attr">userName</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    <span class="hljs-attr">userId</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    <span class="hljs-attr">userAddress</span>: <span class="hljs-string">&quot;&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>正确写法示例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-attr">userType</span>: <span class="hljs-string">&quot;0&quot;</span>,<br>    <span class="hljs-attr">version</span>: <span class="hljs-string">&quot;1.0.0&quot;</span>,<br>    <span class="hljs-attr">versionCode</span>: <span class="hljs-number">200</span>,<br>    <span class="hljs-attr">userInfo</span>: &#123;<br>    <span class="hljs-attr">userName</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    <span class="hljs-attr">userId</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    <span class="hljs-attr">userAddress</span>: <span class="hljs-string">&quot;&quot;</span><br>    &#125;,<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="通用功能方法注意提取"><a href="#通用功能方法注意提取" class="headerlink" title="通用功能方法注意提取"></a>通用功能方法注意提取</h3><p>如首页跳转子页、子页面返回首页等公用方法，可提取作公用方法。</p><p>如：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">methods</span>: &#123;<br>  <span class="hljs-title function_">toListPage</span>(<span class="hljs-params"></span>) &#123;<br>    uni.<span class="hljs-title function_">navigateTo</span>(&#123;<br>      <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;../listPage/listPage&quot;</span><br>    &#125;)<br>  &#125;,<br>    <span class="hljs-title function_">toDetailsPage</span>(<span class="hljs-params"></span>) &#123;<br>      uni.<span class="hljs-title function_">navigateTo</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;../detailsPage/detailsPage&quot;</span><br>      &#125;)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>可提取为带参数的方法：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">methods</span>: &#123;<br>  <span class="hljs-title function_">toPage</span>(<span class="hljs-params">url</span>) &#123;<br>    uni.<span class="hljs-title function_">navigateTo</span>(&#123;<br>      url<br>    &#125;)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="function最大长度不得超过100行"><a href="#function最大长度不得超过100行" class="headerlink" title="function最大长度不得超过100行"></a>function最大长度不得超过100行</h3><p>过长的代码不便维护，尽量根据方法功能进行封装提取，避免出现过长的逻辑代码，不便维护。</p><h3 id="方法、变量添加必要备注"><a href="#方法、变量添加必要备注" class="headerlink" title="方法、变量添加必要备注"></a>方法、变量添加必要备注</h3><p>方法上面至少添加备注说明该方法的功能<br>变量前面或后面添加备注说明该变量用途含义，以及类型</p><h3 id="代码格式化缩进"><a href="#代码格式化缩进" class="headerlink" title="代码格式化缩进"></a>代码格式化缩进</h3><p>注意进行代码格式化，可选择代码块后ctrl+shift+F进行格式化，缩进对齐。</p><h3 id="开发完成时无用的调试标签删掉"><a href="#开发完成时无用的调试标签删掉" class="headerlink" title="开发完成时无用的调试标签删掉"></a>开发完成时无用的调试标签删掉</h3><p>开发完成之后，需要将调试时写的debugger及console等标签删除掉，避免让用户在HTML控制台看到不必要的信息。</p><h1 id="写在后面"><a href="#写在后面" class="headerlink" title="写在后面"></a>写在后面</h1><p>希望各位开发人员遵守这份开发文档，养成良好的开发习惯。项目负责人在代码功能完成后及时对代码进行审核，避免代码规范不正确对后期维护造成不必要的难题。</p><h1 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h1><p>如果有问题，请及时反馈。<br>文档版本不同，涵盖的规范性点可能有所不足，该文档应根据项目开发遇到的规范性问题进行及时更新，对未涉及的部分进行补充说明。 </p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】文件上传（非图片）</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%EF%BC%88%E9%9D%9E%E5%9B%BE%E7%89%87%EF%BC%89/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%EF%BC%88%E9%9D%9E%E5%9B%BE%E7%89%87%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>使用uniapp开发，需要上传word文档、pdf、压缩包等文件（需支持app &#x2F; h5 &#x2F; 微信小程序）；官方支持不完善，采用以下解决方案。</p><p>项目代码仓库：<a href="https://gitee.com/rocyuan666/roc-diyform-uniapp">https://gitee.com/rocyuan666/roc-diyform-uniapp</a></p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%EF%BC%88%E9%9D%9E%E5%9B%BE%E7%89%87%EF%BC%89/1.png"></p><p>效果如下：</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%EF%BC%88%E9%9D%9E%E5%9B%BE%E7%89%87%EF%BC%89/3.gif"></p><p>上传完成，下载最后一个zip文件：</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%EF%BC%88%E9%9D%9E%E5%9B%BE%E7%89%87%EF%BC%89/4.png"></p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%EF%BC%88%E9%9D%9E%E5%9B%BE%E7%89%87%EF%BC%89/2.png"></p>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】app计算&amp;清除文件缓存</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91app%E8%AE%A1%E7%AE%97&amp;%E6%B8%85%E9%99%A4%E6%96%87%E4%BB%B6%E7%BC%93%E5%AD%98/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91app%E8%AE%A1%E7%AE%97&amp;%E6%B8%85%E9%99%A4%E6%96%87%E4%BB%B6%E7%BC%93%E5%AD%98/</url>
    
    <content type="html"><![CDATA[<p>注意不是Storage缓存是app资源文件缓存</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;view&gt;<br>&lt;view class=&quot;cont-wrap&quot;&gt;<br>&lt;view class=&quot;listItem&quot; @click=&quot;clern&quot;&gt;<br>&lt;view class=&quot;itemLeft&quot;&gt;<br>&lt;text&gt;清除缓存&lt;/text&gt;<br>&lt;/view&gt;<br>&lt;view class=&quot;itemRight&quot;&gt;<br>&lt;text class=&quot;rtext&quot;&gt;&#123;&#123;fileSizeString&#125;&#125;&lt;/text&gt;<br>&lt;/view&gt;<br>&lt;/view&gt;<br>&lt;/view&gt;<br>&lt;/view&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>data() &#123;<br>return &#123;<br>fileSizeString: &quot;&quot;<br>&#125;<br>&#125;,<br>onLoad() &#123;<br>this.formatSize();<br>&#125;,<br>methods: &#123;<br>// 获取缓存<br>formatSize() &#123;<br>let that = this;<br>// #ifdef APP-PLUS<br>plus.cache.calculate(function(size) &#123;<br>let sizeCache = parseInt(size);<br>if (sizeCache == 0) &#123;<br>that.fileSizeString = &quot;0B&quot;;<br>&#125; else if (sizeCache &lt; 1024) &#123;<br>that.fileSizeString = sizeCache + &quot;B&quot;;<br>&#125; else if (sizeCache &lt; 1048576) &#123;<br>that.fileSizeString = (sizeCache / 1024).toFixed(2) + &quot;KB&quot;;<br>&#125; else if (sizeCache &lt; 1073741824) &#123;<br>that.fileSizeString = (sizeCache / 1048576).toFixed(2) + &quot;MB&quot;;<br>&#125; else &#123;<br>that.fileSizeString = (sizeCache / 1073741824).toFixed(2) + &quot;GB&quot;;<br>&#125;<br>&#125;);<br>// #endif<br>&#125;,<br>// 清除缓存<br>clern() &#123;<br>let that = this<br>// #ifdef APP-PLUS<br>uni.showModal(&#123;<br>title: &#x27;清除缓存&#x27;,<br>content: &#x27;您确定要清除缓存吗？&#x27;,<br>success: function(res) &#123;<br>if (res.confirm) &#123;<br>console.log(&#x27;用户点击确定&#x27;);<br>that.clearCache()<br>&#125; else if (res.cancel) &#123;<br>console.log(&#x27;用户点击取消&#x27;);<br>&#125;<br>&#125;<br>&#125;);<br>// #endif<br>&#125;,<br>// 清理缓存<br>clearCache() &#123;<br>let that = this;<br>uni.showLoading(&#123;<br>mask: true,<br>title: &quot;清除中...&quot;<br>&#125;)<br>// #ifdef APP-PLUS<br>let os = plus.os.name;<br>if (os == &#x27;Android&#x27;) &#123;<br>let main = plus.android.runtimeMainActivity();<br>let sdRoot = main.getCacheDir();<br>let files = plus.android.invoke(sdRoot, &quot;listFiles&quot;);<br>let len = files.length;<br>for (let i = 0; i &lt; len; i++) &#123;<br>let filePath = &#x27;&#x27; + files[i]; // 没有找到合适的方法获取路径，这样写可以转成文件路径  <br>plus.io.resolveLocalFileSystemURL(filePath, function(entry) &#123;<br>if (entry.isDirectory) &#123;<br>entry.removeRecursively(function(entry) &#123; //递归删除其下的所有文件及子目录  <br>uni.hideLoading();<br>uni.showToast(&#123;<br>title: &#x27;缓存清理完成&#x27;,<br>duration: 2000<br>&#125;);<br>that.formatSize(); // 重新计算缓存<br>&#125;, function(e) &#123;<br>console.log(e.message)<br>&#125;);<br>&#125; else &#123;<br>entry.remove();<br>&#125;<br>&#125;, function(e) &#123;<br>console.log(&#x27;文件路径读取失败&#x27;)<br>&#125;);<br>&#125;<br>&#125; else &#123; // ios  <br>plus.cache.clear(function() &#123;<br>uni.showToast(&#123;<br>title: &#x27;缓存清理完成&#x27;,<br>duration: 2000<br>&#125;);<br>that.formatSize();<br>&#125;);<br>&#125;<br>// #endif<br>&#125;<br>&#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】webpack-vue-cli常用配置</title>
    <link href="/node/%E3%80%90node%E3%80%91webpack-vue-cli%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/"/>
    <url>/node/%E3%80%90node%E3%80%91webpack-vue-cli%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="修改方式"><a href="#修改方式" class="headerlink" title="修改方式"></a>修改方式</h1><p>Vue CLI 可通过两种方式修改 webpack 配置。分别为：configureWebpack 和 chainWebpack。</p><p>需要注意的是：configureWebpack 会直接覆盖同名配置（有可能会覆盖 vue cli 默认配置 或 chainWebpack 配置）；而 chainWebpack 则是通过修改默认配置来实现。所以一般推荐优先使用 chainWebpack 来修改配置。</p><h2 id="configureWebpack"><a href="#configureWebpack" class="headerlink" title="configureWebpack"></a>configureWebpack</h2><p>可提供一个 configureWebpack 对象，也可以是一个方法。</p><ul><li>对象：该对象将被 webpack-merge 合并到最终的 webpack 配置中，可以直接修改或覆盖 Webpack 的配置。</li><li>方法：可基于环境修改配置。函数会在环境变量被设置之后回调，形参会收到已经解析好的配置。在函数内，你可以直接修改解析好的配置，或者返回一个将会被合并的对象。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// vue.config.js 提供对象</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">configureWebpack</span>: &#123;<br>    <span class="hljs-comment">// 修改Webpack的配置</span><br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// vue.config.js 提供方法</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">configureWebpack</span>: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&quot;production&quot;</span>) &#123;<br>      <span class="hljs-comment">// 为生产环境修改配置...</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-comment">// 为开发环境修改配置...</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-comment">// 修改Webpack的配置</span><br>    &#125;;<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="chainWebpack-推荐"><a href="#chainWebpack-推荐" class="headerlink" title="chainWebpack 推荐"></a>chainWebpack 推荐</h2><p>Vue CLI 内部的 webpack 配置是通过 webpack-chain 维护的。webpack-chain 是一个可以链式配置 webpack 的库。所以可以使用 webpack-chain API 链式修改配置</p><p>创建 <code>vue.config.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// vue.config.js</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">chainWebpack</span>: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&quot;production&quot;</span>) &#123;<br>      <span class="hljs-comment">// 为生产环境修改配置...</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-comment">// 为开发环境修改配置...</span><br>    &#125;<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="常用的配置"><a href="#常用的配置" class="headerlink" title="常用的配置"></a>常用的配置</h1><h2 id="scss-自动导入"><a href="#scss-自动导入" class="headerlink" title="scss 自动导入"></a>scss 自动导入</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// vue.config.js</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">css</span>: &#123;<br>    <span class="hljs-attr">loaderOptions</span>: &#123;<br>      <span class="hljs-attr">sass</span>: &#123;<br>        <span class="hljs-attr">sassOptions</span>: &#123; <span class="hljs-attr">outputStyle</span>: <span class="hljs-string">&quot;expanded&quot;</span> &#125;,<br>        <span class="hljs-title function_">additionalData</span>(<span class="hljs-params">content, loaderContext</span>) &#123;<br>          <span class="hljs-keyword">const</span> &#123; resourcePath, rootContext &#125; = loaderContext;<br>          <span class="hljs-keyword">const</span> relativePath = <span class="hljs-title function_">relative</span>(rootContext, resourcePath);<br>          <span class="hljs-keyword">if</span> (relativePath.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\\/g</span>, <span class="hljs-string">&quot;/&quot;</span>) !== <span class="hljs-string">&quot;src/assets/styles/variables.scss&quot;</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;@import &quot;~@/assets/styles/variables.scss&quot;;&#x27;</span> + content;<br>          <span class="hljs-keyword">return</span> content;<br>        &#125;,<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// vue.config.js</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">configureWebpack</span>: &#123;<br>    <span class="hljs-attr">resolve</span>: &#123;<br>      <span class="hljs-attr">alias</span>: &#123;<br>        <span class="hljs-string">&quot;@&quot;</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&quot;src/&quot;</span>),<br>        <span class="hljs-comment">// ...</span><br>      &#125;,<br>    &#125;,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="打包去掉-console"><a href="#打包去掉-console" class="headerlink" title="打包去掉 console"></a>打包去掉 console</h2><p><a href="https://webpack.js.org/configuration/optimization/#optimizationminimizer">https://webpack.js.org/configuration/optimization/#optimizationminimizer</a><br><a href="https://github.com/terser/terser">https://github.com/terser/terser</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// vue.config.js</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">chainWebpack</span>: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&quot;production&quot;</span>) &#123;<br>      config.<span class="hljs-property">optimization</span>.<span class="hljs-title function_">minimizer</span>(<span class="hljs-string">&quot;terser&quot;</span>).<span class="hljs-title function_">tap</span>(<span class="hljs-function">(<span class="hljs-params">args</span>) =&gt;</span> &#123;<br>        <span class="hljs-comment">// 移除 debugger</span><br>        args[<span class="hljs-number">0</span>].<span class="hljs-property">terserOptions</span>.<span class="hljs-property">compress</span>.<span class="hljs-property">drop_debugger</span> = <span class="hljs-literal">true</span>;<br>        <span class="hljs-comment">// 移除全部 console.*</span><br>        args[<span class="hljs-number">0</span>].<span class="hljs-property">terserOptions</span>.<span class="hljs-property">compress</span>.<span class="hljs-property">drop_console</span> = <span class="hljs-literal">true</span>;<br>        <span class="hljs-comment">// 移除指定 console.*</span><br>        <span class="hljs-comment">// args[0].terserOptions.compress.pure_funcs = [&quot;console.log&quot;];</span><br>        <span class="hljs-keyword">return</span> args;<br>      &#125;);<br>    &#125;<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="SVG-自动引入"><a href="#SVG-自动引入" class="headerlink" title="SVG 自动引入"></a>SVG 自动引入</h2><p>地址：<a href="https://www.npmjs.com/package/svg-sprite-loader">https://www.npmjs.com/package/svg-sprite-loader</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i -D svg-sprite-loader<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// vue.config.js</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">chainWebpack</span>: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> svgRule = config.<span class="hljs-property">module</span>.<span class="hljs-title function_">rule</span>(<span class="hljs-string">&quot;svg&quot;</span>);<br>    <span class="hljs-comment">// 清除SVG已有的 loader 规则</span><br>    svgRule.<span class="hljs-property">uses</span>.<span class="hljs-title function_">clear</span>();<br>    <span class="hljs-comment">// 新增 SVG Loader 规则</span><br>    svgRule<br>      .<span class="hljs-title function_">test</span>(<span class="hljs-regexp">/\.svg$/</span>)<br>      .<span class="hljs-title function_">use</span>(<span class="hljs-string">&quot;svg-sprite-loader&quot;</span>)<br>      .<span class="hljs-title function_">loader</span>(<span class="hljs-string">&quot;svg-sprite-loader&quot;</span>);<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="gzip-压缩"><a href="#gzip-压缩" class="headerlink" title="gzip 压缩"></a>gzip 压缩</h2><p>地址：<a href="https://www.npmjs.com/package/compression-webpack-plugin">https://www.npmjs.com/package/compression-webpack-plugin</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i -D compression-webpack-plugin<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// vue.config.js;</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">CompressionWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;compression-webpack-plugin&quot;</span>);<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">chainWebpack</span>: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&quot;production&quot;</span>) &#123;<br>      config.<span class="hljs-title function_">plugin</span>(<span class="hljs-string">&quot;compression&quot;</span>).<span class="hljs-title function_">use</span>(<span class="hljs-title class_">CompressionWebpackPlugin</span>, [<br>        &#123;<br>          <span class="hljs-attr">filename</span>: <span class="hljs-string">&quot;[path][base].gz[query]&quot;</span>,<br>          <span class="hljs-attr">algorithm</span>: <span class="hljs-string">&quot;gzip&quot;</span>,<br>          <span class="hljs-attr">test</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">&quot;\\.(&quot;</span> + [<span class="hljs-string">&quot;html&quot;</span>, <span class="hljs-string">&quot;js&quot;</span>, <span class="hljs-string">&quot;css&quot;</span>, <span class="hljs-string">&quot;svg&quot;</span>].<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;|&quot;</span>) + <span class="hljs-string">&quot;)$&quot;</span>),<br>          <span class="hljs-attr">threshold</span>: <span class="hljs-number">8192</span>, <span class="hljs-comment">// 单位字节 大于这个字节时才压缩</span><br>          <span class="hljs-attr">minRatio</span>: <span class="hljs-number">0.8</span>, <span class="hljs-comment">// 压缩比率</span><br>        &#125;,<br>      ]);<br>    &#125;<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="分块优化"><a href="#分块优化" class="headerlink" title="分块优化"></a>分块优化</h2><p>地址： <a href="https://webpack.js.org/configuration/optimization/#optimizationsplitchunks">https://webpack.js.org/configuration/optimization/#optimizationsplitchunks</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// vue.config.js</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">chainWebpack</span>: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&quot;production&quot;</span>) &#123;<br>      config.<span class="hljs-property">optimization</span>.<span class="hljs-title function_">splitChunks</span>(&#123;<br>        <span class="hljs-attr">automaticNameDelimiter</span>: <span class="hljs-string">&quot;-&quot;</span>,<br>        <span class="hljs-attr">minSize</span>: <span class="hljs-number">20000</span>, <span class="hljs-comment">// 生成块的最小尺寸，默认 20000 小于 20000 字节的模块不拆分</span><br>        <span class="hljs-attr">maxSize</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 生成块的最大尺寸，默认0 表示不限制 超过该值的模块会被拆分成更小的块</span><br>        <span class="hljs-attr">minChunks</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// 最少chunk，默认1</span><br>        <span class="hljs-attr">chunks</span>: <span class="hljs-string">&quot;all&quot;</span>, <span class="hljs-comment">// async: 仅拆分异步代码 initial: 仅拆分同步代码 all: 拆分全部代码</span><br>        <span class="hljs-attr">cacheGroups</span>: &#123;<br>          <span class="hljs-attr">vue</span>: &#123;<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;vue&quot;</span>,<br>            <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/](vue(.*)|core-js)[\\/]/</span>,<br>            <span class="hljs-attr">chunks</span>: <span class="hljs-string">&quot;initial&quot;</span>,<br>            <span class="hljs-attr">priority</span>: <span class="hljs-number">20</span>, <span class="hljs-comment">// 两个缓存组的 test 规则冲突时，优先匹配优先级高的缓存组</span><br>          &#125;,<br>          <span class="hljs-attr">elementUI</span>: &#123;<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;element-ui&quot;</span>,<br>            <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/]element-ui(.*)[\\/]/</span>,<br>            <span class="hljs-attr">priority</span>: <span class="hljs-number">30</span>,<br>          &#125;,<br>          <span class="hljs-attr">echarts</span>: &#123;<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;echarts&quot;</span>,<br>            <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/](echarts|zrender|tslib)[\\/]/</span>,<br>            <span class="hljs-attr">priority</span>: <span class="hljs-number">50</span>,<br>          &#125;,<br>          <span class="hljs-attr">extra</span>: &#123;<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;roc-extra&quot;</span>,<br>            <span class="hljs-attr">test</span>: <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&quot;src/extra&quot;</span>),<br>            <span class="hljs-attr">priority</span>: <span class="hljs-number">40</span>,<br>          &#125;,<br>        &#125;,<br>      &#125;);<br>    &#125;<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="打包排除-js-库使用-CDN-引入"><a href="#打包排除-js-库使用-CDN-引入" class="headerlink" title="打包排除 js 库使用 CDN 引入"></a>打包排除 js 库使用 CDN 引入</h2><p>比如排除 echarts 包</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// vue.config.js</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">chainWebpack</span>: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>    config.<span class="hljs-title function_">externals</span>(&#123;<br>      <span class="hljs-attr">echarts</span>: <span class="hljs-string">&quot;echarts&quot;</span>, <span class="hljs-comment">// 配置 ECharts 为外部依赖，指定全局变量</span><br>    &#125;);<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><p>排除后在 <code>index.html</code> 中引入 CDN 。在项目中使用全局的变量 <code>echarts</code> 即可。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Vue App<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>We&#x27;re sorry but vue app doesn&#x27;t work properly without JavaScript enabled. Please enable it to continue.<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">noscript</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- cdn 引入 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;//unpkg.com/echarts@4.9.0/dist/echarts.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="打包模块可视化分析"><a href="#打包模块可视化分析" class="headerlink" title="打包模块可视化分析"></a>打包模块可视化分析</h2><p>地址：<a href="https://www.npmjs.com/package/webpack-bundle-analyzer">https://www.npmjs.com/package/webpack-bundle-analyzer</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i -D webpack-bundle-analyzer<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// vue.config.js</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">chainWebpack</span>: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>    config.<span class="hljs-title function_">plugin</span>(<span class="hljs-string">&quot;webpack-bundle-analyzer&quot;</span>).<span class="hljs-title function_">use</span>(<span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;webpack-bundle-analyzer&quot;</span>).<span class="hljs-property">BundleAnalyzerPlugin</span>);<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】webpack-chain常用配置</title>
    <link href="/node/%E3%80%90node%E3%80%91webpack-chain%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/"/>
    <url>/node/%E3%80%90node%E3%80%91webpack-chain%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>webpack-chain 通过提供可链式的 API 创建和修改 webpack 配置。在 vue-cli 中已采用 webpack-chain 方式修改 webpack 配置。</p><p>webpack-chain 文档：<a href="https://github.com/neutrinojs/webpack-chain">https://github.com/neutrinojs/webpack-chain</a></p><p>webpack 文档：<a href="https://webpack.js.org/">https://webpack.js.org/</a></p><h1 id="安装引用"><a href="#安装引用" class="headerlink" title="安装引用"></a>安装引用</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -D webpack-chain<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Config</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;webpack-chain&quot;</span>);<br><br><span class="hljs-keyword">const</span> config = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Config</span>();<br></code></pre></td></tr></table></figure><h1 id="常用配置语法"><a href="#常用配置语法" class="headerlink" title="常用配置语法"></a>常用配置语法</h1><h2 id="入口、出口配置"><a href="#入口、出口配置" class="headerlink" title="入口、出口配置"></a>入口、出口配置</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript">config<br>  <span class="hljs-comment">// entry 入口配置</span><br>  .<span class="hljs-title function_">entry</span>(<span class="hljs-string">&quot;index&quot;</span>)<br>  .<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;src/index.js&quot;</span>)<br>  .<span class="hljs-title function_">end</span>()<br>  <span class="hljs-comment">// output 出口配置</span><br>  .<span class="hljs-property">output</span>.<span class="hljs-title function_">path</span>(<span class="hljs-string">&quot;dist&quot;</span>)<br>  .<span class="hljs-title function_">filename</span>(<span class="hljs-string">&quot;[name].[chunkhash].js&quot;</span>)<br>  .<span class="hljs-title function_">chunkFilename</span>(<span class="hljs-string">&quot;chunks/[name].[chunkhash].js&quot;</span>);<br><br><span class="hljs-comment">// 等同于以下 webpack 配置</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">entry</span>: &#123;<br>    <span class="hljs-attr">index</span>: [<span class="hljs-string">&quot;src/index.js&quot;</span>],<br>  &#125;,<br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/dist&quot;</span>,<br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&quot;[name].[chunkhash].js&quot;</span>,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="loader-新增"><a href="#loader-新增" class="headerlink" title="loader 新增"></a>loader 新增</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript">config.<span class="hljs-property">module</span><br>  .<span class="hljs-title function_">rule</span>(<span class="hljs-string">&quot;babel&quot;</span>)<br>  .<span class="hljs-title function_">test</span>(<span class="hljs-regexp">/\.(js|jsx|mjs|ts|tsx)$/</span>)<br>  .<span class="hljs-title function_">use</span>(<span class="hljs-string">&quot;babel-loader&quot;</span>)<br>  .<span class="hljs-title function_">loader</span>(<span class="hljs-string">&quot;babel-loader&quot;</span>)<br>  .<span class="hljs-title function_">options</span>(&#123;<br>    <span class="hljs-attr">presets</span>: [<span class="hljs-string">&quot;@babel/preset-env&quot;</span>],<br>  &#125;)<br>  .<span class="hljs-title function_">end</span>();<br><br><span class="hljs-comment">// 等同于以下 webpack 配置</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(js|jsx|mjs|ts|tsx)$/</span>,<br>        <span class="hljs-attr">use</span>: [<br>          &#123;<br>            <span class="hljs-attr">loader</span>: <span class="hljs-string">&quot;babel-loader&quot;</span>,<br>            <span class="hljs-attr">options</span>: &#123;<br>              <span class="hljs-attr">presets</span>: [<span class="hljs-string">&quot;@babel/preset-env&quot;</span>],<br>            &#125;,<br>          &#125;,<br>        ],<br>      &#125;,<br>    ],<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="loader-修改"><a href="#loader-修改" class="headerlink" title="loader 修改"></a>loader 修改</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">config.<span class="hljs-property">module</span><br>  .<span class="hljs-title function_">rule</span>(<span class="hljs-string">&quot;babel&quot;</span>)<br>  .<span class="hljs-title function_">use</span>(<span class="hljs-string">&quot;babel-loader&quot;</span>)<br>  .<span class="hljs-title function_">tap</span>(<span class="hljs-function">(<span class="hljs-params">options</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// 修改 options...</span><br>    options.<span class="hljs-property">presets</span> = [<span class="hljs-string">&quot;@babel/preset-env&quot;</span>];<br>    <span class="hljs-keyword">return</span> options;<br>  &#125;);<br></code></pre></td></tr></table></figure><h2 id="plugin-新增"><a href="#plugin-新增" class="headerlink" title="plugin 新增"></a>plugin 新增</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> pluginName = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;plugin-name&quot;</span>);<br><br>config.<span class="hljs-title function_">plugin</span>(<span class="hljs-string">&quot;plugin-name&quot;</span>).<span class="hljs-title function_">use</span>(pluginName, [<br>  &#123;<br>    <span class="hljs-comment">// 插件配置项</span><br>  &#125;,<br>]);<br><br><span class="hljs-comment">// 等同于以下 webpack 配置</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">plugins</span>: [<br>    <span class="hljs-keyword">new</span> <span class="hljs-title function_">pluginName</span>(&#123;<br>      <span class="hljs-comment">// 插件配置项</span><br>    &#125;),<br>  ],<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="plugin-修改"><a href="#plugin-修改" class="headerlink" title="plugin 修改"></a>plugin 修改</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">config.<span class="hljs-title function_">plugin</span>(<span class="hljs-string">&quot;plugin-name&quot;</span>).<span class="hljs-title function_">tap</span>(<span class="hljs-function">(<span class="hljs-params">args</span>) =&gt;</span> [<br>  &#123;<br>    <span class="hljs-comment">// 插件配置args修改</span><br>  &#125;,<br>]);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】webpack使用</title>
    <link href="/node/%E3%80%90node%E3%80%91webpack%E4%BD%BF%E7%94%A8/"/>
    <url>/node/%E3%80%90node%E3%80%91webpack%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>webpack 是一个模块打包工具，用于将多个模块打包成一个或多个文件。通过 Loader 和 Plugin 等工具，可以对不同类型的文件进行处理和转换。以下是基本使用及配置方法，更多配置参考官方文档。</p><p>文档地址：<a href="https://webpack.js.org/">https://webpack.js.org</a></p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -D webpack webpack-cli<br></code></pre></td></tr></table></figure><h1 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h1><p>webpack.config.js 以下是一个基本的 webpack 配置示例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;path&quot;</span>);<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-comment">// 模式（production 或 development）一般通过命令行参数指定</span><br>  <span class="hljs-attr">mode</span>: <span class="hljs-string">&quot;production&quot;</span>,<br><br>  <span class="hljs-comment">// 单入口文件</span><br>  <span class="hljs-attr">entry</span>: <span class="hljs-string">&quot;./src/index.js&quot;</span>,<br><br>  <span class="hljs-comment">// // 多入口文件</span><br>  <span class="hljs-comment">// entry: &#123;</span><br>  <span class="hljs-comment">//   index: &quot;./src/index.js&quot;,</span><br>  <span class="hljs-comment">// &#125;,</span><br><br>  <span class="hljs-comment">// 输出配置</span><br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&quot;dist&quot;</span>), <span class="hljs-comment">// 输出目录</span><br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&quot;[name].[chunkhash].bundle.js&quot;</span>, <span class="hljs-comment">// 输出文件名</span><br>  &#125;,<br><br>  <span class="hljs-comment">// 模块规则（loader 配置）</span><br>  <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>, <span class="hljs-comment">// 匹配 .js 文件</span><br>        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>, <span class="hljs-comment">// 排除 node_modules 目录</span><br>        <span class="hljs-attr">use</span>: <span class="hljs-string">&quot;babel-loader&quot;</span>, <span class="hljs-comment">// 使用 babel-loader 处理</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>, <span class="hljs-comment">// 匹配 .css 文件</span><br>        <span class="hljs-attr">use</span>: [<span class="hljs-string">&quot;style-loader&quot;</span>, <span class="hljs-string">&quot;css-loader&quot;</span>], <span class="hljs-comment">// 使用 style-loader 和 css-loader 多个 Loader 按照从右到左的顺序依次处理文件</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(png|jpg|gif)$/</span>, <span class="hljs-comment">// 匹配图片文件</span><br>        <span class="hljs-attr">use</span>: <span class="hljs-string">&quot;file-loader&quot;</span>, <span class="hljs-comment">// 使用 file-loader 处理</span><br>      &#125;,<br>    ],<br>  &#125;,<br><br>  <span class="hljs-comment">// 插件配置</span><br>  <span class="hljs-attr">plugins</span>: [],<br><br>  <span class="hljs-comment">// 开发服务器配置</span><br>  <span class="hljs-attr">devServer</span>: &#123;<br>    <span class="hljs-attr">static</span>: <span class="hljs-string">&quot;./dist&quot;</span>, <span class="hljs-comment">// 静态文件目录</span><br>    <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 启用热更新</span><br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="npm-脚本"><a href="#npm-脚本" class="headerlink" title="npm 脚本"></a>npm 脚本</h1><p>基本脚本示例：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;build:prod&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;webpack --mode production&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;build:dev&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;webpack --mode development&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;serve&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;webpack serve --mode development&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h1 id="常用-Loader"><a href="#常用-Loader" class="headerlink" title="常用 Loader"></a>常用 Loader</h1><p>Loader 用于处理模块的源代码。它们将非 JavaScript 文件（如 CSS、图片、字体等）转换为 Webpack 能够处理的模块。以下是一些常用的 Loader</p><p>文档：<a href="https://webpack.js.org/loaders/">https://webpack.js.org/loaders/</a></p><h2 id="Babel-Loader"><a href="#Babel-Loader" class="headerlink" title="Babel Loader"></a>Babel Loader</h2><p>用于将 ES6+ 代码转换为浏览器可识别的 JavaScript 代码。</p><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -D babel-loader @babel/core @babel/preset-env<br></code></pre></td></tr></table></figure><p>配置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,<br>        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,<br>        <span class="hljs-attr">use</span>: <span class="hljs-string">&quot;babel-loader&quot;</span>,<br>      &#125;,<br>    ],<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><p>在项目根目录下创建 .babelrc 文件：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;presets&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;@babel/preset-env&quot;</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="CSS-Loader-和-Style-Loader"><a href="#CSS-Loader-和-Style-Loader" class="headerlink" title="CSS Loader 和 Style Loader"></a>CSS Loader 和 Style Loader</h2><p>用于处理 CSS 文件。</p><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -D css-loader style-loader<br></code></pre></td></tr></table></figure><p>配置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,<br>        <span class="hljs-attr">use</span>: [<span class="hljs-string">&quot;style-loader&quot;</span>, <span class="hljs-string">&quot;css-loader&quot;</span>],<br>      &#125;,<br>    ],<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="File-Loader"><a href="#File-Loader" class="headerlink" title="File Loader"></a>File Loader</h2><p>用于处理文件（如图片）。</p><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -D file-loader<br></code></pre></td></tr></table></figure><p>配置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(png|jpg|gif)$/</span>,<br>        <span class="hljs-attr">use</span>: <span class="hljs-string">&quot;file-loader&quot;</span>,<br>      &#125;,<br>    ],<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="常用-Plugin"><a href="#常用-Plugin" class="headerlink" title="常用 Plugin"></a>常用 Plugin</h1><p>Plugin 用于扩展 Webpack 的功能，处理构建过程中的特定任务。Loader 无法实现的功能，可以通过 Plugin 来实现。以下是一些常用的 Plugin</p><p>文档：<a href="https://webpack.js.org/plugins/">https://webpack.js.org/plugins/</a></p><h2 id="HtmlWebpackPlugin"><a href="#HtmlWebpackPlugin" class="headerlink" title="HtmlWebpackPlugin"></a>HtmlWebpackPlugin</h2><p>自动生成 HTML 文件并注入打包后的资源。</p><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -D html-webpack-plugin<br></code></pre></td></tr></table></figure><p>配置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">HtmlWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;html-webpack-plugin&quot;</span>);<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">plugins</span>: [<br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>(&#123;<br>      <span class="hljs-attr">template</span>: <span class="hljs-string">&quot;./public/index.html&quot;</span>, <span class="hljs-comment">// 模板文件</span><br>    &#125;),<br>  ],<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="CleanWebpackPlugin"><a href="#CleanWebpackPlugin" class="headerlink" title="CleanWebpackPlugin"></a>CleanWebpackPlugin</h2><p>在每次构建前清理输出目录。</p><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -D clean-webpack-plugin<br></code></pre></td></tr></table></figure><p>配置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> &#123; <span class="hljs-title class_">CleanWebpackPlugin</span> &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;clean-webpack-plugin&quot;</span>);<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-keyword">new</span> <span class="hljs-title class_">CleanWebpackPlugin</span>()],<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="MiniCssExtractPlugin"><a href="#MiniCssExtractPlugin" class="headerlink" title="MiniCssExtractPlugin"></a>MiniCssExtractPlugin</h2><p>将 CSS 提取为独立的文件。</p><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -D mini-css-extract-plugin<br></code></pre></td></tr></table></figure><p>配置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MiniCssExtractPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;mini-css-extract-plugin&quot;</span>);<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,<br>        <span class="hljs-attr">use</span>: [<span class="hljs-title class_">MiniCssExtractPlugin</span>.<span class="hljs-property">loader</span>, <span class="hljs-string">&quot;css-loader&quot;</span>],<br>      &#125;,<br>    ],<br>  &#125;,<br>  <span class="hljs-attr">plugins</span>: [<br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">MiniCssExtractPlugin</span>(&#123;<br>      <span class="hljs-attr">filename</span>: <span class="hljs-string">&quot;styles.css&quot;</span>,<br>    &#125;),<br>  ],<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="WebpackDevServer"><a href="#WebpackDevServer" class="headerlink" title="WebpackDevServer"></a>WebpackDevServer</h2><p>Webpack 提供一个开发服务器，用于实时刷新和热更新。</p><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -D webpack-dev-server<br></code></pre></td></tr></table></figure><p>配置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">devServer</span>: &#123;<br>    <span class="hljs-attr">static</span>: <span class="hljs-string">&quot;./dist&quot;</span>, <span class="hljs-comment">// 静态文件目录</span><br>    <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 启用热更新</span><br>    <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 自动打开浏览器</span><br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><p>启动开发服务器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">webpack serve<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【git】git忽略提交文件</title>
    <link href="/git/%E3%80%90git%E3%80%91git%E5%BF%BD%E7%95%A5%E6%8F%90%E4%BA%A4%E6%96%87%E4%BB%B6/"/>
    <url>/git/%E3%80%90git%E3%80%91git%E5%BF%BD%E7%95%A5%E6%8F%90%E4%BA%A4%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>git提交忽略文件通常会使用<code>.gitignore</code>来解决，但是这种方案只能对git未跟踪的文件有效，git已经跟踪的文件是无效的；使用以下方案设置关闭git跟踪的文件状态。</p><h1 id="关闭跟踪"><a href="#关闭跟踪" class="headerlink" title="关闭跟踪"></a>关闭跟踪</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 关闭跟踪文件，不提交</span><br>git update-index --assume-unchanged /src/xxx.js<br><span class="hljs-comment"># 关闭追踪某个目录下的某种类型文件</span><br>git update-index --assume-unchanged /src/*.js<br></code></pre></td></tr></table></figure><h1 id="恢复跟踪"><a href="#恢复跟踪" class="headerlink" title="恢复跟踪"></a>恢复跟踪</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 恢复跟踪文件，提交</span><br>git update-index --no-assume-unchanged /src/xxx.js<br><span class="hljs-comment"># 恢复追踪某个目录下的某种类型文件</span><br>git update-index --no-assume-unchanged /src/*.js<br></code></pre></td></tr></table></figure><h1 id="查看当前关闭跟踪的文件"><a href="#查看当前关闭跟踪的文件" class="headerlink" title="查看当前关闭跟踪的文件"></a>查看当前关闭跟踪的文件</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 列出关闭追踪的文件</span><br>git ls-files -v | grep <span class="hljs-string">&#x27;^h\ &#x27;</span><br><span class="hljs-comment"># 提取文件路径</span><br>git ls-files -v | grep <span class="hljs-string">&#x27;^h\ &#x27;</span> | awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span><br><span class="hljs-comment"># 恢复所有文件追踪</span><br>git ls-files -v | grep <span class="hljs-string">&#x27;^h&#x27;</span> | awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span> |xargs git update-index --no-assume-unchanged<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】apache配置SSL证书</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91apache%E9%85%8D%E7%BD%AESSL%E8%AF%81%E4%B9%A6/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91apache%E9%85%8D%E7%BD%AESSL%E8%AF%81%E4%B9%A6/</url>
    
    <content type="html"><![CDATA[<p>本人网站已设置为https协议，github上项目，接口等地址延迟同步，本文章记录下升https配置所需步骤</p><h3 id="1-准备ssl"><a href="#1-准备ssl" class="headerlink" title="1.准备ssl"></a>1.准备ssl</h3><p>申请ssl证书：<a href="https://freessl.cn/">https://freessl.cn/</a></p><p>或者腾讯云，阿里云中申请，以阿里为例，进入 ssl证书(应用安全)，选择免费的ssl证书申请</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91apache%E9%85%8D%E7%BD%AESSL%E8%AF%81%E4%B9%A6/1.png"></p><p>申请成功后：</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91apache%E9%85%8D%E7%BD%AESSL%E8%AF%81%E4%B9%A6/2.png"></p><p>点击右侧下载，下载对应的服务器类型证书，我用的Apache，下载后的文件（三个）</p><ul><li>.key文件是证书私钥文件，如果申请证书时没有选择系统创建CSR，则没有该文件。请您保存好该私钥文件。</li><li>.crt文件是证书文件，一般包含两段内容。如果是Apache服务器，会将证书文件拆分成 _public.crt（证书文件）和_chain.crt（证书链或中间证书文件）。</li><li>.pem文件是证书文件，一般包含两段内容。Nginx证书会使用扩展名文件，在阿里云SSL证书中与.crt文件一样。</li><li>.pfx文件，一般适合Tomcat&#x2F;IIS服务器。每次下载都会产生新密码，该密码仅匹配本次下载的证书。如果需要更新证书文件，同时也要更新密码。</li></ul><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91apache%E9%85%8D%E7%BD%AESSL%E8%AF%81%E4%B9%A6/3.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91apache%E9%85%8D%E7%BD%AESSL%E8%AF%81%E4%B9%A6/4.png"></p><h3 id="2-部署证书"><a href="#2-部署证书" class="headerlink" title="2.部署证书"></a>2.部署证书</h3><p>将证书放到：Apache目录下的cert目录下（ cert目录需要自行创建）</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91apache%E9%85%8D%E7%BD%AESSL%E8%AF%81%E4%B9%A6/5.png"></p><h3 id="3-修改配置文件"><a href="#3-修改配置文件" class="headerlink" title="3.修改配置文件"></a>3.修改配置文件</h3><p>1）打开 apache 安装目录下 conf 目录中的 httpd.conf 文件，找到以下内容并去掉注释“#”：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-id">#LoadModule</span> ssl_module modules/mod_ssl<span class="hljs-selector-class">.so</span><br><span class="hljs-selector-id">#Include</span> conf/extra/httpd-ssl<span class="hljs-selector-class">.conf</span><br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91apache%E9%85%8D%E7%BD%AESSL%E8%AF%81%E4%B9%A6/6.png"></p><p>2） 把httpd-ssl.conf文件清空了，复制一下内容，修改 文档的路径和域名信息，保存。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Listen</span> <span class="hljs-number">443</span><br><span class="hljs-section">&lt;VirtualHost *<span class="hljs-number">:443</span>&gt;</span><br><span class="hljs-attribute">DocumentRoot</span> <span class="hljs-string">&quot;C:\phpStudy\PHPTutorial\WWW\www.luojing.top&quot;</span><br><span class="hljs-attribute">ServerName</span> www.luojing.top<br><br><span class="hljs-attribute">ServerAlias</span> luojing.top<br><span class="hljs-attribute">SSLEngine</span> <span class="hljs-literal">on</span><br><br><span class="hljs-comment"># 添加 SSL 协议支持协议，去掉不安全的协议</span><br><span class="hljs-attribute">SSLProtocol</span> <span class="hljs-literal">all</span> -SSLv2 -SSLv3<br><span class="hljs-comment"># 修改加密套件如下</span><br><span class="hljs-attribute">SSLCipherSuite</span> HIGH:!RC4:!MD5:!aNULL:!eNULL:!NULL:!DH:!EDH:!EXP:+MEDIUM<br><span class="hljs-attribute">SSLHonorCipherOrder</span> <span class="hljs-literal">on</span><br><span class="hljs-comment"># 证书公钥配置</span><br><span class="hljs-attribute">SSLCertificateFile</span> <span class="hljs-string">&quot;C:\phpStudy\PHPTutorial\Apache\cert\3786809_luojing.top_public.crt&quot;</span><br><span class="hljs-comment"># 证书私钥配置</span><br><span class="hljs-attribute">SSLCertificateKeyFile</span> <span class="hljs-string">&quot;C:\phpStudy\PHPTutorial\Apache\cert/3786809_luojing.top.key&quot;</span><br><span class="hljs-comment"># 证书链配置，如果该属性开头有 &#x27;#&#x27;字符，请删除掉</span><br><span class="hljs-attribute">SSLCertificateChainFile</span> <span class="hljs-string">&quot;C:\phpStudy\PHPTutorial\Apache\cert/3786809_luojing.top_chain.crt&quot;</span><br><br><span class="hljs-section">&lt;Directory <span class="hljs-string">&quot;C:\phpStudy\PHPTutorial\WWW\www.luojing.top&quot;</span>&gt;</span><br><span class="hljs-attribute">Options</span> +Indexes +FollowSymLinks +ExecCGI<br><span class="hljs-attribute">AllowOverride</span> <span class="hljs-literal">All</span><br><span class="hljs-attribute">Order</span> <span class="hljs-literal">allow</span>,<span class="hljs-literal">deny</span><br><span class="hljs-attribute">Allow</span> from <span class="hljs-literal">all</span><br><span class="hljs-attribute">Require</span> <span class="hljs-literal">all</span> granted<br><span class="hljs-section">&lt;/Directory&gt;</span><br><br><span class="hljs-section">&lt;/VirtualHost&gt;</span><br></code></pre></td></tr></table></figure><p>重启服务器 ok</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】express-html视图引擎</title>
    <link href="/node/%E3%80%90node%E3%80%91express-html%E8%A7%86%E5%9B%BE%E5%BC%95%E6%93%8E/"/>
    <url>/node/%E3%80%90node%E3%80%91express-html%E8%A7%86%E5%9B%BE%E5%BC%95%E6%93%8E/</url>
    
    <content type="html"><![CDATA[<p>使用express脚手架生成项目时，视图引擎支持的有：<br>ejs|hbs|hjs|jade|pug|twig|vash<br>默认情况下是jade<br>我们要使用html模板则需要自行配置。</p><h2 id="创建ejs视图引擎的项目"><a href="#创建ejs视图引擎的项目" class="headerlink" title="创建ejs视图引擎的项目"></a>创建ejs视图引擎的项目</h2><p>先安装express脚手架：npm i -g express-generator（装过的跳过）<br>使用express脚手架生成ejs项目express <ejs-demo> –view&#x3D;ejs，因为我们配置html视图模板是要使用ejs，我们直接创建ejs视图模板则不需要再次安装ejs。</p><h2 id="修改根目录app-js"><a href="#修改根目录app-js" class="headerlink" title="修改根目录app.js"></a>修改根目录app.js</h2><ol><li>导入ejs：const ejs &#x3D; require(“ejs”);</li><li>更改视图引擎加载的后缀：app.engine(‘.html’, ejs.__express);</li><li>设置试图引擎为html：app.set(‘view engine’, ‘html’);</li></ol><p><strong>修改前：</strong></p><p><img src="/../../assets/%E3%80%90nodejs%E3%80%91express-html%E8%A7%86%E5%9B%BE%E5%BC%95%E6%93%8E/1.png"></p><p><strong>修改后：</strong></p><p><img src="/../../assets/%E3%80%90nodejs%E3%80%91express-html%E8%A7%86%E5%9B%BE%E5%BC%95%E6%93%8E/2.png"></p><p>然后在根目录的views目录（不一定是views，看自己的设置）创建对应的html文件即可。</p>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】app签名证书（keystore）生成</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91app%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%EF%BC%88keystore%EF%BC%89%E7%94%9F%E6%88%90/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91app%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%EF%BC%88keystore%EF%BC%89%E7%94%9F%E6%88%90/</url>
    
    <content type="html"><![CDATA[<h2 id="安装jre环境"><a href="#安装jre环境" class="headerlink" title="安装jre环境"></a>安装jre环境</h2><p>推荐jre8环境，环境变量记得配置（已安装的跳过）</p><h2 id="生成签名证书"><a href="#生成签名证书" class="headerlink" title="生成签名证书"></a>生成签名证书</h2><p>使用keytool -genkey命令生成证书：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">keytool -genkey -<span class="hljs-built_in">alias</span> testalias -keyalg RSA -keysize 2048 -validity 36500 -keystore test.keystore<br></code></pre></td></tr></table></figure><ul><li>testalias是证书别名，可修改为自己想设置的字符，建议使用英文字母和数字</li><li>test.keystore是证书文件名称，可修改为自己想设置的文件名称，也可以指定完整文件路径</li></ul><p>回车后会提示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash">Microsoft Windows [版本 10.0.18363.1379]<br>(c) 2019 Microsoft Corporation。保留所有权利。<br><br>E:\roc&gt;keytool -genkey -<span class="hljs-built_in">alias</span> rocalias -keyalg RSA -keysize 2048 -validity 36500 -keystore roc.keystore<br>输入密钥库口令:<br>再次输入新口令:<br>您的名字与姓氏是什么?<br>  [Unknown]:  rocyuan<br>您的组织单位名称是什么?<br>  [Unknown]:  hendon<br>您的组织名称是什么?<br>  [Unknown]:  hd<br>您所在的城市或区域名称是什么?<br>  [Unknown]:  shaanxi<br>您所在的省/市/自治区名称是什么?<br>  [Unknown]:  xian<br>该单位的双字母国家/地区代码是什么?<br>  [Unknown]:  CN<br>CN=rocyuan, OU=hendon, O=hd, L=shaanxi, ST=xian, C=CN是否正确?<br>  [否]:  y<br><br>输入 &lt;rocalias&gt; 的密钥口令<br>        (如果和密钥库口令相同, 按回车):<br></code></pre></td></tr></table></figure><p>以上命令运行完成后就会生成证书，路径为“<code>E:\roc</code>”</p><p><img src="/../../assets/%E3%80%90%E5%AE%89%E5%8D%93%E3%80%91app%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%EF%BC%88keystore%EF%BC%89%E7%94%9F%E6%88%90/1.png"></p><h2 id="查看证书信息"><a href="#查看证书信息" class="headerlink" title="查看证书信息"></a>查看证书信息</h2><p>可以使用 <code>keytool -list -v -keystore roc.keystore</code> 命令查看证书信息</p><ul><li>roc.keystore是证书名</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 内容有删减，仅供参考</span><br><br>E:\roc&gt;keytool -list -v -keystore roc.keystore<br>输入密钥库口令:<br>密钥库类型: jks<br>密钥库提供方: SUN<br><br>您的密钥库包含 1 个条目<br><br>别名: roc<br>创建日期: 2021-3-2<br>条目类型: PrivateKeyEntry<br>证书链长度: 1<br>证书[1]:<br>所有者: CN=rocyuan, OU=hendon, O=hd, L=shaanxi, ST=xian, C=CN<br>发布者: CN=rocyuan, OU=hendon, O=hd, L=shaanxi, ST=xian, C=CN<br>序列号: 4619c<br>有效期为 Tue Mar 02 10:31:11 CST 2021 至 Thu Feb 06 10:31:11 CST 2121<br>证书指纹:<br>         MD5:  2B:0A:42:46:62:64:E7:FD:24<br>         SHA1: C3:3A:0A:5B:A0:8D:83:C7:45:40:FE:88:2B:40:8E:1C<br>         SHA256: 8A:5C:C1:D1:CB:E5:88:35:97:64:04:02:DE:19:B7:A8<br>签名算法名称: SHA256withRSA<br>主体公共密钥算法: 2048 位 RSA 密钥<br>版本: 3<br><br>扩展:<br><br><span class="hljs-comment">#1: ObjectId: 2.5.29.14 Criticality=false</span><br>SubjectKeyIdentifier [<br>KeyIdentifier [<br>0000: AC 3D 78 E5 15 38 FB F0   CF E6 77 05 89 61 AA EF  .=x..8....w..a..<br>0010: 92 E0 DA 4F                                        ...O<br>]<br>]<br><br><br><br>*******************************************<br>*******************************************<br></code></pre></td></tr></table></figure><h2 id="安卓签名获取工具"><a href="#安卓签名获取工具" class="headerlink" title="安卓签名获取工具"></a>安卓签名获取工具</h2><p>安装配置证书的应用，然后安装使用签名获取工具获取该应用的签名。</p><p>工具下载地址参考：</p><p><a href="https://developers.weixin.qq.com/doc/oplatform/Downloads/Android_Resource.html">https://developers.weixin.qq.com/doc/oplatform/Downloads/Android_Resource.html</a></p><p><img src="/../../assets/%E3%80%90%E5%AE%89%E5%8D%93%E3%80%91app%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%EF%BC%88keystore%EF%BC%89%E7%94%9F%E6%88%90/2.png"></p>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】roc-cli—创建多种项目的脚手架</title>
    <link href="/node/%E3%80%90node%E3%80%91roc-cli%E2%80%94%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%A7%8D%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6/"/>
    <url>/node/%E3%80%90node%E3%80%91roc-cli%E2%80%94%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%A7%8D%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="roc-cli介绍"><a href="#roc-cli介绍" class="headerlink" title="roc-cli介绍"></a>roc-cli介绍</h2><p>roc-cli是一款创建多种项目脚手架，平时开发项目用vue或react等脚手架创建的项目，都需要手动删除一堆垃圾代码并且配置非常多的常用库以及对他们的封装，非常麻烦，roc-cli会帮你创建没有垃圾代码并且有常用的库的配置以及封装好的项目模板，提高开发效率；目前支持vue2.x、react、uni-app模板项目，后续会完善项目模板，并增加微信小程序、vue3.x等项目模板。</p><h2 id="npm官方仓库"><a href="#npm官方仓库" class="headerlink" title="npm官方仓库"></a>npm官方仓库</h2><p>仓库地址：</p><p><a href="https://www.npmjs.com/package/roc-cli">https://www.npmjs.com/package/roc-cli</a><br><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91roc-cli%E2%80%94%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%A7%8D%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6/1.png"></p><h2 id="roc-cli安装"><a href="#roc-cli安装" class="headerlink" title="roc-cli安装"></a>roc-cli安装</h2><p>全局安装： <code>npm i -g roc-cli</code></p><h2 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h2><p>使用非常简单，全局下安装了roc-cli后就可以在命令行使用roc命令（使用后上下选择创建的项目）。</p><p><code>roc create projectName</code></p>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】npm install安装node-sass总是出现问题？</title>
    <link href="/node/%E3%80%90node%E3%80%91npm%20install%E5%AE%89%E8%A3%85node-sass%E6%80%BB%E6%98%AF%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98%EF%BC%9F/"/>
    <url>/node/%E3%80%90node%E3%80%91npm%20install%E5%AE%89%E8%A3%85node-sass%E6%80%BB%E6%98%AF%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98%EF%BC%9F/</url>
    
    <content type="html"><![CDATA[<p>在脚手架项目里使用到了sass，我们npm install时node-sass出现的问题总是最多的。</p><h2 id="分析安装步骤"><a href="#分析安装步骤" class="headerlink" title="分析安装步骤"></a>分析安装步骤</h2><p>其实node-sass它是依赖binding.node这么一个文件的；<br>首先npm下载node-sass，然后会检测全局和本地中是否有binding.node文件，如果有即跳过安装，没有则从github下载该二进制文件并将其缓存到全局，假如binding.node下载失败，则尝试本地编译出该文件，而本地编译过程就需要python环境，一般它会提示需要python27环境（如果以上问题解决就不会出现这一步）。</p><h2 id="原因1-下载node-sass，源慢（国外的源）"><a href="#原因1-下载node-sass，源慢（国外的源）" class="headerlink" title="原因1-下载node-sass，源慢（国外的源）"></a>原因1-下载node-sass，源慢（国外的源）</h2><p>可使用nrm管理npm源，切换到taobao源（首先要安装nrm）</p><p><code>nrm use taobao</code><br>或者直接将npm设置成taobao源：<br><code>npm config set registry https://registry.npm.taobao.org</code></p><h2 id="原因2-binding-node下载过慢或无法访问"><a href="#原因2-binding-node下载过慢或无法访问" class="headerlink" title="原因2-binding.node下载过慢或无法访问"></a>原因2-binding.node下载过慢或无法访问</h2><p>binding.node下载默认是github地址，国内访问较慢有时候还无法访问。我们也可以将其改成国内的地址：<br><code>npm config set sass_binary_site=https://npm.taobao.org/mirrors/node-sass</code></p><h2 id="原因3-node版本与node-sass版本不兼容"><a href="#原因3-node版本与node-sass版本不兼容" class="headerlink" title="原因3-node版本与node-sass版本不兼容"></a>原因3-node版本与node-sass版本不兼容</h2><p>参考官方：<a href="https://github.com/sass/node-sass">https://github.com/sass/node-sass</a></p><table><thead><tr><th><strong>NodeJS</strong></th><th><strong>Supported node-sass version</strong></th><th><strong>Node Module</strong></th></tr></thead><tbody><tr><td>Node 15</td><td>5.0+</td><td>88</td></tr><tr><td>Node 14</td><td>4.14+</td><td>83</td></tr><tr><td>Node 13</td><td>4.13+, &lt;5.0</td><td>79</td></tr><tr><td>Node 12</td><td>4.12+</td><td>72</td></tr><tr><td>Node 11</td><td>4.10+, &lt;5.0</td><td>67</td></tr><tr><td>Node 10</td><td>4.9+</td><td>64</td></tr><tr><td>Node 8</td><td>4.5.3+, &lt;5.0</td><td>57</td></tr><tr><td>Node &lt;8</td><td>&lt;5.0</td><td>&lt;57</td></tr></tbody></table><h2 id="原因4-提示没有安装python、build失败等"><a href="#原因4-提示没有安装python、build失败等" class="headerlink" title="原因4-提示没有安装python、build失败等"></a>原因4-提示没有安装python、build失败等</h2><p>如果上面的都可以解决这一步实际上是本地编译需要的python环境等，按照提示装python环境即可，一般是python27版本。</p>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】npm安装依赖-未能加载 Visual Cpp 组件“VCBuild.exe”等</title>
    <link href="/node/%E3%80%90node%E3%80%91npm%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96-%E6%9C%AA%E8%83%BD%E5%8A%A0%E8%BD%BD%20Visual%20Cpp%20%E7%BB%84%E4%BB%B6%E2%80%9CVCBuild.exe%E2%80%9D%E7%AD%89/"/>
    <url>/node/%E3%80%90node%E3%80%91npm%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96-%E6%9C%AA%E8%83%BD%E5%8A%A0%E8%BD%BD%20Visual%20Cpp%20%E7%BB%84%E4%BB%B6%E2%80%9CVCBuild.exe%E2%80%9D%E7%AD%89/</url>
    
    <content type="html"><![CDATA[<p>windows系统打开<br>控制面板 —&gt; 系统和功能 —&gt; 启用或关闭windows功能<br>把这一项勾中.NET Framework 3.5（包括.NET2.0和3.0）。<br>再次安装依赖报错：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">MSBUILD : error MSB3428: 未能加载 Visual C++ 组件“VCBuild.exe”。要解决此问题，1) 安装 .NET Framework 2.0 SDK；2) 安装 Microsoft Visual Studio 2005；或 3) 如果将该组件安装到了其他位置，请将其位置添加到系统路径中。 [D:\manage\web\node_modules\utf-8-validate\bui<br>ld\binding.sln]<br></code></pre></td></tr></table></figure><p>解决方法：<br>在命令行工具中运行以下命令 （全局安装windows构建工具）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install –global –production windows-build-tools<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】HBuilder配置信息</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HBuilder%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HBuilder%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF/</url>
    
    <content type="html"><![CDATA[<h2 id="Settings-json"><a href="#Settings-json" class="headerlink" title="Settings.json"></a>Settings.json</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;editor.colorScheme&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Monokai&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;editor.tabSize&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;editor.contentAssistSelectionMode&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Alt+数字模式&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;editor.insertSpaces&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;editor.minimap.enabled&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;editor.viewIndentationGuides&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;eslint-vue.validateOnDocumentChanged&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;editor.formatOnSave&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;defaultFomat.vue&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;prettier&quot;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><h2 id="prettier-config-js"><a href="#prettier-config-js" class="headerlink" title="prettier.config.js"></a>prettier.config.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">printWidth</span>: <span class="hljs-number">150</span>,<br>  <span class="hljs-attr">semi</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">tabWidth</span>: <span class="hljs-number">2</span>,<br>  <span class="hljs-attr">useTabs</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">singleQuote</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">trailingComma</span>: <span class="hljs-string">&quot;es5&quot;</span>,<br>  <span class="hljs-attr">bracketSpacing</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">htmlWhitespaceSensitivity</span>: <span class="hljs-string">&quot;ignore&quot;</span>,<br>  <span class="hljs-attr">parsers</span>: &#123;<br>    <span class="hljs-string">&quot;.jsx&quot;</span>: <span class="hljs-string">&quot;flow&quot;</span>,<br>    <span class="hljs-string">&quot;.scss&quot;</span>: <span class="hljs-string">&quot;scss&quot;</span>,<br>    <span class="hljs-string">&quot;.ts&quot;</span>: <span class="hljs-string">&quot;typescript&quot;</span>,<br>    <span class="hljs-string">&quot;.less&quot;</span>: <span class="hljs-string">&quot;css&quot;</span>,<br>    <span class="hljs-string">&quot;.vue&quot;</span>: <span class="hljs-string">&quot;vue&quot;</span>,<br>    <span class="hljs-string">&quot;.nvue&quot;</span>: <span class="hljs-string">&quot;vue&quot;</span>,<br>    <span class="hljs-string">&quot;.ux&quot;</span>: <span class="hljs-string">&quot;vue&quot;</span>,<br>    <span class="hljs-string">&quot;.yml&quot;</span>: <span class="hljs-string">&quot;yaml&quot;</span>,<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="jsbeautifyrc-js"><a href="#jsbeautifyrc-js" class="headerlink" title="jsbeautifyrc.js"></a>jsbeautifyrc.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br><span class="hljs-attr">parsers</span>: &#123;<br><span class="hljs-string">&quot;.js&quot;</span>: <span class="hljs-string">&quot;js&quot;</span>,<br><span class="hljs-string">&quot;.json&quot;</span>: <span class="hljs-string">&quot;js&quot;</span>,<br><span class="hljs-string">&quot;.njs&quot;</span>: <span class="hljs-string">&quot;js&quot;</span>,<br><span class="hljs-string">&quot;.sjs&quot;</span>: <span class="hljs-string">&quot;js&quot;</span>,<br><span class="hljs-string">&quot;.wxs&quot;</span>: <span class="hljs-string">&quot;js&quot;</span>,<br><span class="hljs-string">&quot;.css&quot;</span>: <span class="hljs-string">&quot;css&quot;</span>,<br><span class="hljs-string">&quot;.nss&quot;</span>: <span class="hljs-string">&quot;css&quot;</span>,<br><span class="hljs-string">&quot;.wxss&quot;</span>: <span class="hljs-string">&quot;css&quot;</span>,<br><span class="hljs-string">&quot;.acss&quot;</span>: <span class="hljs-string">&quot;css&quot;</span>,<br><span class="hljs-string">&quot;.ttss&quot;</span>: <span class="hljs-string">&quot;css&quot;</span>,<br><span class="hljs-string">&quot;.qss&quot;</span>: <span class="hljs-string">&quot;css&quot;</span>,<br><span class="hljs-string">&quot;.html&quot;</span>: <span class="hljs-string">&quot;html&quot;</span>,<br><span class="hljs-string">&quot;.ux&quot;</span>: <span class="hljs-string">&quot;html&quot;</span>,<br><span class="hljs-string">&quot;.wxml&quot;</span>: <span class="hljs-string">&quot;html&quot;</span>,<br><span class="hljs-string">&quot;.nml&quot;</span>: <span class="hljs-string">&quot;html&quot;</span>,<br><span class="hljs-string">&quot;.vue&quot;</span>: <span class="hljs-string">&quot;html&quot;</span>,<br><span class="hljs-string">&quot;.nvue&quot;</span>: <span class="hljs-string">&quot;html&quot;</span>,<br><span class="hljs-string">&quot;.axml&quot;</span>: <span class="hljs-string">&quot;html&quot;</span>,<br><span class="hljs-string">&quot;.swan&quot;</span>: <span class="hljs-string">&quot;html&quot;</span>,<br><span class="hljs-string">&quot;.ttml&quot;</span>: <span class="hljs-string">&quot;html&quot;</span>,<br><span class="hljs-string">&quot;.qml&quot;</span>: <span class="hljs-string">&quot;html&quot;</span><br>&#125;,<br><span class="hljs-attr">options</span>: &#123;<br><span class="hljs-string">&quot;indent_size&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,<br><span class="hljs-string">&quot;indent_char&quot;</span>: <span class="hljs-string">&quot;\t&quot;</span>,<br><span class="hljs-string">&quot;indent_with_tabs&quot;</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//使用tab缩进</span><br><span class="hljs-string">&quot;eol&quot;</span>: <span class="hljs-string">&quot;\r\n&quot;</span>, <span class="hljs-comment">//行结束符</span><br><span class="hljs-string">&quot;end_with_newline&quot;</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//使用换行结束输出</span><br><span class="hljs-string">&quot;indent_level&quot;</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">//起始代码缩进数</span><br><span class="hljs-string">&quot;preserve_newlines&quot;</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//保留空行</span><br><span class="hljs-string">&quot;max_preserve_newlines&quot;</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">//最大连续保留换行符个数。比如设为2，则会将2行以上的空行删除为只保留1行</span><br><span class="hljs-string">&quot;space_in_paren&quot;</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//括弧添加空格 示例 f( a, b )</span><br><span class="hljs-string">&quot;space_in_empty_paren&quot;</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//函数的括弧内没有参数时插入空格 示例 f( )</span><br><span class="hljs-string">&quot;jslint_happy&quot;</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//启用jslint-strict模式</span><br><span class="hljs-string">&quot;space_after_anon_function&quot;</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//匿名函数的括号前加空格</span><br><span class="hljs-string">&quot;brace_style&quot;</span>: <span class="hljs-string">&quot;collapse&quot;</span>, <span class="hljs-comment">//代码样式，可选值 [collapse|expand|end-expand|none][,preserve-inline] [collapse,preserve-inline</span><br><span class="hljs-string">&quot;unindent_chained_methods&quot;</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//不缩进链式方法调用</span><br><span class="hljs-string">&quot;break_chained_methods&quot;</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//在随后的行中断开链式方法调用</span><br><span class="hljs-string">&quot;keep_array_indentation&quot;</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//保持数组缩进</span><br><span class="hljs-string">&quot;unescape_strings&quot;</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//使用xNN符号编码解码可显示的字符</span><br><span class="hljs-string">&quot;wrap_line_length&quot;</span>: <span class="hljs-number">120</span>,<br><span class="hljs-string">&quot;e4x&quot;</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//支持jsx</span><br><span class="hljs-string">&quot;comma_first&quot;</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//把逗号放在新行开头，而不是结尾</span><br><span class="hljs-string">&quot;operator_position&quot;</span>: <span class="hljs-string">&quot;before-newline&quot;</span>,<br><span class="hljs-string">&quot;unformatted&quot;</span>: [<span class="hljs-string">&quot;wbr&quot;</span>],<br><span class="hljs-string">&quot;html&quot;</span>: &#123;<br><span class="hljs-string">&quot;indent_handlebars&quot;</span>: <span class="hljs-literal">true</span>,<br><span class="hljs-string">&quot;indent_inner_html&quot;</span>: <span class="hljs-literal">true</span>,<br><span class="hljs-string">&quot;indent-scripts&quot;</span>: <span class="hljs-string">&quot;normal&quot;</span>, <span class="hljs-comment">//[keep|separate|normal]</span><br><span class="hljs-string">&quot;extra_liners&quot;</span>: [] <span class="hljs-comment">//配置标签列表，需要在这些标签前面额外加一空白行</span><br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="supremacy-config-js"><a href="#supremacy-config-js" class="headerlink" title="supremacy.config.js"></a>supremacy.config.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//配置项说明文档：https://thisismanta.github.io/stylus-supremacy/#options</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-string">&quot;insertColons&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;insertSemicolons&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;insertBraces&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;insertNewLineAroundImports&quot;</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-string">&quot;insertNewLineAroundBlocks&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;insertNewLineAroundProperties&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;insertNewLineAroundOthers&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;preserveNewLinesBetweenPropertyValues&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;insertSpaceBeforeComment&quot;</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-string">&quot;insertSpaceAfterComment&quot;</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-string">&quot;insertSpaceAfterComma&quot;</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-string">&quot;insertSpaceInsideParenthesis&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;insertParenthesisAfterNegation&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;insertParenthesisAroundIfCondition&quot;</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-string">&quot;insertNewLineBeforeElse&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;insertLeadingZeroBeforeFraction&quot;</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-string">&quot;selectorSeparator&quot;</span>: <span class="hljs-string">&quot;, &quot;</span>,<br>  <span class="hljs-string">&quot;tabStopChar&quot;</span>: <span class="hljs-string">&quot;\t&quot;</span>,<br>  <span class="hljs-comment">//&quot;newLineChar&quot;: &quot;\n&quot;,</span><br>  <span class="hljs-comment">//&quot;quoteChar&quot;: &quot;&#x27;&quot;,</span><br>  <span class="hljs-string">&quot;sortProperties&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;alwaysUseImport&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;alwaysUseNot&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;alwaysUseAtBlock&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;alwaysUseExtends&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;alwaysUseNoneOverZero&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;alwaysUseZeroWithoutUnit&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;reduceMarginAndPaddingValues&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;ignoreFiles&quot;</span>: []<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【react】react配置—eject弹出与craco</title>
    <link href="/react/%E3%80%90react%E3%80%91react%E9%85%8D%E7%BD%AE%E2%80%94eject%E5%BC%B9%E5%87%BA%E4%B8%8Ecraco/"/>
    <url>/react/%E3%80%90react%E3%80%91react%E9%85%8D%E7%BD%AE%E2%80%94eject%E5%BC%B9%E5%87%BA%E4%B8%8Ecraco/</url>
    
    <content type="html"><![CDATA[<p>在vue脚手架中我们需要配置webpack，可在根目录创建vue.config.js文件进行配置，但是在react脚手架中并不支持react.config.js进行配置。</p><h2 id="yarn-eject-弹出配置文件（慎操！！！不推荐）"><a href="#yarn-eject-弹出配置文件（慎操！！！不推荐）" class="headerlink" title="yarn eject 弹出配置文件（慎操！！！不推荐）"></a>yarn eject 弹出配置文件（慎操！！！不推荐）</h2><p>react中要配置webpack我们可以运行 yarn eject 暴露所有配置<br><code>yarn eject</code> 之前的目录</p><p><img src="/../../assets/%E3%80%90react%E3%80%91react%E9%85%8D%E7%BD%AE%E2%80%94eject%E5%BC%B9%E5%87%BA%E4%B8%8Ecraco/1.png"></p><p>yarn eject时它会提示你：您确定要弹出吗？此动作是永久性的。<br>意思就是执行 yarn eject 弹出配置后，是不可逆的。</p><p><img src="/../../assets/%E3%80%90react%E3%80%91react%E9%85%8D%E7%BD%AE%E2%80%94eject%E5%BC%B9%E5%87%BA%E4%B8%8Ecraco/2.png"></p><p>yarn eject 之后的目录<br>暴露出来配置文件后即可进行配置（谨慎操作！！！不推荐）</p><p><img src="/../../assets/%E3%80%90react%E3%80%91react%E9%85%8D%E7%BD%AE%E2%80%94eject%E5%BC%B9%E5%87%BA%E4%B8%8Ecraco/3.png"></p><h2 id="craco使用（推荐）"><a href="#craco使用（推荐）" class="headerlink" title="craco使用（推荐）"></a>craco使用（推荐）</h2><p>使用craco进行配置，我们并不需要 <code>yarn eject</code> 弹出配置文件<br>安装craco：<code>yarn add @craco/craco</code><br>在根目录创建：<code>craco.config.js</code><br><code>package.json</code> 文件中启动项目的脚本更改：<code>react-scripts</code> 更改为 <code>craco</code></p><p><img src="/../../assets/%E3%80%90react%E3%80%91react%E9%85%8D%E7%BD%AE%E2%80%94eject%E5%BC%B9%E5%87%BA%E4%B8%8Ecraco/4.png"></p><p>然后在craco.config.js文件中进行webpack配置即可。</p><p>参考：<a href="https://www.npmjs.com/package/@craco/craco">https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;@craco&#x2F;craco</a></p>]]></content>
    
    
    <categories>
      
      <category>react</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【react】redux-Devtools工具使用</title>
    <link href="/react/%E3%80%90react%E3%80%91redux-Devtools%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    <url>/react/%E3%80%90react%E3%80%91redux-Devtools%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>redux中的状态都是公共的，我们可通过reduxDevtools工具查看改变状态的每一步操作，及状态的变化情况。</p><p>reduxDevtools工具需要安装到浏览器扩展（google商店安装自备梯子），安装成功后console面板中会多出一个redux选项</p><p><img src="/../../assets/%E3%80%90redux%E3%80%91reduxDevtools%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/1.png"></p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>参考：<a href="https://github.com/yuanpeng666/redux-devtools-extension">https://github.com/yuanpeng666/redux-devtools-extension</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> composeEnhancers = (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span>) || compose;<br><br>composeEnhancers方法将中间件包裹起来<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90redux%E3%80%91reduxDevtools%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/2.png"></p><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>每一步的action及state改变都可看到。</p><p><img src="/../../assets/%E3%80%90redux%E3%80%91reduxDevtools%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/3.png"></p>]]></content>
    
    
    <categories>
      
      <category>react</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【react】redux-thunk中间件</title>
    <link href="/react/%E3%80%90react%E3%80%91redux-thunk%E4%B8%AD%E9%97%B4%E4%BB%B6/"/>
    <url>/react/%E3%80%90react%E3%80%91redux-thunk%E4%B8%AD%E9%97%B4%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>redux使用dispatch派发action会触发reducer，但是有时候我们需要dispatch一个action之后，到达reducer之前，进行一些额外的操作（一般请求异步数据），就需要用到中间件（middleware）。中间件就是对dispatch()的增强。</p><h2 id="redux-thunk原理"><a href="#redux-thunk原理" class="headerlink" title="redux-thunk原理"></a>redux-thunk原理</h2><p>redux-thunk让store.dispatch方法不只接受一个对象，也可以接受一个函数，它内部做了处理，如果这个接收到的是一个函数，就执行它（可在这个函数里做异步操作），如果不是，就按照原来的dispatch执行。</p><h2 id="redux-thunk使用"><a href="#redux-thunk使用" class="headerlink" title="redux-thunk使用"></a>redux-thunk使用</h2><p>安装: <code>yarn add redux-thunk</code></p><p>使用redux中提供的applyMiddleware方法可以将所有中间件组成一个数组，依次执行（这里只用redux-thunk中间件）。现在就已经完成了dispatch()的功能增强。</p><p><img src="/../../assets/%E3%80%90redux%E3%80%91%E4%B8%AD%E9%97%B4%E4%BB%B6%E2%80%94redux-thunk/1.png"></p><p>不管我们使用不使用中间件需要更改store中的state都要经过action，定义好action；再定义dispatch接收的那个函数（也就是redux-thunk帮我们执行的函数，函数接收一个dispatch），在此函数中进行我们的异步操作，操作完成后再去dispatch派发action改变state（此时派发，接收的是一个action对象，所以与原生dispatch运行一致）。</p><p><img src="/../../assets/%E3%80%90redux%E3%80%91%E4%B8%AD%E9%97%B4%E4%BB%B6%E2%80%94redux-thunk/2.png"></p><p>此时我们还没有dispatch派发getBannerData函数<br>在组件中配合react-redux派发getBannerData函数。</p><p><img src="/../../assets/%E3%80%90redux%E3%80%91%E4%B8%AD%E9%97%B4%E4%BB%B6%E2%80%94redux-thunk/3.png"></p><p>整个redux-thunk流程就是这样。</p><h2 id="示例结果"><a href="#示例结果" class="headerlink" title="示例结果"></a>示例结果</h2><p><img src="/../../assets/%E3%80%90redux%E3%80%91%E4%B8%AD%E9%97%B4%E4%BB%B6%E2%80%94redux-thunk/4.png"></p><p><img src="/../../assets/%E3%80%90redux%E3%80%91%E4%B8%AD%E9%97%B4%E4%BB%B6%E2%80%94redux-thunk/5.png"></p>]]></content>
    
    
    <categories>
      
      <category>react</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【react】react-router4.X 跳转传参</title>
    <link href="/react/%E3%80%90react%E3%80%91react-router4.X%20%E8%B7%B3%E8%BD%AC%E4%BC%A0%E5%8F%82/"/>
    <url>/react/%E3%80%90react%E3%80%91react-router4.X%20%E8%B7%B3%E8%BD%AC%E4%BC%A0%E5%8F%82/</url>
    
    <content type="html"><![CDATA[<p>在react-router4.x以上，将router分为react-router-dom与react-router-native，开发web我们只需要安装react-router-dom就可以。其实它的一些传参、取参和原生的方法是非常类似的。</p><p><img src="/../../assets/%E3%80%90react-router%E3%80%91react-router4.X%E8%B7%B3%E8%BD%AC%E4%BC%A0%E5%8F%82/1.png"></p><h2 id="一、params传参"><a href="#一、params传参" class="headerlink" title="一、params传参"></a>一、params传参</h2><p>params传参 刷新页面 数据存在；但是路由路径后面需要加上&#x2F;:paramsName<br>我这里使用了react-router-config分离了路由配置</p><p><img src="/../../assets/%E3%80%90react-router%E3%80%91react-router4.X%E8%B7%B3%E8%BD%AC%E4%BC%A0%E5%8F%82/2.png"></p><p>跳转：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;/my-order/123&quot;</span>)<br></code></pre></td></tr></table></figure><p>取参：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">match</span>.<span class="hljs-property">params</span>.<span class="hljs-property">id</span><br></code></pre></td></tr></table></figure><h2 id="二、state传参"><a href="#二、state传参" class="headerlink" title="二、state传参"></a>二、state传参</h2><p>state传参 刷新页面 数据会丢失<br>首先我们不传参直接this.props.history.push(“&#x2F;my-order”)跳转打印下props：</p><p><img src="/../../assets/%E3%80%90react-router%E3%80%91react-router4.X%E8%B7%B3%E8%BD%AC%E4%BC%A0%E5%8F%82/3.png"></p><p>以上并没有传任何参数，打印出来的都是原始数据，可以看出原始提供的参数并没有query，何谈query传参（网上各种没有实践就说query传参，刷新数据依然存在的不攻自破，当然了仅限于react-router-dom）</p><p>传参：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>(&#123;<br>  <span class="hljs-attr">pathname</span>: <span class="hljs-string">&quot;/my-order&quot;</span>,<br>  <span class="hljs-attr">state</span>: &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;123123&quot;</span><br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>取参：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">location</span>.<span class="hljs-property">state</span>.<span class="hljs-property">id</span><br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90react-router%E3%80%91react-router4.X%E8%B7%B3%E8%BD%AC%E4%BC%A0%E5%8F%82/4.png"></p><p>但是，实际测试我传参时，无论传什么字段的参数过来都能拿到，下来将state更换为任意的字段比如传参用rocyuan替换state</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>(&#123;<br>  <span class="hljs-attr">pathname</span>: <span class="hljs-string">&quot;/my-order&quot;</span>,<br>  <span class="hljs-attr">rocyuan</span>: &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;123123&quot;</span><br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90react-router%E3%80%91react-router4.X%E8%B7%B3%E8%BD%AC%E4%BC%A0%E5%8F%82/5.png"></p><p>取参也就自然变成 <code>this.props.location.rocyuan.id</code><br>那在将rocyuan更换为query呢？那肯定和最开始的state是一模一样的。。。再次验证网上误导人的说react-router-dom中的query传参。刷新页面数据依然是会成为undefined</p><h2 id="三、search传参"><a href="#三、search传参" class="headerlink" title="三、search传参"></a>三、search传参</h2><p>search就是query传参；刷新页面数据依旧存在</p><p>传参（1）：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>(&#123;<br>  <span class="hljs-attr">pathname</span>: <span class="hljs-string">&quot;/my-order&quot;</span>,<br>  <span class="hljs-attr">search</span>: <span class="hljs-string">&quot;?id=123&quot;</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>传参（2）：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;/my-order?id=&quot;</span> + <span class="hljs-number">123</span>)<br></code></pre></td></tr></table></figure><p>取参：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span><br></code></pre></td></tr></table></figure><p>其实它取到的是search就是url后面的query，还需要处理：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 封装的取url的query方法，返回的对象就是转换query的对象</span><br><span class="hljs-title function_">getUrlQuery</span>(<span class="hljs-params">search</span>) &#123;<br>  <span class="hljs-keyword">const</span> theRequest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>()<br>  <span class="hljs-keyword">if</span> (search.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;?&quot;</span>) != -<span class="hljs-number">1</span>) &#123;<br>    <span class="hljs-keyword">const</span> str = search.<span class="hljs-title function_">substr</span>(<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">const</span> strs = str.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;&amp;&quot;</span>)<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; strs.<span class="hljs-property">length</span>; i ++) &#123;<br>      theRequest[strs[i].<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;=&quot;</span>)[<span class="hljs-number">0</span>]]=<span class="hljs-built_in">decodeURI</span>(strs[i].<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;=&quot;</span>)[<span class="hljs-number">1</span>])<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> theRequest;<br>&#125;<br><br><span class="hljs-comment">// 使用</span><br><span class="hljs-keyword">const</span>  search = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>;<br><span class="hljs-keyword">const</span> query = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUrlQuery</span>(search);<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90react-router%E3%80%91react-router4.X%E8%B7%B3%E8%BD%AC%E4%BC%A0%E5%8F%82/6.png"></p>]]></content>
    
    
    <categories>
      
      <category>react</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【react】react-router-dom与react-router-config使用</title>
    <link href="/react/%E3%80%90react%E3%80%91react-router-dom%E4%B8%8Ereact-router-config%E4%BD%BF%E7%94%A8/"/>
    <url>/react/%E3%80%90react%E3%80%91react-router-dom%E4%B8%8Ereact-router-config%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="react-router-dom使用"><a href="#react-router-dom使用" class="headerlink" title="react-router-dom使用"></a>react-router-dom使用</h2><p>HashRouter：路由的类型，哈希模式<br>BrowserRouter：路由的类型，HTML5 history模式<br>NavLink：路由按钮默认转成a标签，选中的路由对应的a标签带有active的class名；Link不带active的class名。<br>Route：匹配路由显示对应的组件<br>Redirect：重定向<br>Switch：匹配到对应路由时不会向下匹配<br>……更多api及属性查看react-router官网</p><p><a href="https://reactrouter.com/web/guides/quick-start">https://reactrouter.com/web/guides/quick-start</a></p><p><img src="/../../assets/%E3%80%90react-router%E3%80%91react-router-dom%E4%B8%8Ereact-router-config%E4%BD%BF%E7%94%A8/1.png"></p><p>这样写路由在项目中路由不利于管理（以上还只是简单的单层路由，还没有路由业务），于是我们会用 react-router-config统一管理路由。</p><h2 id="react-router-config使用"><a href="#react-router-config使用" class="headerlink" title="react-router-config使用"></a>react-router-config使用</h2><p>用react-router-config提供的renderRoutes方法渲染显示的组件，renderRouter接收一个参数，这个参数可定义路由及重定向等…</p><p>更多使用方式参考</p><p><a href="https://www.npmjs.com/package/react-router-config">https://www.npmjs.com/package/react-router-config</a></p><p><img src="/../../assets/%E3%80%90react-router%E3%80%91react-router-dom%E4%B8%8Ereact-router-config%E4%BD%BF%E7%94%A8/2.png"></p><p><img src="/../../assets/%E3%80%90react-router%E3%80%91react-router-dom%E4%B8%8Ereact-router-config%E4%BD%BF%E7%94%A8/3.png"></p><h2 id="结果演示"><a href="#结果演示" class="headerlink" title="结果演示"></a>结果演示</h2><p><img src="/../../assets/%E3%80%90react-router%E3%80%91react-router-dom%E4%B8%8Ereact-router-config%E4%BD%BF%E7%94%A8/4.gif"></p>]]></content>
    
    
    <categories>
      
      <category>react</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【react】create-react-app 使用</title>
    <link href="/react/%E3%80%90react%E3%80%91create-react-app%20%E4%BD%BF%E7%94%A8/"/>
    <url>/react/%E3%80%90react%E3%80%91create-react-app%20%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>vue中有vue-cli，同样react中也有react的cli：create-react-app</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -g create-react-app<br></code></pre></td></tr></table></figure><h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">create-react-app &lt;项目名&gt;<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90react%E3%80%91create-react-app%E4%BD%BF%E7%94%A8/1.png"></p><p>创建成功，我这里是用yarn来管理的</p><p><img src="/../../assets/%E3%80%90react%E3%80%91create-react-app%E4%BD%BF%E7%94%A8/2.png"></p><h2 id="启动项目"><a href="#启动项目" class="headerlink" title="启动项目"></a>启动项目</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">yarn start<br><span class="hljs-comment"># npm对应 </span><br>npm run start<br></code></pre></td></tr></table></figure><h2 id="打包项目"><a href="#打包项目" class="headerlink" title="打包项目"></a>打包项目</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">yarn build<br><span class="hljs-comment"># npm对应</span><br>npm run build<br></code></pre></td></tr></table></figure><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">yarn <span class="hljs-built_in">test</span><br><span class="hljs-comment">#npm对应</span><br>npm run <span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><h2 id="暴露webpack等配置文件"><a href="#暴露webpack等配置文件" class="headerlink" title="暴露webpack等配置文件"></a>暴露webpack等配置文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">yarn eject<br><span class="hljs-comment"># npm对应</span><br>npm run eject<br></code></pre></td></tr></table></figure><p>此操作是不可逆的！！！一般不会使用，要想配置webpack配置可使用craco</p><h2 id="脚手架创建的项目"><a href="#脚手架创建的项目" class="headerlink" title="脚手架创建的项目"></a>脚手架创建的项目</h2><p><img src="/../../assets/%E3%80%90react%E3%80%91create-react-app%E4%BD%BF%E7%94%A8/3.png"></p>]]></content>
    
    
    <categories>
      
      <category>react</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【react】class组件事件处理函数中的this指向</title>
    <link href="/react/%E3%80%90react%E3%80%91class%E7%BB%84%E4%BB%B6%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84this%E6%8C%87%E5%90%91/"/>
    <url>/react/%E3%80%90react%E3%80%91class%E7%BB%84%E4%BB%B6%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84this%E6%8C%87%E5%90%91/</url>
    
    <content type="html"><![CDATA[<p>在class组件中我们触发事件，比如点击事件后想拿到state，第一反应肯定是点击后用this.state拿数据</p><p><img src="/../../assets/%E3%80%90react%E3%80%91class%E7%BB%84%E4%BB%B6%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84this%E6%8C%87%E5%90%91/1.png"></p><p><img src="/../../assets/%E3%80%90react%E3%80%91class%E7%BB%84%E4%BB%B6%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84this%E6%8C%87%E5%90%91/2.png"></p><p>但是，很遗憾react中这样是拿不到的，直接报错，打印this竟然是undefined</p><p>react官方:<br>在JSX回调中你必须注意 this 的指向。 在 JavaScript 中，类方法默认没有绑定的。如果你忘记绑定 this.handleClick 并将其传递给onClick，那么在直接调用该函数时，this 会是 undefined 。</p><h2 id="解决的方法"><a href="#解决的方法" class="headerlink" title="解决的方法"></a>解决的方法</h2><p>我这里列举常见的两种解决的方法，一种是用bind方法解决，一种是箭头函数；而bind方法写法有两种方案。</p><h3 id="bind—直接在事件赋值的函数处绑定this"><a href="#bind—直接在事件赋值的函数处绑定this" class="headerlink" title="bind—直接在事件赋值的函数处绑定this"></a>bind—直接在事件赋值的函数处绑定this</h3><p>用bind方法为事件处理函数绑定this指向</p><p><img src="/../../assets/%E3%80%90react%E3%80%91class%E7%BB%84%E4%BB%B6%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84this%E6%8C%87%E5%90%91/3.png"></p><p><img src="/../../assets/%E3%80%90react%E3%80%91class%E7%BB%84%E4%BB%B6%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84this%E6%8C%87%E5%90%91/4.png"></p><h3 id="bind—在构造函数处将bind后的返回值再次赋值给事件处理函数"><a href="#bind—在构造函数处将bind后的返回值再次赋值给事件处理函数" class="headerlink" title="bind—在构造函数处将bind后的返回值再次赋值给事件处理函数"></a>bind—在构造函数处将bind后的返回值再次赋值给事件处理函数</h3><p><img src="/../../assets/%E3%80%90react%E3%80%91class%E7%BB%84%E4%BB%B6%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84this%E6%8C%87%E5%90%91/5.png"></p><h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><p>这种写法个人还是比较喜欢的，它是点击后执行一个箭头函数（而箭头函数是不会绑定this的），再在箭头函数里执行事件处理函数并且传递参数也很方便。</p><p><img src="/../../assets/%E3%80%90react%E3%80%91class%E7%BB%84%E4%BB%B6%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84this%E6%8C%87%E5%90%91/6.png"></p>]]></content>
    
    
    <categories>
      
      <category>react</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【react】react-redux基本使用</title>
    <link href="/react/%E3%80%90react%E3%80%91react-redux%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
    <url>/react/%E3%80%90react%E3%80%91react-redux%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>react-redux可以不用我们手动的联系react与redux，它提供的：</p><ul><li>Provider组件：需要告知它我们创建的store</li><li>connect方法：它接收两个参数，这俩参数分别是函数，函数参数返回一个对象，而connect方法返回的是高阶组件可传入一个组件返回一个增强后的组件。</li><li>mapStateToProps：它提供一个参数 state，就是我们发生变化的store中的state</li><li>mapDispatchToProps：它也提供一个参数dispatch，就是我们store的dispatch<br>而它们返回的对象都会放到组件的props中。</li></ul><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>拿到react-redux中的Provider组件传入我们创建的store</p><p><img src="/../../assets/%E3%80%90react-redux%E3%80%91%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/1.png"></p><p>使用connect方法将定义的mapStateToProps，mapDispatchToProps传入并且将App组件传入它返回的高阶组件，将参数中的对象放入App组件的props中<br>所以我们才可以在App组件的props中拿到num数据与handleAddNum方法。</p><p><img src="/../../assets/%E3%80%90react-redux%E3%80%91%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/2.png"></p><h2 id="示例结果"><a href="#示例结果" class="headerlink" title="示例结果"></a>示例结果</h2><p><img src="/../../assets/%E3%80%90react-redux%E3%80%91%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/3.gif"></p>]]></content>
    
    
    <categories>
      
      <category>react</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【react】redux基本使用</title>
    <link href="/react/%E3%80%90react%E3%80%91redux%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
    <url>/react/%E3%80%90react%E3%80%91redux%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>redux是一个管理公共数据状态的库，项目中我们各个组件中需要大量的共用一些状态时，可以使用redux来管理公共状态；<br>它与react没有任何关系，是一个独立的库，理论上在vue中也可以使用它的。<br>redux主要有三大核心：store、action、reducer</p><h2 id="redux三大原则"><a href="#redux三大原则" class="headerlink" title="redux三大原则"></a>redux三大原则</h2><p><strong>单一数据源</strong><br>整个应用程序的state被存储在一个对象中，Redux并没有强制让我们不能创建多个Store，但是不建议那样做，因为那样并不利于数据的维护。</p><p><strong>State是只读的</strong><br>要确保state的唯一修改方法是通过触发action，来改变的。</p><p><strong>使用纯函数来执行修改</strong><br>通过reducer（reducer必须为一个纯函数，纯函数概念这里不介绍）将旧state和actions联系在一起，并且返回一个新的State。</p><h2 id="redux流程图"><a href="#redux流程图" class="headerlink" title="redux流程图"></a>redux流程图</h2><p><img src="/../../assets/%E3%80%90redux%E3%80%91%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/1.png"></p><h2 id="redux的使用"><a href="#redux的使用" class="headerlink" title="redux的使用"></a>redux的使用</h2><p>先不结合react，单独使用redux</p><p>yarn管理示例项目，为了让node支持es6模块化，package.json中添加以下代码，scripts定义start，使我们能够yarn start运行示例项目；并且创建入口文件。</p><p><img src="/../../assets/%E3%80%90redux%E3%80%91%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/2.png"></p><p>首先我们 <code>yarn add redux</code><br>创建redux的三大核心放在store文件夹中</p><blockquote><p>index.js &#x3D;&gt; store<br>actions.js &#x3D;&gt; action<br>reducer.js &#x3D;&gt; reducer</p></blockquote><p>到这一步就准备好了。</p><h2 id="创建store"><a href="#创建store" class="headerlink" title="创建store"></a>创建store</h2><p>用redux提供的createStore方法创建store；createStore方法支持两个参数，第一个传入reducer，第二个传入中间件（暂时不谈中间件，只传一个reducer）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// /store/index.js</span><br><br><span class="hljs-keyword">import</span> &#123; createStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux&quot;</span>;<br><span class="hljs-keyword">import</span> reducer <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./reducer.js&quot;</span>;<br><br><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>(reducer);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store;<br></code></pre></td></tr></table></figure><p>我们传入了reducer但是导入的reducer并没有创建并导出</p><h2 id="创建reducer"><a href="#创建reducer" class="headerlink" title="创建reducer"></a>创建reducer</h2><p>reducer必须是一个纯函数，它会根据我们派发不同的action去执行返回不同的对象，reducer函数传入两个参数，一个是公共储存的state，一个是action；</p><p>state需要有默认值，我们得创建一个默认state对象</p><p>最终返回一个新的对象（为了保证reducer是一个纯函数，保持state的不可变性，可以用immutable库）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// /store/reducer.js</span><br><span class="hljs-keyword">const</span> defaultState = &#123;<br>  <span class="hljs-attr">num</span>: <span class="hljs-number">0</span><br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">reducer</span>(<span class="hljs-params">state = defaultState, action</span>) &#123;<br>  <span class="hljs-keyword">switch</span>(action.<span class="hljs-property">type</span>) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;CHANGE_NUM&quot;</span>:<br>      <span class="hljs-keyword">return</span> &#123;...state, <span class="hljs-attr">num</span>: state.<span class="hljs-property">num</span> + action.<span class="hljs-property">num</span>&#125;<br>    <span class="hljs-attr">default</span>:<br>      <span class="hljs-keyword">return</span> state<br>  &#125;<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> reducer;<br></code></pre></td></tr></table></figure><p>reducer中用到了action，我们暂时还没有创建action\</p><h2 id="创建action"><a href="#创建action" class="headerlink" title="创建action"></a>创建action</h2><p>action也是一个对象，但是我们一般情况下会定义成方法返回一个对象，这样可操作空间就比较大。action的type需要得和reducer里action的type一致（这里一般抽成常量统一管理会比较好）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// /store/actions.js</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeNum</span>(<span class="hljs-params">num</span>) &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;CHANGE_NUM&quot;</span>,<br>    num<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>现在我们redux三个核心都已经创建完成，但是reducer与action还没有半点关系，这时候我们可以在使用的地方用 store的dispatch将他们联系起来。</p><p>但是我们怎么知道它确实改变了 store中state的num的值了呢？</p><p>可以使用store.subscribe监听，store.getState方法获取store中的state。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// /index.js  //注意这里已经不是redux的文件了</span><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./store/index.js&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; changeNum &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./store/actions.js&quot;</span>;<br><br>store.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function"><span class="hljs-params">_</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(store.<span class="hljs-title function_">getState</span>())<br>&#125;)<br><br>store.<span class="hljs-title function_">dispatch</span>(<span class="hljs-title function_">changeNum</span>(<span class="hljs-number">1</span>))<br></code></pre></td></tr></table></figure><p>执行 <code>yarn start</code> 也就是定义的脚本 node index.js，打印出来我们dispatch派发action后改变的store中的state对象</p><p><img src="/../../assets/%E3%80%90redux%E3%80%91%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/3.png"></p><p>我们多次派发action，每次将num+1（+2的时候只需要往action的函数中传入2就可以，这就是action定义为函数的好处及灵活性），打印num试试：</p><p><img src="/../../assets/%E3%80%90redux%E3%80%91%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/4.png"></p><p>以上就是单独使用redux的基本操作</p><p>可以看出来，我们如果把根目录下的index.js看做react组件的话，它与react结合使用时，就需要我们手动的派发action，手动的监听改变，手动的关闭监听等操作，于是我们可以使用react-redux库。</p>]]></content>
    
    
    <categories>
      
      <category>react</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【react】组件通讯</title>
    <link href="/react/%E3%80%90react%E3%80%91%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF/"/>
    <url>/react/%E3%80%90react%E3%80%91%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF/</url>
    
    <content type="html"><![CDATA[<p>组件通讯就是组件与组件之间的数据传递大致可分为：<br>父组件传子组件、子组件传父组件、非父子组件传递（兄弟组件传递等）<br>而react中父子组件的通讯核心是props，非父子组件通讯核心是context（暂时不谈redux）</p><h2 id="父传子—props"><a href="#父传子—props" class="headerlink" title="父传子—props"></a>父传子—props</h2><p>其实这个props用法非常简单<br>将需要传给子组件的数据卸载组件标签的属性及属性值上，子组件的props对象中就会有传过来的值，那么这是什么原理呢？下面详解</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// 子组件</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123; props.num &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br>&#125;<br><span class="hljs-comment">// 父组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">APP</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructo</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props)<br>    <span class="hljs-comment">// 可维护自己的state</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;嗷~&quot;</span>,<br>      <span class="hljs-attr">num</span>: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>APP<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br>      <span class="hljs-comment">// 引入Home组件</span><br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Home</span> <span class="hljs-attr">num</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">num</span> &#125; /&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="子传父—props"><a href="#子传父—props" class="headerlink" title="子传父—props"></a>子传父—props</h2><p>一般子组件传数据给父组件，都是子组件触发某种事件然后将数据传出，vue中是应用了$emit，而react非常灵活，根本不需要那样<br>父组件传递给子组件一个回调函数，子组件调用回调函数时把数据传入回调函数的参数中就可以传递过来了。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// 子组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">num</span>: <span class="hljs-number">10</span><br>    &#125;<br>  &#125;<br>  <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">getCCpnData</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">num</span>)<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">e</span> =&gt;</span> this.handleClick() &#125;&gt;点击<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><span class="hljs-comment">// 父组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">APP</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">getCCpnData</span>(<span class="hljs-params">cData</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(cData)<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>APP<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br>      <span class="hljs-comment">// 引入Home组件</span><br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Home</span> <span class="hljs-attr">getCCpnData</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">this.getCCpnData</span> &#125; /&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="非父子组件—context（用法1）"><a href="#非父子组件—context（用法1）" class="headerlink" title="非父子组件—context（用法1）"></a>非父子组件—context（用法1）</h2><p>非父子组件传值，vue中使用bus事件总线方式可以传递，理论上react这种方式也是可行的，但是react提供了context，它的用法简单分为：</p><ol><li>创建context</li><li>发送数据（MyContext.Provider value&#x3D;{this.state.num}）</li><li>接收数据（函数组件接收与class组件接收方法不同，详情见下）</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 跨组件传值（context）：</span><br><span class="hljs-comment"> * 1. 创建 context 组件</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">MyContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-number">10</span>);<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 3. 类组件的接收法</span><br><span class="hljs-comment"> * About.contextType = MyContext;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.PureComponent</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>)<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>我是App的孙组件，这是App传过来的值:&#123; this.context &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><span class="hljs-title class_">About</span>.<span class="hljs-property">contextType</span> = <span class="hljs-title class_">MyContext</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 3. 函数组件的接收法</span><br><span class="hljs-comment"> * MyContext.Consumer</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">// function About() &#123;</span><br><span class="hljs-comment">// return (</span><br><span class="hljs-comment">// &lt;div&gt;</span><br><span class="hljs-comment">// &lt;h2&gt;About&lt;/h2&gt;</span><br><span class="hljs-comment">// &lt;MyContext.Consumer&gt;</span><br><span class="hljs-comment">// &#123;value =&gt; &#123;</span><br><span class="hljs-comment">// return &lt;h3&gt;我是App的孙组件，这是App传过来的值:&#123;value&#125;&lt;/h3&gt;</span><br><span class="hljs-comment">// &#125;&#125;</span><br><span class="hljs-comment">// &lt;/MyContext.Consumer&gt;</span><br><span class="hljs-comment">// &lt;/div&gt;</span><br><span class="hljs-comment">// )</span><br><span class="hljs-comment">// &#125;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">About</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.PureComponent</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">num</span>: <span class="hljs-number">12</span><br>    &#125;<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        &#123;/* </span><br><span class="language-xml">          2. 发送数据</span><br><span class="language-xml">          MyContext.Provider value=&#123;this.state.num&#125;</span><br><span class="language-xml">          注意：Provider 的 value值没传就会使用 createContext(默认值)的默认值</span><br><span class="language-xml">        */&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">MyContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">this.state.num</span> &#125;&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Home</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">MyContext.Provider</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>)<br>)<br></code></pre></td></tr></table></figure><h2 id="非父子组件—context（用法2）"><a href="#非父子组件—context（用法2）" class="headerlink" title="非父子组件—context（用法2）"></a>非父子组件—context（用法2）</h2><p>将createContext返回的对象解构出来，有两个组件Provider、Consumer<br>Provider用来传值、Consumer用来接收</p><p><strong>父组件：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> &#123;<span class="hljs-title class_">Provider</span>, <span class="hljs-title class_">Consumer</span>&#125; = <span class="hljs-title function_">createContext</span>(<span class="hljs-string">&quot;hello&quot;</span>)<br><br><span class="hljs-comment">// render里：</span><br>&lt;<span class="hljs-title class_">Provider</span> value=&#123; <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">num</span> &#125;&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Header</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Header</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">Provider</span>&gt;<br></code></pre></td></tr></table></figure><p><strong>跨组件（假如是孙组件）：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123;<span class="hljs-title class_">Consumer</span>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../../../index&quot;</span><br><br><span class="hljs-comment">// render里：</span><br>&lt;<span class="hljs-title class_">Consumer</span>&gt;<br>&#123;<br>  <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>nav里跨组件拿到的num：&#123;value&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br>&lt;/<span class="hljs-title class_">Consumer</span>&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>react</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【react】state与生命周期</title>
    <link href="/react/%E3%80%90react%E3%80%91state%E4%B8%8E%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
    <url>/react/%E3%80%90react%E3%80%91state%E4%B8%8E%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
    
    <content type="html"><![CDATA[<h2 id="state"><a href="#state" class="headerlink" title="state"></a>state</h2><p>state是组件自己私有的数据，函数组件要拥有自己的私有state需要改成class组件（暂时不说hooks）。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">APP</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructo</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props)<br>    <span class="hljs-comment">// 可维护自己的state</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;嗷~&quot;</span>,<br>      <span class="hljs-attr">num</span>: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>APP<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="修改state—setState"><a href="#修改state—setState" class="headerlink" title="修改state—setState"></a>修改state—setState</h2><p>要修改组件state必须使用react对象中Component提供的setState()方法,不能直接修改state，这样视图不会更新。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">APP</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructo</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props)<br>    <span class="hljs-comment">// 可维护自己的state</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;嗷~&quot;</span>,<br>      <span class="hljs-attr">num</span>: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;<br>  <span class="hljs-title function_">changeNum</span>(<span class="hljs-params">i</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">num</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">num</span> + i<br>    &#125;)<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>this.state.num<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">e</span> =&gt;</span> this.changeNum(1) &#125;&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>以上可以看到我们使用this.setState()方法，但是我们App类并未实现setState方法，原因是我们App类继承了React.Component类，而react的Component类原型有setState方法。setState方法传参后面详细分析。</p><p><img src="/../../assets/%E3%80%90react%E3%80%91state%E4%B8%8E%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/1.png"></p><h2 id="组件生命周期"><a href="#组件生命周期" class="headerlink" title="组件生命周期"></a>组件生命周期</h2><p>组件生命周期则是组件从创建到销毁的过程</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">APP</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br>    );<br>  &#125;<br>  <span class="hljs-comment">// 组件渲染dom</span><br>  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>) &#123;<br>  &#125;<br>  <span class="hljs-comment">// 组件卸载</span><br>  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"></span>) &#123;<br>  &#125;<br>  <span class="hljs-comment">// ......</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>react</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【react】组件</title>
    <link href="/react/%E3%80%90react%E3%80%91%E7%BB%84%E4%BB%B6/"/>
    <url>/react/%E3%80%90react%E3%80%91%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>组件允许你将 UI 拆分为独立可复用的代码片段，并对每个片段进行独立构思。——react官网<br>react中组件分为<strong>函数组件</strong>与<strong>class（类）组件</strong></p><h2 id="函数组件"><a href="#函数组件" class="headerlink" title="函数组件"></a>函数组件</h2><p>函数组件就是编写js函数，下面这个js函数就是一个“函数组件”。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="类组件"><a href="#类组件" class="headerlink" title="类组件"></a>类组件</h2><p>类组件就是使用ES6中的class编写，下面这种class组件写法与上面函数组件写法是等价的，但是他两也是有区别的。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">APP</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>APP<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>组件名我们会使用大写字母开头；因为React 会将以小写字母开头的组件视为原生 DOM 标签。</p><h2 id="函数组件与class组件区别"><a href="#函数组件与class组件区别" class="headerlink" title="函数组件与class组件区别"></a>函数组件与class组件区别</h2><p>函数组件无法维护自己的数据状态（state）以及生命周期，而class组件可以，这是它俩最大的区别（除非使用react hooks，先不说hooks）。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// 函数组件（无法维护自己的state与生命周期）</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-comment">// class组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">APP</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructo</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props)<br>    <span class="hljs-comment">// 可维护自己的state</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;嗷~&quot;</span><br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// 自己的生命周期（只写一个举栗子）</span><br>  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;组件已经被渲染到 DOM&quot;</span>)<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>APP<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>react</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【react】jsx与渲染</title>
    <link href="/react/%E3%80%90react%E3%80%91jsx%E4%B8%8E%E6%B8%B2%E6%9F%93/"/>
    <url>/react/%E3%80%90react%E3%80%91jsx%E4%B8%8E%E6%B8%B2%E6%9F%93/</url>
    
    <content type="html"><![CDATA[<h2 id="jsx是什么？"><a href="#jsx是什么？" class="headerlink" title="jsx是什么？"></a>jsx是什么？</h2><p>jsx对js进行了语法扩展，可让我们在js中嵌入任何html标签，可以把html标签存入变量等操作，它是拥有js的全部功能；<br>但是我们以script标签引入react的方式使用jsx是需要Babel进行转化的，不然script是不会识别jsx；<br>jsx根元素只能有一个元素或组件，若需要换行必须用()包裹。<br>jsx示例如下：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> el = (<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;react&quot;</span>&gt;</span></span><br><span class="language-xml">    Hello, React!</span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br>);<br></code></pre></td></tr></table></figure><h2 id="jsx中嵌入表达式"><a href="#jsx中嵌入表达式" class="headerlink" title="jsx中嵌入表达式"></a>jsx中嵌入表达式</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> name = <span class="hljs-string">&quot;RocYuan&quot;</span>;<br><span class="hljs-keyword">const</span> el = <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="jsx中添加class属性等"><a href="#jsx中添加class属性等" class="headerlink" title="jsx中添加class属性等"></a>jsx中添加class属性等</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// jsx中为了区分css属性的class与es6的class，属性的class则用className，label标签中的for则用htmlFor替换</span><br><span class="hljs-keyword">const</span> el = <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span>&#123;name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">&quot;inputName&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><br><span class="hljs-comment">// 所有添加的属性如果为动态都可用&#123;&#125;嵌入</span><br><span class="hljs-keyword">const</span> name = <span class="hljs-string">&quot;RocYuan&quot;</span>;<br><span class="hljs-keyword">const</span> titleMessage = <span class="hljs-string">&quot;RocYuanMessage&quot;</span><br><span class="hljs-keyword">const</span> el = <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">titleMessage</span> &#125; <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span>&#123; name &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><br><span class="hljs-comment">// 添加img的url</span><br><span class="hljs-keyword">const</span> element = <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">user.avatarUrl</span> &#125; /&gt;</span></span>;<br><br>...其他属性嵌入皆可用&#123;&#125;<br></code></pre></td></tr></table></figure><h2 id="jsx中绑定事件"><a href="#jsx中绑定事件" class="headerlink" title="jsx中绑定事件"></a>jsx中绑定事件</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;button onClick=&#123; <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(点击了按钮) &#125;&gt;按钮&lt;/button&gt;<br></code></pre></td></tr></table></figure><h2 id="jsx条件渲染"><a href="#jsx条件渲染" class="headerlink" title="jsx条件渲染"></a>jsx条件渲染</h2><p>React 中的条件渲染和 JavaScript 中的一样，使用 JavaScript 运算符 if 或者条件运算符来创建元素来表现当前的状态，然后让 React 根据它们来更新 UI。完全可以模拟vue中的v-if 、v-show…</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserGreeting</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Welcome back!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">GuestGreeting</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Please sign up.<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Greeting</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">const</span> isLoggedIn = props.<span class="hljs-property">isLoggedIn</span>;<br>  <span class="hljs-keyword">if</span> (isLoggedIn) &#123;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserGreeting</span> /&gt;</span></span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">GuestGreeting</span> /&gt;</span></span>;<br>&#125;<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  <span class="hljs-comment">// Try changing to isLoggedIn=&#123; true &#125;:</span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Greeting</span> <span class="hljs-attr">isLoggedIn</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">false</span> &#125; /&gt;</span></span>,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)<br>);<br></code></pre></td></tr></table></figure><h2 id="jsx中列表渲染及key"><a href="#jsx中列表渲染及key" class="headerlink" title="jsx中列表渲染及key"></a>jsx中列表渲染及key</h2><p>渲染列表我门可以使用map方法</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">movies</span>: [<span class="hljs-string">&quot;哪吒&quot;</span>, <span class="hljs-string">&quot;西游记&quot;</span>, <span class="hljs-string">&quot;三国演义&quot;</span>]<br>    &#125;<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        &#123;</span><br><span class="language-xml">          this.state.movies.map((item, index) =&gt; &#123;</span><br><span class="language-xml">            // 这里key暂时用index，但这样是不对的，开发时应用唯一标识id之类（作用就不用多说了）</span><br><span class="language-xml">            return <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">index</span> &#125;&gt;</span>&#123; item &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          &#125;)</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="jsx中表单元素"><a href="#jsx中表单元素" class="headerlink" title="jsx中表单元素"></a>jsx中表单元素</h2><p>React 中，可变状态（mutable state）通常保存在组件的 state 属性中，并且只能通过使用this.setState()来更新。</p><p><a href="https://react.docschina.org/docs/forms.html">https://react.docschina.org/docs/forms.html</a></p><h2 id="渲染"><a href="#渲染" class="headerlink" title="渲染"></a>渲染</h2><p>元素渲染使用react-dom中的render函数渲染。<br>它需要三个参数：</p><ol><li>渲染的组件</li><li>需要插入的DOM节点</li><li>渲染后的回调（但是一般用不到，所以可不传）</li></ol><p><img src="/../../assets/%E3%80%90react%E3%80%91jsx%E4%B8%8E%E6%B8%B2%E6%9F%93/1.png"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span>(<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  &lt;<span class="hljs-title class_">App</span>&gt;,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>);<br>)<br></code></pre></td></tr></table></figure><h2 id="jsx的本质"><a href="#jsx的本质" class="headerlink" title="jsx的本质"></a>jsx的本质</h2><p>实际上，jsx是FB为我们提供的一种语法糖，Babel 会把 JSX 转译成React对象中的createElement方法（当然我们也可以直接调用它，不使用jsx），vue3中的Vue.h()方法也是借鉴这的。</p><p>可通过babel网站工具看到jsx用js的实现的写法：<a href="https://www.babeljs.cn/repl">https://www.babeljs.cn/repl</a></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> el = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<br>  <span class="hljs-string">&#x27;h1&#x27;</span>,<br>  &#123; <span class="hljs-attr">className</span>: <span class="hljs-string">&#x27;greeting&#x27;</span> &#125;,<br>  <span class="hljs-string">&#x27;Hello, world!&#x27;</span><br>);<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90react%E3%80%91jsx%E4%B8%8E%E6%B8%B2%E6%9F%93/2.png"></p>]]></content>
    
    
    <categories>
      
      <category>react</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】npm从入门到私服搭建</title>
    <link href="/node/%E3%80%90node%E3%80%91npm%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%A7%81%E6%9C%8D%E6%90%AD%E5%BB%BA/"/>
    <url>/node/%E3%80%90node%E3%80%91npm%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%A7%81%E6%9C%8D%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="什么是npm"><a href="#什么是npm" class="headerlink" title="什么是npm"></a>什么是npm</h2><p>Npm（全称:Node Package Manager）是Node包管理工具。</p><h2 id="为什么要使用npm"><a href="#为什么要使用npm" class="headerlink" title="为什么要使用npm"></a>为什么要使用npm</h2><p>一个项目是成长的，可能规模越来越大或者越来越复杂，所以需要的包或依赖也会越来越多。每个包都有自己的生长方式，生长的快慢他们肯定是有不同的版本，每个包都有它们各自的版本。<br>如果一个包依赖另一个包。比如：有Jquery插件叫”A”依赖着Jquery，那这个插件”A”现在版本是2然后它依赖的Jquery版本是1，现在如果把Jquery版本升到2那插件”A”很有可能会停止工作表现出来是满页都报错。<br>这时就必须查看文档了解当前这个Jquery插件用的是哪个版本的Jquery,然后把Jquery也更新掉之后你发现插件”A”好像开始工作了(但是插件”B”也依赖着Jquery)插件”B”又挂掉了（同时插件”C”又依赖着插件”B”）插件”C”也跟着挂掉了。<br>基于上述糟糕的情况，Npm应运而生。它不但可以把代码从网上download下来最重要的是它可以帮我们管理不同包之间的关系（比如:这个包依赖着哪个包并且依赖那个版本号是多少当前版本号是多少）。</p><h2 id="没有npm之前我们的操作"><a href="#没有npm之前我们的操作" class="headerlink" title="没有npm之前我们的操作"></a>没有npm之前我们的操作</h2><p>当前项目需依赖哪个包就到”bootcdn.cn”官网找到相应包拷贝链接cdn引入，或者下载代码到本地引用。</p><h2 id="Npm安装和更新"><a href="#Npm安装和更新" class="headerlink" title="Npm安装和更新"></a>Npm安装和更新</h2><p>npm不需要单独安装。在安装Node的时候，会连带一起安装npm。但是，Node附带的npm可能不是最新版本。<br>查看版本：<code>npm -v</code><br>更新版本：<code>npm install -g npm@latest</code></p><h2 id="查看配置"><a href="#查看配置" class="headerlink" title="查看配置"></a>查看配置</h2><p><code>npm config list</code><br>查看基本配置npm仓库地址，根目录等配置信息<br><code>npm config list -l</code><br>查看全部npm默认配置</p><h2 id="配置源"><a href="#配置源" class="headerlink" title="配置源"></a>配置源</h2><p><code>npm config get registry</code><br>查看当前配置的源地址<br><code>npm config set registry=https://registry.npmmirror.com</code><br>配置源地址</p><h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><p><code>npm init</code><br><code>npm init</code> 用来初始化生成一个新的package.json文件。它会向用户提问一系列问题，如果你觉得不用修改默认配置，一路回车就可以了。</p><h2 id="Package-json文件详解"><a href="#Package-json文件详解" class="headerlink" title="Package.json文件详解"></a>Package.json文件详解</h2><p><img src="/../../assets/%E3%80%90npm%E3%80%91%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%A7%81%E6%9C%8D%E6%90%AD%E5%BB%BA/1.png"></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;demo1&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// 包名</span><br><span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// 包版本号</span><br><span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// 包描述</span><br><span class="hljs-attr">&quot;main&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;index.js&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// 包入口文件</span><br><span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>  <span class="hljs-comment">// 定义执行脚本</span><br><span class="hljs-attr">&quot;test&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;echo \”Error: no test specified\” &amp;&amp; exit 1&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;author&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;rocyuan&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// 作者</span><br><span class="hljs-attr">&quot;license&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ISC&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// 开源许可证</span><br><span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// 生产时依赖的包</span><br><span class="hljs-attr">&quot;devDependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span>  <span class="hljs-comment">// 开发时依赖的包</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="npm安装包"><a href="#npm安装包" class="headerlink" title="npm安装包"></a>npm安装包</h2><p><code>npm install</code><br>此命令会将项目所依赖的包安装到项目的node_modules中，但是不会修改package.json</p><p><code>npm install &lt;PackageName&gt;@&lt;version&gt; -g</code><br>此命令会将包及对应的版本安装到全局目录中(npm config list prefix所对应的目录)，不修改package.json，执行npm install不会自动安装。</p><p><code>npm install &lt;PackageName&gt;@&lt;version&gt; –save</code><br>此命令会将包及对应的版本安装到node_modules中，同时修改package.json文件，添加到dependencies节点。执行npm install 时会自动安装这个包到node_modules中。</p><p><code>npm install &lt;PackageName&gt;@&lt;version&gt; –save-dev</code><br>此命令会将包及对应的版本安装到node_modules中，同时修改packgage.json,将包添加到devDependencies节中，执行npm install 会自动安装这个包到node_modules中。</p><h2 id="npm卸载包"><a href="#npm卸载包" class="headerlink" title="npm卸载包"></a>npm卸载包</h2><p><code>npm uninstall &lt;PackageName&gt;</code><br>此命令会将node_modules中的 包卸载，同时修改packgage.json。</p><h2 id="npm更新包"><a href="#npm更新包" class="headerlink" title="npm更新包"></a>npm更新包</h2><p><code>npm update &lt;PackageName&gt;</code><br>此命令会将node_modules中的包进行更新，但是此更新是按照package.json中指定的版本进行更新的（一般默认只会更新当前大版本的最新版本），只会更新到当前大版本的最新版本，同时修改packgage.json。</p><h2 id="npm查看包"><a href="#npm查看包" class="headerlink" title="npm查看包"></a>npm查看包</h2><p><code>npm list</code><br>此命令会以树形结构打印出当前项目所依赖的包结构，-depth代表深度，0代表一级</p><h2 id="npm查看全局安装的包"><a href="#npm查看全局安装的包" class="headerlink" title="npm查看全局安装的包"></a>npm查看全局安装的包</h2><p><code>npm list -g -depth 0</code><br>此命令会以树形结构打印出全局安装的包结构，-depth代表深度，0代表一级</p><h2 id="npm执行脚本"><a href="#npm执行脚本" class="headerlink" title="npm执行脚本"></a>npm执行脚本</h2><p><code>npm run &lt;ScriptName&gt;</code><br>此命令会执行package.json文件中定义的脚本。</p><h2 id="npm创建用户"><a href="#npm创建用户" class="headerlink" title="npm创建用户"></a>npm创建用户</h2><p><code>npm adduser</code><br>此命令会在npm指向的镜像源注册一个账户，会让输入用户名密码以及邮箱</p><h2 id="npm登录"><a href="#npm登录" class="headerlink" title="npm登录"></a>npm登录</h2><p><code>npm login</code><br>此命令会在npm指向的镜像源进行登录（前提是注册过的账号），会让输入用户名密码以及邮箱。</p><p><code>npm login --registry=http://192.168.0.106:8081/repository/npm-hosted/</code><br>登陆到指定的源</p><h2 id="npm当前登录的用户"><a href="#npm当前登录的用户" class="headerlink" title="npm当前登录的用户"></a>npm当前登录的用户</h2><p><code>npm whoami</code><br>此命令会打印当前登录的npm用户名</p><p><code>npm whoami --registry=http://192.168.0.106:8081/repository/npm-hosted/</code><br>查看当前命令行 指定源登陆的账号</p><h2 id="npm发布包"><a href="#npm发布包" class="headerlink" title="npm发布包"></a>npm发布包</h2><p><code>npm publish</code><br>此命令会在npm指向的镜像源上传当前的包，提供install。</p><h2 id="npm删除发布包"><a href="#npm删除发布包" class="headerlink" title="npm删除发布包"></a>npm删除发布包</h2><p><code>npm unpublish &lt;PackageName&gt;</code><br>此命令会在npm指向的镜像源上删除发布的包</p><h2 id="cnpm安装"><a href="#cnpm安装" class="headerlink" title="cnpm安装"></a>cnpm安装</h2><p>npm由于镜像源在国外，在国内使用可能会比较慢，使用以下命令可安装cnpm包并指向taobao镜像源。<br><code>npm install cnpm -g --registry=https://registry.npm.taobao.org</code></p><h2 id="npm私服介绍"><a href="#npm私服介绍" class="headerlink" title="npm私服介绍"></a>npm私服介绍</h2><p>如果公司或团队处于隐私保护的需要，不想将自己封的包推到npm社区，但又需要一套完整的包管理工具来管理越来越多的组件、模块等等，那么搭建私服实际上就是我们搭建本地镜像源服务（私有源），切换npm镜像源到我们本地的私有源，这里介绍两个工具：nrm与verdaccio。</p><h2 id="nrm工具介绍"><a href="#nrm工具介绍" class="headerlink" title="nrm工具介绍"></a>nrm工具介绍</h2><p>nrm(npm registry manager )是npm的镜像源管理工具，使用这个就可以快速地在 npm 所有配置的镜像源之间切换</p><h2 id="nrm安装"><a href="#nrm安装" class="headerlink" title="nrm安装"></a>nrm安装</h2><p><code>npm install -g nrm</code><br>此命令会全局安装nrm工具</p><h2 id="nrm增加源"><a href="#nrm增加源" class="headerlink" title="nrm增加源"></a>nrm增加源</h2><p><code>nrm add &lt;RegistryName&gt; &lt;RegistryUrl&gt;</code><br>此命令会在添加镜像源，RegistryName：镜像源的名称；RegistryUrl：镜像源的地址</p><h2 id="nrm删除源"><a href="#nrm删除源" class="headerlink" title="nrm删除源"></a>nrm删除源</h2><p><code>nrm del &lt;RegistryName&gt;</code><br>此命令会删除镜像源。</p><h2 id="nrm切换源"><a href="#nrm切换源" class="headerlink" title="nrm切换源"></a>nrm切换源</h2><p><code>nrm use &lt;RegistryName&gt;</code><br>此命令会切换到对应名称的镜像源</p><h2 id="nrm查看源"><a href="#nrm查看源" class="headerlink" title="nrm查看源"></a>nrm查看源</h2><p><code>nrm ls</code><br>此命令会查看当前的npm的所有镜像源名称及地址，带*号的是当前所用的镜像源</p><p><img src="/../../assets/%E3%80%90npm%E3%80%91%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%A7%81%E6%9C%8D%E6%90%AD%E5%BB%BA/2.png"></p><h2 id="nrm测试当前npm源的响应速度"><a href="#nrm测试当前npm源的响应速度" class="headerlink" title="nrm测试当前npm源的响应速度"></a>nrm测试当前npm源的响应速度</h2><p><code>nrm test npm</code><br>此命令会打印出响应的毫秒数</p><p><img src="/../../assets/%E3%80%90npm%E3%80%91%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%A7%81%E6%9C%8D%E6%90%AD%E5%BB%BA/3.png"></p><h2 id="verdaccio工具介绍"><a href="#verdaccio工具介绍" class="headerlink" title="verdaccio工具介绍"></a>verdaccio工具介绍</h2><p><a href="https://verdaccio.org/">Verdaccio</a>是一个比较简单的配置本地私有npm镜像源的工具。</p><h2 id="verdaccio的安装"><a href="#verdaccio的安装" class="headerlink" title="verdaccio的安装"></a>verdaccio的安装</h2><p><code>npm install -g verdaccio</code><br>此命令会全局安装verdaccio</p><p><img src="/../../assets/%E3%80%90npm%E3%80%91%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%A7%81%E6%9C%8D%E6%90%AD%E5%BB%BA/4.png"></p><h2 id="verdaccio运行"><a href="#verdaccio运行" class="headerlink" title="verdaccio运行"></a>verdaccio运行</h2><p><code>verdaccio</code><br>此命令会运行verdaccio，运行完成后打开浏览器进入本地服务：</p><p><a href="http://localhost:4873/">http://localhost:4873/</a></p><p><img src="/../../assets/%E3%80%90npm%E3%80%91%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%A7%81%E6%9C%8D%E6%90%AD%E5%BB%BA/5.png"></p><p><img src="/../../assets/%E3%80%90npm%E3%80%91%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%A7%81%E6%9C%8D%E6%90%AD%E5%BB%BA/6.png"></p>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】TP5 Linux下Permission denied</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91TP5%20Linux%E4%B8%8BPermission%20denied/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91TP5%20Linux%E4%B8%8BPermission%20denied/</url>
    
    <content type="html"><![CDATA[<p>对于tp框架而言，自动生成的文件或者目录应该是runtime目录，所以在线部署代码的时候，开放此类目录的权限。<br>所以解决mkdir() premission denied 的问题最直接的方式，把runtime权限放开，让所有用户都可以创建它。</p><p><img src="/../../assets/%E3%80%90tp5%E3%80%91TP5_Linux%E4%B8%8BPermission_denied/1.png"></p><p>在runtime同级目录下执行<br><code>chmod -R 777 runtime</code><br>或者宝塔修改权限777<br>即可成功访问！</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】TP5项目部署Nginx发生404</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91TP5%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2Nginx%E5%8F%91%E7%94%9F404/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91TP5%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2Nginx%E5%8F%91%E7%94%9F404/</url>
    
    <content type="html"><![CDATA[<p>tp5项目在Apache中运行一切正常，但部署在nginx环境中，页面打不开提示404报错。</p><p><img src="/../../assets/%E3%80%90tp5%E3%80%91TP5%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2Nginx%E5%8F%91%E7%94%9F404/1.png"></p><p>解决方案：<br>宝塔网站 -&gt; 设置 -&gt; 配置文件</p><p><img src="/../../assets/%E3%80%90tp5%E3%80%91TP5%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2Nginx%E5%8F%91%E7%94%9F404/2.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"># nginx tp项目<span class="hljs-number">404</span><br>location / &#123;<br>  index index.<span class="hljs-property">html</span> index.<span class="hljs-property">htm</span> index.<span class="hljs-property">php</span>;<br>  #autoindex on;<br>  <span class="hljs-keyword">if</span> (!-e $request_filename) &#123;<br>    rewrite ^(.*)$ /index.<span class="hljs-property">php</span>?s=/$1 last;<br>    <span class="hljs-keyword">break</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】微信授权</title>
    <link href="/js/%E3%80%90js%E3%80%91%E5%BE%AE%E4%BF%A1%E6%8E%88%E6%9D%83/"/>
    <url>/js/%E3%80%90js%E3%80%91%E5%BE%AE%E4%BF%A1%E6%8E%88%E6%9D%83/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/*</span><br><span class="hljs-comment">  微信授权</span><br><span class="hljs-comment">*/</span><br>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> rocWxAuth = &#123;<br>    <span class="hljs-attr">openid</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    <span class="hljs-attr">code</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    <span class="hljs-comment">// appid: &quot;wxe1518ed6c0a563a0&quot;,</span><br>    <span class="hljs-attr">appid</span>: <span class="hljs-string">&quot;wxb44d9403cfa1339b&quot;</span>,<br>    <span class="hljs-attr">init</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">wxAuth</span>();<br>    &#125;,<br>    <span class="hljs-comment">// 微信授权</span><br>    <span class="hljs-title function_">wxAuth</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">var</span> that = <span class="hljs-variable language_">this</span>;<br>      that.<span class="hljs-property">openid</span> = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&quot;openid&quot;</span>);<br>      <span class="hljs-keyword">if</span> (that.<span class="hljs-property">openid</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(that.<span class="hljs-property">openid</span>, <span class="hljs-string">&quot;有openid&quot;</span>);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        that.<span class="hljs-title function_">getWxCode</span>();<br>      &#125;<br>    &#125;,<br>    <span class="hljs-comment">// 获取code</span><br>    <span class="hljs-title function_">getWxCode</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">var</span> that = <span class="hljs-variable language_">this</span>;<br>      <span class="hljs-keyword">var</span> local = <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>; <span class="hljs-comment">// 微信授权重定向的 url</span><br>      <span class="hljs-keyword">const</span> appid = that.<span class="hljs-property">appid</span>;<br>      that.<span class="hljs-property">code</span> = that.<span class="hljs-title function_">getUrlCode</span>().<span class="hljs-property">code</span>;<br>      <span class="hljs-comment">// 如果没有code，则去微信服务器请求</span><br>      <span class="hljs-keyword">if</span> (that.<span class="hljs-property">code</span> == <span class="hljs-literal">null</span> || that.<span class="hljs-property">code</span> === <span class="hljs-string">&quot;&quot;</span>) &#123;<br>        <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">`https://open.weixin.qq.com/connect/oauth2/authorize?appid=<span class="hljs-subst">$&#123;appid&#125;</span>&amp;redirect_uri=<span class="hljs-subst">$&#123;<span class="hljs-built_in">encodeURIComponent</span>(</span></span><br><span class="hljs-subst"><span class="hljs-string">          local</span></span><br><span class="hljs-subst"><span class="hljs-string">        )&#125;</span>&amp;response_type=code&amp;scope=snsapi_userinfo&amp;state=STATE#wechat_redirect`</span>;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// 已经拿到code</span><br>        that.<span class="hljs-title function_">getOpenId</span>(that.<span class="hljs-property">code</span>);<br>      &#125;<br>    &#125;,<br>    <span class="hljs-comment">// 请求openid</span><br>    <span class="hljs-title function_">getOpenId</span>(<span class="hljs-params">code</span>) &#123;<br>      <span class="hljs-keyword">var</span> that = <span class="hljs-variable language_">this</span>;<br>      <span class="hljs-title class_">ROAjax</span>.<span class="hljs-title class_">Post</span>(<span class="hljs-string">&quot;/paving/Login/getOpenid&quot;</span>, &#123; <span class="hljs-attr">code</span>: code &#125;, <span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) &#123;<br>        <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> == <span class="hljs-number">1</span>) &#123;<br>          that.<span class="hljs-property">openid</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">openid</span>;<br>          <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&quot;openid&quot;</span>, that.<span class="hljs-property">openid</span>);<br>        &#125;<br>      &#125;);<br>    &#125;,<br>    <span class="hljs-comment">// 截取url中的code方法</span><br>    <span class="hljs-title function_">getUrlCode</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">var</span> url = location.<span class="hljs-property">search</span>;<br>      <span class="hljs-keyword">var</span> theRequest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br>      <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;?&quot;</span>) != -<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">var</span> str = url.<span class="hljs-title function_">substr</span>(<span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">var</span> strs = str.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;&amp;&quot;</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; strs.<span class="hljs-property">length</span>; i++) &#123;<br>          theRequest[strs[i].<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;=&quot;</span>)[<span class="hljs-number">0</span>]] = strs[i].<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;=&quot;</span>)[<span class="hljs-number">1</span>];<br>        &#125;<br>      &#125;<br>      <span class="hljs-keyword">return</span> theRequest;<br>    &#125;,<br>  &#125;;<br>  rocWxAuth.<span class="hljs-title function_">init</span>();<br>&#125;)();<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【css】sass超出省略号</title>
    <link href="/css/%E3%80%90css%E3%80%91sass%E8%B6%85%E5%87%BA%E7%9C%81%E7%95%A5%E5%8F%B7/"/>
    <url>/css/%E3%80%90css%E3%80%91sass%E8%B6%85%E5%87%BA%E7%9C%81%E7%95%A5%E5%8F%B7/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript">@<span class="hljs-keyword">for</span> $i <span class="hljs-keyword">from</span> <span class="hljs-number">1</span> through <span class="hljs-number">5</span> &#123;<br>.<span class="hljs-property">u</span>-line-#&#123;$i&#125; &#123;<br><span class="hljs-comment">/* #ifdef APP-NVUE */</span><br><span class="hljs-comment">// nvue下，可以直接使用lines属性，这是weex特有样式</span><br><span class="hljs-attr">lines</span>: $i;<br>text-<span class="hljs-attr">overflow</span>: ellipsis;<br><span class="hljs-attr">overflow</span>: hidden;<br><span class="hljs-attr">flex</span>: <span class="hljs-number">1</span>;<br><span class="hljs-comment">/* #endif */</span><br><br><span class="hljs-comment">/* #ifndef APP-NVUE */</span><br><span class="hljs-comment">// vue下，单行和多行显示省略号需要单独处理</span><br>@<span class="hljs-keyword">if</span> $i == <span class="hljs-string">&#x27;1&#x27;</span> &#123;<br><span class="hljs-attr">overflow</span>: hidden;<br>white-<span class="hljs-attr">space</span>: nowrap;<br>text-<span class="hljs-attr">overflow</span>: ellipsis;<br>&#125; @<span class="hljs-keyword">else</span> &#123;<br><span class="hljs-attr">display</span>: -webkit-box!important;<br><span class="hljs-attr">overflow</span>: hidden;<br>text-<span class="hljs-attr">overflow</span>: ellipsis;<br>word-<span class="hljs-attr">break</span>: <span class="hljs-keyword">break</span>-all;<br>-webkit-line-<span class="hljs-attr">clamp</span>: $i;<br>-webkit-box-<span class="hljs-attr">orient</span>: vertical!important;<br>&#125;<br><span class="hljs-comment">/* #endif */</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>css</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【linux】命令备忘表</title>
    <link href="/linux/%E3%80%90linux%E3%80%91%E5%91%BD%E4%BB%A4%E5%A4%87%E5%BF%98%E8%A1%A8/"/>
    <url>/linux/%E3%80%90linux%E3%80%91%E5%91%BD%E4%BB%A4%E5%A4%87%E5%BF%98%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="1-系统"><a href="#1-系统" class="headerlink" title="1) 系统"></a>1) 系统</h2><table><thead><tr><th>uname</th><th>显示 Linux 系统信息</th></tr></thead><tbody><tr><td>uname -r</td><td>显示内核版本信息</td></tr><tr><td>uptime</td><td>显示系统运行了多长时间，包括平均负载</td></tr><tr><td>hostname</td><td>显示系统主机名</td></tr><tr><td>hostname -i</td><td>显示系统的 IP 地址</td></tr><tr><td>last reboot</td><td>显示系统重启历史</td></tr><tr><td>date</td><td>显示当前系统日期和时间</td></tr><tr><td>timedatectl</td><td>查询和更改系统时钟</td></tr><tr><td>cal</td><td>显示当前日历月和日</td></tr><tr><td>w</td><td>显示系统中当前登录的用户</td></tr><tr><td>whoami</td><td>显示您的登录身份</td></tr><tr><td>finger username</td><td>显示有关用户的信息</td></tr></tbody></table><h2 id="2-硬件"><a href="#2-硬件" class="headerlink" title="2) 硬件"></a>2) 硬件</h2><table><thead><tr><th>dmesg</th><th>显示启动消息</th></tr></thead><tbody><tr><td>cat &#x2F;proc&#x2F;cpuinfo</td><td>显示有关 CPU 的更多信息，例如型号、型号名称、内核、供应商 ID</td></tr><tr><td>cat &#x2F;proc&#x2F;meminfo</td><td>显示有关硬件内存的更多信息，例如 Total 和 Free memory</td></tr><tr><td>lshw</td><td>显示有关系统硬件配置的信息</td></tr><tr><td>lsblk</td><td>显示块设备相关信息</td></tr><tr><td>free -m</td><td>显示系统中的空闲和已用内存（-m 标志表示内存以 MB 为单位）</td></tr><tr><td>lspci -tv</td><td>以树状图显示 PCI 设备</td></tr><tr><td>lsusb -tv</td><td>以树状图显示 USB 设备</td></tr><tr><td>dmidecode</td><td>显示来自 BIOS 的硬件信息</td></tr><tr><td>hdparm -i &#x2F;dev&#x2F;xda</td><td>显示有关磁盘数据的信息</td></tr><tr><td>hdparm -tT &#x2F;dev&#x2F;xda &lt;:code&gt;</td><td>在设备 xda 上进行读取速度测试</td></tr><tr><td>badblocks -s &#x2F;dev&#x2F;xda</td><td>测试磁盘上不可读的块</td></tr></tbody></table><h2 id="3-用户"><a href="#3-用户" class="headerlink" title="3) 用户"></a>3) 用户</h2><table><thead><tr><th>id</th><th>显示活动用户的详细信息，例如 uid、gid 和组</th></tr></thead><tbody><tr><td>last</td><td>显示系统中的最后一次登录</td></tr><tr><td>who</td><td>显示谁登录到系统</td></tr><tr><td>groupadd “admin”</td><td>添加组“管理员”</td></tr><tr><td>adduser “rocyuan”</td><td>添加用户 rocyuan</td></tr><tr><td>userdel “rocyuan”</td><td>删除用户 rocyuan</td></tr><tr><td>usermod</td><td>用于更改&#x2F;修改用户信息</td></tr></tbody></table><h2 id="4-文件命令"><a href="#4-文件命令" class="headerlink" title="4) 文件命令"></a>4) 文件命令</h2><table><thead><tr><th>ls -al</th><th>列出文件 - 常规和隐藏文件及其权限。</th></tr></thead><tbody><tr><td>pwd</td><td>显示当前目录文件路径</td></tr><tr><td>mkdir ‘directory_name’</td><td>创建一个新目录</td></tr><tr><td>rm file_name</td><td>删除文件</td></tr><tr><td>rm -f filename</td><td>强制删除文件</td></tr><tr><td>rm -r directory_name</td><td>递归删除目录</td></tr><tr><td>rm -rf directory_name</td><td>以递归方式强制删除目录</td></tr><tr><td>cp file1 file2</td><td>将file1的内容复制到file2</td></tr><tr><td>cp -r dir1 dir2</td><td>递归地将 dir1 复制到 dir2。dir2 如果不存在则创建</td></tr><tr><td>mv file1 file2</td><td>将文件1重命名为文件2</td></tr><tr><td>ln -s &#x2F;path&#x2F;to&#x2F;file_name   link_name</td><td>创建指向 file_name 的符号链接</td></tr><tr><td>touch file_name</td><td>创建一个新文件</td></tr><tr><td>cat &gt; file_name</td><td>将标准输入放入文件</td></tr><tr><td>more file_name</td><td>输出文件的内容</td></tr><tr><td>head file_name</td><td>显示文件的前 10 行</td></tr><tr><td>tail file_name</td><td>显示文件的最后 10 行</td></tr><tr><td>gpg -c file_name</td><td>加密文件</td></tr><tr><td>gpg file_name.gpg</td><td>解密文件</td></tr><tr><td>wc</td><td>打印文件中的字节数、字数和行数</td></tr><tr><td>xargs</td><td>从标准输入执行命令</td></tr></tbody></table><h2 id="5-进程相关"><a href="#5-进程相关" class="headerlink" title="5) 进程相关"></a>5) 进程相关</h2><table><thead><tr><th>ps</th><th>显示当前活动的进程</th></tr></thead><tbody><tr><td>ps aux &#124; grep ‘telnet’</td><td>搜索进程 ‘telnet’ 的 id</td></tr><tr><td>pmap</td><td>显示进程的内存映射</td></tr><tr><td>top</td><td>显示所有正在运行的进程</td></tr><tr><td>kill pid</td><td>使用给定的 pid 终止进程</td></tr><tr><td>killall proc</td><td>杀死&#x2F;终止所有名为 proc 的进程</td></tr><tr><td>pkill process-name</td><td>使用名称向进程发送信号</td></tr><tr><td>bg</td><td>在后台恢复暂停的作业</td></tr><tr><td>fg</td><td>将暂停的作业置于前台</td></tr><tr><td>fg n</td><td>工作 n 到前台</td></tr><tr><td>lsof</td><td>列出进程打开的文件</td></tr><tr><td>renice 19 PID</td><td>使进程以非常低的优先级运行</td></tr><tr><td>pgrep firefox</td><td>查找 Firefox 进程 ID</td></tr><tr><td>pstree</td><td>在树模型中可视化流程</td></tr></tbody></table><h2 id="6-文件权限"><a href="#6-文件权限" class="headerlink" title="6) 文件权限"></a>6) 文件权限</h2><table><thead><tr><th>chmod octal filename</th><th>将文件的文件权限更改为八进制</th></tr></thead><tbody><tr><td>chmod 777 &#x2F;data&#x2F;test.c</td><td>将 rwx 权限设置为所有者、组和所有人（有权访问服务器的其他所有人）</td></tr><tr><td>chmod 755 &#x2F;data&#x2F;test.c</td><td>将 rwx 设置为所有者，将 r_x 设置为组和所有人</td></tr><tr><td>chmod 766 &#x2F;data&#x2F;test.c</td><td>为所有者设置 rwx，为组和每个人设置 rw</td></tr><tr><td>chown owner user-file</td><td>更改文件的所有权</td></tr><tr><td>chown owner-user:owner-group file_name</td><td>更改文件的所有者和组所有者</td></tr><tr><td>chown owner-user:owner-group directory</td><td>更改目录的所有者和组所有者</td></tr></tbody></table><h2 id="7-网络"><a href="#7-网络" class="headerlink" title="7) 网络"></a>7) 网络</h2><table><thead><tr><th>ip addr show</th><th>显示 IP 地址和所有网络接口</th></tr></thead><tbody><tr><td>ip address add 192.168.0.1&#x2F;24 dev eth0</td><td>将 IP 地址 192.168.0.1 分配给接口 eth0</td></tr><tr><td>ifconfig</td><td>显示所有网络接口的 IP 地址</td></tr><tr><td>ping host</td><td>ping 命令发送 ICMP 回显请求以建立与服务器&#x2F;PC 的连接</td></tr><tr><td>whois domain</td><td>检索有关域名的更多信息</td></tr><tr><td>dig domain</td><td>检索有关域的 DNS 信息</td></tr><tr><td>dig -x host</td><td>对域执行反向查找</td></tr><tr><td>host google.com</td><td>对域名执行 IP 查找</td></tr><tr><td>hostname -i</td><td>显示本地 IP 地址</td></tr><tr><td>wget file_name</td><td>从在线资源下载文件</td></tr><tr><td>netstat -pnltu</td><td>显示所有活动的监听端口</td></tr></tbody></table><h2 id="8-压缩-存档"><a href="#8-压缩-存档" class="headerlink" title="8) 压缩&#x2F;存档"></a>8) 压缩&#x2F;存档</h2><table><thead><tr><th>tar -cf home.tar home&lt;:code&gt;</th><th>从文件 ‘home’ 创建名为 ‘home.tar’ 的存档文件</th></tr></thead><tbody><tr><td>tar -xf files.tar</td><td>提取存档文件“files.tar”</td></tr><tr><td>tar -zcvf home.tar.gz source-folder</td><td>从源文件夹创建 gzipped tar 归档文件</td></tr><tr><td>gzip file</td><td>压缩扩展名为 .gz 的文件</td></tr></tbody></table><h2 id="9-安装软件包"><a href="#9-安装软件包" class="headerlink" title="9) 安装软件包"></a>9) 安装软件包</h2><table><thead><tr><th>rpm -i pkg_name.rpm</th><th>安装一个 rpm 包</th></tr></thead><tbody><tr><td>rpm -e pkg_name</td><td>删除一个 rpm 包</td></tr><tr><td>dnf install pkg_name</td><td>使用 dnf 实用程序安装软件包</td></tr></tbody></table><h2 id="10-安装源（编译）"><a href="#10-安装源（编译）" class="headerlink" title="10) 安装源（编译）"></a>10) 安装源（编译）</h2><table><thead><tr><th>.&#x2F;configure</th><th>检查您的系统是否有构建程序所需的软件。它将构建包含有效构建项目所需的说明的 Makefile</th></tr></thead><tbody><tr><td>make</td><td>它读取 Makefile 以编译具有所需操作的程序。该过程可能需要一些时间，具体取决于您的系统和程序的大小</td></tr><tr><td>make install</td><td>该命令在编译后将二进制文件安装在默认&#x2F;修改路径中</td></tr></tbody></table><h2 id="11-搜索"><a href="#11-搜索" class="headerlink" title="11) 搜索"></a>11) 搜索</h2><table><thead><tr><th>grep ‘pattern’ files</th><th>在文件中搜索给定的模式</th></tr></thead><tbody><tr><td>grep -r pattern dir</td><td>递归搜索给定目录中的模式</td></tr><tr><td>locate file</td><td>查找文件的所有实例</td></tr><tr><td>find &#x2F;home -name “index”</td><td>在 &#x2F;home 文件夹中查找以 ‘index’ 开头的文件名</td></tr><tr><td>find &#x2F;home -size +10000k</td><td>在主文件夹中查找大于 10000k 的文件</td></tr></tbody></table><h2 id="12-登录"><a href="#12-登录" class="headerlink" title="12) 登录"></a>12) 登录</h2><table><thead><tr><th>ssh user@host</th><th>以用户身份安全连接到主机</th></tr></thead><tbody><tr><td>ssh -p port_number user@host</td><td>使用指定端口安全连接到主机</td></tr><tr><td>ssh host</td><td>通过 SSH 默认端口 22 安全连接到系统</td></tr><tr><td>telnet host</td><td>通过 telnet 默认端口 23 连接到主机</td></tr></tbody></table><h2 id="13-文件传输"><a href="#13-文件传输" class="headerlink" title="13) 文件传输"></a>13) 文件传输</h2><table><thead><tr><th>scp file1.txt server2&#x2F;tmp</th><th>安全地将 file1.txt 复制到 &#x2F;tmp 目录中的 server2</th></tr></thead><tbody><tr><td>rsync -a &#x2F;home&#x2F;apps  &#x2F;backup&#x2F;</td><td>将 &#x2F;home&#x2F;apps 目录中的内容与 &#x2F;backup 目录同步</td></tr></tbody></table><h2 id="14-磁盘使用情况"><a href="#14-磁盘使用情况" class="headerlink" title="14) 磁盘使用情况"></a>14) 磁盘使用情况</h2><table><thead><tr><th>df -h</th><th>显示已安装系统上的可用空间</th></tr></thead><tbody><tr><td>df -i</td><td>显示文件系统上的空闲 inode</td></tr><tr><td>fdisk -l</td><td>显示磁盘分区、大小和类型</td></tr><tr><td>du -sh</td><td>以人类可读的格式显示当前目录中的磁盘使用情况</td></tr><tr><td>findmnt</td><td>显示所有文件系统的目标挂载点</td></tr><tr><td>mount device-path mount-point</td><td>挂载设备</td></tr></tbody></table><h2 id="15-目录遍历"><a href="#15-目录遍历" class="headerlink" title="15)目录遍历"></a>15)目录遍历</h2><table><thead><tr><th>cd ..</th><th>在目录树结构中上移一级</th></tr></thead><tbody><tr><td>cd</td><td>将目录更改为 $HOME 目录</td></tr><tr><td>cd &#x2F;test</td><td>将目录更改为 &#x2F;test 目录</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【linux】centos7部署gitea-1.21.7</title>
    <link href="/linux/%E3%80%90linux%E3%80%91centos7%E9%83%A8%E7%BD%B2gitea-1.21.7/"/>
    <url>/linux/%E3%80%90linux%E3%80%91centos7%E9%83%A8%E7%BD%B2gitea-1.21.7/</url>
    
    <content type="html"><![CDATA[<h1 id="简介："><a href="#简介：" class="headerlink" title="简介："></a>简介：</h1><p>Gitea 的首要目标是创建一个极易安装，运行非常快速，安装和使用体验良好的自建 Git 服务。</p><h1 id="前提："><a href="#前提：" class="headerlink" title="前提："></a>前提：</h1><p>安装 <code>git &gt;= 2.0</code> 与 <code>mysql &gt;= 5.7</code></p><p>Gitea 支持 PostgreSQL（&gt;&#x3D;10）、MySQL（&gt;&#x3D;5.7）、SQLite 和 MSSQL（&gt;&#x3D;2008R2 SP3）这几种数据库。我这里选择 MySQL</p><h1 id="下载-gitea"><a href="#下载-gitea" class="headerlink" title="下载 gitea:"></a>下载 gitea:</h1><p>官方下载地址：<a href="https://dl.gitea.com/gitea">https://dl.gitea.com/gitea</a></p><p>这里使用二进制文件安装，版本为：<code>gitea-1.21.7</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">wget -O gitea https://dl.gitea.com/gitea/<span class="hljs-number">1.21</span>.<span class="hljs-number">7</span>/gitea-<span class="hljs-number">1.21</span>.<span class="hljs-number">7</span>-linux-amd64<br>chmod +x gitea<br></code></pre></td></tr></table></figure><h1 id="服务器配置"><a href="#服务器配置" class="headerlink" title="服务器配置"></a>服务器配置</h1><h2 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h2><p>Gitea 需要一个用户运行，不能使用 root 用户，推荐使用名称 git</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">groupadd --system git<br>adduser \<br>   --system \<br>   --shell /bin/bash \<br>   --comment <span class="hljs-string">&#x27;Git Version Control&#x27;</span> \<br>   --gid git \<br>   --home-dir /home/git \<br>   --create-home \<br>   git<br></code></pre></td></tr></table></figure><h2 id="创建工作路径"><a href="#创建工作路径" class="headerlink" title="创建工作路径"></a>创建工作路径</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Gitea 工作目录</span><br><span class="hljs-built_in">mkdir</span> -p /var/lib/gitea/&#123;custom,data,<span class="hljs-built_in">log</span>&#125;<br><span class="hljs-built_in">chown</span> -R git:git /var/lib/gitea/<br><span class="hljs-built_in">chmod</span> -R 750 /var/lib/gitea/<br><br><span class="hljs-comment"># Gitea 配置目录</span><br><span class="hljs-built_in">mkdir</span> /etc/gitea<br><span class="hljs-built_in">chown</span> git:git /etc/gitea<br><span class="hljs-built_in">chmod</span> 770 /etc/gitea<br></code></pre></td></tr></table></figure><h2 id="将二进制文件放到全局位置"><a href="#将二进制文件放到全局位置" class="headerlink" title="将二进制文件放到全局位置"></a>将二进制文件放到全局位置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mv</span> gitea /usr/local/bin/gitea<br></code></pre></td></tr></table></figure><h1 id="systemd-服务管理"><a href="#systemd-服务管理" class="headerlink" title="systemd 服务管理"></a>systemd 服务管理</h1><h2 id="添加服务文件"><a href="#添加服务文件" class="headerlink" title="添加服务文件"></a>添加服务文件</h2><p>官方提供的 gitea.service 文件：<br><a href="https://github.com/go-gitea/gitea/blob/v1.21.7/contrib/systemd/gitea.service">https://github.com/go-gitea/gitea/blob/v1.21.7/contrib/systemd/gitea.service</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /lib/systemd/system/gitea.service<br></code></pre></td></tr></table></figure><p>将以下内容粘贴到 gitea.service 文件中</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Unit]</span><br><span class="hljs-attr">Description</span>=Gitea (Git with a cup of tea)<br><span class="hljs-attr">After</span>=syslog.target<br><span class="hljs-attr">After</span>=network.target<br><span class="hljs-comment">###</span><br><span class="hljs-comment"># Don&#x27;t forget to add the database service dependencies</span><br><span class="hljs-comment">###</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#Wants=mysql.service</span><br><span class="hljs-comment">#After=mysql.service</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#Wants=mariadb.service</span><br><span class="hljs-comment">#After=mariadb.service</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#Wants=postgresql.service</span><br><span class="hljs-comment">#After=postgresql.service</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#Wants=memcached.service</span><br><span class="hljs-comment">#After=memcached.service</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#Wants=redis.service</span><br><span class="hljs-comment">#After=redis.service</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">###</span><br><span class="hljs-comment"># If using socket activation for main http/s</span><br><span class="hljs-comment">###</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#After=gitea.main.socket</span><br><span class="hljs-comment">#Requires=gitea.main.socket</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">###</span><br><span class="hljs-comment"># (You can also provide gitea an http fallback and/or ssh socket too)</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># An example of /etc/systemd/system/gitea.main.socket</span><br><span class="hljs-comment">###</span><br><span class="hljs-comment">##</span><br><span class="hljs-comment">## [Unit]</span><br><span class="hljs-comment">## Description=Gitea Web Socket</span><br><span class="hljs-comment">## PartOf=gitea.service</span><br><span class="hljs-comment">##</span><br><span class="hljs-comment">## [Socket]</span><br><span class="hljs-comment">## Service=gitea.service</span><br><span class="hljs-comment">## ListenStream=&lt;some_port&gt;</span><br><span class="hljs-comment">## NoDelay=true</span><br><span class="hljs-comment">##</span><br><span class="hljs-comment">## [Install]</span><br><span class="hljs-comment">## WantedBy=sockets.target</span><br><span class="hljs-comment">##</span><br><span class="hljs-comment">###</span><br><br><span class="hljs-section">[Service]</span><br><span class="hljs-comment"># Uncomment the next line if you have repos with lots of files and get a HTTP 500 error because of that</span><br><span class="hljs-comment"># LimitNOFILE=524288:524288</span><br><span class="hljs-attr">RestartSec</span>=<span class="hljs-number">2</span>s<br><span class="hljs-attr">Type</span>=simple<br><span class="hljs-attr">User</span>=git<br><span class="hljs-attr">Group</span>=git<br><span class="hljs-attr">WorkingDirectory</span>=/var/lib/gitea/<br><span class="hljs-comment"># If using Unix socket: tells systemd to create the /run/gitea folder, which will contain the gitea.sock file</span><br><span class="hljs-comment"># (manually creating /run/gitea doesn&#x27;t work, because it would not persist across reboots)</span><br><span class="hljs-comment">#RuntimeDirectory=gitea</span><br><span class="hljs-attr">ExecStart</span>=/usr/local/bin/gitea web --config /etc/gitea/app.ini<br><span class="hljs-attr">Restart</span>=always<br><span class="hljs-attr">Environment</span>=USER=git HOME=/home/git GITEA_WORK_DIR=/var/lib/gitea<br><span class="hljs-comment"># If you install Git to directory prefix other than default PATH (which happens</span><br><span class="hljs-comment"># for example if you install other versions of Git side-to-side with</span><br><span class="hljs-comment"># distribution version), uncomment below line and add that prefix to PATH</span><br><span class="hljs-comment"># Don&#x27;t forget to place git-lfs binary on the PATH below if you want to enable</span><br><span class="hljs-comment"># Git LFS support</span><br><span class="hljs-comment">#Environment=PATH=/path/to/git/bin:/bin:/sbin:/usr/bin:/usr/sbin</span><br><span class="hljs-comment"># If you want to bind Gitea to a port below 1024, uncomment</span><br><span class="hljs-comment"># the two values below, or use socket activation to pass Gitea its ports as above</span><br><span class="hljs-comment">###</span><br><span class="hljs-comment">#CapabilityBoundingSet=CAP_NET_BIND_SERVICE</span><br><span class="hljs-comment">#AmbientCapabilities=CAP_NET_BIND_SERVICE</span><br><span class="hljs-comment">###</span><br><span class="hljs-comment"># In some cases, when using CapabilityBoundingSet and AmbientCapabilities option, you may want to</span><br><span class="hljs-comment"># set the following value to false to allow capabilities to be applied on gitea process. The following</span><br><span class="hljs-comment"># value if set to true sandboxes gitea service and prevent any processes from running with privileges</span><br><span class="hljs-comment"># in the host user namespace.</span><br><span class="hljs-comment">###</span><br><span class="hljs-comment">#PrivateUsers=false</span><br><span class="hljs-comment">###</span><br><br><span class="hljs-section">[Install]</span><br><span class="hljs-attr">WantedBy</span>=multi-user.target<br></code></pre></td></tr></table></figure><p>添加完后重新加载 systemd 服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl daemon-reload<br></code></pre></td></tr></table></figure><h2 id="systemd-命令"><a href="#systemd-命令" class="headerlink" title="systemd 命令"></a>systemd 命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 启动</span><br>systemctl start gitea<br><span class="hljs-comment"># 停止</span><br>systemctl stop gitea<br><span class="hljs-comment"># 重启</span><br>systemctl restart gitea<br><span class="hljs-comment"># 开启开机自启</span><br>systemctl <span class="hljs-built_in">enable</span> gitea<br><span class="hljs-comment"># 关闭开机自启</span><br>systemctl <span class="hljs-built_in">disable</span> gitea<br></code></pre></td></tr></table></figure><h1 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h1><p>按照以上命令启动服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl start gitea<br></code></pre></td></tr></table></figure><p>访问 <a href="http://localhost:3000/">http://localhost:3000</a> 即可进入安装界面，安装完成后即可。</p><h1 id="配置域名"><a href="#配置域名" class="headerlink" title="配置域名"></a>配置域名</h1><p>在 nginx 中设置反向代理：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css">server<br>  &#123;<br>      listen <span class="hljs-number">80</span>;<br>      server_name git<span class="hljs-selector-class">.rocyuan</span><span class="hljs-selector-class">.top</span>;<br>      location / &#123;<br>        proxy_pass http://localhost:<span class="hljs-number">3000</span>;<br>      &#125;<br>  &#125;<br></code></pre></td></tr></table></figure><h1 id="文档参考"><a href="#文档参考" class="headerlink" title="文档参考"></a>文档参考</h1><p><a href="https://github.com/go-gitea/gitea/tree/v1.21.7">https://github.com/go-gitea/gitea/tree/v1.21.7</a></p><p><a href="https://docs.gitea.com/zh-cn/">https://docs.gitea.com/zh-cn/</a></p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【linux】centos7部署gitea-1.6.0(已弃用)</title>
    <link href="/linux/%E3%80%90linux%E3%80%91centos7%E9%83%A8%E7%BD%B2gitea-1.6.0(%E5%B7%B2%E5%BC%83%E7%94%A8)/"/>
    <url>/linux/%E3%80%90linux%E3%80%91centos7%E9%83%A8%E7%BD%B2gitea-1.6.0(%E5%B7%B2%E5%BC%83%E7%94%A8)/</url>
    
    <content type="html"><![CDATA[<h1 id="简介："><a href="#简介：" class="headerlink" title="简介："></a>简介：</h1><p>Gitea 的首要目标是创建一个极易安装，运行非常快速，安装和使用体验良好的自建 Git 服务。</p><h1 id="前提："><a href="#前提：" class="headerlink" title="前提："></a>前提：</h1><p>安装git与mysql</p><h1 id="安装gitea"><a href="#安装gitea" class="headerlink" title="安装gitea:"></a>安装gitea:</h1><p>官方下载地址：<a href="https://dl.gitea.io/gitea">https://dl.gitea.io/gitea</a></p><p>这里使用二进制文件安装，版本为：<code>gitea-1.6.0</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">wget -O gitea https://dl.gitea.io/gitea/<span class="hljs-number">1.6</span>.<span class="hljs-number">0</span>/gitea-<span class="hljs-number">1.6</span>.<span class="hljs-number">0</span>-linux-amd64<br>chmod +x gitea<br>nohup ./gitea web &amp;<br></code></pre></td></tr></table></figure><h1 id="配置域名"><a href="#配置域名" class="headerlink" title="配置域名"></a>配置域名</h1><p>在nginx中设置反向代理：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css">server<br>  &#123;<br>      listen <span class="hljs-number">80</span>;<br>      server_name git<span class="hljs-selector-class">.rocyuan</span><span class="hljs-selector-class">.top</span>;<br>      location / &#123;<br>        proxy_pass http://localhost:<span class="hljs-number">3000</span>/;<br>      &#125;<br>  &#125;<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90linux%E3%80%91centos7%E9%83%A8%E7%BD%B2%E7%A7%81%E6%9C%89git%E5%B9%B6%E7%94%A8%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE/1.png"></p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】nvm下载慢解决方案</title>
    <link href="/node/%E3%80%90node%E3%80%91nvm%E4%B8%8B%E8%BD%BD%E6%85%A2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <url>/node/%E3%80%90node%E3%80%91nvm%E4%B8%8B%E8%BD%BD%E6%85%A2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    
    <content type="html"><![CDATA[<p>nvm 默认从官方源下载，非常慢，设置淘宝源</p><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><p>添加环境变量设置</p><p>运行以下命令，只会将环境变量，暂时写入内存中，要想永久生效，需要写入到 &#x2F;etc&#x2F;profile 文件中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> NVM_NODEJS_ORG_MIRROR=https://npmmirror.com/mirrors/node/<br></code></pre></td></tr></table></figure><h1 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h1><p>执行命令设置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">nvm node_mirror https://npmmirror.com/mirrors/node/<br>nvm npm_mirror https://npmmirror.com/mirrors/npm/<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】支付宝App支付流程</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%94%AF%E4%BB%98%E5%AE%9DApp%E6%94%AF%E4%BB%98%E6%B5%81%E7%A8%8B/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%94%AF%E4%BB%98%E5%AE%9DApp%E6%94%AF%E4%BB%98%E6%B5%81%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p><img src="http://mdn.alipayobjects.com/afts/img/A*douiQrzajBAAAAAAAAAAAAAAAa8wAA/original?bz=openpt_doc&t=KjWkff1yaFn8DA2_6o8D9AAAAABkMK8AAAAA#height=464&id=yRSuU&originHeight=464&originWidth=653&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=&width=653" alt="image.png"></p><p>参考：<a href="https://opendocs.alipay.com/open/204/105297">https://opendocs.alipay.com/open/204/105297</a></p><p>前端点击提交订单发起请求，请求订单信息（后端生成订单信息）；</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%94%AF%E4%BB%98%E5%AE%9DApp%E6%94%AF%E4%BB%98%E6%B5%81%E7%A8%8B/2.png"></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// 创建的订单信息返回参考（示例）</span><br><span class="hljs-comment">// 为了安全，一般转跳支付页面会使用订单id查询订单数据（客户端不缓存订单数据）</span><br><span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;msg&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;订单添加成功&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1616053430&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2211</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;goods&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;order_sn&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;202103435113298140569200&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;user_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5692</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;activity_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;goods_amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;765.00&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;dispatch_amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.00&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;17736524151&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;consignee&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;haha&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;province_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;北京市&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;city_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;北京市&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;area_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;东城区&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1002&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;province_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110000</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;city_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110100</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;area_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110101</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;memo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;remark&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;total_amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;765.00&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;score_amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;total_fee&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;765.00&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;discount_fee&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.00&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;coupon_fee&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.00&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;pay_fee&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.00&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;score_fee&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;goods_original_amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;566.00&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;coupons_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;transaction_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;payment_json&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;pay_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;paytime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;ext&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&#123;\&quot;buy_type\&quot;:\&quot;alone\&quot;,\&quot;groupon_id\&quot;:0,\&quot;expired_time\&quot;:1616054331&#125;&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;platform&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;H5&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;createtime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1616053431</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;status_code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;nopay&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;status_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;待付款&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;status_desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;等待买家付款&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;btns&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;cancel&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;pay&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;ext_arr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;buy_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;alone&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;groupon_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;expired_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1616054331</span><br><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>跳转支付方式页面，使用订单的order_sn和支付类型（比如支付宝），请求 支付宝订单数据（后端生成支付宝订单数据），然后前端拿支付宝订单数据使用uniapp提供的api（uni.requestPayment）调用支付宝支付；支付完成后返回结果（支付成功与失败）；</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%94%AF%E4%BB%98%E5%AE%9DApp%E6%94%AF%E4%BB%98%E6%B5%81%E7%A8%8B/3.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br>uni.<span class="hljs-title function_">requestPayment</span>(&#123;<br>  <span class="hljs-attr">provider</span>: <span class="hljs-string">&#x27;alipay&#x27;</span>, <span class="hljs-comment">// 支付宝支付</span><br>  <span class="hljs-attr">orderInfo</span>: result.<span class="hljs-property">data</span>.<span class="hljs-property">pay_data</span>, <span class="hljs-comment">//支付宝订单数据</span><br>  <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) &#123;<br>    <span class="hljs-comment">// 跳转结果页面</span><br>    <span class="hljs-title class_">Router</span>.<span class="hljs-title function_">replace</span>(&#123;<br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/pages/order/payment/result&#x27;</span>,<br>      <span class="hljs-attr">query</span>: &#123;<br>        <span class="hljs-attr">orderSn</span>: that.<span class="hljs-property">order</span>.<span class="hljs-property">order_sn</span>,<br>        <span class="hljs-attr">type</span>: that.<span class="hljs-property">payment</span>,<br>        <span class="hljs-attr">pay</span>: <span class="hljs-number">1</span><br>      &#125;<br>    &#125;);<br>  &#125;,<br>  <span class="hljs-attr">fail</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) &#123;<br>    <span class="hljs-comment">// 跳转结果页面（失败时可以重新支付的业务）</span><br>    <span class="hljs-comment">// orderSn: that.order.order_sn,</span><br>    <span class="hljs-comment">// type: that.payment,</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;支付取消或者失败:&#x27;</span>, err);<br>    <span class="hljs-keyword">if</span> (err.<span class="hljs-property">errMsg</span> !== <span class="hljs-string">&quot;requestPayment:fail cancel&quot;</span>) &#123;<br>      <span class="hljs-title class_">Router</span>.<span class="hljs-title function_">replace</span>(&#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/pages/order/payment/result&#x27;</span>,<br>        <span class="hljs-attr">query</span>: &#123;<br>          <span class="hljs-attr">orderSn</span>: that.<span class="hljs-property">order</span>.<span class="hljs-property">order_sn</span>,<br>          <span class="hljs-attr">type</span>: that.<span class="hljs-property">payment</span>,<br>          <span class="hljs-attr">pay</span>: <span class="hljs-number">0</span><br>        &#125;<br>      &#125;);<br>    &#125;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】微信支付-注册流程-所需资料</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98-%E6%B3%A8%E5%86%8C%E6%B5%81%E7%A8%8B-%E6%89%80%E9%9C%80%E8%B5%84%E6%96%99/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98-%E6%B3%A8%E5%86%8C%E6%B5%81%E7%A8%8B-%E6%89%80%E9%9C%80%E8%B5%84%E6%96%99/</url>
    
    <content type="html"><![CDATA[<h2 id="注册微信开放平台账号"><a href="#注册微信开放平台账号" class="headerlink" title="注册微信开放平台账号"></a>注册微信开放平台账号</h2><p><a href="https://open.weixin.qq.com/">https://open.weixin.qq.com/</a></p><h2 id="创建移动应用"><a href="#创建移动应用" class="headerlink" title="创建移动应用"></a>创建移动应用</h2><h3 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h3><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98-%E6%B3%A8%E5%86%8C%E6%B5%81%E7%A8%8B-%E6%89%80%E9%9C%80%E8%B5%84%E6%96%99/1.png"></p><h3 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h3><h4 id="安卓"><a href="#安卓" class="headerlink" title="安卓"></a>安卓</h4><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98-%E6%B3%A8%E5%86%8C%E6%B5%81%E7%A8%8B-%E6%89%80%E9%9C%80%E8%B5%84%E6%96%99/2.png"></p><h4 id="ios"><a href="#ios" class="headerlink" title="ios"></a>ios</h4><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98-%E6%B3%A8%E5%86%8C%E6%B5%81%E7%A8%8B-%E6%89%80%E9%9C%80%E8%B5%84%E6%96%99/3.png"></p><h2 id="审核通过后"><a href="#审核通过后" class="headerlink" title="审核通过后"></a>审核通过后</h2><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98-%E6%B3%A8%E5%86%8C%E6%B5%81%E7%A8%8B-%E6%89%80%E9%9C%80%E8%B5%84%E6%96%99/4.png"></p><h2 id="申请微信支付接口"><a href="#申请微信支付接口" class="headerlink" title="申请微信支付接口"></a>申请微信支付接口</h2><p>需要认证开发者</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98-%E6%B3%A8%E5%86%8C%E6%B5%81%E7%A8%8B-%E6%89%80%E9%9C%80%E8%B5%84%E6%96%99/5.png"></p><h2 id="认证开发者"><a href="#认证开发者" class="headerlink" title="认证开发者"></a>认证开发者</h2><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98-%E6%B3%A8%E5%86%8C%E6%B5%81%E7%A8%8B-%E6%89%80%E9%9C%80%E8%B5%84%E6%96%99/6.png"></p><h3 id="需要材料"><a href="#需要材料" class="headerlink" title="需要材料"></a>需要材料</h3><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98-%E6%B3%A8%E5%86%8C%E6%B5%81%E7%A8%8B-%E6%89%80%E9%9C%80%E8%B5%84%E6%96%99/7.png"></p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】HarmonyOS-js开发应用体验</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/</url>
    
    <content type="html"><![CDATA[<p>2020年9 月 10 日，华为开发者大会上，华为消费者业务 CEO 余承东正式发布了鸿蒙 OS 2.0 版本，并且宣布： 华为鸿蒙OS还将在 2020 年 12 月面向应用开发者发布手机版本；并且已经在gitee开源。<br>开源地址： <a href="https://openharmony.gitee.com/">https://openharmony.gitee.com</a></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/1.png"></p><p>目前模拟器只有 TV 与 Wearable 两种；管他三七二十八先来体验下。。。</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/2.png"></p><h2 id="下载-DevEco-Studio"><a href="#下载-DevEco-Studio" class="headerlink" title="下载 DevEco Studio"></a>下载 DevEco Studio</h2><p>DevEco Studio是面向华为终端全场景多设备的一站式分布式应用开发平台，支持分布式多端开发、分布式多端调测、多端模拟仿真。<br>下载地址：<br><a href="https://developer.harmonyos.com/cn/develop/deveco-studio#download">https://developer.harmonyos.com/cn/develop/deveco-studio#download</a><br>安装就不演示了有手应该都会 ~ .~</p><h2 id="新建js项目"><a href="#新建js项目" class="headerlink" title="新建js项目"></a>新建js项目</h2><p>安装好之后 新建项目 ；新建一个TV应用的js空项目，Next</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/3.png"></p><p>填写项目信息 完成</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/4.png"></p><h2 id="项目结构目录"><a href="#项目结构目录" class="headerlink" title="项目结构目录"></a>项目结构目录</h2><p>很明显能看到，就是常规的前端MVVM框架<br>在工程目录中：common文件夹主要存放公共资源，如图片、视频等；i18n下存放多语言的json文件；pages文件夹下存放多个页面，每个页面由hml、css和js文件组成（前端三板斧）。 hml组件较少，后期也期待有大佬开发出ui组件库。文章末尾有官方开发文档传送门。</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/5.png"></p><h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><p>美好的开端，Hello World，咱们更换下（Hello HarmonyOS App）。</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/6.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/7.png"></p><h2 id="运行应用"><a href="#运行应用" class="headerlink" title="运行应用"></a>运行应用</h2><p>要运行应用我们需要安装模拟器</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/8.png"></p><p>这时它会弹出网页让你登录华为开发者账号（没有的小伙伴自行申请认证），登录之后它会让你进行账号访问授权，允许后会登录DevEco Studio客户端；然后会下载模拟器（ TV 与 Wearable ）</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/9.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/10.png"></p><p>看到这个界面说明下载成功，启动一个创建项目时所选择的设备（我选择TV）</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/11.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/12.png"></p><p>然后点击运行，选择启动的模拟器</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/13.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/14.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/15.png"></p><p>即可看到运行结果</p><p>下面是 Wearable 演示</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/16.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91HarmonyOS-js%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E4%BD%93%E9%AA%8C/17.png"></p><p>官方js开发文档</p><p><a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ui-js-overview-0000000000500376">https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ui-js-overview-0000000000500376</a></p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】视频全屏样式乱BUG</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91%E8%A7%86%E9%A2%91%E5%85%A8%E5%B1%8F%E6%A0%B7%E5%BC%8F%E4%B9%B1BUG/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91%E8%A7%86%E9%A2%91%E5%85%A8%E5%B1%8F%E6%A0%B7%E5%BC%8F%E4%B9%B1BUG/</url>
    
    <content type="html"><![CDATA[<h2 id="场景："><a href="#场景：" class="headerlink" title="场景："></a>场景：</h2><p>本人是在做安卓app需求时遇到的，当时uniapp官网也有几个贴子提到了BUG，官方出面了只是说单位问题，但也没有解决。</p><p>a页面：列表页<br>b页面：列表详情页（有视频）<br>c页面：代表所有页面<br>a进入b，b中将视频全屏播放（横屏），返回a，a进入b或c，样式放大错乱</p><h2 id="分析问题："><a href="#分析问题：" class="headerlink" title="分析问题："></a>分析问题：</h2><p>最终分析的结果是假设屏幕是 750*1334（假设app是全占屏幕），写应用时候用的单位是动态单位rpx，动态单位原理就是按照屏幕宽度进行计算的，进入b页面时视频不横屏的情况下问题是不会出现的，动态单位是按照750进行计算的是正常的；视频全屏（横屏）导致设配强行横屏，动态单位又以1334进行计算了，当我们在b页面返回后在进入任何一个页面问题就会浮现：页面整体放大（偶尔会正常也就是偶尔会正确计算）。</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>a转跳b，b返回后（页面会卸载）onUnload时转跳到一个空页面（空白的不存在放大），在空白页面onShow时返回（navigateBack）就会回到a页面（因为b页面返回时已经销毁，空页面返回时，页面栈里已经没有b页面了，空页面返回也会销毁）</p><p>在电脑上h5体验是感觉不到有空页面进行中转，但是在安卓app中是可以看出来空页面的中转的，这个暂时无法解决，但是可以使用“障眼法”，在空页面用px单位写上“加载中…”等提示（用px写不存在动态计算单位问题），让用户以为是在加载数据。这样比空白页体验能稍好一些。</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E8%A7%86%E9%A2%91%E5%85%A8%E5%B1%8F%E6%A0%B7%E5%BC%8F%E4%B9%B1BUG/1.png"></p><p>视频页</p><p><img src="/../../assets/%E3%80%90uniapp%E3%80%91%E8%A7%86%E9%A2%91%E5%85%A8%E5%B1%8F%E6%A0%B7%E5%BC%8F%E4%B9%B1BUG/2.png"></p><p>空页面</p><p>仅分享思路，当时的需求还有，切换，传参等一系列状态，可用公共数据（globalData）记录getApp()更改完成的。</p>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】element-ui按钮点击后获焦颜色问题</title>
    <link href="/vue/%E3%80%90vue%E3%80%91element-ui%E6%8C%89%E9%92%AE%E7%82%B9%E5%87%BB%E5%90%8E%E8%8E%B7%E7%84%A6%E9%A2%9C%E8%89%B2%E9%97%AE%E9%A2%98/"/>
    <url>/vue/%E3%80%90vue%E3%80%91element-ui%E6%8C%89%E9%92%AE%E7%82%B9%E5%87%BB%E5%90%8E%E8%8E%B7%E7%84%A6%E9%A2%9C%E8%89%B2%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>采用自定义指令解决，监听获焦事件后让它失焦<code>v-autoBlur</code></p><h2 id="定义指令"><a href="#定义指令" class="headerlink" title="定义指令"></a>定义指令</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// autoBlur.js</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el</span>) &#123;<br>    el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;focus&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>      el.<span class="hljs-title function_">blur</span>()<br>    &#125;)<br>  &#125;,<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> autoBlur <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/directive/autoBlur.js&#x27;</span><br><br>app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">&#x27;autoBlur&#x27;</span>, autoBlur)<br></code></pre></td></tr></table></figure><h2 id="使用指令"><a href="#使用指令" class="headerlink" title="使用指令"></a>使用指令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;el-button type=&quot;primary&quot; plain icon=&quot;Plus&quot; @click=&quot;handleAdd&quot; v-autoBlur&gt;新增&lt;/el-button&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】vue-cli生产环境去掉console</title>
    <link href="/vue/%E3%80%90vue%E3%80%91vue-cli%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E5%8E%BB%E6%8E%89console/"/>
    <url>/vue/%E3%80%90vue%E3%80%91vue-cli%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E5%8E%BB%E6%8E%89console/</url>
    
    <content type="html"><![CDATA[<p>去掉console有两种配法，一种是webpack、一种是chainWebpack</p><h1 id="webpack配置"><a href="#webpack配置" class="headerlink" title="webpack配置"></a>webpack配置</h1><h2 id="optimization选项文档"><a href="#optimization选项文档" class="headerlink" title="optimization选项文档"></a>optimization选项文档</h2><p><a href="https://webpack.docschina.org/configuration/optimization/#optimizationminimizer">https://webpack.docschina.org/configuration/optimization/#optimizationminimizer</a></p><p>webpack内置了 <code>terser-webpack-plugin</code> 插件，可在 <code>optimization(优化)</code> 配置项中配置 <code>terser-webpack-plugin</code> 的配置项。</p><h2 id="terser-webpack-plugin-插件文档"><a href="#terser-webpack-plugin-插件文档" class="headerlink" title="terser-webpack-plugin 插件文档"></a>terser-webpack-plugin 插件文档</h2><h3 id="terserOptions配置项文档"><a href="#terserOptions配置项文档" class="headerlink" title="terserOptions配置项文档"></a>terserOptions配置项文档</h3><p><a href="https://github.com/webpack-contrib/terser-webpack-plugin#terseroptions">https://github.com/webpack-contrib/terser-webpack-plugin#terseroptions</a></p><h3 id="compress配置项文档"><a href="#compress配置项文档" class="headerlink" title="compress配置项文档"></a>compress配置项文档</h3><p><a href="https://github.com/terser/terser#compress-options">https://github.com/terser/terser#compress-options</a></p><h2 id="按照文档的webpack配置"><a href="#按照文档的webpack配置" class="headerlink" title="按照文档的webpack配置"></a>按照文档的webpack配置</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">TerserPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;terser-webpack-plugin&#x27;</span>);<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">optimization</span>: &#123;<br>    <span class="hljs-attr">minimizer</span>: [<br>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">TerserPlugin</span>(&#123;<br>        <span class="hljs-attr">terserOptions</span>: &#123;<br>          <span class="hljs-attr">compress</span>: &#123;<br>            <span class="hljs-attr">drop_console</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-attr">drop_debugger</span>: <span class="hljs-literal">true</span><br>          &#125;<br>        &#125;,<br>      &#125;),<br>    ],<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="最终vue-cli配置"><a href="#最终vue-cli配置" class="headerlink" title="最终vue-cli配置"></a>最终vue-cli配置</h2><p>在vue-cli中webpack配置可通过 <code>configureWebpack</code> 配置项配置具体参考 <a href="https://cli.vuejs.org/zh/guide/webpack.html">vue-cli文档</a> 。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">configureWebpack</span>: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&quot;production&quot;</span>) &#123;<br>    <span class="hljs-comment">// 关闭所有console.*</span><br>    config.<span class="hljs-property">optimization</span>.<span class="hljs-property">minimizer</span>[<span class="hljs-number">0</span>].<span class="hljs-property">options</span>.<span class="hljs-property">minimizer</span>.<span class="hljs-property">options</span>.<span class="hljs-property">compress</span>.<span class="hljs-property">drop_console</span> = <span class="hljs-literal">true</span>;<br>    <span class="hljs-comment">// 关闭指定的console.*</span><br>    <span class="hljs-comment">// config.optimization.minimizer[0].options.minimizer.options.compress.pure_funcs =</span><br>    <span class="hljs-comment">//   [&quot;console.log&quot;, &quot;console.error&quot;];</span><br>  &#125;<br>&#125;,<br></code></pre></td></tr></table></figure><h2 id="为什么最终vue-cli配置是这样？"><a href="#为什么最终vue-cli配置是这样？" class="headerlink" title="为什么最终vue-cli配置是这样？"></a>为什么最终vue-cli配置是这样？</h2><p>按照上方 <strong>按照文档的webpack配置</strong> <code>config.optimization.minimizer[0]</code> 是 <code>TerserPlugin</code> 插件实例，实例对象属性文档暂未体现，只能查看源码</p><p><img src="/../../assets/%E3%80%90vue-cli%E3%80%91%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E5%8E%BB%E6%8E%89console/1.png"></p><h1 id="chainWebpack配置"><a href="#chainWebpack配置" class="headerlink" title="chainWebpack配置"></a>chainWebpack配置</h1><p>参考chainWebpack文档：<a href="https://github.com/Yatoo2018/webpack-chain/tree/zh-cmn-Hans">https://github.com/Yatoo2018/webpack-chain/tree/zh-cmn-Hans</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">chainWebpack</span>: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>  config.<span class="hljs-property">optimization</span>.<span class="hljs-title function_">minimizer</span>(<span class="hljs-string">&quot;terser&quot;</span>).<span class="hljs-title function_">tap</span>(<span class="hljs-function">(<span class="hljs-params">args</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// 关闭所有console.*</span><br>    args[<span class="hljs-number">0</span>].<span class="hljs-property">terserOptions</span>.<span class="hljs-property">compress</span>.<span class="hljs-property">drop_console</span> = <span class="hljs-literal">true</span>;<br>    <span class="hljs-comment">// 关闭指定的console.*</span><br>    <span class="hljs-comment">// args[0].terserOptions.compress.pure_funcs = [&quot;console.log&quot;, &quot;console.error&quot;];</span><br>    <span class="hljs-keyword">return</span> args;<br>  &#125;);<br>&#125;,<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】iframe页面通信</title>
    <link href="/js/%E3%80%90js%E3%80%91iframe%E9%A1%B5%E9%9D%A2%E9%80%9A%E4%BF%A1/"/>
    <url>/js/%E3%80%90js%E3%80%91iframe%E9%A1%B5%E9%9D%A2%E9%80%9A%E4%BF%A1/</url>
    
    <content type="html"><![CDATA[<p>主页面与 iframe 页面互相通讯；主页面调用 iframe 页面方法</p><h2 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>index页面<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">      <span class="hljs-selector-tag">iframe</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ccc</span>;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wrap&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>我是index页面<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><br>          消息：<br>          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;message&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;向 iframe 页面发送消息&quot;</span> /&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;handleSendMessage1()&quot;</span>&gt;</span>给iframe1发送<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;handleSendMessage2()&quot;</span>&gt;</span>给iframe2发送<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;useIframeFunction1()&quot;</span>&gt;</span>调用iframe1中的方法<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;useIframeFunction2()&quot;</span>&gt;</span>调用iframe2中的方法<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;iframe1&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/iframeMessage/iframe1.html&quot;</span> <span class="hljs-attr">frameborder</span>=<span class="hljs-string">&quot;0&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;iframe2&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/iframeMessage/iframe2.html&quot;</span> <span class="hljs-attr">frameborder</span>=<span class="hljs-string">&quot;0&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> iframe1Window = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;iframe1&quot;</span>).<span class="hljs-property">contentWindow</span>;</span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> iframe2Window = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;iframe2&quot;</span>).<span class="hljs-property">contentWindow</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 给 iframe1 发送消息</span></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSendMessage1</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> message = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;message&quot;</span>).<span class="hljs-property">value</span>;</span><br><span class="language-javascript">        iframe1Window.<span class="hljs-title function_">postMessage</span>(message, <span class="hljs-string">&quot;*&quot;</span>);</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 调用 iframe1 的方法</span></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">useIframeFunction1</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        iframe1Window.<span class="hljs-title function_">handleConsole</span>();</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 给 iframe2 发送消息</span></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSendMessage2</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> message = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;message&quot;</span>).<span class="hljs-property">value</span>;</span><br><span class="language-javascript">        iframe2Window.<span class="hljs-title function_">postMessage</span>(message, <span class="hljs-string">&quot;*&quot;</span>);</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 调用 iframe2 的方法</span></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">useIframeFunction2</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        iframe2Window.<span class="hljs-title function_">handleConsole</span>();</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// index 页面中嵌入了多个 iframe 需要知道是哪个iframe发送的消息</span></span><br><span class="language-javascript">        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">source</span> === iframe1Window) &#123;</span><br><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;index 页面接收到 iframe1 消息: &quot;</span>, e.<span class="hljs-property">data</span>);</span><br><span class="language-javascript">        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.<span class="hljs-property">source</span> === iframe2Window) &#123;</span><br><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;index 页面接收到 iframe2 消息: &quot;</span>, e.<span class="hljs-property">data</span>);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="iframe1-html"><a href="#iframe1-html" class="headerlink" title="iframe1.html"></a>iframe1.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>iframe1页面<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wrap&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>我是iframe1页面<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><br>        消息：<br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;message&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;向 index 页面发送消息&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;handleSendMessage()&quot;</span>&gt;</span>发送<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 给 index 页面 发送消息</span></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSendMessage</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> message = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;message&quot;</span>).<span class="hljs-property">value</span>;</span><br><span class="language-javascript">        <span class="hljs-variable language_">window</span>.<span class="hljs-property">parent</span>.<span class="hljs-title function_">postMessage</span>(message, <span class="hljs-string">&quot;*&quot;</span>);</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 定义一个方法，让 index 页面调用</span></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleConsole</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;iframe1: index页面调用了我&quot;</span>);</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;iframe1 页面接收到消息: &quot;</span>, e.<span class="hljs-property">data</span>);</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="iframe2-html"><a href="#iframe2-html" class="headerlink" title="iframe2.html"></a>iframe2.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>iframe2页面<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wrap&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>我是iframe2页面<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><br>        消息：<br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;message&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;向 index 页面发送消息&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;handleSendMessage()&quot;</span>&gt;</span>发送<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 给 index 页面 发送消息</span></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSendMessage</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> message = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;message&quot;</span>).<span class="hljs-property">value</span>;</span><br><span class="language-javascript">        <span class="hljs-variable language_">window</span>.<span class="hljs-property">parent</span>.<span class="hljs-title function_">postMessage</span>(message, <span class="hljs-string">&quot;*&quot;</span>);</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 定义一个方法，让 index 页面调用</span></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleConsole</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;iframe2: index页面调用了我&quot;</span>);</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;iframe2 页面接收到消息: &quot;</span>, e.<span class="hljs-property">data</span>);</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】table固定列</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91table%E5%9B%BA%E5%AE%9A%E5%88%97/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91table%E5%9B%BA%E5%AE%9A%E5%88%97/</url>
    
    <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 表格展示 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;table-fixed-wrap&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">uni-table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fixed-table&quot;</span> <span class="hljs-attr">stripe</span> <span class="hljs-attr">emptyText</span>=<span class="hljs-string">&quot;暂无更多数据&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">uni-tr</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-th</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>固定字段<span class="hljs-tag">&lt;/<span class="hljs-name">uni-th</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">uni-tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">uni-tr</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-td</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">uni-td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">uni-tr</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">uni-table</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">uni-table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;other-table&quot;</span> <span class="hljs-attr">stripe</span> <span class="hljs-attr">emptyText</span>=<span class="hljs-string">&quot;暂无更多数据&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">uni-tr</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-th</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>字段1<span class="hljs-tag">&lt;/<span class="hljs-name">uni-th</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-th</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>字段2<span class="hljs-tag">&lt;/<span class="hljs-name">uni-th</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-th</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>字段3<span class="hljs-tag">&lt;/<span class="hljs-name">uni-th</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-th</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>字段4<span class="hljs-tag">&lt;/<span class="hljs-name">uni-th</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-th</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>字段5<span class="hljs-tag">&lt;/<span class="hljs-name">uni-th</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-th</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>字段6<span class="hljs-tag">&lt;/<span class="hljs-name">uni-th</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-th</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>字段7<span class="hljs-tag">&lt;/<span class="hljs-name">uni-th</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">uni-tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">uni-tr</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-td</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">uni-td</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-td</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">uni-td</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-td</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">uni-td</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-td</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">uni-td</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-td</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">uni-td</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-td</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>6<span class="hljs-tag">&lt;/<span class="hljs-name">uni-td</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">uni-td</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>7<span class="hljs-tag">&lt;/<span class="hljs-name">uni-td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">uni-tr</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">uni-table</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">// u-table 固定字段（双table实现）</span><br><span class="hljs-selector-class">.table-fixed-wrap</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-selector-class">.fixed-table</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span> <span class="hljs-meta">!important</span>;<br>    <span class="hljs-selector-class">.uni-table</span> &#123;<br>      <span class="hljs-attribute">min-width</span>: <span class="hljs-number">100px</span> <span class="hljs-meta">!important</span>;<br>    &#125;<br>  &#125;<br>  <span class="hljs-selector-class">.other-table</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vw</span> - <span class="hljs-number">100px</span>) <span class="hljs-meta">!important</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【linux】centos6.9LNMP环境搭建(编译安装)</title>
    <link href="/linux/%E3%80%90linux%E3%80%91centos6.9LNMP%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <url>/linux/%E3%80%90linux%E3%80%91centos6.9LNMP%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h2><ul><li>centos-6.9</li><li>nginx-1.17.5</li><li>mysql-5.6.33</li><li>php-5.6.33</li></ul><h2 id="安装全部依赖"><a href="#安装全部依赖" class="headerlink" title="安装全部依赖"></a>安装全部依赖</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install -y make gcc gcc-c++ zlib zlib-devel pcre pcre-devel openssl openssl-devel libffi-devel libtool curl-devel expat-devel gettext-devel perl-ExtUtils-MakeMaker autoconf libxml2-devel bzip2-devel libcurl-devel libjpeg-devel libpng-devel freetype-devel gmp-devel libmcrypt-devel libicu-devel sqlite-devel oniguruma-devel readline-devel ncurses ncurses-devel perl cmake libaio libaio-devel libtirpc-devel rpcgen<br></code></pre></td></tr></table></figure><h2 id="Nginx-安装"><a href="#Nginx-安装" class="headerlink" title="Nginx 安装"></a>Nginx 安装</h2><h3 id="解压安装包"><a href="#解压安装包" class="headerlink" title="解压安装包"></a>解压安装包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tar -zxvf nginx-1.17.5.tar.gz<br></code></pre></td></tr></table></figure><h3 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> nginx-1.17.5<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./configure --prefix=/usr/local/nginx-1.17.5 --with-http_ssl_module --with-http_gzip_static_module<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make &amp;&amp; make install<br></code></pre></td></tr></table></figure><h2 id="Mysql-安装"><a href="#Mysql-安装" class="headerlink" title="Mysql 安装"></a>Mysql 安装</h2><h3 id="添加-MySQL-用户和组"><a href="#添加-MySQL-用户和组" class="headerlink" title="添加 MySQL 用户和组"></a>添加 MySQL 用户和组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">groupadd -r mysql<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">useradd -r -g mysql mysql<br></code></pre></td></tr></table></figure><h3 id="创建-MySQL-所需要的目录"><a href="#创建-MySQL-所需要的目录" class="headerlink" title="创建 MySQL 所需要的目录"></a>创建 MySQL 所需要的目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> -p /usr/local/mysql<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> -p /data/mysqldb<br></code></pre></td></tr></table></figure><h3 id="解压安装包-1"><a href="#解压安装包-1" class="headerlink" title="解压安装包"></a>解压安装包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tar -zxvf mysql-5.6.33.tar.gz<br></code></pre></td></tr></table></figure><h3 id="编译安装-1"><a href="#编译安装-1" class="headerlink" title="编译安装"></a>编译安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> mysql-5.6.33<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cmake -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_UNIX_ADDR=/usr/local/mysql/mysql.sock -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DWITH_INNOBASE_STORAGE_ENGINE=1 -DWITH_ARCHIVE_STORAGE_ENGINE=1 -DWITH_BLACKHOLE_STORAGE_ENGINE=1 -DMYSQL_DATADIR=/data/mysqldb -DMYSQL_TCP_PORT=3306 -DENABLE_DOWNLOADS=1<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make &amp;&amp; make install<br></code></pre></td></tr></table></figure><h3 id="修改-mysql-目录所有者和组"><a href="#修改-mysql-目录所有者和组" class="headerlink" title="修改 mysql 目录所有者和组"></a>修改 mysql 目录所有者和组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chown</span> -R mysql:mysql /usr/local/mysql<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chown</span> -R mysql:mysql /data/mysqldb<br></code></pre></td></tr></table></figure><h3 id="复制-mysql-服务启动配置文件"><a href="#复制-mysql-服务启动配置文件" class="headerlink" title="复制 mysql 服务启动配置文件"></a>复制 mysql 服务启动配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> /usr/local/mysql/support-files/my-default.cnf /etc/my.cnf<br></code></pre></td></tr></table></figure><h3 id="mysql-配置文件修改"><a href="#mysql-配置文件修改" class="headerlink" title="mysql 配置文件修改"></a>mysql 配置文件修改</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /etc/my.cnf<br></code></pre></td></tr></table></figure><p>添加：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">datadir = /data/mysqldb<br>innodb_file_per_table = ON<br>skip_name_resolve = ON<br></code></pre></td></tr></table></figure><h3 id="复制-mysql-服务启动脚本及加入-PATH-路径"><a href="#复制-mysql-服务启动脚本及加入-PATH-路径" class="headerlink" title="复制 mysql 服务启动脚本及加入 PATH 路径"></a>复制 mysql 服务启动脚本及加入 PATH 路径</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld<br></code></pre></td></tr></table></figure><p>新建 <code>/etc/profile.d/mysql.sh</code> ，添加以下内容保存退出，source 一下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:/usr/local/mysql/bin:/usr/local/mysql/lib<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> /etc/profile.d/mysql.sh<br></code></pre></td></tr></table></figure><h3 id="拷贝-mysql-命令目录到系统目录，并执行-mysql-初始化的-data-存放位置的准备"><a href="#拷贝-mysql-命令目录到系统目录，并执行-mysql-初始化的-data-存放位置的准备" class="headerlink" title="拷贝 mysql 命令目录到系统目录，并执行 mysql 初始化的 data 存放位置的准备"></a>拷贝 mysql 命令目录到系统目录，并执行 mysql 初始化的 data 存放位置的准备</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> /usr/local/mysql/bin/mysql /usr/bin/<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">/usr/local/mysql/scripts/mysql_install_db --user=mysql --datadir=/data/mysqldb --basedir=/usr/local/mysql<br></code></pre></td></tr></table></figure><h3 id="启动-mysql-服务并加入开机自启动"><a href="#启动-mysql-服务并加入开机自启动" class="headerlink" title="启动 mysql 服务并加入开机自启动"></a>启动 mysql 服务并加入开机自启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">service mysqld start<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">chkconfig mysqld on<br></code></pre></td></tr></table></figure><h2 id="PHP-安装"><a href="#PHP-安装" class="headerlink" title="PHP 安装"></a>PHP 安装</h2><h3 id="解压安装包-2"><a href="#解压安装包-2" class="headerlink" title="解压安装包"></a>解压安装包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tar -zxvf php-5.6.33.tar.gz<br></code></pre></td></tr></table></figure><h3 id="编译安装-2"><a href="#编译安装-2" class="headerlink" title="编译安装"></a>编译安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> php-5.6.33<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./configure --prefix=/usr/local/php-5.6.33 --with-config-file-path=/usr/local/php-5.6.33/etc --enable-fpm --with-mysql --with-mysqli --with-pdo-mysql --with-curl --with-gd --with-jpeg-dir --with-png-dir --with-zlib --with-openssl<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make &amp;&amp; make install<br></code></pre></td></tr></table></figure><h3 id="复制-配置文件"><a href="#复制-配置文件" class="headerlink" title="复制 配置文件"></a>复制 配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> php.ini-production /usr/local/php-5.6.33/etc/php.ini<br></code></pre></td></tr></table></figure><h2 id="配置环境变量（nginx-php-php-fpm）"><a href="#配置环境变量（nginx-php-php-fpm）" class="headerlink" title="配置环境变量（nginx &#x2F; php &#x2F; php-fpm）"></a>配置环境变量（nginx &#x2F; php &#x2F; php-fpm）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /etc/profile<br></code></pre></td></tr></table></figure><p>添加：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nginx</span><br><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:/usr/local/nginx-1.17.5/sbin<br><span class="hljs-comment"># php / php-fpm</span><br><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:/usr/local/php-5.6.33/bin:/usr/local/php-5.6.33/sbin<br></code></pre></td></tr></table></figure><p>使配置生效：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> /etc/profile<br></code></pre></td></tr></table></figure><h2 id="PHP-扩展安装（mbstring-为例）"><a href="#PHP-扩展安装（mbstring-为例）" class="headerlink" title="PHP 扩展安装（mbstring 为例）"></a>PHP 扩展安装（mbstring 为例）</h2><h3 id="进入安装包的扩展目录"><a href="#进入安装包的扩展目录" class="headerlink" title="进入安装包的扩展目录"></a>进入安装包的扩展目录</h3><p>假设安装包解压的目录在 &#x2F;opt&#x2F; 下，安装 mbstring 扩展</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /opt/php-5.6.33/ext/mbstring<br></code></pre></td></tr></table></figure><h3 id="生成-configure-文件"><a href="#生成-configure-文件" class="headerlink" title="生成 configure 文件"></a>生成 configure 文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">phpize<br></code></pre></td></tr></table></figure><h3 id="编译安装-3"><a href="#编译安装-3" class="headerlink" title="编译安装"></a>编译安装</h3><p>指定 php-config 目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./configure --with-php-config=/usr/local/php-5.6.33/bin/php-config<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make &amp;&amp; make install<br></code></pre></td></tr></table></figure><h3 id="配置-php-ini"><a href="#配置-php-ini" class="headerlink" title="配置 php.ini"></a>配置 php.ini</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /usr/local/php-5.6.33/etc/php.ini<br></code></pre></td></tr></table></figure><p>添加：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">extension=/usr/local/php-5.6.33/lib/php/extensions/no-debug-non-zts-20131226/mbstring.so<br></code></pre></td></tr></table></figure><p>&#x2F;usr&#x2F;local&#x2F;php-5.6.33&#x2F;lib&#x2F;php&#x2F;extensions&#x2F;no-debug-non-zts-20131226&#x2F; 要根据编译安装后的路径填写</p><p>配置中扩展路径可以单独配置，这样配置扩展就不需要重复配置路径了，只需要配置扩展名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">extension_dir=/usr/local/php-5.6.33/lib/php/extensions/no-debug-non-zts-20131226/<br>extension=mbstring.so<br>extension=扩展名<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】vue3.0beta体验</title>
    <link href="/vue/%E3%80%90vue%E3%80%91vue3.0beta%E4%BD%93%E9%AA%8C/"/>
    <url>/vue/%E3%80%90vue%E3%80%91vue3.0beta%E4%BD%93%E9%AA%8C/</url>
    
    <content type="html"><![CDATA[<p>Vue3.0的beta版发布了，尤大4.17号在微博发出了Vue3.0的beta，网友直呼， 【 它来了它来了，它带着秃头走来了 】，【 学不动了，太难了 】，【 秃头警告 】等等，但都是挺期待的，本人也是迫不及待的上手看了下，奈何水平有限，暂时悟出的比较少，也欢迎各方神圣前来讨论。</p><h3 id="1-目前怎么创建vue3-0项目"><a href="#1-目前怎么创建vue3-0项目" class="headerlink" title="1. 目前怎么创建vue3.0项目"></a>1. 目前怎么创建vue3.0项目</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">vue create projectName<br><span class="hljs-comment"># 此时创建的是vue2项目,cd到项目根目录</span><br><span class="hljs-built_in">cd</span> projectName<br><span class="hljs-comment"># 然后执行:vue add vue-next</span><br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90vue%E3%80%91vue3.0beta%E4%BD%93%E9%AA%8C/1.png"></p><p>完成后在“package.json”中会发现vue已经是 3.0.0-beta.1版本,目录没什么变化但是“ main.js”中代码发生了变化，看图：</p><p><img src="/../../assets/%E3%80%90vue%E3%80%91vue3.0beta%E4%BD%93%E9%AA%8C/2.png"></p><p><img src="/../../assets/%E3%80%90vue%E3%80%91vue3.0beta%E4%BD%93%E9%AA%8C/3.png"></p><h3 id="2-生命周期"><a href="#2-生命周期" class="headerlink" title="2. 生命周期"></a>2. 生命周期</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css">setup: 会在组件创建执行(为组件提供属性及方法，都得写在setup中，看下面代码就明白了)<br>onBeforeMount: dom渲染前<br>onMounted: dom渲染后<br>onBeforeUpdate: 更新变化前<br>onUpdated: 更新变化后<br>onBeforeUnmount: 组件销毁前<br>onUnmounted: 组件销毁后<br></code></pre></td></tr></table></figure><p>与vue2相比很容易发现区别吧，基本没变，只是没有了组件创建前（beforeCreate），创建后(created)，两者可理解为setup方法；<br>首次进入页面会执行 setup，onBeforeMount，onMounted</p><h3 id="3-reactive-–-定义数据，方法"><a href="#3-reactive-–-定义数据，方法" class="headerlink" title="3. reactive – 定义数据，方法"></a>3. reactive – 定义数据，方法</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;template&gt;<br>  &lt;<span class="hljs-selector-tag">div</span>&gt;<br>    &#123;&#123;data1<span class="hljs-selector-class">.message</span>&#125;&#125;<br>  &lt;/<span class="hljs-selector-tag">div</span>&gt;<br>&lt;/template&gt;<br><br>setup()&#123;<br>  const data1 = reactive(&#123;<br>    message: <span class="hljs-string">&quot;我是Vue3.0beta-message&quot;</span><br>  &#125;)<br><br>  return &#123; data1 &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-事件方法-也可以定义在reactive中"><a href="#4-事件方法-也可以定义在reactive中" class="headerlink" title="4. 事件方法(也可以定义在reactive中)"></a>4. 事件方法(也可以定义在reactive中)</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;template&gt;<br>  &lt;<span class="hljs-selector-tag">div</span> <span class="hljs-keyword">@click</span>=&quot;fnClick&quot;&gt;<br>    &#123;&#123;data1<span class="hljs-selector-class">.message</span>&#125;&#125;<br>  &lt;/<span class="hljs-selector-tag">div</span>&gt;<br>&lt;/template&gt;<br><br>import &#123; reactive &#125; <span class="hljs-selector-tag">from</span> &#x27;vue&#x27;<br>setup()&#123;<br>  const data1 = reactive(&#123;<br>    message: <span class="hljs-string">&quot;我是Vue3.0beta-message&quot;</span><br>  &#125;),<br>  const fnClick = _ =&gt; &#123;<br>    console<span class="hljs-selector-class">.log</span>(&quot;点击了&quot;)<br>  &#125;<br><br>  return &#123; data1, fnClick &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-计算属性"><a href="#5-计算属性" class="headerlink" title="5. 计算属性"></a>5. 计算属性</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;template&gt;<br>  &lt;<span class="hljs-selector-tag">div</span> <span class="hljs-keyword">@click</span>=&quot;fnClick&quot;&gt;<br>    &#123;&#123;data1<span class="hljs-selector-class">.message</span>&#125;&#125;<br>    &#123;&#123;fnComputed&#125;&#125;<br>  &lt;/<span class="hljs-selector-tag">div</span>&gt;<br>&lt;/template&gt;<br><br>import &#123; reactive, computed &#125; <span class="hljs-selector-tag">from</span> &#x27;vue&#x27;<br>setup()&#123;<br>  const data1 = reactive(&#123;<br>    message: <span class="hljs-string">&quot;我是Vue3.0beta-message&quot;</span>,<br>    number: <span class="hljs-number">2</span><br>  &#125;),<br>  //事件处理方法<br>  const fnClick = _ =&gt; &#123;<br>    console<span class="hljs-selector-class">.log</span>(&quot;点击了&quot;)<br>  &#125;<br>  //计算属性方法<br>  const fnComputed = computed(_ =&gt; data1<span class="hljs-selector-class">.number</span> * data1<span class="hljs-selector-class">.number</span>)<br>  return &#123; data1, fnClick &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>个人觉得这样的好处：<br>vue2中我们在“data”中定义的属性多了后，不容易一下子找到属性对应的含义，vue3这样我们可以将一个组件中的功能再次进行细分，都打包在一个对象中，也便于维护…<br>通过一个小项目可以看出来，附上地址：<br><a href="https://github.com/yuanpeng666/vue3.0_beta_music">https://github.com/yuanpeng666/vue3.0_beta_music</a></p>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】使用.htaccess将http重定向https</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E4%BD%BF%E7%94%A8.htaccess%E5%B0%86http%E9%87%8D%E5%AE%9A%E5%90%91https/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E4%BD%BF%E7%94%A8.htaccess%E5%B0%86http%E9%87%8D%E5%AE%9A%E5%90%91https/</url>
    
    <content type="html"><![CDATA[<p>网站根目录创建 .htaccess文件</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E4%BD%BF%E7%94%A8.htaccess%E5%B0%86http%E9%87%8D%E5%AE%9A%E5%90%91https/1.png"></p><p>添加以下内容：</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs perl">会影响子域名（复制时候去掉本行）：<br>RewriteEngine on<br>RewriteBase /<br>RewriteCond %&#123;SERVER_PORT&#125; !^<span class="hljs-number">443</span>$<br>RewriteRule ^.*$ https:<span class="hljs-regexp">//</span>%<span class="hljs-string">&#123;SERVER_NAME&#125;%&#123;REQUEST_URI&#125;</span> [L,R]<br><br><br>不会影响子域名，只有主域名重定向（复制时候去掉本行）：<br>RewriteEngine On<br>RewriteBase /<br>RewriteCond %&#123;SERVER_PORT&#125; !^<span class="hljs-number">443</span>$<br>RewriteCond %&#123;HTTP_HOST&#125; !^www.luojing.top<br>RewriteRule ^.*$ https:<span class="hljs-regexp">//</span>%<span class="hljs-string">&#123;SERVER_NAME&#125;%&#123;REQUEST_URI&#125;</span> [L,R]<br><br><br>排除某个子域名（复制时候去掉本行）：<br>RewriteEngine On<br>RewriteBase /<br>RewriteCond %&#123;SERVER_PORT&#125; !^<span class="hljs-number">443</span>$<br>RewriteCond %&#123;REQUEST_URI&#125; !^http:<span class="hljs-regexp">//r</span>oc.luojing.top<br>RewriteRule ^.*$ https:<span class="hljs-regexp">//</span>%<span class="hljs-string">&#123;SERVER_NAME&#125;%&#123;REQUEST_URI&#125;</span> [L,R]<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【css】4月4网站全灰，只要一行代码</title>
    <link href="/css/%E3%80%90css%E3%80%914%E6%9C%884%E7%BD%91%E7%AB%99%E5%85%A8%E7%81%B0%EF%BC%8C%E5%8F%AA%E8%A6%81%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81/"/>
    <url>/css/%E3%80%90css%E3%80%914%E6%9C%884%E7%BD%91%E7%AB%99%E5%85%A8%E7%81%B0%EF%BC%8C%E5%8F%AA%E8%A6%81%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81/</url>
    
    <content type="html"><![CDATA[<p>为表达全国各族人民对抗击新冠肺炎疫情斗争牺牲烈士和逝世同胞的深切哀悼，2020年4月4日举行全国性哀悼活动，某li某li，某宝，某东…等网站于2020年4月4日凌晨00:00网页全部以灰色显示。<br>一夜之间，<br>网站全灰，<br>一行代码，<br>即可搞定。</p><h3 id="bilibili："><a href="#bilibili：" class="headerlink" title="bilibili："></a>bilibili：</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">-webkit-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(.<span class="hljs-number">95</span>);<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90css%E3%80%914%E6%9C%884%E7%BD%91%E7%AB%99%E5%85%A8%E7%81%B0%EF%BC%8C%E5%8F%AA%E8%A6%81%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81/1.png"></p><p>可能会有人说，哎~，头部图还是灰色的啊，其实呀他就是一张灰色的图片！</p><p><img src="/../../assets/%E3%80%90css%E3%80%914%E6%9C%884%E7%BD%91%E7%AB%99%E5%85%A8%E7%81%B0%EF%BC%8C%E5%8F%AA%E8%A6%81%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81/2.png"></p><h3 id="百度："><a href="#百度：" class="headerlink" title="百度："></a>百度：</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-attribute">filter</span>: progid:DXImageTransform.Microsoft.<span class="hljs-built_in">BasicImage</span>(grayscale=<span class="hljs-number">1</span>);<br>-webkit-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>); <br>-moz-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>-ms-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>-o-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br><span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>); <br><span class="hljs-attribute">filter</span>: gray;<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90css%E3%80%914%E6%9C%884%E7%BD%91%E7%AB%99%E5%85%A8%E7%81%B0%EF%BC%8C%E5%8F%AA%E8%A6%81%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81/3.png"></p><p>在下看的比较知名的网站，bilibili ，百度，4399….等网站发现实现方法其实就是css3中滤镜的应用，就不往出贴了。<br>但是这个属性的兼容性并不是很好，google了下还是有解决方法的：<br>兼容大部分浏览器写法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">html</span>&#123;<br>    <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>    -webkit-<span class="hljs-attribute">filter</span>:<span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>    -moz-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>    -ms-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>    -o-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>    <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&quot;data:image/svg+xml;utf8,&lt;svg xmlns=\&#x27;http://www.w3.org/2000/svg\&#x27;&gt;&lt;filter id=\&#x27;grayscale\&#x27;&gt;&lt;feColorMatrix type=\&#x27;matrix\&#x27; values=\&#x27;0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\&#x27;/&gt;&lt;/filter&gt;&lt;/svg&gt;#grayscale&quot;</span>);<br>    <span class="hljs-attribute">filter</span>:progid:DXImageTransform.Microsoft.<span class="hljs-built_in">BasicImage</span>(grayscale=<span class="hljs-number">1</span>);<br>    <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">1</span>);<br>&#125;<br>&lt;script <span class="hljs-attribute">src</span>=&quot;https://luojing.top/js/grayscale.js<span class="hljs-string">&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-string">&lt;script&gt;</span><br><span class="hljs-string">  window.onload=function()&#123;</span><br><span class="hljs-string">    grayscale(document.body)</span><br><span class="hljs-string">  &#125;</span><br><span class="hljs-string">&lt;/script&gt;</span><br></code></pre></td></tr></table></figure><h3 id="css3filter-滤镜-："><a href="#css3filter-滤镜-：" class="headerlink" title="css3filter(滤镜)："></a>css3filter(滤镜)：</h3><p>接下来咱们就来看下filter，它有以下这些：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs css">blur(<span class="hljs-number">0px</span>)：模糊值 | 默认值为<span class="hljs-number">0</span>(正常图像)<br>brightness(<span class="hljs-number">100%</span>)：亮度 | 默认值为<span class="hljs-number">100%</span>(正常图像) <span class="hljs-number">0%</span>全黑<br>contrast(<span class="hljs-number">100%</span>)：对比度 | 默认值为<span class="hljs-number">100%</span>(正常图像) <span class="hljs-number">0%</span>全黑<br>drop-shadow(x偏移, y偏移, 模糊大小, 色值)：投影<br>grayscale(<span class="hljs-number">100%</span>)：灰度 | 默认值为<span class="hljs-number">100%</span>(灰度图像)<br>hue-rotate(<span class="hljs-number">0deg</span>)：色相旋转 | 默认值为：<span class="hljs-number">0deg</span><br>invert(<span class="hljs-number">0%</span>)：反色 | 默认值为<span class="hljs-number">0</span>(正常图像) <span class="hljs-number">100%</span>完全反转颜色<br><span class="hljs-attribute">opacity</span>(<span class="hljs-number">100%</span>)：透明度 默认值为<span class="hljs-number">100%</span>(正常图像) <span class="hljs-number">0%</span>完全透明<br>saturate(<span class="hljs-number">100%</span>)：饱和度 默认值为<span class="hljs-number">100%</span> <span class="hljs-number">0%</span>不饱和<br>sepia(<span class="hljs-number">0%</span>):褐色 默认值为<span class="hljs-number">0%</span>(正常图像) <span class="hljs-number">100%</span>转深褐色<br><br>【以上各个滤镜效果可以结合使用】<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>css</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】国内镜像站点</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E7%AB%99%E7%82%B9/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E7%AB%99%E7%82%B9/</url>
    
    <content type="html"><![CDATA[<h2 id="华为"><a href="#华为" class="headerlink" title="华为"></a>华为</h2><p><a href="https://mirrors.huaweicloud.com/home">https://mirrors.huaweicloud.com/home</a></p><h2 id="阿里"><a href="#阿里" class="headerlink" title="阿里"></a>阿里</h2><p><a href="https://developer.aliyun.com/mirror">https://developer.aliyun.com/mirror</a></p><h2 id="腾讯"><a href="#腾讯" class="headerlink" title="腾讯"></a>腾讯</h2><p><a href="https://mirrors.cloud.tencent.com/">https://mirrors.cloud.tencent.com</a></p><h2 id="网易"><a href="#网易" class="headerlink" title="网易"></a>网易</h2><p><a href="http://mirrors.163.com/">http://mirrors.163.com</a></p><h2 id="搜狐"><a href="#搜狐" class="headerlink" title="搜狐"></a>搜狐</h2><p><a href="http://mirrors.sohu.com/">http://mirrors.sohu.com</a></p><h2 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h2><p><a href="http://mirrors.cmecloud.cn/">http://mirrors.cmecloud.cn</a></p><h2 id="开源社-Azure-中国"><a href="#开源社-Azure-中国" class="headerlink" title="开源社&#x2F;Azure 中国"></a>开源社&#x2F;Azure 中国</h2><p><a href="https://mirror.azure.cn/">https://mirror.azure.cn</a></p><h2 id="校园网联合镜像站"><a href="#校园网联合镜像站" class="headerlink" title="校园网联合镜像站"></a>校园网联合镜像站</h2><p><a href="https://mirrors.cernet.edu.cn/">https://mirrors.cernet.edu.cn</a></p><h2 id="清华大学"><a href="#清华大学" class="headerlink" title="清华大学"></a>清华大学</h2><p><a href="https://mirrors.tuna.tsinghua.edu.cn/">https://mirrors.tuna.tsinghua.edu.cn</a></p><h2 id="北京大学"><a href="#北京大学" class="headerlink" title="北京大学"></a>北京大学</h2><p><a href="http://mirrors.pku.edu.cn/">http://mirrors.pku.edu.cn</a></p><h2 id="nodejs"><a href="#nodejs" class="headerlink" title="nodejs"></a>nodejs</h2><p><a href="https://nodejs.org/en/blog/release">https://nodejs.org/en/blog/release</a></p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【node】ESlint直接在代码文件中以注释的方式配置</title>
    <link href="/node/%E3%80%90node%E3%80%91ESlint%E7%9B%B4%E6%8E%A5%E5%9C%A8%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E4%B8%AD%E4%BB%A5%E6%B3%A8%E9%87%8A%E7%9A%84%E6%96%B9%E5%BC%8F%E9%85%8D%E7%BD%AE/"/>
    <url>/node/%E3%80%90node%E3%80%91ESlint%E7%9B%B4%E6%8E%A5%E5%9C%A8%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E4%B8%AD%E4%BB%A5%E6%B3%A8%E9%87%8A%E7%9A%84%E6%96%B9%E5%BC%8F%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p>注意：代码文件内以注释配置的规则会覆盖配置文件里的规则，优先级要更高。<br>可以在你的文件中使用以下格式的块注释来临时禁止规则出现警告：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/* eslint-disable */</span><br><span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;foo&#x27;</span>);<br><span class="hljs-comment">/* eslint-enable */</span><br></code></pre></td></tr></table></figure><p>你也可以对指定的规则启用或禁用警告:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/* eslint-disable no-alert, no-console */</span><br><span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;foo&#x27;</span>);<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;bar&#x27;</span>);<br><span class="hljs-comment">/* eslint-enable no-alert, no-console */</span><br></code></pre></td></tr></table></figure><p>如果在整个文件范围内禁止规则出现警告，将&#x2F;* eslint-disable *&#x2F; 块注释放在文件顶部：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/* eslint-disable */</span><br><span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;foo&#x27;</span>);<br></code></pre></td></tr></table></figure><p>你也可以对整个文件启用或禁用警告:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/* eslint-disable no-alert */</span><br><span class="hljs-comment">// Disables no-alert for the rest of the file</span><br><span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;foo&#x27;</span>);<br></code></pre></td></tr></table></figure><p>可以在你的文件中使用以下格式的行注释在某一特定的行上禁用所有规则：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;foo&#x27;</span>); <br><span class="hljs-comment">// eslint-disable-line</span><br><span class="hljs-comment">// eslint-disable-next-linealert(&#x27;foo&#x27;);</span><br></code></pre></td></tr></table></figure><p>在某一特定的行上禁用某个指定的规则：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;foo&#x27;</span>); <br><span class="hljs-comment">// eslint-disable-line no-alert</span><br><span class="hljs-comment">// eslint-disable-next-line no-alertalert(&#x27;foo&#x27;);</span><br></code></pre></td></tr></table></figure><p>在某个特定的行上禁用多个规则：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;foo&#x27;</span>);<br><span class="hljs-comment">// eslint-disable-line no-alert, quotes, semi</span><br><span class="hljs-comment">// eslint-disable-next-line no-alert, quotes, semialert(&#x27;foo&#x27;);</span><br></code></pre></td></tr></table></figure><p>上面的所有方法同样适用于插件规则。例如，禁止eslint-plugin-example的 rule-name规则，把插件名（example）和规则名（rule-name）结合为 example&#x2F;rule-name：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// eslint-disable-line example/rule-name</span><br></code></pre></td></tr></table></figure><p>注意：为文件的某部分禁用警告的注释，告诉 ESLint 不要对禁用的代码报告规则的冲突。ESLint 仍解析整个文件，然而，禁用的代码仍需要是合法的 JavaScript 语法。</p>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】Error：ResizeObserver loop limit exceeded</title>
    <link href="/vue/%E3%80%90vue%E3%80%91Error%EF%BC%9AResizeObserver%20loop%20limit%20exceeded/"/>
    <url>/vue/%E3%80%90vue%E3%80%91Error%EF%BC%9AResizeObserver%20loop%20limit%20exceeded/</url>
    
    <content type="html"><![CDATA[<h2 id="错误信息"><a href="#错误信息" class="headerlink" title="错误信息"></a>错误信息</h2><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91ResizeObserverError/0.jpg"></p><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>ResizeObserver 调用太频繁，导致循环限制错误，加上防抖处理<br>以下代码放到 vue 项目中的 main.js 中：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">debounce</span> = (<span class="hljs-params">fn, delay</span>) =&gt; &#123;<br>  <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span><br>    <span class="hljs-keyword">let</span> args = <span class="hljs-variable language_">arguments</span><br>    <span class="hljs-built_in">clearTimeout</span>(timer)<br>    timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      fn.<span class="hljs-title function_">apply</span>(context, args)<br>    &#125;, delay)<br>  &#125;<br>&#125;<br><span class="hljs-keyword">const</span> _ResizeObserver = <span class="hljs-variable language_">window</span>.<span class="hljs-property">ResizeObserver</span><br><span class="hljs-variable language_">window</span>.<span class="hljs-property">ResizeObserver</span> = <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResizeObserver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">_ResizeObserver</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">callback</span>) &#123;<br>    callback = <span class="hljs-title function_">debounce</span>(callback, <span class="hljs-number">16</span>)<br>    <span class="hljs-variable language_">super</span>(callback)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【微信小程序】系统API相关</title>
    <link href="/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E7%B3%BB%E7%BB%9FAPI%E7%9B%B8%E5%85%B3/"/>
    <url>/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E7%B3%BB%E7%BB%9FAPI%E7%9B%B8%E5%85%B3/</url>
    
    <content type="html"><![CDATA[<p>官方文档：</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/">https://developers.weixin.qq.com/miniprogram/dev/api/</a></p><h3 id="网络请求"><a href="#网络请求" class="headerlink" title="网络请求"></a>网络请求</h3><p>微信提供了专属的API接口,用于网络请求: wx.request({})</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs vue">//无参数GET<br>wx.request(&#123;<br>  url: &quot;https://luojing.top/....&quot;,<br>  success(res)&#123;<br>    console.log(res)<br>  &#125;<br>&#125;)<br>//有参数GET<br>wx.request(&#123;<br>  url: &quot;https://luojing.top/...&quot;,<br>  data: &#123;<br>    query: &quot;rocyuan&quot;<br>  &#125;,<br>  success(res)&#123;<br>    console.log(res)<br>  &#125;<br>&#125;)<br>//POST请求<br>wx.request(&#123;<br>  url: &quot;https://luojing.top/...&quot;,<br>  method: &quot;post&quot;,<br>  data: &#123;<br>    name: &quot;rocyuan&quot;,<br>    age: 18,<br>    height: 2.00<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="网络请求封装"><a href="#网络请求封装" class="headerlink" title="网络请求封装"></a>网络请求封装</h3><p>通过promise封装wx.request()</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs vue">// network.js(也可对baseURL，timeout进行统一管理封装，这里不演示了):<br>export function request(option)&#123;<br>  return new Promise((resolve, reject) =&gt; &#123;<br>    wx.request(&#123;<br>      url: option.url,<br>      timeout: option.timeout  || 5000,<br>      method: option.method || &quot;get&quot;,<br>      data: option.data || &#123;&#125;,<br>      success(res)&#123;<br>        resolve(res)<br>      &#125;,<br>      fail(err)&#123;<br>        reject(err)<br>      &#125;<br>    &#125;)<br>  &#125;)<br>&#125;<br><br>// 应用：<br>// page.js<br>import &#123; request &#125; from &quot;network&quot;<br><br>request(&#123;<br>  url: &quot;https://luojing.top/...&quot;<br>&#125;).then(res =&gt; &#123;<br>  console.log(res)<br>&#125;).catch(err =&gt; &#123;<br>  console.log(err)<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="弹窗展示"><a href="#弹窗展示" class="headerlink" title="弹窗展示"></a>弹窗展示</h3><p>小程序中展示弹窗有四种方式: showToast、showModal、showLoading、showActionSheet</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs vue">wxml:<br>&lt;button size=&quot;mini&quot; bindtap=&quot;onToastClick&quot;&gt;showToast&lt;/button&gt;<br>&lt;button size=&quot;mini&quot; bindtap=&quot;onModalClick&quot;&gt;showModal&lt;/button&gt;<br>&lt;button size=&quot;mini&quot; bindtap=&quot;onLoadingClick&quot;&gt;showLoading&lt;/button&gt;<br>&lt;button size=&quot;mini&quot; bindtap=&quot;onActionSheetClick&quot;&gt;showActionSheet&lt;/button&gt;<br><br>js:<br>//Toast弹窗<br>onToastClick()&#123;<br>  wx.showToast(&#123;<br>    title: &quot;hello&quot;,<br>    duratioin: 3000,<br>    icon: &quot;loading&quot;,<br>    mask: true,<br>    success()&#123;<br>      console.log(&quot;展示成功&quot;)<br>    &#125;,<br>    fail()&#123;<br>      console.log(&quot;展示失败&quot;)<br>    &#125;,<br>    complete()&#123;<br>      console.log(&quot;展示完成&quot;)<br>    &#125;<br>  &#125;)<br>&#125;<br>//弹窗带内容及交互<br>onModalClic()&#123;<br>  wx.showModal(&#123;<br>    title: &quot;标题&quot;,<br>    content: &quot;内容&quot;,<br>    showCancel: true, //是否显示取消按钮<br>    cancelText: &quot;返回&quot;,<br>    cancelColor: &quot;#f00&quot;,<br>    success(res)&#123;<br>      if(res.confirm)&#123;<br>        console.log(&quot;点击了确定&quot;)<br>      &#125;<br>      if(res.cancel)&#123;<br>        console.log(&quot;点击了取消&quot;)<br>      &#125;<br>    &#125;<br>  &#125;)<br>&#125;<br>//加载中动画，需要手动隐藏（多用于加载中 loading...）<br>onLoadingClick()&#123;<br>  wx.showLoading(&#123;<br>    title: &quot;标题&quot;,<br>    mask: true,<br>  &#125;)<br>  settimeout(_ =&gt; &#123;<br>    wx.hideLoading()<br>  &#125;,3000)<br>&#125;<br>//显示操作菜单<br>onActionSheelClick()&#123;<br>  wx.showActionSheel(&#123;<br>    itemList: [&quot;相册&quot;, &quot;拍照&quot;],<br>    itemColor: &quot;#f00&quot;,<br>    success(res)&#123;<br>      console.log(res)<br>    &#125;<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="页面分享"><a href="#页面分享" class="headerlink" title="页面分享"></a>页面分享</h3><p>分享是小程序扩散的一种重要方式，小程序中有两种分享方式：</p><ul><li>点击右上角的菜单按钮，之后点击转发</li><li>点击某一个按钮，直接转发</li></ul><p>当我们转发给好友一个小程序时，通常小程序中会显示一些信息； 通过 onShareAppMessage 设置展示信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">page.wxml:<br>&lt;button size=&#x27;mini&#x27; open-type=&#x27;share&#x27;&gt;分享&lt;/button&gt;<br><br>page.js<br>onShareAppMessage(option)&#123;<br>  return &#123;<br>    title: &quot;分享标题&quot;,<br>    path: &quot;/pages/index/index&quot;,<br>    imageUrl: &quot;分享图片的路径&quot;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="小程序的登录流程"><a href="#小程序的登录流程" class="headerlink" title="小程序的登录流程"></a>小程序的登录流程</h3><ul><li>调用wx.login获取code</li><li>调用wx.request发送code到我们自己的服务器（我 们自己的服务器会返回一个登录态的标识，比如 token）</li><li>将登录态的标识token进行存储，以便下次使用</li><li>请求需要登录态标识的接口时，携带token</li></ul><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E7%B3%BB%E7%BB%9FAPI%E7%9B%B8%E5%85%B3/1.png"></p><h3 id="界面转跳（路由）"><a href="#界面转跳（路由）" class="headerlink" title="界面转跳（路由）"></a>界面转跳（路由）</h3><p>界面的跳转有两种方式：**通过navigator组件 **和 <strong>通过wx的API跳转</strong></p><p><strong>navigators</strong>设置文档：</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html">https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 1.navigator页面跳转 --&gt;<br>&lt;navigator url=&#x27;/pages/detail/detail&#x27;&gt;跳到详情页&lt;/navigator&gt;<br><br>&lt;!-- 2.navigator属性: open-type, 每一个open-type都有对应的API --&gt;<br>&lt;navigator url=&#x27;/pages/detail/detail&#x27;<br>           open-type=&#x27;redirect&#x27;&gt;<br>  跳到详情页(redirect)<br>&lt;/navigator&gt;<br><br>&lt;!-- 3.跳转过程中数据的传递 --&gt;<br>// 3.1 首页跳转到详情页携带数据：<br>首页：<br>&lt;navigator url=&#x27;/pages/detail/detail?name=why&amp;age=18&amp;height=1.88&#x27;&gt;跳到详情页&lt;/navigator&gt;<br>详情页js：<br>onLoad: function (options) &#123;<br>  console.log(options)//potions中传过来的数据<br>&#125;,<br><br>// 3.2详情页返回首页携带数据（通过修改首页数据，从而达到效果）<br>首页js：<br>data: &#123;<br>  title: &quot;首页&quot;<br>&#125;<br>详情页js：<br>onUnload: function ()&#123;<br>  // 1.获取首页的页面对象<br>  // getCurrentPages当前所有活跃（栈中）的页面<br>  const pages = getCurrentPages()<br>  home home = pages[pages.length-2];<br>  home.setData(&#123;<br>    title: &quot;返回的首页&quot;<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>wx的路由API</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 4.通过代码进行页面跳转 返回 --&gt;<br>&lt;button size=&#x27;mini&#x27; bind:tap=&quot;handlePushDetail&quot;&gt;跳到详情页&lt;/button&gt;<br>&lt;button size=&#x27;mini&#x27; bind:tap=&quot;handleBackDetail&quot;&gt;跳到详情页&lt;/button&gt;<br><br>//转跳<br>handlePushDetail()&#123;<br>  wx.navigateTo(&#123;<br>    url: &quot;https://luojing.top/detail?id=123456&amp;type=news&quot;<br>  &#125;)<br>&#125;<br>//返回<br>handleBackDetai()&#123;<br>  wx.navigateBack(&#123;<br>    delta: 1 //返回的层级<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>wxmp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【微信小程序】组件化开发</title>
    <link href="/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91/"/>
    <url>/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91/</url>
    
    <content type="html"><![CDATA[<p>小程序在刚刚推出时是不支持组件化的 ， 从v1.6.3开始, 小程序开始支持自定义组件开发。<br>组件类似于页面自定义组件由 json wxml wxss js 4个文件组成</p><h3 id="创建自定义组件"><a href="#创建自定义组件" class="headerlink" title="创建自定义组件"></a>创建自定义组件</h3><ol><li>首先需要在 json 文件中进行自定义组件声明（将 component 字段设为 true 可将这一组文件设为自定义组件）</li></ol><p><strong>json</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vue">&#123;<br>  &quot;component&quot;: true,<br>  &quot;usingComponents&quot;: &#123;&#125;,<br>  //组件中方法需要写到methods中<br>  methods: &#123;&#125;,<br>&#125;<br></code></pre></td></tr></table></figure><p>2）在wxml中编写属于我们组件自己的模板 <strong>wxml</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;view&gt;<br>  &lt;view class=&quot;my-cpn&quot;&gt;我是组件&lt;/view&gt;<br>&lt;/view&gt;<br></code></pre></td></tr></table></figure><p>3）在wxss中编写属于我们组件自己的相关样式 <strong>wxss</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">.my-cpn&#123;<br>  color:#f00;<br>&#125;<br></code></pre></td></tr></table></figure><p>4）在js文件中, 可以定义数据或组件内部的相关逻辑 <strong>js</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">Component(&#123;<br>  data: &#123;<br>    message: &quot;我是组件&quot;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="使用自定义组件"><a href="#使用自定义组件" class="headerlink" title="使用自定义组件"></a>使用自定义组件</h3><p>1）在需要引入组件的<strong>页面（ 或者组件 ）</strong>json文件的 usingComponents对象 中添加组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">&#123;<br>  usingComponents: &#123;<br>    &quot;roc-tabber&quot;: &quot;/components/roc-tabber/roc-tabber&quot;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2）在wxml中使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;roc-tabber&gt;&lt;/roc-tabber&gt;<br></code></pre></td></tr></table></figure><h4 id="组件创建使用的细节："><a href="#组件创建使用的细节：" class="headerlink" title="组件创建使用的细节："></a>组件创建使用的细节：</h4><ul><li>WXML 节点标签名只能是 <strong>小写字母、中划线和下划线 的组合</strong>，所以自定义组件的标签名也只能包含这些 字符。</li><li><strong>自定义组件也是可以引用自定义组件</strong>的，引用方法类似于页面引用自定义组件的方式（使用 usingComponents 对象）。</li><li>自定义组件和页面所在项目根目录名 <strong>不能以“wx-”为前缀</strong>，否则会报错。</li><li>如果在app.json的usingComponents声明某个组件，那么<strong>所有页面和组件可以直接使用该组件</strong>。</li></ul><h4 id="组件样式的细节："><a href="#组件样式的细节：" class="headerlink" title="组件样式的细节："></a>组件样式的细节：</h4><p>官方文档：</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html">https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html</a></p><ol><li><p>组件内的样式 对 外部样式 的影响</p><ul><li>组件内的class样式，只对组件wxml内的节点生效, 对于引用组件的Page页面不生效。</li><li>组件内不能使用id选择器、属性选择器、标签选择器</li></ul></li><li><p>外部样式 对 组件内样式 的影响</p><ul><li>外部使用class的样式，只对外部wxml的class生效，对组件内是不生效的</li><li>外部使用了id选择器、属性选择器不会对组件内产生影响</li><li>外部使用了标签选择器，会对组件内产生影响</li></ul></li></ol><p><strong>组件内的class样式和组件外的class样式, 默认是有一个隔离效果的； 为了防止样式的错乱，官方不推荐使用id、属性、标签选择器；</strong></p><ol start="3"><li>如何让class可以相互影响</li></ol><p>在Component对象中，可以传入一个options属性，其中options属性中有一个styleIsolation（隔离）属性。 styleIsolation有三个取值：</p><ul><li>isolated 表示启用样式隔离，在自定义组件内外，使用 class 指定的样式将不会相互影响（默认取值）</li><li>apply-shared 表示页面 wxss 样式将影响到自定义组件，但自定义组件 wxss 中指定的样式不会影响页面；</li><li>shared 表示页面 wxss 样式将影响到自定义组件，自定义组件 wxss 中指定的样式也会影响页面和其他设置</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">Component(&#123;<br>  options: &#123;<br>    styleIsolation: &quot;shared&quot;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="页面向组件传递数据（父传子）"><a href="#页面向组件传递数据（父传子）" class="headerlink" title="页面向组件传递数据（父传子）"></a>页面向组件传递数据（父传子）</h3><p>大部分情况下，组件只负责布局和样式，内容是由使用组件的对象决定的。 我们经常需要从外部传递数据给我们的组件，让我们的组件来进行展示。</p><p><strong>使用properties属性</strong></p><p>支持的类型：string、number、boolean、object、array、null（不限制类型）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">page页面:<br>&lt;roc-cpn title=&quot;标题&quot; &gt;&lt;/roc-cpn&gt;<br><br><br>roc-cpn组件：<br>Component(&#123;<br>  properties: &#123;<br>    title:&#123;<br>      type: String,<br>      value: &quot;&quot;,<br>      observer: function (newVal,oldVal)&#123;<br>        console.log(newVal, oldVal)<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;)<br><br>&lt;view&gt;&#123;&#123;title&#125;&#125;&lt;/view&gt;<br></code></pre></td></tr></table></figure><h3 id="页面向组件传递样式"><a href="#页面向组件传递样式" class="headerlink" title="页面向组件传递样式"></a><strong>页面向组件传递样式</strong></h3><p>有时候，我们不希望将样式在组件内固定不变，而是外部可以决定样式。</p><p>我们可以使用externalClasses属性：</p><ul><li>在Component对象中，定义externalClasses属性</li><li>在组件内的wxml中使用externalClasses属性中的class</li><li>在页面中传入对应的class，并且给这个class设置样式</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vue">roc-cpn组件中<br>Component(&#123;<br>  externalClasses: [&#x27;title&#x27;]<br>&#125;)<br>&lt;view class=&quot;title&quot;&gt;我是标题&lt;/view&gt;<br><br>page页面中wxss：<br>.title&#123;<br>  color:#f00;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="组件向页面传递事件-自定义事件（子传父）"><a href="#组件向页面传递事件-自定义事件（子传父）" class="headerlink" title="组件向页面传递事件-自定义事件（子传父）"></a>组件向页面传递事件-自定义事件（子传父）</h3><p>有时候是自定义组件内部发生了事件，需要告知使用者，这个时候可以使用自定义事件</p><p><strong>使用triggerEvent方法</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">roc-cpn组件中:<br>wxml<br>&lt;view&gt;<br>  &lt;ul&gt;<br>    &lt;li wx:for=&quot;&#123;&#123;[&quot;rocyuan1&quot;, &quot;rocyuan2&quot;, &quot;rocyuan3&quot;]&#125;&#125;&quot; bind:tap=&quot;liClick&quot; data-index=&quot;&#123;&#123;index&#125;&#125;&quot;&gt;&lt;/li&gt;<br>  &lt;/ul&gt;<br>&lt;/view&gt;<br>js<br>Component(&#123;<br>  methods: &#123;<br>    liClick(e)&#123;<br>      //拿到页面传过来的index值<br>      const index = e.target.dataset.index<br>      this.triggerEvent(&#x27;liClick&#x27;, &#123;index&#125;, &#123;&#125;)<br>    &#125;<br>  &#125;<br>&#125;)<br><br><br>page中:<br>wxml<br>&lt;view bind:liClick=&quot;liClick&quot;&gt;&lt;/view&gt;<br>js<br>page(&#123;<br>  liClick(e)&#123;<br>    console.log(e.detail.index)<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="页面直接调用组件的方法"><a href="#页面直接调用组件的方法" class="headerlink" title="页面直接调用组件的方法"></a>页面直接调用组件的方法</h3><p><strong>使用 this.selectComponent  类似Vue中 this.$refs</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">page页面中:<br>wxml<br>&lt;view bind:tap=&quot;viewClick&quot;&gt;&lt;/view&gt;<br>&lt;roc-cpn id=&quot;roc-cpn&quot; &gt;&lt;/roc-cpn&gt;<br><br>js<br>page(&#123;<br>  viewClick()&#123;<br>    console.log(&quot;view被点击&quot;)<br>    this.selectComponent(&quot;#roc-cpn&quot;).isShow()<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="插槽基本使用（单个）"><a href="#插槽基本使用（单个）" class="headerlink" title="插槽基本使用（单个）"></a>插槽基本使用（单个）</h3><p>除了内容和样式可能由外界决定之外，也可能外界想决定显示的方式 ； 比如我们有一个组件定义了头部和尾部，但是中间的内容可能是一段文字，也可能是一张图片，或者是一个进度条…等等。<br>在不确定外界想插入什么其他组件的前提下，我们可以在组件内预留<strong>插槽</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">roc-tabbar组件中：<br>&lt;view&gt;<br>  &lt;view&gt;我是左边部分&lt;/view&gt;<br>  &lt;slot&gt;&lt;/slot&gt;<br>  &lt;view&gt;我是右边部分&lt;/view&gt;<br>&lt;/view&gt;<br><br>page页面中：<br>&lt;roc-tabbar&gt;<br>  &lt;text&gt;我是显示在中间的文字&lt;/text&gt; &lt;!-- 可以是其他元素 --&gt;<br>&lt;/roc-tabbar&gt;<br></code></pre></td></tr></table></figure><h3 id="多个插槽使用（具名插槽）"><a href="#多个插槽使用（具名插槽）" class="headerlink" title="多个插槽使用（具名插槽）"></a>多个插槽使用（具名插槽）</h3><p>有时候为了让组件更加灵活, 我们需要定义多个插槽，因为是多个插槽，插入的内容怎么知道去替换哪一个插槽？这是我们可以给插槽起名字（具名插槽）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">roc-tabbar组件中：<br>&lt;view&gt;<br>  &lt;view&gt;&lt;slot name=&quot;left&quot;&gt;&lt;/slot&gt;&lt;/view&gt;<br>  &lt;view&gt;&lt;slot name=&quot;center&quot;&gt;&lt;/slot&gt;&lt;/view&gt;<br>  &lt;view&gt;&lt;slot name=&quot;right&quot;&gt;&lt;/slot&gt;&lt;/view&gt;<br>&lt;/view&gt;<br><br>Component(&#123;<br>  options: &#123;<br>    multipleSlots: true<br>  &#125;<br>&#125;)<br><br>page页面中：<br>&lt;roc-tabber&gt;<br>  &lt;text slot=&quot;left&quot;&gt;我是左边的&lt;/text&gt;<br>  &lt;text slot=&quot;center&quot;&gt;我是中间的&lt;/text&gt;<br>  &lt;text slot=&quot;right&quot;&gt;我是右边的&lt;/text&gt;<br>&lt;/roc-tabber&gt;<br></code></pre></td></tr></table></figure><h3 id="Component构造器设置项"><a href="#Component构造器设置项" class="headerlink" title="Component构造器设置项"></a>Component构造器设置项</h3><p>官方文档：</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/component.html">https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/component.html</a></p><h4 id="properties"><a href="#properties" class="headerlink" title="properties"></a>properties</h4><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91/1.png"></p><h4 id="data"><a href="#data" class="headerlink" title="data"></a>data</h4><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91/2.png"></p><h4 id="methods"><a href="#methods" class="headerlink" title="methods"></a>methods</h4><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91/3.png"></p><h4 id="options"><a href="#options" class="headerlink" title="options"></a>options</h4><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91/4.png"></p><h4 id="externalClasses"><a href="#externalClasses" class="headerlink" title="externalClasses"></a>externalClasses</h4><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91/5.png"></p><h4 id="observers"><a href="#observers" class="headerlink" title="observers"></a>observers</h4><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91/6.png"></p><h4 id="pageLifetimes"><a href="#pageLifetimes" class="headerlink" title="pageLifetimes"></a>pageLifetimes</h4><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91/7.png"></p><h4 id="lefetimes"><a href="#lefetimes" class="headerlink" title="lefetimes"></a>lefetimes</h4><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91/8.png"></p>]]></content>
    
    
    <categories>
      
      <category>wxmp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【微信小程序】事件处理相关</title>
    <link href="/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%9B%B8%E5%85%B3/"/>
    <url>/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%9B%B8%E5%85%B3/</url>
    
    <content type="html"><![CDATA[<h3 id="常见事件类型："><a href="#常见事件类型：" class="headerlink" title="常见事件类型："></a><strong>常见事件类型：</strong></h3><p>某些组件会有自己特性的事件类型<br>比如input有bindinput&#x2F;bindblur&#x2F;bindfocus等<br>比如scroll-view有bindscrolltowpper&#x2F;bindscrolltolower等<br>组件共同都有的事件, 并且比较常见：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!--<br>  事件处理<br>--&gt;<br>&lt;!-- 绑定点击事件 --&gt;<br>&lt;button bindtap=&quot;clickName&quot;&gt;&lt;/button&gt;<br>&lt;button bind:tap=&quot;clickName&quot;&gt;&lt;/button&gt;<br>&lt;!-- bind与catch区别：下面事件冒泡和捕获有记录 --&gt;<br>&lt;button catch:tap=&quot;clickName&quot;&gt;&lt;/button&gt;<br><br>&lt;!-- 常见的事件 所有组件都有事件 --&gt;<br>&lt;!-- 手指开始触摸 --&gt;<br>&lt;view bind:touchstart=&quot;onTouchstart&quot;&gt;&lt;/view&gt;<br>&lt;!-- 手指移动 --&gt;<br>&lt;view bind:touchmove=&quot;onTouchmove&quot;&gt;&lt;/view&gt;<br>&lt;!-- 手指离开 --&gt;<br>&lt;view bind:touchend=&quot;onTouchend&quot;&gt;&lt;/view&gt;<br>&lt;!-- 点击 --&gt;<br>&lt;view bind:tap=&quot;onTap&quot;&gt;&lt;/view&gt;<br>&lt;!--  longpress 与 tap 只会执行其中一个 --&gt;<br>&lt;view bind:longpress=&quot;onLongpress&quot;&gt;&lt;/view&gt;<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%9B%B8%E5%85%B3/1.png"></p><h3 id="事件对象event"><a href="#事件对象event" class="headerlink" title="事件对象event"></a>事件对象event</h3><p>当某个事件触发时, 会产生一个事件对象, 并且这个对象被传入到回调函数中</p><p><strong>常见的事件对象属性</strong></p><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%9B%B8%E5%85%B3/2.png"></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">type：事件类型<br>timeStamp：打开网页经过多长时间（毫秒）触发了点击<br>target：当前button的信息<br>currentTarget：当前button的信息（有时候与target相同）<br>detail：点击的位置坐标（x,y）<br>touches: 记录几根手指触摸了按钮的信息[&#123;&#125;,&#123;&#125;]<br>changedTouches: 记录几根手指触摸了按钮的信息[&#123;&#125;,&#123;&#125;]（有时候与touches相同）<br></code></pre></td></tr></table></figure><p><strong>事件对象中touches，changedTouches区别</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">1.touchend事件中不同；<br>2.多手指触摸不同<br>  touches：当前几根手指按屏的信息<br>  changedTouches：只记录有变化的手指按屏信息<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%9B%B8%E5%85%B3/3.png"></p><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%9B%B8%E5%85%B3/4.png"></p><p><strong>事件对象中target，currentTarget区别</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vue">target：当前产生事件的view信息（所按到的view）<br>currentTarget：当前触发事件的view（事件冒泡的view）<br></code></pre></td></tr></table></figure><h3 id="事件参数的传递"><a href="#事件参数的传递" class="headerlink" title="事件参数的传递"></a>事件参数的传递</h3><p>当视图层发生事件时，某些情况需要事件<strong>携带一些参数到执行的函数</strong>中, 这个时候就可以通过<strong>data-属性</strong>来完成<br>渲染层 传递：data-属性的名称<br>逻辑层 接收：event.target.dataset.属性的名称</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue"> &lt;view <br>  bind:tap=&quot;itemClick&quot;<br>  data-index=&quot;&#123;&#123;index&#125;&#125;&quot;<br>  data-item=&quot;&#123;&#123;item&#125;&#125;&quot;<br>  &gt;&lt;/view&gt;<br><br>itemClick(event)&#123;<br>  event.target.dataset.index<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="事件冒泡和事件捕获"><a href="#事件冒泡和事件捕获" class="headerlink" title="事件冒泡和事件捕获"></a>事件冒泡和事件捕获</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">先捕获，后冒泡<br>  事件捕获：从最外层开始往内传<br>    capture-bind:tap=&quot;&quot;<br>  事件冒泡：从最内层开始往外传<br>    bind:tap=&quot;&quot;<br><br>  bind： 会一层层进行传递<br>  catch： 阻止事件的下一步传递<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%9B%B8%E5%85%B3/5.png"></p>]]></content>
    
    
    <categories>
      
      <category>wxmp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【微信小程序】WXSS、WXML、WXS</title>
    <link href="/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91WXSS%E3%80%81WXML%E3%80%81WXS/"/>
    <url>/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91WXSS%E3%80%81WXML%E3%80%81WXS/</url>
    
    <content type="html"><![CDATA[<h3 id="WXSS"><a href="#WXSS" class="headerlink" title="WXSS"></a>WXSS</h3><ol><li>行内（内联）样式：style  </li><li>页面（外联）样式 class id …  </li><li>全局样式 app.wxss</li></ol><p>权重 ： 行内 &gt; 页面 &gt; 全局</p><p><strong>单位：</strong></p><p>wxss单位：rpx (小程序适配)<br>iphone6（750）为标准：1px &#x3D;&#x3D; 2rpx</p><p><strong>样式导入：</strong></p><p>可以在app.wxss中导入这个样式 ；也可以在page.wxss导入这个样式<br>@import “路径”</p><p><strong>官方样式库：</strong></p><p>WeUI.wxss基本样式库 ： <a href="https://github.com/Tencent/weui-wxss">https://github.com/Tencent/weui-wxss</a></p><h3 id="WXML"><a href="#WXML" class="headerlink" title="WXML"></a>WXML</h3><p>wxml只能用wx中的组件 view, text, image… ； 大小写敏感 class Class不同</p><p><strong>1）Mustache语法</strong> ：</p><p><strong>2）逻辑判断 wx:if …</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vue">wx:if<br>wx:elif<br>wx:else<br><br>hidden<br><br>wx:if 与 hidden区别（v-if v-show）： v-if=&quot;false&quot;在dom中没有不存在，hidden只是添加了display： none<br></code></pre></td></tr></table></figure><p><strong>3）列表渲染 wx:for</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs vue">1. 遍历数组、字符串、数字<br>  item index，会自动生成的<br>  &lt;view wx:for=&quot;&#123;&#123;[1, 2, 3, 4]&#125;&#125;&quot;&gt;&#123;&#123;item&#125;&#125; &#123;&#123;index&#125;&#125;&lt;/view&gt;<br>  &lt;view wx:for=&quot;rocyuan&quot;&gt;&#123;&#123;item&#125;&#125; &#123;&#123;index&#125;&#125;&lt;/view&gt;<br>  &lt;view wx:for=&quot;&#123;&#123;5&#125;&#125;&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/view&gt;  // 01234<br><br>2. block标签：包裹一组组件的标签 并非组件（不会在界面上渲染，只接收控制属性）<br>  &lt;block&gt;&lt;/block&gt;<br><br>3. item/index起名字<br>  wx:for-item=&quot;inner_item&quot;<br>  wx:for-index=&quot;inner_index&quot;<br><br>  &lt;view wx:for=&quot;&#123;&#123;arr&#125;&#125;&quot; <br>        wx:for-item=&quot;inner_item&quot;<br>        wx:for-index=&quot;inner_index&quot;&gt;<br>        &#123;&#123;inner_item&#125;&#125; &#123;&#123;inner_index&#125;&#125;<br>  &lt;/view&gt;<br><br>4. wx:key（唯一标识）<br>  没有key：中间改变一项，后面全都会变<br>  有key：利用key直接复用更改后的虚拟dom<br>  &lt;view wx:for=&quot;&#123;&#123;arr&#125;&#125;&quot; wx:key=&quot;&#123;&#123;index&#125;&#125;&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/view&gt;<br><br>key的作用主要是为了高效的更新虚拟DOM。<br></code></pre></td></tr></table></figure><p><strong>4）模板用法 template</strong></p><p>WXML提供<strong>模板（template），</strong>可以在模板中定义代码片段，在不同的地方调用。(是一种wxml代码的复用机制) ;<br>使用 name 属性，作为模板的名字, 然后在 <template/> 内定义代码片段</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- <br>  基本使用<br>  template包裹的内容,没有被使用，是不会被渲染的<br>  使用 is=&quot;name&quot;<br> --&gt;<br>&lt;template name=&quot;content&quot;&gt;<br>  &lt;button&gt;按钮&lt;/button&gt;<br>  &lt;view&gt;哈哈&lt;/view&gt;<br>&lt;/template&gt;<br>&lt;template is=&quot;content&quot;&gt;&lt;/template&gt;<br>&lt;template is=&quot;content&quot;&gt;&lt;/template&gt;<br>&lt;!-- 带数据 --&gt;<br>&lt;template name=&quot;content&quot;&gt;<br>  &lt;button&gt;&#123;&#123;btnText&#125;&#125;&lt;/button&gt;<br>  &lt;view&gt;&#123;&#123;content&#125;&#125;&lt;/view&gt;<br>&lt;/template&gt;<br>&lt;template is=&quot;content&quot; data=&quot;&#123;&#123;btnText: &quot;按钮&quot;, content: &quot;哈哈哈&quot;&#125;&#125;&quot;&gt;&lt;/template&gt;<br>&lt;template is=&quot;content&quot; data=&quot;&#123;&#123;btnText: &quot;按钮&quot;, content: &quot;哈哈哈&quot;&#125;&#125;&quot;&gt;&lt;/template&gt;<br></code></pre></td></tr></table></figure><p><strong>5）wxml的引入</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- <br>  1）import: <br>    主要导入template<br>    不可以多个连接导入<br>  2）include:<br>    将wxml中的公共组件抽取到一个文件中导入<br>    不能导入template、wxs，可以多个连接导入<br> --&gt;<br> &lt;import src=&quot;template.wxml&quot;/&gt;<br> &lt;include src=&quot;page.wxml&quot;/&gt;<br></code></pre></td></tr></table></figure><h3 id="WXS"><a href="#WXS" class="headerlink" title="WXS"></a>WXS</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxs/">https://developers.weixin.qq.com/miniprogram/dev/reference/wxs/</a></p><p>WXS（WeiXin Script）是小程序的一套脚本语言，结合 WXML，可以构建出页面的结构。<br>WXS 与 JavaScript 是不同的语言，有自己的语法，并不和 JavaScript 一致。<br>以上摘自官方文档，但个人觉得 基本一致</p><p><strong>为什么要用wxs？</strong></p><p>在WXML中是不能直接调用Page、Component中定义的方法的；<br>但某些情况, 我们希望使用方法来处理WXML中的数据(类似于Vue中的过滤器)，这个时候就使用WXS了。</p><p><strong>wxs写法</strong></p><p>1） 写在<wxs>标签中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">  &lt;wxs module=&quot;info&quot;&gt;<br>  //js代码<br>  var message = &quot;消息&quot;<br>  var name = &quot;rocyuan&quot;<br>  //wxml中就可以使用此方法<br>  var add = function(a, b)&#123;<br>    return a+b<br>  &#125;<br><br>  module.exports = &#123;<br>    message: message,<br>    name: name,<br>    add: add<br>  &#125;<br>&lt;/wxs&gt;<br>&lt;view&gt;&#123;&#123;info.message&#125;&#125;&lt;/view&gt;<br>&lt;view&gt;&#123;&#123;info.name&#125;&#125;&lt;/view&gt;<br>&lt;view&gt;&#123;&#123;info.add(1,2)&#125;&#125;&lt;/view&gt;<br></code></pre></td></tr></table></figure><p>2）写在以.wxs结尾的文件中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 不能使用绝对路径的，必须相对路径 --&gt;<br>&lt;wxs src=&quot;../../wxs/info.wxs&quot; module=&quot;info&quot; /&gt;<br>&lt;view&gt;&#123;&#123;info.message&#125;&#125;&lt;/view&gt;<br>&lt;view&gt;&#123;&#123;info.name&#125;&#125;&lt;/view&gt;<br>&lt;view&gt;&#123;&#123;info.add(1,2)&#125;&#125;&lt;/view&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>wxmp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【微信小程序】配置文件相关</title>
    <link href="/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3/"/>
    <url>/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3/</url>
    
    <content type="html"><![CDATA[<h3 id="开发工具下载"><a href="#开发工具下载" class="headerlink" title="开发工具下载"></a>开发工具下载</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html">https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html</a></p><h3 id="文件结构"><a href="#文件结构" class="headerlink" title="文件结构"></a>文件结构</h3><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3/1.png"></p><h3 id="常见的配置文件"><a href="#常见的配置文件" class="headerlink" title="常见的配置文件"></a>常见的配置文件</h3><p>project.config.json：项目配置文件, 比如项目名称、appid等；</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html">https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html</a></p><p>sitemap.json：小程序搜索相关的；</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html">https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html</a></p><p>app.json：全局配置；</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE">https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE</a> <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html">h</a></p><p>page.json：页面配置； </p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE">https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE</a></p><h3 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html">https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html</a></p><table><thead><tr><th><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#pages">pages</a></th><th>string[]</th><th>页面路径列表</th></tr></thead><tbody><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#window">window</a></td><td>Object</td><td>全局的默认窗口表现</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#tabBar">tabBar</a></td><td>Object</td><td>底部 tab 栏的表现</td></tr></tbody></table><p><strong>更多配置点击上方链接</strong></p><h3 id="页面配置"><a href="#页面配置" class="headerlink" title="页面配置"></a><strong>页面配置</strong></h3><p>每个小程序中的页面可以使用 .json 文件来对本页面的窗口进行配置；页面中配置项在当前页面会覆盖 app.json 的 window 中相同的配置项。</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html">https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html</a></p><table><thead><tr><th><strong>属性</strong></th><th><strong>类型</strong></th><th><strong>默认值</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>navigationBarBackgroundColor</td><td>HexColor</td><td>#000000</td><td>导航栏背景颜色，如 #000000</td></tr><tr><td>navigationBarTextStyle</td><td>string</td><td>white</td><td>导航栏标题颜色，仅支持 black &#x2F; white</td></tr><tr><td>navigationBarTitleText</td><td>string</td><td></td><td>导航栏标题文字内容</td></tr><tr><td>usingComponents</td><td>Object</td><td>否</td><td>页面<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/">自定义组件</a></td></tr><tr><td>配置</td><td></td><td></td><td></td></tr></tbody></table><p>**更多配置点击上方链接 **</p>]]></content>
    
    
    <categories>
      
      <category>wxmp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【微信小程序】常见内置组件</title>
    <link href="/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E5%B8%B8%E8%A7%81%E5%86%85%E7%BD%AE%E7%BB%84%E4%BB%B6/"/>
    <url>/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E5%B8%B8%E8%A7%81%E5%86%85%E7%BD%AE%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/">https://developers.weixin.qq.com/miniprogram/dev/component/</a></p><h3 id="text"><a href="#text" class="headerlink" title="text"></a>text</h3><p>text组件用于显示文本, 类似于span标签, 是行内元素</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- <br>  1. 基本使用<br> --&gt;<br>&lt;text&gt;默认不能选中\n&lt;/text&gt;<br><br>&lt;!-- <br>  2. selectable是否可以被选中<br>  默认不能选中<br> --&gt;<br>&lt;text selectable &gt;selectable可以选中\n&lt;/text&gt;<br><br>&lt;!--<br>  3. space决定文本大小<br>  nbsp：默认<br>  ensp：半个中文大小<br>  emsp：中文大小<br> --&gt;<br>&lt;text&gt;space 可以选中\n&lt;/text&gt;<br>&lt;text space=&quot;nbsp&quot; &gt;space nbsp 可以选中\n&lt;/text&gt;<br>&lt;text space=&quot;ensp&quot; &gt;space ensp 可以选中\n&lt;/text&gt;<br>&lt;text space=&quot;emsp&quot; &gt;space emsp 可以选中\n&lt;/text&gt;<br><br>&lt;!-- <br>  4. decode是否解码文本<br>  decode可以解析的有   &lt; &gt; &amp; &#x27;    <br>  默认不解码<br> --&gt;<br> &lt;text decode &gt;5 &gt; 3&lt;/text&gt;<br></code></pre></td></tr></table></figure><h3 id="button"><a href="#button" class="headerlink" title="button"></a>button</h3><p>button组件用于创建按钮，默认块级元素</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- <br>  1. 基本使用<br>  默认独占一行 display：block<br> --&gt;<br>&lt;button&gt;按钮&lt;/button&gt;<br>&lt;button&gt;按钮&lt;/button&gt;<br><br>&lt;!-- <br>  size属性<br>  display:inline-block<br> --&gt;<br>&lt;button size=&quot;mini&quot;&gt;按钮size&lt;/button&gt;<br>&lt;button size=&quot;mini&quot;&gt;按钮size&lt;/button&gt;<br><br>&lt;!-- <br>  3. type属性<br> --&gt;<br>&lt;button size=&quot;mini&quot; type=&quot;primary&quot;&gt;按钮size&lt;/button&gt;<br>&lt;button size=&quot;mini&quot; type=&quot;warn&quot;&gt;按钮size&lt;/button&gt;<br>&lt;button size=&quot;mini&quot; type=&quot;default&quot;&gt;按钮size&lt;/button&gt;<br><br>&lt;!-- <br>  4. plain 镂空效果<br> --&gt;<br>&lt;button size=&quot;mini&quot; plain=&quot;&quot;&gt;按钮size&lt;/button&gt;<br><br>&lt;!-- <br>  5.disabled 不能点击置灰<br> --&gt;<br>&lt;button size=&quot;mini&quot; disabled &gt;按钮disabled&lt;/button&gt;<br><br>&lt;!-- <br>  6.loading<br>  加载中<br> --&gt;<br> &lt;button size=&quot;mini&quot; loading=&quot;&#123;&#123;true&#125;&#125;&quot;&gt;按钮&lt;/button&gt;<br><br>&lt;!-- <br>  7. hover-class<br>  按下的class名<br> --&gt;<br> &lt;button size=&quot;mini&quot; hover-class=&quot;rad&quot;&gt;按钮&lt;/button&gt;<br><br>&lt;!-- <br>  8. open-type<br>  微信开放能力<br> --&gt;<br> &lt;button size=&quot;mini&quot; open-type=&quot;share&quot;&gt;程序分享&lt;/button&gt;<br></code></pre></td></tr></table></figure><p><strong>open-type取值：</strong></p><table><thead><tr><th><strong>值</strong></th><th><strong>说明</strong></th><th><strong>最低版本</strong></th></tr></thead><tbody><tr><td>contact</td><td>打开客服会话，如果用户在会话中点击消息卡片后返回小程序，可以从 bindcontact 回调中获得具体信息，<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/customer-message/customer-message.html">具体说明</a></td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.1.0</a></td></tr><tr><td>share</td><td>触发用户转发，使用前建议先阅读<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/share.html#%E4%BD%BF%E7%94%A8%E6%8C%87%E5%BC%95">使用指引</a></td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.2.0</a></td></tr><tr><td>getPhoneNumber</td><td>获取用户手机号，可以从bindgetphonenumber回调中获取到用户信息，<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/getPhoneNumber.html">具体说明</a></td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.2.0</a></td></tr><tr><td>getUserInfo</td><td>获取用户信息，可以从bindgetuserinfo回调中获取到用户信息</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.3.0</a></td></tr><tr><td>launchApp</td><td>打开APP，可以通过app-parameter属性设定向APP传的参数<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/launchApp.html">具体说明</a></td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.9.5</a></td></tr><tr><td>openSetting</td><td>打开授权设置页</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.0.7</a></td></tr><tr><td>feedback</td><td>打开“意见反馈”页面，用户可提交反馈内容并上传<a href="https://developers.weixin.qq.com/miniprogram/dev/api/base/debug/wx.getLogManager.html">日志</a>，开发者可以登录<a href="https://mp.weixin.qq.com/">小程序管理后台</a></td><td></td></tr><tr><td>后进入左侧菜单“客服反馈”页面获取到反馈内容</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.1.0</a></td><td></td></tr></tbody></table><h3 id="view"><a href="#view" class="headerlink" title="view"></a>view</h3><p>视图组件（块级元素，独占一行，通常用作容器组件）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- <br>  1. 基本使用 （容器） 类似于div<br> --&gt;<br>&lt;view class=&quot;box&quot;&gt;&lt;text&gt;rocyuan&lt;/text&gt;&lt;/view&gt;<br><br>&lt;!-- <br>  2.hover-class：按下的class<br> --&gt;<br>&lt;view class=&quot;box1&quot; hover-class=&quot;hover&quot;&gt;&lt;text&gt;age&lt;/text&gt;&lt;/view&gt;<br><br>&lt;!-- <br>  3. hover-stay-time：手指离开多长时间会取消class hover  <br> --&gt;<br>&lt;view class=&quot;box1&quot; hover-class=&quot;hover&quot; hover-stay-time=&quot;0&quot;&gt;&lt;text&gt;age&lt;/text&gt;&lt;/view&gt;<br><br>&lt;!-- <br>  4. hover-stay-time：手指离开多长时间会取消class hover<br> --&gt;<br>&lt;view class=&quot;box1&quot; hover-class=&quot;hover&quot; hover-start-time=&quot;3000&quot;&gt;&lt;text&gt;age&lt;/text&gt;&lt;/view&gt;<br><br>&lt;!-- <br>  5. hover-stop-propagation: 阻止祖先组件的点击状态<br> --&gt;<br>&lt;view class=&quot;view1&quot; hover-class=&quot;hover1&quot;&gt;<br>  &lt;view class=&quot;view2&quot; hover-class=&quot;hover2&quot; hover-stop-propagation&gt;&lt;/view&gt;<br>&lt;/view&gt;<br></code></pre></td></tr></table></figure><h3 id="image"><a href="#image" class="headerlink" title="image"></a>image</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- <br>  image：<br>  可以写成单标签<br>  默认大小：320X240<br>  行内块级元素<br> --&gt;<br>&lt;image src=&quot;../../assets/img/tabbar/cart.png&quot;&gt;&lt;/image&gt;<br><br>&lt;!-- mode 取值 --&gt;<br>&lt;image mode=&quot;aspectFill&quot; src=&quot;../../assets/img/tabbar/cart.png&quot;&gt;&lt;/image&gt;<br><br>&lt;!-- 显示相册图片 --&gt;<br>&lt;button bindtap=&quot;upImage&quot;&gt;选择照片&lt;/button&gt;<br>&lt;image src=&quot;&#123;&#123;imageUrl&#125;&#125;&quot;&gt;&lt;/image&gt;<br><br>Page(&#123;<br>  /**<br>   * 页面的初始数据<br>   */<br>  data: &#123;<br>    imageUrl:&quot;&quot;<br>  &#125;,<br>  upImage()&#123;<br>    //微信API<br>    wx.chooseImage(&#123;<br>      complete: (res) =&gt; &#123;<br>        const url = res.tempFilePaths[0]<br>        console.log(url)<br>        this.setData(&#123;<br>          imageUrl: url<br>        &#125;)<br>      &#125;,<br>    &#125;)<br>  &#125;,<br>&#125;)<br><br>&lt;!-- <br>  图片加载完成事件：bindload<br>  图片懒加载 加 lazy-load 属性就好<br> --&gt;<br><br>&lt;!-- <br>  show-menu-by-longpress<br>  长按图片识别小程序码<br> --&gt;<br> &lt;image src=&quot;../../assets/img/tabbar/cart.png&quot; show-menu-by-longpress&gt;&lt;/image&gt;<br></code></pre></td></tr></table></figure><p><strong>mode取值：</strong></p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/image.html">https://developers.weixin.qq.com/miniprogram/dev/component/image.html</a></p><h3 id="input"><a href="#input" class="headerlink" title="input"></a>input</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/input.html">https://developers.weixin.qq.com/miniprogram/dev/component/input.html</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 1. 基本使用 --&gt;<br>&lt;input type=&quot;text&quot; placeholder=&quot;输入...&quot; placeholder-class=&quot;p-style&quot;&gt;&lt;/input&gt;<br><br>&lt;!-- 2. password --&gt;<br>&lt;input password=&quot;&quot; placeholder=&quot;输入...&quot; placeholder-class=&quot;p-style&quot;&gt;&lt;/input&gt;<br><br>&lt;!-- 3. type: 类型，number数字键盘 --&gt;<br>&lt;input type=&quot;number&quot;&gt;&lt;/input&gt;<br><br>&lt;!-- 4. confirm-type: 键盘右下角的类型 --&gt;<br>&lt;input confirm-type=&quot;send&quot;&gt;&lt;/input&gt;<br><br>&lt;!-- <br>  5. 事件绑定和监听<br>  bindinput 键盘输入时触发 event.detail = &#123;value, cursor, keyCode&#125;，keyCode 为键值<br>  bindfocus 输入框聚焦时触发 event.detail = &#123; value, height &#125;，height 为键盘高度<br>  bindblur  输入框失去焦点时触发 event.detail = &#123;value: value&#125;<br>  bindconfirm 点击完成按钮时触发 event.detail = &#123;value: value&#125;<br> --&gt;<br>&lt;input bindinput=&quot;&quot; bindfocus=&quot;&quot; bindblur=&quot;&quot; bindconfirm=&quot;&quot;&gt;&lt;/input&gt;<br></code></pre></td></tr></table></figure><h3 id="scroll-view"><a href="#scroll-view" class="headerlink" title="scroll-view"></a>scroll-view</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html">https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 水平滚动 --&gt;<br>&lt;scroll-view class=&quot;scroll-box&quot; scroll-x &gt;<br>    &lt;view class=&quot;scroll-item&quot; wx:for=&quot;&#123;&#123;30&#125;&#125;&quot; wx:key=&quot;x&quot;&gt;item&lt;/view&gt;<br>&lt;/scroll-view&gt;<br><br>&lt;!-- <br>  垂直滚动<br>  bindscrolltoupper 滚动到顶部<br>  bindscrolltolower 滚动到底部<br>  bindscroll 滚动时触发，event.detail = &#123;scrollLeft, scrollTop, scrollHeight, scrollWidth, deltaX, deltaY&#125;<br> --&gt;<br>&lt;scroll-view<br>  class=&quot;scroll-box2&quot;<br>  scroll-y<br>  bindscrolltoupper=&quot;upper&quot;<br>  bindscrolltolower=&quot;lower&quot;<br>  bindscroll=&quot;scroll&quot;<br>  &gt;<br>    &lt;view class=&quot;scroll-item2&quot; wx:for=&quot;&#123;&#123;30&#125;&#125;&quot; wx:key=&quot;x&quot;&gt;item&lt;/view&gt;<br>&lt;/scroll-view&gt;<br></code></pre></td></tr></table></figure><h3 id="共同属性"><a href="#共同属性" class="headerlink" title="共同属性"></a>共同属性</h3><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E5%B8%B8%E8%A7%81%E5%86%85%E7%BD%AE%E7%BB%84%E4%BB%B6/1.png"></p>]]></content>
    
    
    <categories>
      
      <category>wxmp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【微信小程序】渲染机制</title>
    <link href="/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E6%B8%B2%E6%9F%93%E6%9C%BA%E5%88%B6/"/>
    <url>/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E6%B8%B2%E6%9F%93%E6%9C%BA%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<h3 id="小程序的双线程模型"><a href="#小程序的双线程模型" class="headerlink" title="小程序的双线程模型"></a>小程序的双线程模型</h3><p>小程序运行在<strong>微信客户端（宿主环境）； 宿主环境</strong>为了执行小程序的各种文件：wxml文件、 wxss文件、js文件 ； 提供了小程序的双线程模型<br>WXML和WXSS运行于 渲染层；<br>js 运行于 逻辑层；<br>这两个线程都会由<strong>微信客户端</strong>进行中转交互。</p><h3 id="界面渲染过程"><a href="#界面渲染过程" class="headerlink" title="界面渲染过程"></a>界面渲染过程</h3><p><strong>wxml</strong>相当于一棵DOM树，可以使用一个JS对象来模拟（虚拟DOM）</p><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E6%B8%B2%E6%9F%93%E6%9C%BA%E5%88%B6/1.png"></p><p><strong>WXML</strong>先转成JS对象 （虚拟DOM） ，再渲染出真正的DOM树</p><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E6%B8%B2%E6%9F%93%E6%9C%BA%E5%88%B6/2.png"></p><h3 id="界面渲染过程-–-数据发生变化"><a href="#界面渲染过程-–-数据发生变化" class="headerlink" title="界面渲染过程 – 数据发生变化"></a>界面渲染过程 – 数据发生变化</h3><p>通过setData把msg数据从“Hello World”变 成“Goodbye”</p><ul><li><strong>逻辑层js中的</strong>msg发生变化后，产生的<strong>JS对象（虚拟DOM）</strong>对应的节点就会发生变化</li><li>对比发生变化前后的两个<strong>JS对象（ 虚拟DOM ）</strong>得到变化的部分，应用到Dom树上</li><li>从而达到更新UI的目的，这就是“数据驱动”的原理</li></ul><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E6%B8%B2%E6%9F%93%E6%9C%BA%E5%88%B6/3.png"></p><h3 id="总结渲染整体流程："><a href="#总结渲染整体流程：" class="headerlink" title="总结渲染整体流程："></a>总结渲染整体流程：</h3><ul><li><strong>宿主环境（微信客户端）</strong>会把WXML转化成对应的JS对象（虚拟DOM）；</li><li>将<strong>JS对象（虚拟DOM）</strong>再次转成真实DOM树，交由<strong>渲染层线程</strong>渲染 ；</li><li>数据变化时，<strong>逻辑层</strong>提供最新的变化数据，<strong>JS对象（虚拟Dom）</strong>发生变化比较进行diff算法对比；</li><li>将最新变化的内容反映到真实的DOM树中，更新UI；</li></ul>]]></content>
    
    
    <categories>
      
      <category>wxmp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【微信小程序】启动流程&amp;生命周期</title>
    <link href="/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B&amp;%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
    <url>/wxmp/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B&amp;%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
    
    <content type="html"><![CDATA[<p>小程序的启动流程图</p><p><img src="/../../assets/%E3%80%90%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B&%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/1.png"></p><p>看懂了小程序的<strong>双线程模型渲染机制</strong>，很好理解上图<br><strong>双线程模型</strong>参考： <a href="https://luojing.top/rocyuan/?p=667">https://luojing.top/rocyuan/?p=667</a></p><h3 id="注册小程序App-参数"><a href="#注册小程序App-参数" class="headerlink" title="注册小程序App-参数"></a>注册小程序App-参数</h3><p>每个小程序都需要在 app.js 中调用 App 方法注册小程序示例 ； 在注册时, 可以绑定对应的生命周期函数, 在生命周期函数中, 执行对应的代码.</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html">https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html</a></p><table><thead><tr><th><strong>属性</strong></th><th><strong>类型</strong></th><th><strong>必填</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html#onLaunch-Object-object">onLaunch</a></td><td>function</td><td>否</td><td>生命周期回调——监听小程序初始化。</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html#onShow-Object-object">onShow</a></td><td>function</td><td>否</td><td>生命周期回调——监听小程序启动或切前台。</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html#onHide">onHide</a></td><td>function</td><td>否</td><td>生命周期回调——监听小程序切后台。</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html#onError-String-error">onError</a></td><td>function</td><td>否</td><td>错误监听函数。</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html#onPageNotFound-Object-object">onPageNotFound</a></td><td>function</td><td>否</td><td>页面不存在监听函数。</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html#onUnhandledRejection-Object-object">onUnhandledRejection</a></td><td>function</td><td>否</td><td>未处理的 Promise 拒绝事件监听函数。</td></tr><tr><td>其他</td><td>any</td><td>否</td><td>开发者可以添加任意的函数或数据变量到 Object 参数中，用 this 可以访问</td></tr></tbody></table><h3 id="注册App时一般会做什么"><a href="#注册App时一般会做什么" class="headerlink" title="注册App时一般会做什么"></a>注册App时一般会做什么</h3><ol><li><p>判断小程序进入场景（扫码进入、小程序列表进入、朋友分享进入……）<br><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/scene-list.html">https://developers.weixin.qq.com/miniprogram/dev/reference/scene-list.html</a><br><strong>如何确定场景?</strong><br>在onLaunch和onShow生命周期回调函数中,会有options参数，其中有scene值</p></li><li><p>监听生命周期（获取用户信息业务逻辑，…等）</p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs vue">全局app生命周期<br>初始化完成：onlaunch<br>小程序显示：onShow<br>小程序隐藏：onHide<br>小程序出错：onError<br>找不到页面：onPageNotFound<br><br>//onlaunch：<br>获取用户信息：<br>1）接口即将废弃<br>wx.getUserInfo(&#123;<br>success: function (res) &#123;<br>//用户信息<br>console.log(res)<br>&#125;<br>&#125;)<br><br>2）需要点击才获取用户信息(1.open-type, 2.bindgetuserinfo)<br>&lt;button size=&quot;mini&quot;<br>open-type=&quot;getUserInfo&quot;<br>bindgetuserinfo=&quot;getUserInfo&quot;<br>&gt;获取授权&lt;/button&gt;<br><br>page(&#123;<br>getUserInfo: (event) &#123;<br>console.log(event)<br>&#125;<br>&#125;)<br><br>3) open-data组件展示用户信息，只能展示<br>&lt;open-data type=&quot;userNickName&quot;&gt;&lt;/open-data&gt;<br></code></pre></td></tr></table></figure><ol start="3"><li>App()实例只有一个，是全局共享的（单例对象），可以放一些共享数据</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">共享数据：<br>app.js<br>App(&#123;<br>globalData: &#123;<br>name: rocyuan<br>age: 18<br>&#125;<br>&#125;)<br><br>page.js<br>Page(&#123;<br>//getApp() 获取App()产生的示例对象<br>const app = getApp()<br>const name = app.globalData.name<br>const name = app.globalData.age<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="注册小程序Page-参数"><a href="#注册小程序Page-参数" class="headerlink" title="注册小程序Page-参数"></a>注册小程序Page-参数</h3><p>小程序中的每个页面, 都有一个对应的js文件, 其中调用Page方法注册页面示例 ； 在注册时, 可以绑定初始化数据、生命周期回调、事件处理函数等。<br><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html">https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html</a></p><table><thead><tr><th><strong>属性</strong></th><th><strong>类型</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#data">data</a></td><td>Object</td><td>页面的初始数据</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onLoad-Object-query">onLoad</a></td><td>function</td><td>生命周期回调—监听页面加载</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onShow">onShow</a></td><td>function</td><td>生命周期回调—监听页面显示</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onReady">onReady</a></td><td>function</td><td>生命周期回调—监听页面初次渲染完成</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onHide">onHide</a></td><td>function</td><td>生命周期回调—监听页面隐藏</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onUnload">onUnload</a></td><td>function</td><td>生命周期回调—监听页面卸载</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onPullDownRefresh">onPullDownRefresh</a></td><td>function</td><td>监听用户下拉动作</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onReachBottom">onReachBottom</a></td><td>function</td><td>页面上拉触底事件的处理函数</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onShareAppMessage-Object-object">onShareAppMessage</a></td><td>function</td><td>用户点击右上角转发</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onPageScroll-Object-object">onPageScroll</a></td><td>function</td><td>页面滚动触发事件的处理函数</td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onResize-Object-object">onResize</a></td><td>function</td><td>页面尺寸改变时触发，详见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/resizable.html#%E5%9C%A8%E6%89%8B%E6%9C%BA%E4%B8%8A%E5%90%AF%E7%94%A8%E5%B1%8F%E5%B9%95%E6%97%8B%E8%BD%AC%E6%94%AF%E6%8C%81">响应显示区域变化</a></td></tr><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onTabItemTap-Object-object">onTabItemTap</a></td><td>function</td><td>当前是 tab 页时，点击 tab 时触发</td></tr><tr><td>其他</td><td>any</td><td>开发者可以添加任意的函数或数据到 Object 参数中，在页面的函数中用 this 可以访问</td></tr></tbody></table><h3 id="注册Page时一般会干什么"><a href="#注册Page时一般会干什么" class="headerlink" title="注册Page时一般会干什么"></a>注册Page时一般会干什么</h3><ol><li>监听页面的生命周期函数</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vue">page声明周期<br>onLoad: 页面加载<br>onShow: 页面显示<br>onReady: 页面初次渲染完成<br>onHide: 页面隐藏<br>onUnload: 页面被卸载掉（关系到跳转）<br></code></pre></td></tr></table></figure><ol start="2"><li>初始化数据 data:{}，用于被wxml展示</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">page(&#123;<br>  data: &#123;<br>    message: &quot;hello wx&quot;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><ol start="3"><li>监听wxml中的事件，绑定对应的事件函数</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;view bindtap=&quot;tapName&quot;&gt;&lt;/view&gt;<br>page(&#123;<br>  tapName(e)&#123;<br>    console.log(e)<br>    console.log(&quot;点击&quot;)<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><ol start="4"><li>监听页面其他事件（滚动，上拉加载更多…页面滚动到底部，下拉刷新）</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs vue">监听页面滚动事件： <br>onPageScroll (obj) &#123;<br>console.log(obj)<br>&#125;<br><br>监听页面滚动到底部：<br>onReachBottom () &#123;<br>console.log(&quot;滚动到底部&quot;)<br>&#125;<br><br>下拉刷新：<br>onPullDownRefresh () &#123;<br>console.log(&quot;下拉刷新中&quot;)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>wxmp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】拖动侧边栏</title>
    <link href="/js/%E3%80%90js%E3%80%91%E6%8B%96%E5%8A%A8%E4%BE%A7%E8%BE%B9%E6%A0%8F/"/>
    <url>/js/%E3%80%90js%E3%80%91%E6%8B%96%E5%8A%A8%E4%BE%A7%E8%BE%B9%E6%A0%8F/</url>
    
    <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>拖动侧边栏<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">      * &#123;</span><br><span class="language-css">        user-select: none;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">      <span class="hljs-selector-class">.wrap</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">      <span class="hljs-selector-class">.left</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ccc</span>;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">      <span class="hljs-selector-class">.line</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">        <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">4px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#000</span>;</span><br><span class="language-css">        <span class="hljs-attribute">cursor</span>: col-resize;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">      <span class="hljs-selector-class">.right</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f99</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wrap&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;left&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;left&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;line&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;line&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;right&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;right&quot;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">       * 拖动侧边栏</span></span><br><span class="hljs-comment"><span class="language-javascript">       */</span></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">dragSidebar</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> minWidth = <span class="hljs-number">200</span>;</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> maxWidth = <span class="hljs-number">500</span>;</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> left = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#left&quot;</span>);</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> line = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#line&quot;</span>);</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> right = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#right&quot;</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">        line.<span class="hljs-property">onmousedown</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">const</span> startX = e.<span class="hljs-property">clientX</span>;</span><br><span class="language-javascript">          line.<span class="hljs-property">left</span> = line.<span class="hljs-property">offsetLeft</span>;</span><br><span class="language-javascript">          <span class="hljs-variable language_">document</span>.<span class="hljs-property">onmousemove</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> moveLen = line.<span class="hljs-property">left</span> + (e.<span class="hljs-property">clientX</span> - startX);</span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (moveLen &gt;= minWidth &amp;&amp; moveLen &lt;= maxWidth) &#123;</span><br><span class="language-javascript">              line.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = moveLen + <span class="hljs-string">&quot;px&quot;</span>;</span><br><span class="language-javascript">              left.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = moveLen + <span class="hljs-string">&quot;px&quot;</span>;</span><br><span class="language-javascript">              right.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">clientWidth</span> - moveLen + <span class="hljs-string">&quot;px&quot;</span>;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">          &#125;;</span><br><span class="language-javascript">          <span class="hljs-variable language_">document</span>.<span class="hljs-property">onmouseup</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-property">onmousemove</span> = <span class="hljs-literal">null</span>;</span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-property">onmouseup</span> = <span class="hljs-literal">null</span>;</span><br><span class="language-javascript">          &#125;;</span><br><span class="language-javascript">        &#125;;</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">      <span class="hljs-title function_">dragSidebar</span>();</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】多端复制内容</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91%E5%A4%9A%E7%AB%AF%E5%A4%8D%E5%88%B6%E5%86%85%E5%AE%B9/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91%E5%A4%9A%E7%AB%AF%E5%A4%8D%E5%88%B6%E5%86%85%E5%AE%B9/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//复制内容</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">uniCopy</span>(<span class="hljs-params">&#123;</span><br><span class="hljs-params">content,</span><br><span class="hljs-params">success,</span><br><span class="hljs-params">error</span><br><span class="hljs-params">&#125;</span>) &#123;<br><br>content = <span class="hljs-keyword">typeof</span> content === <span class="hljs-string">&#x27;string&#x27;</span> ? content : content.<span class="hljs-title function_">toString</span>() <span class="hljs-comment">// 复制内容，必须字符串，数字需要转换为字符串</span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 小程序端 和 app端的复制逻辑</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">//#ifndef H5</span><br>uni.<span class="hljs-title function_">setClipboardData</span>(&#123;<br><span class="hljs-attr">data</span>: content,<br><span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-title function_">success</span>(<span class="hljs-string">&quot;复制成功~&quot;</span>)<br>&#125;,<br><span class="hljs-attr">fail</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;复制失败~&quot;</span>)<br>&#125;<br>&#125;);<br><span class="hljs-comment">//#endif</span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * H5端的复制逻辑</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">// #ifdef H5</span><br><span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandSupported</span>(<span class="hljs-string">&#x27;copy&#x27;</span>)) &#123; <span class="hljs-comment">//为了兼容有些浏览器 queryCommandSupported 的判断</span><br><span class="hljs-comment">// 不支持</span><br><span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;浏览器不支持&#x27;</span>)<br>&#125;<br><span class="hljs-keyword">let</span> textarea = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;textarea&quot;</span>)<br>textarea.<span class="hljs-property">value</span> = content<br>textarea.<span class="hljs-property">readOnly</span> = <span class="hljs-string">&quot;readOnly&quot;</span><br><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(textarea)<br>textarea.<span class="hljs-title function_">select</span>() <span class="hljs-comment">// 选择对象</span><br>textarea.<span class="hljs-title function_">setSelectionRange</span>(<span class="hljs-number">0</span>, content.<span class="hljs-property">length</span>) <span class="hljs-comment">//核心</span><br><span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">&quot;copy&quot;</span>) <span class="hljs-comment">// 执行浏览器复制命令</span><br><span class="hljs-keyword">if</span> (result) &#123;<br><span class="hljs-title function_">success</span>(<span class="hljs-string">&quot;复制成功~&quot;</span>)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;复制失败，请检查h5中调用该方法的方式，是不是用户点击的方式调用的，如果不是请改为用户点击的方式触发该方法，因为h5中安全性，不能js直接调用！&quot;</span>)<br>&#125;<br>textarea.<span class="hljs-title function_">remove</span>()<br><span class="hljs-comment">// #endif</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【git】常用git命令及操作场景</title>
    <link href="/git/%E3%80%90git%E3%80%91%E5%B8%B8%E7%94%A8git%E5%91%BD%E4%BB%A4%E5%8F%8A%E6%93%8D%E4%BD%9C%E5%9C%BA%E6%99%AF/"/>
    <url>/git/%E3%80%90git%E3%80%91%E5%B8%B8%E7%94%A8git%E5%91%BD%E4%BB%A4%E5%8F%8A%E6%93%8D%E4%BD%9C%E5%9C%BA%E6%99%AF/</url>
    
    <content type="html"><![CDATA[<p>git-book<br><a href="https://git-scm.com/book/zh/v2">https://git-scm.com/book/zh/v2</a></p><h1 id="刚才提交了什么"><a href="#刚才提交了什么" class="headerlink" title="刚才提交了什么"></a>刚才提交了什么</h1><p>如果你用 git commit -a 提交了一次变化(changes)，而你又不确定到底这次提交了哪些内容。你就可以用下面的命令显示当前HEAD上的最近一次的提交(commit):</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git show<br></code></pre></td></tr></table></figure><p>或者</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git <span class="hljs-built_in">log</span> -n1 -p<br></code></pre></td></tr></table></figure><h1 id="我的提交信息-commit-message-写错了"><a href="#我的提交信息-commit-message-写错了" class="headerlink" title="我的提交信息(commit message)写错了"></a>我的提交信息(commit message)写错了</h1><p>如果你的提交信息(commit message)写错了且这次提交(commit)还没有推(push), 你可以通过下面的方法来修改提交信息(commit message):</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git commit --amend --only<br></code></pre></td></tr></table></figure><p>这会打开你的默认编辑器, 在这里你可以编辑信息. 另一方面, 你也可以用一条命令一次完成:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git commit --amend --only -m <span class="hljs-string">&#x27;xxxxxxx&#x27;</span><br></code></pre></td></tr></table></figure><p>如果你已经推(push)了这次提交(commit), 你可以修改这次提交(commit)然后强推(force push), 但是不推荐这么做。</p><h1 id="我提交-commit-里的用户名和邮箱不对"><a href="#我提交-commit-里的用户名和邮箱不对" class="headerlink" title="我提交(commit)里的用户名和邮箱不对"></a>我提交(commit)里的用户名和邮箱不对</h1><p>如果这只是单个提交(commit)，修改它：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git commit --amend --author <span class="hljs-string">&quot;New Authorname &lt;authoremail@mydomain.com&gt;&quot;</span><br></code></pre></td></tr></table></figure><p>如果你需要修改所有历史, 参考 ‘git filter-branch’的指南页</p><h1 id="我想从一个提交-commit-里移除一个文件"><a href="#我想从一个提交-commit-里移除一个文件" class="headerlink" title="我想从一个提交(commit)里移除一个文件"></a>我想从一个提交(commit)里移除一个文件</h1><p>通过下面的方法，从一个提交(commit)里移除一个文件:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git checkout HEAD^ myfile<br>$ git add -A<br>$ git commit --amend<br></code></pre></td></tr></table></figure><p>这将非常有用，当你有一个开放的补丁(open patch)，你往上面提交了一个不必要的文件，你需要强推(force push)去更新这个远程补丁。</p><h1 id="我想删除我的最后一次提交-commit"><a href="#我想删除我的最后一次提交-commit" class="headerlink" title="我想删除我的最后一次提交(commit)"></a>我想删除我的最后一次提交(commit)</h1><p>如果你需要删除推了的提交(pushed commits)，你可以使用下面的方法。可是，这会不可逆的改变你的历史，也会搞乱那些已经从该仓库拉取(pulled)了的人的历史。简而言之，如果你不是很确定，千万不要这么做。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git reset HEAD^ --hard<br>$ git push -f [remote] [branch]<br></code></pre></td></tr></table></figure><p>如果你还没有推到远程, 把Git重置(reset)到你最后一次提交前的状态就可以了(同时保存暂存的变化):</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(my-branch*)$ git reset --soft HEAD@&#123;1&#125;<br></code></pre></td></tr></table></figure><p>这只能在没有推送之前有用. 如果你已经推了, 唯一安全能做的是 git revert SHAofBadCommit， 那会创建一个新的提交(commit)用于撤消前一个提交的所有变化(changes)；或者, 如果你推的这个分支是rebase-safe的 (例如：其它开发者不会从这个分支拉), 只需要使用 <code>git push -f</code>。</p><h1 id="删除任意提交-commit"><a href="#删除任意提交-commit" class="headerlink" title="删除任意提交(commit)"></a>删除任意提交(commit)</h1><p>同样的警告：不到万不得已的时候不要这么做.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git rebase --onto SHA1_OF_BAD_COMMIT^ SHA1_OF_BAD_COMMIT<br>$ git push -f [remote] [branch]<br></code></pre></td></tr></table></figure><p>或者做一个 交互式rebase 删除那些你想要删除的提交(commit)里所对应的行。</p><h1 id="我尝试推一个修正后的提交-amended-commit-到远程，但是报错："><a href="#我尝试推一个修正后的提交-amended-commit-到远程，但是报错：" class="headerlink" title="我尝试推一个修正后的提交(amended commit)到远程，但是报错："></a>我尝试推一个修正后的提交(amended commit)到远程，但是报错：</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">To https://github.com/yourusername/repo.git<br>! [rejected]        mybranch -&gt; mybranch (non-fast-forward)<br>error: failed to push some refs to <span class="hljs-string">&#x27;https://github.com/tanay1337/webmaker.org.git&#x27;</span><br>hint: Updates were rejected because the tip of your current branch is behind<br>hint: its remote counterpart. Integrate the remote changes (e.g.<br>hint: <span class="hljs-string">&#x27;git pull ...&#x27;</span>) before pushing again.<br>hint: See the <span class="hljs-string">&#x27;Note about fast-forwards&#x27;</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;git push --help&#x27;</span> <span class="hljs-keyword">for</span> details.<br></code></pre></td></tr></table></figure><p>注意, rebasing(见下面)和修正(amending)会用一个新的提交(commit)代替旧的, 所以如果之前你已经往远程仓库上推过一次修正前的提交(commit)，那你现在就必须强推(force push) (-f)。注意 – 总是 确保你指明一个分支!</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(my-branch)$ git push origin mybranch -f<br></code></pre></td></tr></table></figure><p>一般来说, 要避免强推. 最好是创建和推(push)一个新的提交(commit)，而不是强推一个修正后的提交。后者会使那些与该分支或该分支的子分支工作的开发者，在源历史中产生冲突。</p><h1 id="我意外的做了一次硬重置-hard-reset-，我想找回我的内容"><a href="#我意外的做了一次硬重置-hard-reset-，我想找回我的内容" class="headerlink" title="我意外的做了一次硬重置(hard reset)，我想找回我的内容"></a>我意外的做了一次硬重置(hard reset)，我想找回我的内容</h1><p>如果你意外的做了 git reset –hard, 你通常能找回你的提交(commit), 因为Git对每件事都会有日志，且都会保存几天。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git reflog<br></code></pre></td></tr></table></figure><p>你将会看到一个你过去提交(commit)的列表, 和一个重置的提交。选择你想要回到的提交(commit)的SHA，再重置一次:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git reset --hard SHA1234<br></code></pre></td></tr></table></figure><p>这样就完成了。</p><h1 id="暂存-Staging"><a href="#暂存-Staging" class="headerlink" title="暂存(Staging)"></a>暂存(Staging)</h1><h2 id="我需要把暂存的内容添加到上一次的提交-commit"><a href="#我需要把暂存的内容添加到上一次的提交-commit" class="headerlink" title="我需要把暂存的内容添加到上一次的提交(commit)"></a>我需要把暂存的内容添加到上一次的提交(commit)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(my-branch*)$ git commit --amend<br></code></pre></td></tr></table></figure><p>我想要暂存一个新文件的一部分，而不是这个文件的全部<br>一般来说, 如果你想暂存一个文件的一部分, 你可这样做:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git add --patch filename.x<br></code></pre></td></tr></table></figure><p><code>-p</code>简写。这会打开交互模式， 你将能够用<code>s</code>选项来分隔提交(commit)；然而, 如果这个文件是新的, 会没有这个选择， 添加一个新文件时, 这样做:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git add -N filename.x<br></code></pre></td></tr></table></figure><p>然后, 你需要用<code>e</code>选项来手动选择需要添加的行，执行 git diff –cached 将会显示哪些行暂存了哪些行只是保存在本地了。</p><h2 id="我想把在一个文件里的变化-changes-加到两个提交-commit-里"><a href="#我想把在一个文件里的变化-changes-加到两个提交-commit-里" class="headerlink" title="我想把在一个文件里的变化(changes)加到两个提交(commit)里"></a>我想把在一个文件里的变化(changes)加到两个提交(commit)里</h2><p>git add 会把整个文件加入到一个提交. git add -p 允许交互式的选择你想要提交的部分.</p><h2 id="我想把暂存的内容变成未暂存，把未暂存的内容暂存起来"><a href="#我想把暂存的内容变成未暂存，把未暂存的内容暂存起来" class="headerlink" title="我想把暂存的内容变成未暂存，把未暂存的内容暂存起来"></a>我想把暂存的内容变成未暂存，把未暂存的内容暂存起来</h2><p>多数情况下，你应该将所有的内容变为未暂存，然后再选择你想要的内容进行commit。但假定你就是想要这么做，这里你可以创建一个临时的commit来保存你已暂存的内容，然后暂存你的未暂存的内容并进行stash。然后reset最后一个commit将原本暂存的内容变为未暂存，最后stash pop回来。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git commit -m <span class="hljs-string">&quot;WIP&quot;</span><br>$ git add .<br>$ git stash<br>$ git reset HEAD^<br>$ git stash pop --index 0<br></code></pre></td></tr></table></figure><p>注意1: 这里使用<code>pop</code>仅仅是因为想尽可能保持幂等。<br>注意2: 假如你不加上<code>--index</code>你会把暂存的文件标记为为存储。</p><h1 id="未暂存-Unstaged-的内容"><a href="#未暂存-Unstaged-的内容" class="headerlink" title="未暂存(Unstaged)的内容"></a>未暂存(Unstaged)的内容</h1><h2 id="我想把未暂存的内容移动到一个新分支"><a href="#我想把未暂存的内容移动到一个新分支" class="headerlink" title="我想把未暂存的内容移动到一个新分支"></a>我想把未暂存的内容移动到一个新分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git checkout -b my-branch<br></code></pre></td></tr></table></figure><h2 id="我想把未暂存的内容移动到另一个已存在的分支"><a href="#我想把未暂存的内容移动到另一个已存在的分支" class="headerlink" title="我想把未暂存的内容移动到另一个已存在的分支"></a>我想把未暂存的内容移动到另一个已存在的分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git stash<br>$ git checkout my-branch<br>$ git stash pop<br></code></pre></td></tr></table></figure><h2 id="我想丢弃本地未提交的变化-uncommitted-changes"><a href="#我想丢弃本地未提交的变化-uncommitted-changes" class="headerlink" title="我想丢弃本地未提交的变化(uncommitted changes)"></a>我想丢弃本地未提交的变化(uncommitted changes)</h2><p>如果你只是想重置源(origin)和你本地(local)之间的一些提交(commit)，你可以：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># one commit</span><br>(my-branch)$ git reset --hard HEAD^<br><span class="hljs-comment"># two commits</span><br>(my-branch)$ git reset --hard HEAD^^<br><span class="hljs-comment"># four commits</span><br>(my-branch)$ git reset --hard HEAD~4<br><span class="hljs-comment"># or</span><br>(main)$ git checkout -f<br></code></pre></td></tr></table></figure><h2 id="重置某个特殊的文件-你可以用文件名做为参数"><a href="#重置某个特殊的文件-你可以用文件名做为参数" class="headerlink" title="重置某个特殊的文件, 你可以用文件名做为参数:"></a>重置某个特殊的文件, 你可以用文件名做为参数:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git reset filename<br></code></pre></td></tr></table></figure><h2 id="我想丢弃某些未暂存的内容"><a href="#我想丢弃某些未暂存的内容" class="headerlink" title="我想丢弃某些未暂存的内容"></a>我想丢弃某些未暂存的内容</h2><p>如果你想丢弃工作拷贝中的一部分内容，而不是全部。<br>签出(checkout)不需要的内容，保留需要的。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git checkout -p<br><span class="hljs-comment"># Answer y to all of the snippets you want to drop</span><br><span class="hljs-comment"># 对要删除的所有代码段回答“y”</span><br></code></pre></td></tr></table></figure><p>另外一个方法是使用 stash， Stash所有要保留下的内容, 重置工作拷贝, 重新应用保留的部分。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git stash -p<br><span class="hljs-comment"># Select all of the snippets you want to save</span><br><span class="hljs-comment"># 选择要保存的所有代码段</span><br>$ git reset --hard<br>$ git stash pop<br></code></pre></td></tr></table></figure><p>或者, stash 你不需要的部分, 然后stash drop。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git stash -p<br><span class="hljs-comment"># Select all of the snippets you don&#x27;t want to save</span><br><span class="hljs-comment"># 选择所有不想保存的代码段</span><br>$ git stash drop<br></code></pre></td></tr></table></figure><h1 id="分支-Branches"><a href="#分支-Branches" class="headerlink" title="分支(Branches)"></a>分支(Branches)</h1><h2 id="我从错误的分支拉取了内容，或把内容拉取到了错误的分支"><a href="#我从错误的分支拉取了内容，或把内容拉取到了错误的分支" class="headerlink" title="我从错误的分支拉取了内容，或把内容拉取到了错误的分支"></a>我从错误的分支拉取了内容，或把内容拉取到了错误的分支</h2><p>这是另外一种使用 git reflog 情况，找到在这次错误拉(pull) 之前HEAD的指向。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git reflog<br>ab7555f HEAD@&#123;0&#125;: pull origin wrong-branch: Fast-forward<br>c5bc55a HEAD@&#123;1&#125;: checkout: checkout message goes here<br></code></pre></td></tr></table></figure><p>重置分支到你所需的提交(desired commit):</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git reset --hard c5bc55a<br></code></pre></td></tr></table></figure><p>完成。</p><h2 id="我想扔掉本地的提交-commit-，以便我的分支与远程的保持一致"><a href="#我想扔掉本地的提交-commit-，以便我的分支与远程的保持一致" class="headerlink" title="我想扔掉本地的提交(commit)，以便我的分支与远程的保持一致"></a>我想扔掉本地的提交(commit)，以便我的分支与远程的保持一致</h2><p>先确认你没有推(push)你的内容到远程。<br>git status 会显示你领先(ahead)源(origin)多少个提交:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">(my-branch)$ git status<br><span class="hljs-comment"># On branch my-branch</span><br><span class="hljs-comment"># Your branch is ahead of &#x27;origin/my-branch&#x27; by 2 commits.</span><br><span class="hljs-comment">#   (use &quot;git push&quot; to publish your local commits)</span><br></code></pre></td></tr></table></figure><p>一种方法是:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git reset --hard origin/my-branch<br></code></pre></td></tr></table></figure><h2 id="我需要提交到一个新分支，但错误的提交到了main"><a href="#我需要提交到一个新分支，但错误的提交到了main" class="headerlink" title="我需要提交到一个新分支，但错误的提交到了main"></a>我需要提交到一个新分支，但错误的提交到了main</h2><p>在main下创建一个新分支，不切换到新分支,仍在main下:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git branch my-branch<br></code></pre></td></tr></table></figure><p>把main分支重置到前一个提交:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git reset --hard HEAD^<br></code></pre></td></tr></table></figure><p><code>HEAD^</code> 是 <code>HEAD^1</code> 的简写，你可以通过指定要设置的HEAD来进一步重置。<br>或者, 如果你不想使用 <code>HEAD^</code>, 找到你想重置到的提交(commit)的hash(git log 能够完成)， 然后重置到这个hash。使用git push 同步内容到远程。<br>例如, main分支想重置到的提交的hash为a13b85e:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git reset --hard a13b85e<br>HEAD is now at a13b85e<br></code></pre></td></tr></table></figure><p>签出(checkout)刚才新建的分支继续工作:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git checkout my-branch<br></code></pre></td></tr></table></figure><h2 id="我想保留来自另外一个ref-ish的整个文件"><a href="#我想保留来自另外一个ref-ish的整个文件" class="headerlink" title="我想保留来自另外一个ref-ish的整个文件"></a>我想保留来自另外一个ref-ish的整个文件</h2><p>假设你正在做一个原型方案(原文为working spike (see note)), 有成百的内容，每个都工作得很好。现在, 你提交到了一个分支，保存工作内容:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(solution)$ git add -A &amp;&amp; git commit -m <span class="hljs-string">&quot;Adding all changes from this spike into one big commit.&quot;</span><br></code></pre></td></tr></table></figure><p>当你想要把它放到一个分支里 (可能是<code>feature</code>, 或者 <code>develop</code>), 你关心是保持整个文件的完整，你想要一个大的提交分隔成比较小。<br>假设你有:</p><ul><li>分支 <code>solution</code>, 拥有原型方案， 领先 <code>develop </code>分支。</li><li>分支 <code>develop</code>, 在这里你应用原型方案的一些内容。</li></ul><p>我去可以通过把内容拿到你的分支里，来解决这个问题:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(develop)$ git checkout solution -- file1.txt<br></code></pre></td></tr></table></figure><p>这会把这个文件内容从分支 solution 拿到分支 develop 里来:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># On branch develop</span><br><span class="hljs-comment"># Your branch is up-to-date with &#x27;origin/develop&#x27;.</span><br><span class="hljs-comment"># Changes to be committed:</span><br><span class="hljs-comment">#  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#        modified:   file1.txt</span><br></code></pre></td></tr></table></figure><p>然后, 正常提交。<br>Note: Spike solutions are made to analyze or solve the problem. These solutions are used for estimation and discarded once everyone gets clear visualization of the problem.</p><h2 id="我把几个提交-commit-提交到了同一个分支，而这些提交应该分布在不同的分支里"><a href="#我把几个提交-commit-提交到了同一个分支，而这些提交应该分布在不同的分支里" class="headerlink" title="我把几个提交(commit)提交到了同一个分支，而这些提交应该分布在不同的分支里"></a>我把几个提交(commit)提交到了同一个分支，而这些提交应该分布在不同的分支里</h2><p>假设你有一个main分支， 执行git log, 你看到你做过两次提交:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git <span class="hljs-built_in">log</span><br>commit e3851e817c451cc36f2e6f3049db528415e3c114<br>Author: Alex Lee &lt;alexlee@example.com&gt;<br>Date:   Tue Jul 22 15:39:27 2014 -0400<br><br>    Bug <span class="hljs-comment">#21 - Added CSRF protection</span><br><br>commit 5ea51731d150f7ddc4a365437931cd8be3bf3131<br>Author: Alex Lee &lt;alexlee@example.com&gt;<br>Date:   Tue Jul 22 15:39:12 2014 -0400<br><br>    Bug <span class="hljs-comment">#14 - Fixed spacing on title</span><br><br>commit a13b85e984171c6e2a1729bb061994525f626d14<br>Author: Aki Rose &lt;akirose@example.com&gt;<br>Date:   Tue Jul 21 01:12:48 2014 -0400<br><br>    First commit<br></code></pre></td></tr></table></figure><p>让我们用提交hash(commit hash)标记bug (<code>e3851e8 </code>for #21, <code>5ea5173 </code>for #14).<br>首先, 我们把<code>main</code>分支重置到正确的提交(<code>a13b85e</code>):</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git reset --hard a13b85e<br>HEAD is now at a13b85e<br></code></pre></td></tr></table></figure><p>现在, 我们对 bug #21 创建一个新的分支:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git checkout -b 21<br>(21)$<br></code></pre></td></tr></table></figure><p>接着, 我们用 cherry-pick 把对bug #21的提交放入当前分支。这意味着我们将应用(apply)这个提交(commit)，仅仅这一个提交(commit)，直接在HEAD上面。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(21)$ git cherry-pick e3851e8<br></code></pre></td></tr></table></figure><p>这时候, 这里可能会产生冲突， 参见交互式 rebasing 章 冲突节 解决冲突.<br>再者， 我们为bug #14 创建一个新的分支, 也基于main分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">(21)$ git checkout main<br>(main)$ git checkout -b 14<br>(14)$<br></code></pre></td></tr></table></figure><p>最后, 为 bug #14 执行 cherry-pick:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(14)$ git cherry-pick 5ea5173<br></code></pre></td></tr></table></figure><h2 id="我想删除上游-upstream-分支被删除了的本地分支"><a href="#我想删除上游-upstream-分支被删除了的本地分支" class="headerlink" title="我想删除上游(upstream)分支被删除了的本地分支"></a>我想删除上游(upstream)分支被删除了的本地分支</h2><p>一旦你在github 上面合并(merge)了一个pull request, 你就可以删除你fork里被合并的分支。如果你不准备继续在这个分支里工作, 删除这个分支的本地拷贝会更干净，使你不会陷入工作分支和一堆陈旧分支的混乱之中。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git fetch -p<br></code></pre></td></tr></table></figure><h2 id="我不小心删除了我的分支"><a href="#我不小心删除了我的分支" class="headerlink" title="我不小心删除了我的分支"></a>我不小心删除了我的分支</h2><p>如果你定期推送到远程, 多数情况下应该是安全的，但有些时候还是可能删除了还没有推到远程的分支。让我们先创建一个分支和一个新的文件:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git checkout -b my-branch<br>(my-branch)$ git branch<br>(my-branch)$ <span class="hljs-built_in">touch</span> foo.txt<br>(my-branch)$ <span class="hljs-built_in">ls</span><br>README.md foo.txt<br></code></pre></td></tr></table></figure><p>添加文件并做一次提交</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">(my-branch)$ git add .<br>(my-branch)$ git commit -m <span class="hljs-string">&#x27;foo.txt added&#x27;</span><br>(my-branch)$ foo.txt added<br> 1 files changed, 1 insertions(+)<br> create mode 100644 foo.txt<br>(my-branch)$ git <span class="hljs-built_in">log</span><br><br>commit 4e3cd85a670ced7cc17a2b5d8d3d809ac88d5012<br>Author: siemiatj &lt;siemiatj@example.com&gt;<br>Date:   Wed Jul 30 00:34:10 2014 +0200<br><br>    foo.txt added<br><br>commit 69204cdf0acbab201619d95ad8295928e7f411d5<br>Author: Kate Hudson &lt;katehudson@example.com&gt;<br>Date:   Tue Jul 29 13:14:46 2014 -0400<br><br>    Fixes <span class="hljs-comment">#6: Force pushing after amending commits</span><br></code></pre></td></tr></table></figure><p>现在我们切回到主(main)分支，‘不小心的’删除<code>my-branch</code>分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">(my-branch)$ git checkout main<br>Switched to branch <span class="hljs-string">&#x27;main&#x27;</span><br>Your branch is up-to-date with <span class="hljs-string">&#x27;origin/main&#x27;</span>.<br>(main)$ git branch -D my-branch<br>Deleted branch my-branch (was 4e3cd85).<br>(main)$ <span class="hljs-built_in">echo</span> oh noes, deleted my branch!<br>oh noes, deleted my branch!<br></code></pre></td></tr></table></figure><p>在这时候你应该想起了reflog, 一个升级版的日志，它存储了仓库(repo)里面所有动作的历史。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git reflog<br>69204cd HEAD@&#123;0&#125;: checkout: moving from my-branch to main<br>4e3cd85 HEAD@&#123;1&#125;: commit: foo.txt added<br>69204cd HEAD@&#123;2&#125;: checkout: moving from main to my-branch<br></code></pre></td></tr></table></figure><p>正如你所见，我们有一个来自删除分支的提交hash(commit hash)，接下来看看是否能恢复删除了的分支。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git checkout -b my-branch-help<br>Switched to a new branch <span class="hljs-string">&#x27;my-branch-help&#x27;</span><br>(my-branch-help)$ git reset --hard 4e3cd85<br>HEAD is now at 4e3cd85 foo.txt added<br>(my-branch-help)$ <span class="hljs-built_in">ls</span><br>README.md foo.txt<br></code></pre></td></tr></table></figure><p>看! 我们把删除的文件找回来了。Git的 reflog 在rebasing出错的时候也是同样有用的。</p><h2 id="我想删除一个分支"><a href="#我想删除一个分支" class="headerlink" title="我想删除一个分支"></a>我想删除一个分支</h2><p>删除一个远程分支:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git push origin --delete my-branch<br></code></pre></td></tr></table></figure><p>你也可以:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git push origin :my-branch<br></code></pre></td></tr></table></figure><p>删除一个本地分支:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git branch -D my-branch<br></code></pre></td></tr></table></figure><h2 id="我想从别人正在工作的远程分支签出-checkout-一个分支"><a href="#我想从别人正在工作的远程分支签出-checkout-一个分支" class="headerlink" title="我想从别人正在工作的远程分支签出(checkout)一个分支"></a>我想从别人正在工作的远程分支签出(checkout)一个分支</h2><p>首先, 从远程拉取(fetch) 所有分支:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git fetch --all<br></code></pre></td></tr></table></figure><p>假设你想要从远程的daves分支签出到本地的daves</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git checkout --track origin/daves<br>Branch daves <span class="hljs-built_in">set</span> up to track remote branch daves from origin.<br>Switched to a new branch <span class="hljs-string">&#x27;daves&#x27;</span><br></code></pre></td></tr></table></figure><p>(<code>--track</code> 是 <code>git checkout -b [branch] [remotename]/[branch]</code> 的简写)<br>这样就得到了一个<code>daves</code>分支的本地拷贝, 任何推过(pushed)的更新，远程都能看到.</p><h1 id="Rebasing-和合并-Merging"><a href="#Rebasing-和合并-Merging" class="headerlink" title="Rebasing 和合并(Merging)"></a>Rebasing 和合并(Merging)</h1><h2 id="我想撤销rebase-merge"><a href="#我想撤销rebase-merge" class="headerlink" title="我想撤销rebase&#x2F;merge"></a>我想撤销rebase&#x2F;merge</h2><p>你可以合并(merge)或rebase了一个错误的分支, 或者完成不了一个进行中的rebase&#x2F;merge。Git 在进行危险操作的时候会把原始的HEAD保存在一个叫ORIG_HEAD的变量里, 所以要把分支恢复到rebase&#x2F;merge前的状态是很容易的。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(my-branch)$ git reset --hard ORIG_HEAD<br></code></pre></td></tr></table></figure><h2 id="我已经rebase过-但是我不想强推-force-push"><a href="#我已经rebase过-但是我不想强推-force-push" class="headerlink" title="我已经rebase过, 但是我不想强推(force push)"></a>我已经rebase过, 但是我不想强推(force push)</h2><p>不幸的是，如果你想把这些变化(changes)反应到远程分支上，你就必须得强推(force push)。是因你快进(Fast forward)了提交，改变了Git历史, 远程分支不会接受变化(changes)，除非强推(force push)。这就是许多人使用 merge 工作流, 而不是 rebasing 工作流的主要原因之一， 开发者的强推(force push)会使大的团队陷入麻烦。使用时需要注意，一种安全使用 rebase 的方法是，不要把你的变化(changes)反映到远程分支上, 而是按下面的做:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git checkout my-branch<br>(my-branch)$ git rebase -i main<br>(my-branch)$ git checkout main<br>(main)$ git merge --ff-only my-branch<br></code></pre></td></tr></table></figure><h2 id="我需要组合-combine-几个提交-commit"><a href="#我需要组合-combine-几个提交-commit" class="headerlink" title="我需要组合(combine)几个提交(commit)"></a>我需要组合(combine)几个提交(commit)</h2><p>假设你的工作分支将会做对于 main 的pull-request。一般情况下你不关心提交(commit)的时间戳，只想组合 所有 提交(commit) 到一个单独的里面, 然后重置(reset)重提交(recommit)。确保主(main)分支是最新的和你的变化都已经提交了, 然后:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">(my-branch)$ git reset --soft main<br>(my-branch)$ git commit -am <span class="hljs-string">&quot;New awesome feature&quot;</span><br></code></pre></td></tr></table></figure><p>如果你想要更多的控制, 想要保留时间戳, 你需要做交互式rebase (interactive rebase):</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(my-branch)$ git rebase -i main<br></code></pre></td></tr></table></figure><p>如果没有相对的其它分支， 你将不得不相对自己的HEAD 进行 rebase。例如：你想组合最近的两次提交(commit), 你将相对于HEAD<del>2 进行rebase， 组合最近3次提交(commit), 相对于HEAD</del>3, 等等。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git rebase -i HEAD~2<br></code></pre></td></tr></table></figure><p>在你执行了交互式 rebase的命令(interactive rebase command)后, 你将在你的编辑器里看到类似下面的内容:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">pick a9c8a1d Some refactoring<br>pick 01b2fd8 New awesome feature<br>pick b729ad5 fixup<br>pick e3851e8 another fix<br><br><span class="hljs-comment"># Rebase 8074d12..b729ad5 onto 8074d12</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Commands:</span><br><span class="hljs-comment">#  p, pick = use commit</span><br><span class="hljs-comment">#  r, reword = use commit, but edit the commit message</span><br><span class="hljs-comment">#  e, edit = use commit, but stop for amending</span><br><span class="hljs-comment">#  s, squash = use commit, but meld into previous commit</span><br><span class="hljs-comment">#  f, fixup = like &quot;squash&quot;, but discard this commit&#x27;s log message</span><br><span class="hljs-comment">#  x, exec = run command (the rest of the line) using shell</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># These lines can be re-ordered; they are executed from top to bottom.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># If you remove a line here THAT COMMIT WILL BE LOST.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># However, if you remove everything, the rebase will be aborted.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Note that empty commits are commented out</span><br></code></pre></td></tr></table></figure><p>所有以 # 开头的行都是注释, 不会影响 rebase.<br>然后，你可以用任何上面命令列表的命令替换 pick, 你也可以通过删除对应的行来删除一个提交(commit)。<br>例如, 如果你想 单独保留最旧(first)的提交(commit),组合所有剩下的到第二个里面, 你就应该编辑第二个提交(commit)后面的每个提交(commit) 前的单词为 <code>f</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">pick a9c8a1d Some refactoring<br>pick 01b2fd8 New awesome feature<br>f b729ad5 fixup<br>f e3851e8 another fix<br></code></pre></td></tr></table></figure><p>如果你想组合这些提交(commit) 并重命名这个提交(commit), 你应该在第二个提交(commit)旁边添加一个<code>r</code>，或者更简单的用<code>s</code> 替代 <code>f</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">pick a9c8a1d Some refactoring<br>pick 01b2fd8 New awesome feature<br>s b729ad5 fixup<br>s e3851e8 another fix<br></code></pre></td></tr></table></figure><p>你可以在接下来弹出的文本提示框里重命名提交(commit)。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">Newer, awesomer features<br><br><span class="hljs-comment"># Please enter the commit message for your changes. Lines starting</span><br><span class="hljs-comment"># with &#x27;#&#x27; will be ignored, and an empty message aborts the commit.</span><br><span class="hljs-comment"># rebase in progress; onto 8074d12</span><br><span class="hljs-comment"># You are currently editing a commit while rebasing branch &#x27;main&#x27; on &#x27;8074d12&#x27;.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Changes to be committed:</span><br><span class="hljs-comment">#modified:   README.md</span><br><span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><p>如果成功了, 你应该看到类似下面的内容:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ Successfully rebased and updated refs/heads/main.<br></code></pre></td></tr></table></figure><h2 id="安全合并-merging-策略"><a href="#安全合并-merging-策略" class="headerlink" title="安全合并(merging)策略"></a>安全合并(merging)策略</h2><p><code>--no-commit</code> 执行合并(merge)但不自动提交, 给用户在做提交前检查和修改的机会。<code>no-ff</code> 会为特性分支(feature branch)的存在过留下证据, 保持项目历史一致。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git merge --no-ff --no-commit my-branch<br></code></pre></td></tr></table></figure><h2 id="我需要将一个分支合并成一个提交-commit"><a href="#我需要将一个分支合并成一个提交-commit" class="headerlink" title="我需要将一个分支合并成一个提交(commit)"></a>我需要将一个分支合并成一个提交(commit)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git merge --squash my-branch<br></code></pre></td></tr></table></figure><h2 id="我只想组合-combine-未推的提交-unpushed-commit"><a href="#我只想组合-combine-未推的提交-unpushed-commit" class="headerlink" title="我只想组合(combine)未推的提交(unpushed commit)"></a>我只想组合(combine)未推的提交(unpushed commit)</h2><p>有时候，在将数据推向上游之前，你有几个正在进行的工作提交(commit)。这时候不希望把已经推(push)过的组合进来，因为其他人可能已经有提交(commit)引用它们了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git rebase -i @&#123;u&#125;<br></code></pre></td></tr></table></figure><p>这会产生一次交互式的rebase(interactive rebase), 只会列出没有推(push)的提交(commit)， 在这个列表时进行reorder&#x2F;fix&#x2F;squash 都是安全的。</p><h2 id="检查是否分支上的所有提交-commit-都合并-merge-过了"><a href="#检查是否分支上的所有提交-commit-都合并-merge-过了" class="headerlink" title="检查是否分支上的所有提交(commit)都合并(merge)过了"></a>检查是否分支上的所有提交(commit)都合并(merge)过了</h2><p>检查一个分支上的所有提交(commit)是否都已经合并(merge)到了其它分支, 你应该在这些分支的head(或任何 commits)之间做一次diff:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git <span class="hljs-built_in">log</span> --graph --left-right --cherry-pick --oneline HEAD...feature/120-on-scroll<br></code></pre></td></tr></table></figure><p>这会告诉你在一个分支里有而另一个分支没有的所有提交(commit), 和分支之间不共享的提交(commit)的列表。另一个做法可以是:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git <span class="hljs-built_in">log</span> main ^feature/120-on-scroll --no-merges<br></code></pre></td></tr></table></figure><h2 id="交互式rebase-interactive-rebase-可能出现的问题"><a href="#交互式rebase-interactive-rebase-可能出现的问题" class="headerlink" title="交互式rebase(interactive rebase)可能出现的问题"></a>交互式rebase(interactive rebase)可能出现的问题</h2><p><strong>这个rebase 编辑屏幕出现’noop’</strong></p><p>如果你看到的是这样:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">noop<br></code></pre></td></tr></table></figure><p>这意味着你rebase的分支和当前分支在同一个提交(commit)上, 或者 领先(ahead) 当前分支。你可以尝试:</p><ul><li>检查确保主(main)分支没有问题</li><li>rebase  <code>HEAD~2</code> 或者更早</li></ul><p><strong>有冲突的情况</strong></p><p>如果你不能成功的完成rebase, 你可能必须要解决冲突。<br>首先执行 <code>git status</code> 找出哪些文件有冲突:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">(my-branch)$ git status<br>On branch my-branch<br>Changes not staged <span class="hljs-keyword">for</span> commit:<br>  (use <span class="hljs-string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)<br>  (use <span class="hljs-string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="hljs-keyword">in</span> working directory)<br><br> modified:   README.md<br></code></pre></td></tr></table></figure><p>在这个例子里面, <code>README.md</code> 有冲突。打开这个文件找到类似下面的内容:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;&lt;&lt;&lt;&lt;&lt;&lt; <span class="hljs-string">HEAD</span><br><span class="hljs-string">some code</span><br><span class="hljs-string">=========</span><br><span class="hljs-string">some code</span><br><span class="hljs-string">&gt;&gt;&gt;&gt;&gt;&gt;&gt; new-commit</span><br></code></pre></td></tr></table></figure><p>你需要解决新提交的代码(示例里, 从中间<code>==</code>线到<code>new-commit</code>的地方)与<code>HEAD </code>之间不一样的地方.<br>有时候这些合并非常复杂，你应该使用可视化的差异编辑器(visual diff editor):</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main*)$ git mergetool -t opendiff<br></code></pre></td></tr></table></figure><p>在你解决完所有冲突和测试过后, git add 变化了的(changed)文件, 然后用git rebase –continue 继续rebase。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">(my-branch)$ git add README.md<br>(my-branch)$ git rebase --<span class="hljs-built_in">continue</span><br></code></pre></td></tr></table></figure><p>如果在解决完所有的冲突过后，得到了与提交前一样的结果, 可以执行git rebase –skip。<br>任何时候你想结束整个rebase 过程，回来rebase前的分支状态, 你可以做:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(my-branch)$ git rebase --abort<br></code></pre></td></tr></table></figure><h1 id="Stash"><a href="#Stash" class="headerlink" title="Stash"></a>Stash</h1><h2 id="暂存所有改动"><a href="#暂存所有改动" class="headerlink" title="暂存所有改动"></a>暂存所有改动</h2><p>暂存你工作目录下的所有改动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git stash<br></code></pre></td></tr></table></figure><p>你可以使用-u来排除一些文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git stash -u<br></code></pre></td></tr></table></figure><h2 id="暂存指定文件"><a href="#暂存指定文件" class="headerlink" title="暂存指定文件"></a>暂存指定文件</h2><p>假设你只想暂存某一个文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git stash push working-directory-path/filename.ext<br></code></pre></td></tr></table></figure><p>假设你想暂存多个文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git stash push working-directory-path/filename1.ext working-directory-path/filename2.ext<br></code></pre></td></tr></table></figure><h2 id="暂存时记录消息"><a href="#暂存时记录消息" class="headerlink" title="暂存时记录消息"></a>暂存时记录消息</h2><p>这样你可以在list时看到它</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git stash save &lt;message&gt;<br></code></pre></td></tr></table></figure><p>或</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git stash push -m &lt;message&gt;<br></code></pre></td></tr></table></figure><h2 id="使用某个指定暂存"><a href="#使用某个指定暂存" class="headerlink" title="使用某个指定暂存"></a>使用某个指定暂存</h2><p>首先你可以查看你的stash记录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git stash list<br></code></pre></td></tr></table></figure><p>然后你可以apply某个stash</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git stash apply <span class="hljs-string">&quot;stash@&#123;n&#125;&quot;</span><br></code></pre></td></tr></table></figure><p>此处， ‘n’是stash在栈中的位置，最上层的stash会是0<br>除此之外，也可以使用时间标记(假如你能记得的话)。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git stash apply <span class="hljs-string">&quot;stash@&#123;2.hours.ago&#125;&quot;</span><br></code></pre></td></tr></table></figure><h2 id="暂存时保留未暂存的内容"><a href="#暂存时保留未暂存的内容" class="headerlink" title="暂存时保留未暂存的内容"></a>暂存时保留未暂存的内容</h2><p>你需要手动create一个stash commit， 然后使用git stash store。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git stash create<br>$ git stash store -m <span class="hljs-string">&quot;commit-message&quot;</span> CREATED_SHA1<br></code></pre></td></tr></table></figure><h1 id="杂项-Miscellaneous-Objects"><a href="#杂项-Miscellaneous-Objects" class="headerlink" title="杂项(Miscellaneous Objects)"></a>杂项(Miscellaneous Objects)</h1><h2 id="克隆所有子模块"><a href="#克隆所有子模块" class="headerlink" title="克隆所有子模块"></a>克隆所有子模块</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git <span class="hljs-built_in">clone</span> --recursive git://github.com/foo/bar.git<br></code></pre></td></tr></table></figure><p>如果已经克隆了:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git submodule update --init --recursive<br></code></pre></td></tr></table></figure><h2 id="删除标签-tag"><a href="#删除标签-tag" class="headerlink" title="删除标签(tag)"></a>删除标签(tag)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git tag -d &lt;tag_name&gt;<br>$ git push &lt;remote&gt; :refs/tags/&lt;tag_name&gt;<br></code></pre></td></tr></table></figure><h2 id="恢复已删除标签-tag"><a href="#恢复已删除标签-tag" class="headerlink" title="恢复已删除标签(tag)"></a>恢复已删除标签(tag)</h2><p>如果你想恢复一个已删除标签(tag), 可以按照下面的步骤: 首先, 需要找到无法访问的标签(unreachable tag):</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git fsck --unreachable | grep tag<br></code></pre></td></tr></table></figure><p>记下这个标签(tag)的hash，然后用Git的 update-ref</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git update-ref refs/tags/&lt;tag_name&gt; &lt;<span class="hljs-built_in">hash</span>&gt;<br></code></pre></td></tr></table></figure><p>这时你的标签(tag)应该已经恢复了。</p><h2 id="已删除补丁-patch"><a href="#已删除补丁-patch" class="headerlink" title="已删除补丁(patch)"></a>已删除补丁(patch)</h2><p>如果某人在 GitHub 上给你发了一个pull request, 但是然后他删除了他自己的原始 fork, 你将没法克隆他们的提交(commit)或使用 <code>git am</code>。在这种情况下, 最好手动的查看他们的提交(commit)，并把它们拷贝到一个本地新分支，然后做提交。<br>做完提交后, 再修改作者，参见变更作者。然后, 应用变化, 再发起一个新的pull request。</p><h1 id="跟踪文件-Tracking-Files"><a href="#跟踪文件-Tracking-Files" class="headerlink" title="跟踪文件(Tracking Files)"></a>跟踪文件(Tracking Files)</h1><h2 id="我只想改变一个文件名字的大小写，而不修改内容"><a href="#我只想改变一个文件名字的大小写，而不修改内容" class="headerlink" title="我只想改变一个文件名字的大小写，而不修改内容"></a>我只想改变一个文件名字的大小写，而不修改内容</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git <span class="hljs-built_in">mv</span> --force myfile MyFile<br></code></pre></td></tr></table></figure><h2 id="我想从Git删除一个文件，但保留该文件"><a href="#我想从Git删除一个文件，但保留该文件" class="headerlink" title="我想从Git删除一个文件，但保留该文件"></a>我想从Git删除一个文件，但保留该文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git <span class="hljs-built_in">rm</span> --cached log.txt<br></code></pre></td></tr></table></figure><h1 id="配置-Configuration"><a href="#配置-Configuration" class="headerlink" title="配置(Configuration)"></a>配置(Configuration)</h1><h2 id="我想给一些Git命令添加别名-alias"><a href="#我想给一些Git命令添加别名-alias" class="headerlink" title="我想给一些Git命令添加别名(alias)"></a>我想给一些Git命令添加别名(alias)</h2><p>在 OS X 和 Linux 下, 你的 Git的配置文件储存在 <code>~/.gitconfig</code>。我在<code>[alias] </code>部分添加了一些快捷别名(和一些我容易拼写错误的)，如下:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">alias</span>]<br>    a = add<br>    amend = commit --amend<br>    c = commit<br>    ca = commit --amend<br>    ci = commit -a<br>    co = checkout<br>    d = diff<br>    dc = diff --changed<br>    ds = diff --staged<br>    f = fetch<br>    loll = <span class="hljs-built_in">log</span> --graph --decorate --pretty=oneline --abbrev-commit<br>    m = merge<br>    one = <span class="hljs-built_in">log</span> --pretty=oneline<br>    outstanding = rebase -i @&#123;u&#125;<br>    s = status<br>    unpushed = <span class="hljs-built_in">log</span> @&#123;u&#125;<br>    <span class="hljs-built_in">wc</span> = whatchanged<br>    wip = rebase -i @&#123;u&#125;<br>    zap = fetch -p<br></code></pre></td></tr></table></figure><h2 id="我想缓存一个仓库-repository-的用户名和密码"><a href="#我想缓存一个仓库-repository-的用户名和密码" class="headerlink" title="我想缓存一个仓库(repository)的用户名和密码"></a>我想缓存一个仓库(repository)的用户名和密码</h2><p>你可能有一个仓库需要授权，这时你可以缓存用户名和密码，而不用每次推&#x2F;拉(push&#x2F;pull)的时候都输入，credential helper能帮你。</p><p><a href="https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%87%AD%E8%AF%81%E5%AD%98%E5%82%A8">凭证存储文档</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git config --global credential.helper cache<br><span class="hljs-comment"># Set git to use the credential memory cache</span><br><span class="hljs-comment"># 将git设置为使用凭据内存缓存</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git config --global credential.helper <span class="hljs-string">&#x27;cache --timeout=3600&#x27;</span><br><span class="hljs-comment"># Set the cache to timeout after 1 hour (setting is in seconds)</span><br><span class="hljs-comment"># 将缓存设置为1小时后超时（设置为秒）</span><br></code></pre></td></tr></table></figure><h2 id="我不知道我做错了些什么"><a href="#我不知道我做错了些什么" class="headerlink" title="我不知道我做错了些什么"></a>我不知道我做错了些什么</h2><p>你把事情搞砸了：你 <code>重置(reset)</code> 了一些东西, 或者你合并了错误的分支, 亦或你强推了后找不到你自己的提交(commit)了。有些时候, 你一直都做得很好, 但你想回到以前的某个状态。<br>这就是 <code>git reflog</code> 的目的， <code>reflog </code>记录对分支顶端(the tip of a branch)的任何改变, 即使那个顶端没有被任何分支或标签引用。基本上, 每次HEAD的改变, 一条新的记录就会增加到<code>reflog</code>。遗憾的是，这只对本地分支起作用，且它只跟踪动作 (例如，不会跟踪一个没有被记录的文件的任何改变)。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">(main)$ git reflog<br>0a2e358 HEAD@&#123;0&#125;: reset: moving to HEAD~2<br>0254ea7 HEAD@&#123;1&#125;: checkout: moving from 2.2 to main<br>c10f740 HEAD@&#123;2&#125;: checkout: moving from main to 2.2<br></code></pre></td></tr></table></figure><p>上面的<code>reflog</code>展示了从main分支签出(checkout)到2.2 分支，然后再签回。那里，还有一个硬重置(hard reset)到一个较旧的提交。最新的动作出现在最上面以 <code>HEAD@&#123;0&#125;</code>标识.<br>如果事实证明你不小心回移(move back)了提交(commit), reflog 会包含你不小心回移前main上指向的提交(0254ea7)。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git reset --hard 0254ea7<br></code></pre></td></tr></table></figure><p>然后使用git reset就可以把main改回到之前的commit，这提供了一个在历史被意外更改情况下的安全网。</p>]]></content>
    
    
    <categories>
      
      <category>git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【git】常用配置</title>
    <link href="/git/%E3%80%90git%E3%80%91%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/"/>
    <url>/git/%E3%80%90git%E3%80%91%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="配置文件说明"><a href="#配置文件说明" class="headerlink" title="配置文件说明"></a>配置文件说明</h1><p>配置文件的写入分为三种：系统配置 &lt; 全局配置 &lt; 本地配置。</p><h2 id="系统配置"><a href="#系统配置" class="headerlink" title="系统配置"></a>系统配置</h2><p>保存位置：<code>/etc/gitconfig</code><br>携带参数：<code>--system</code></p><h2 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h2><p>保存位置：<code>~/.gitconfig</code><br>携带参数：<code>--global</code></p><h2 id="本地配置"><a href="#本地配置" class="headerlink" title="本地配置"></a>本地配置</h2><p>保存位置：<code>当前仓库/.git/config</code><br>携带参数：<code>--local</code><br>写入时的默认值</p><h2 id="配置文件格式"><a href="#配置文件格式" class="headerlink" title="配置文件格式"></a>配置文件格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">[user]<br>name = rocyuan<br>email = rocyuan666@163.com<br>[credential]<br>helper = store<br><span class="hljs-comment"># =======================</span><br>[section.Subsection]<br>key1 = value1<br>key2 = value2<br></code></pre></td></tr></table></figure><h1 id="配置基础命令"><a href="#配置基础命令" class="headerlink" title="配置基础命令"></a>配置基础命令</h1><p>以全局配置 <code>--global</code> 为例</p><h2 id="查看配置"><a href="#查看配置" class="headerlink" title="查看配置"></a>查看配置</h2><h3 id="查看列表"><a href="#查看列表" class="headerlink" title="查看列表"></a>查看列表</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global --list<br></code></pre></td></tr></table></figure><h3 id="查看单个配置"><a href="#查看单个配置" class="headerlink" title="查看单个配置"></a>查看单个配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global --get section.key<br></code></pre></td></tr></table></figure><h2 id="添加配置"><a href="#添加配置" class="headerlink" title="添加配置"></a>添加配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global section.key value<br></code></pre></td></tr></table></figure><h2 id="删除配置"><a href="#删除配置" class="headerlink" title="删除配置"></a>删除配置</h2><p>如果有多个需要使用 <code>--unset-all</code> 选项。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global --<span class="hljs-built_in">unset</span> section.key<br></code></pre></td></tr></table></figure><h1 id="配置用户名"><a href="#配置用户名" class="headerlink" title="配置用户名"></a>配置用户名</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global user.name rocyuan<br></code></pre></td></tr></table></figure><h1 id="配置邮箱"><a href="#配置邮箱" class="headerlink" title="配置邮箱"></a>配置邮箱</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global user.email rocyuan666@163.com<br></code></pre></td></tr></table></figure><h1 id="记录账号密码"><a href="#记录账号密码" class="headerlink" title="记录账号密码"></a>记录账号密码</h1><p><code>store</code> 模式会以明文的形式记录账号密码，非信任环境下谨慎使用！<br><code>cache</code> 模式会将账号密码缓存在内存，默认 15 分钟，可使用 <code>--timeout=3600</code> 指定过期时间，单位为秒。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global credential.helper store<br>git config --global credential.helper cache --<span class="hljs-built_in">timeout</span>=3600<br></code></pre></td></tr></table></figure><h1 id="取消记录账号密码"><a href="#取消记录账号密码" class="headerlink" title="取消记录账号密码"></a>取消记录账号密码</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global --<span class="hljs-built_in">unset</span> credential.helper<br></code></pre></td></tr></table></figure><h1 id="关闭忽略大小写"><a href="#关闭忽略大小写" class="headerlink" title="关闭忽略大小写"></a>关闭忽略大小写</h1><p>不建议配置到全局下，建议针对项目仓库进行配置。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config core.ignorecase <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h1 id="起别名"><a href="#起别名" class="headerlink" title="起别名"></a>起别名</h1><p>给 <code>git</code> 命令起别名 <code>st</code> 代替 <code>status</code>；可以使用 <code>git st</code> 代替 <code>git status</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global alias.st status<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【git】常用命令记录</title>
    <link href="/git/%E3%80%90git%E3%80%91%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/"/>
    <url>/git/%E3%80%90git%E3%80%91%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 提交到暂存区</span><br>git add .<br><span class="hljs-comment"># 提交到本地仓库</span><br>git commit -m <span class="hljs-string">&quot;xxx&quot;</span><br><span class="hljs-comment"># 拉取</span><br>git pull<br><span class="hljs-comment"># 推送到远端</span><br>git push<br><br><br><span class="hljs-comment"># 查看所有分支（本地与远端）</span><br>git branch -a<br><span class="hljs-comment"># 合并分支</span><br>git merge branchName<br><span class="hljs-comment"># 删除已经合并的分支</span><br>git branch -d 分支名<br><span class="hljs-comment">#删除远程仓库分支</span><br>git push origin -d 分支名<br><span class="hljs-comment"># 切换分支 -b新建分支  拉取远端某个分支与之关联</span><br>git checkout -b 分支名 origin/分支名<br><br><br><span class="hljs-comment"># 查看远程仓库 -v查看详细信息</span><br>git remote -v<br><span class="hljs-comment"># 添加本地仓库连接的远端仓库（可连接多个，pull与push需指定远端名，如下）</span><br><span class="hljs-comment"># git pull origin(远端仓库名) master(远端分支)</span><br><span class="hljs-comment"># git push origin(远端仓库名) master(远端分支)</span><br>git remote add 名字 远端仓库连接<br><br><br><span class="hljs-comment"># 添加标签 </span><br>git tag 标签名 <span class="hljs-comment"># 直接给当前的提交版本创建一个标签</span><br>git tag 标签名 提交版本号 <span class="hljs-comment"># 给指定的提交版本创建一个标签</span><br><span class="hljs-comment"># 删除标签</span><br>git tag -d <span class="hljs-comment"># 删除所有的标签</span><br>git tag -d 标签名称 <span class="hljs-comment"># 删除指定名称的标签</span><br><span class="hljs-comment"># 标签推送到远程</span><br>git push --tags<br><br><br><span class="hljs-comment"># 查看提交日志</span><br>git <span class="hljs-built_in">log</span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【css】移动端兼容问题</title>
    <link href="/css/%E3%80%90css%E3%80%91%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%85%BC%E5%AE%B9%E9%97%AE%E9%A2%98/"/>
    <url>/css/%E3%80%90css%E3%80%91%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%85%BC%E5%AE%B9%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>以下为本人工作，甲方baba测试出的兼容问题，在此记录</p><h2 id="横竖屏提示兼容问题"><a href="#横竖屏提示兼容问题" class="headerlink" title="横竖屏提示兼容问题"></a>横竖屏提示兼容问题</h2><p>vivoX20 横竖屏提示 输入法键盘按出来，导致屏幕可视区域（landscape，portrait两者都是按照屏幕可视区域宽高进行判断的）高度变小 BUG ；<br>aspect-ratio 是按照设备中的页面可见区域宽度与高度的比率，小于13&#x2F;9比率为横屏，大于13&#x2F;9比率就为竖屏 。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@media</span> all <span class="hljs-keyword">and</span> (<span class="hljs-attribute">orientation</span> : landscape) &#123; //横屏&#125;<br><span class="hljs-keyword">@media</span> all <span class="hljs-keyword">and</span> (<span class="hljs-attribute">orientation</span> : portrait)&#123; //竖屏 &#125;<br>//解决方法：<br><span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">min-aspect-ratio</span>: <span class="hljs-number">13</span>/<span class="hljs-number">9</span>)&#123; &#125; // landscape横屏<br><span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">max-aspect-ratio</span>: <span class="hljs-number">13</span>/<span class="hljs-number">9</span>)&#123; &#125; // portrait竖屏<br><br><br>// 腾讯互娱cp文档中错误，正确改法（横屏提示）：<br><span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">min-aspect-ratio</span>: <span class="hljs-number">13</span>/<span class="hljs-number">9</span>)<br>&#123;<br><span class="hljs-selector-tag">html</span>,<span class="hljs-selector-tag">body</span>&#123;<span class="hljs-attribute">position</span>:relative;<span class="hljs-attribute">overflow</span>:hidden;<span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">padding</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;&#125;<br><span class="hljs-selector-tag">html</span><span class="hljs-selector-pseudo">::before</span>&#123;<span class="hljs-attribute">content</span>:<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-attribute">position</span>:fixed;<span class="hljs-attribute">top</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">left</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">background</span>:<span class="hljs-number">#333</span>;<span class="hljs-attribute">z-index</span>:<span class="hljs-number">99999</span>;&#125;<br><span class="hljs-selector-tag">html</span><span class="hljs-selector-pseudo">::after</span>&#123;<span class="hljs-attribute">content</span>:<span class="hljs-string">&quot;\4E3A\4E86\66F4\597D\7684\4F53\9A8C\FF0C\8BF7\5C06\624B\673A\7AD6\8FC7\6765&quot;</span>;<span class="hljs-attribute">text-align</span>:center;<span class="hljs-attribute">font-size</span>:<span class="hljs-number">16px</span>;<span class="hljs-attribute">color</span>:<span class="hljs-number">#fff</span>;<span class="hljs-attribute">position</span>:absolute;<span class="hljs-attribute">top</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">left</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">30px</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">margin-top</span>:<span class="hljs-number">50px</span>;<span class="hljs-attribute">z-index</span>:<span class="hljs-number">99999</span>;&#125;<br><span class="hljs-selector-tag">body</span><span class="hljs-selector-pseudo">::before</span>&#123;<span class="hljs-attribute">content</span>:<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-attribute">position</span>:absolute;zindex:<span class="hljs-number">99999</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">200px</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">100px</span>;<span class="hljs-attribute">left</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">top</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">margin</span>:-<span class="hljs-number">140px</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> -<span class="hljs-number">50px</span>;<span class="hljs-attribute">color</span>:<span class="hljs-number">#fff</span>;backgroundimage:<span class="hljs-built_in">url</span>(<span class="hljs-string">&quot;//game.gtimg.cn/images/xiawa/cp/a20191107wish/phone.png&quot;</span>);<span class="hljs-attribute">background-repeat</span>:no-repeat;<span class="hljs-attribute">background-position</span>:center center;<span class="hljs-attribute">background-size</span>:<span class="hljs-number">100px</span> auto;-webkit-<span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">90deg</span>);<span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">90deg</span>);&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="select选择框文字不居中"><a href="#select选择框文字不居中" class="headerlink" title="select选择框文字不居中"></a>select选择框文字不居中</h2><p>iphoneX 中 select选择框文字不兼容居中<br>利用span模拟选择框</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs css">示例：<br><span class="hljs-selector-class">.serbox</span> <span class="hljs-selector-class">.sel-text</span>&#123;<br>    <span class="hljs-attribute">display</span>: block;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">1.73rem</span>;<br>    <span class="hljs-attribute">height</span>: .<span class="hljs-number">53rem</span>;<br>    <span class="hljs-attribute">line-height</span>: .<span class="hljs-number">53rem</span>;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fefefe</span>;<br>    <span class="hljs-attribute">text-align</span>: center;<br>    <span class="hljs-attribute">text-align-last</span>: center;<br>    <span class="hljs-attribute">font-size</span>: .<span class="hljs-number">26rem</span>;<br>&#125;<br>&lt;<span class="hljs-selector-tag">div</span> class=&quot;serbox sp&quot;&gt;<br>&lt;<span class="hljs-selector-tag">span</span> id=&quot;sel-text0&quot; class=&quot;sel-text&quot;&gt;选服查看&lt;/<span class="hljs-selector-tag">span</span>&gt;<br>&lt;select id=&quot;sel0&quot; class=&quot;listAll list-select&quot;&gt;<br>&lt;option value=&quot;&quot; selected=&quot;selected&quot;&gt;选服查看&lt;/option&gt;<br>&lt;option value=&quot;partition&quot;&gt;单服&lt;/option&gt;<br>&lt;option value=&quot;<span class="hljs-attribute">all</span>&quot;&gt;全服&lt;/option&gt;<br>&lt;/select&gt;<br>&lt;/<span class="hljs-selector-tag">div</span>&gt;<br>// select 居中兼容 <span class="hljs-selector-tag">span</span>模拟<br>function selJR(id1,id2)&#123;<br><span class="hljs-selector-tag">var</span> show=document<span class="hljs-selector-class">.getElementById</span>(id1);<br><span class="hljs-selector-tag">var</span> sel=document<span class="hljs-selector-class">.getElementById</span>(id2);<br>sel<span class="hljs-selector-class">.onchange</span>=function()&#123;<br><span class="hljs-selector-tag">var</span> index=sel<span class="hljs-selector-class">.selectedIndex</span>; //序号，取当前选中选项的序号<br>show<span class="hljs-selector-class">.innerText</span>=sel<span class="hljs-selector-class">.options</span><span class="hljs-selector-attr">[index]</span><span class="hljs-selector-class">.text</span>;<br>&#125;<br>&#125;<br>selJR(&quot;sel-text0&quot;,&quot;sel0&quot;);<br></code></pre></td></tr></table></figure><h2 id="iphone设备下输入框默认有内阴影"><a href="#iphone设备下输入框默认有内阴影" class="headerlink" title="iphone设备下输入框默认有内阴影"></a>iphone设备下输入框默认有内阴影</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">el<br>&#123;<br>    -webkit-appearance:none;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>css</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】角度弧度转换</title>
    <link href="/js/%E3%80%90js%E3%80%91%E8%A7%92%E5%BA%A6%E5%BC%A7%E5%BA%A6%E8%BD%AC%E6%8D%A2/"/>
    <url>/js/%E3%80%90js%E3%80%91%E8%A7%92%E5%BA%A6%E5%BC%A7%E5%BA%A6%E8%BD%AC%E6%8D%A2/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 角度转弧度</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">number</span>&#125; <span class="hljs-variable">deg</span> - 角度</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">number</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">degToRad</span>(<span class="hljs-params">deg</span>) &#123;<br>  <span class="hljs-keyword">return</span> deg * (<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">180</span>);<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 弧度转角度</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">number</span>&#125; <span class="hljs-variable">rad</span> - 弧度</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">number</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">radToDeg</span>(<span class="hljs-params">rad</span>) &#123;<br>  <span class="hljs-keyword">return</span> rad * (<span class="hljs-number">180</span> / <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】两个经纬度之间的直线距离</title>
    <link href="/js/%E3%80%90js%E3%80%91%E4%B8%A4%E4%B8%AA%E7%BB%8F%E7%BA%AC%E5%BA%A6%E4%B9%8B%E9%97%B4%E7%9A%84%E7%9B%B4%E7%BA%BF%E8%B7%9D%E7%A6%BB/"/>
    <url>/js/%E3%80%90js%E3%80%91%E4%B8%A4%E4%B8%AA%E7%BB%8F%E7%BA%AC%E5%BA%A6%E4%B9%8B%E9%97%B4%E7%9A%84%E7%9B%B4%E7%BA%BF%E8%B7%9D%E7%A6%BB/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 角度转弧度</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">number</span>&#125; <span class="hljs-variable">deg</span> - 角度</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">number</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">degToRad</span>(<span class="hljs-params">deg</span>) &#123;<br>  <span class="hljs-keyword">return</span> deg * (<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">180</span>);<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 计算两个经纬度间直线距离</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">number</span>&#125; <span class="hljs-variable">lon1</span> - 经度1</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">number</span>&#125; <span class="hljs-variable">lat1</span> - 纬度1</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">number</span>&#125; <span class="hljs-variable">lon2</span> - 经度2</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">number</span>&#125; <span class="hljs-variable">lat2</span> - 纬度2</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">number</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getDistance</span>(<span class="hljs-params">lon1, lat1, lon2, lat2</span>) &#123;<br>  <span class="hljs-comment">// 地球半径 米</span><br>  <span class="hljs-keyword">const</span> earthRadius = <span class="hljs-number">6371000</span>;<br>  <span class="hljs-keyword">const</span> dLat = <span class="hljs-title function_">degToRad</span>(lat2 - lat1);<br>  <span class="hljs-keyword">const</span> dLon = <span class="hljs-title function_">degToRad</span>(lon2 - lon1);<br>  <span class="hljs-keyword">const</span> a = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(dLat / <span class="hljs-number">2</span>) * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(dLat / <span class="hljs-number">2</span>) + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(<span class="hljs-title function_">degToRad</span>(lat1)) * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(<span class="hljs-title function_">degToRad</span>(lat2)) * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(dLon / <span class="hljs-number">2</span>) * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(dLon / <span class="hljs-number">2</span>);<br>  <span class="hljs-keyword">const</span> c = <span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(a), <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(<span class="hljs-number">1</span> - a));<br>  <span class="hljs-keyword">return</span> earthRadius * c;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【css】@media媒体查询</title>
    <link href="/css/%E3%80%90css%E3%80%91@media%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2/"/>
    <url>/css/%E3%80%90css%E3%80%91@media%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2/</url>
    
    <content type="html"><![CDATA[<p>使用@media媒体查询响应式兼容判断<br>@media(条件){……}</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs css">彩色屏幕和最小宽度<span class="hljs-number">1000</span>下<br><span class="hljs-keyword">@media</span> <span class="hljs-keyword">only</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">min-width</span>:<span class="hljs-number">1000px</span>)&#123;<span class="hljs-selector-id">#wrap</span>&#123;&#125;&#125;<br><br><span class="hljs-comment">/* mobile adaptation start */</span><br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">device-height</span>:<span class="hljs-number">480px</span>) <span class="hljs-keyword">and</span> (<span class="hljs-attribute">-webkit-min-device-pixel-ratio</span>:<span class="hljs-number">2</span>)&#123;<span class="hljs-comment">/* 兼容iphone4/4s */</span><br><span class="hljs-selector-class">.topbox</span>&#123;<span class="hljs-attribute">padding-top</span>:<span class="hljs-number">50px</span>;&#125;<br>&#125;<br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">device-height</span>:<span class="hljs-number">568px</span>) <span class="hljs-keyword">and</span> (<span class="hljs-attribute">-webkit-min-device-pixel-ratio</span>:<span class="hljs-number">2</span>)&#123;<span class="hljs-comment">/* 兼容iphone5 */</span><br><span class="hljs-selector-class">.topbox</span>&#123;<span class="hljs-attribute">padding-top</span>:<span class="hljs-number">70px</span>;&#125;<br>&#125;<br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">device-height</span>:<span class="hljs-number">667px</span>) <span class="hljs-keyword">and</span> (<span class="hljs-attribute">-webkit-min-device-pixel-ratio</span>:<span class="hljs-number">2</span>)&#123;<span class="hljs-comment">/* 兼容iphone6 */</span><br><span class="hljs-selector-class">.topbox</span>&#123;<span class="hljs-attribute">padding-top</span>:<span class="hljs-number">100px</span>;&#125;<br>&#125;<br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">device-height</span>:<span class="hljs-number">736px</span>) <span class="hljs-keyword">and</span> (<span class="hljs-attribute">-webkit-min-device-pixel-ratio</span>:<span class="hljs-number">2</span>)&#123;<span class="hljs-comment">/* 兼容iphone6 Plus */</span><br><span class="hljs-selector-class">.topbox</span>&#123;<span class="hljs-attribute">padding-top</span>:<span class="hljs-number">130px</span>;&#125;<br>&#125;<br><br><br><span class="hljs-comment">/* bootstrap 媒体查询 - 视口划分 */</span><br><span class="hljs-selector-tag">html</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">10px</span>;<br>&#125;<br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">767px</span>) &#123;<br>  <span class="hljs-selector-tag">html</span> &#123;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">8.5px</span>;<br>  &#125;<br>&#125;<br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">768px</span>) &#123;<br>  <span class="hljs-selector-tag">html</span> &#123;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">9px</span>;<br>  &#125;<br>&#125;<br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">992px</span>) &#123;<br>  <span class="hljs-selector-tag">html</span> &#123;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">9.5px</span>;<br>  &#125;<br>&#125;<br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">1200px</span>) &#123;<br>  <span class="hljs-selector-tag">html</span> &#123;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">10px</span>;<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>css</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【uniapp】多端图片base64&amp;path转换</title>
    <link href="/uniapp/%E3%80%90uniapp%E3%80%91%E5%A4%9A%E7%AB%AF%E5%9B%BE%E7%89%87base64&amp;path%E8%BD%AC%E6%8D%A2/"/>
    <url>/uniapp/%E3%80%90uniapp%E3%80%91%E5%A4%9A%E7%AB%AF%E5%9B%BE%E7%89%87base64&amp;path%E8%BD%AC%E6%8D%A2/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getLocalFilePath</span>(<span class="hljs-params">path</span>) &#123;<br>    <span class="hljs-keyword">if</span> (path.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;_www&#x27;</span>) === <span class="hljs-number">0</span> || path.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;_doc&#x27;</span>) === <span class="hljs-number">0</span> || path.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;_documents&#x27;</span>) === <span class="hljs-number">0</span> || path.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;_downloads&#x27;</span>) === <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> path<br>    &#125;<br>    <span class="hljs-keyword">if</span> (path.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;file://&#x27;</span>) === <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> path<br>    &#125;<br>    <span class="hljs-keyword">if</span> (path.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;/storage/emulated/0/&#x27;</span>) === <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> path<br>    &#125;<br>    <span class="hljs-keyword">if</span> (path.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;/&#x27;</span>) === <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">var</span> localFilePath = plus.<span class="hljs-property">io</span>.<span class="hljs-title function_">convertAbsoluteFileSystem</span>(path)<br>        <span class="hljs-keyword">if</span> (localFilePath !== path) &#123;<br>            <span class="hljs-keyword">return</span> localFilePath<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            path = path.<span class="hljs-title function_">substr</span>(<span class="hljs-number">1</span>)<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;_www/&#x27;</span> + path<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">pathToBase64</span>(<span class="hljs-params">path</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> === <span class="hljs-string">&#x27;object&#x27;</span> &amp;&amp; <span class="hljs-string">&#x27;document&#x27;</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">FileReader</span> === <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>                <span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>()<br>                xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&#x27;GET&#x27;</span>, path, <span class="hljs-literal">true</span>)<br>                xhr.<span class="hljs-property">responseType</span> = <span class="hljs-string">&#x27;blob&#x27;</span><br>                xhr.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>                    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) &#123;<br>                        <span class="hljs-keyword">let</span> fileReader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>()<br>                        fileReader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>                            <span class="hljs-title function_">resolve</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>)<br>                        &#125;<br>                        fileReader.<span class="hljs-property">onerror</span> = reject<br>                        fileReader.<span class="hljs-title function_">readAsDataURL</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">response</span>)<br>                    &#125;<br>                &#125;<br>                xhr.<span class="hljs-property">onerror</span> = reject<br>                xhr.<span class="hljs-title function_">send</span>()<br>                <span class="hljs-keyword">return</span><br>            &#125;<br>            <span class="hljs-keyword">var</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;canvas&#x27;</span>)<br>            <span class="hljs-keyword">var</span> c2x = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">&#x27;2d&#x27;</span>)<br>            <span class="hljs-keyword">var</span> img = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span><br>            img.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>                canvas.<span class="hljs-property">width</span> = img.<span class="hljs-property">width</span><br>                canvas.<span class="hljs-property">height</span> = img.<span class="hljs-property">height</span><br>                c2x.<span class="hljs-title function_">drawImage</span>(img, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>                <span class="hljs-title function_">resolve</span>(canvas.<span class="hljs-title function_">toDataURL</span>())<br>                canvas.<span class="hljs-property">height</span> = canvas.<span class="hljs-property">width</span> = <span class="hljs-number">0</span><br>            &#125;<br>            img.<span class="hljs-property">onerror</span> = reject<br>            img.<span class="hljs-property">src</span> = path<br>            <span class="hljs-keyword">return</span><br>        &#125;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> plus === <span class="hljs-string">&#x27;object&#x27;</span>) &#123;<br>            plus.<span class="hljs-property">io</span>.<span class="hljs-title function_">resolveLocalFileSystemURL</span>(<span class="hljs-title function_">getLocalFilePath</span>(path), <span class="hljs-keyword">function</span>(<span class="hljs-params">entry</span>) &#123;<br>                entry.<span class="hljs-title function_">file</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">file</span>) &#123;<br>                    <span class="hljs-keyword">var</span> fileReader = <span class="hljs-keyword">new</span> plus.<span class="hljs-property">io</span>.<span class="hljs-title class_">FileReader</span>()<br>                    fileReader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) &#123;<br>                        <span class="hljs-title function_">resolve</span>(data.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>)<br>                    &#125;<br>                    fileReader.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) &#123;<br>                        <span class="hljs-title function_">reject</span>(error)<br>                    &#125;<br>                    fileReader.<span class="hljs-title function_">readAsDataURL</span>(file)<br>                &#125;, <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) &#123;<br>                    <span class="hljs-title function_">reject</span>(error)<br>                &#125;)<br>            &#125;, <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) &#123;<br>                <span class="hljs-title function_">reject</span>(error)<br>            &#125;)<br>            <span class="hljs-keyword">return</span><br>        &#125;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> wx === <span class="hljs-string">&#x27;object&#x27;</span> &amp;&amp; wx.<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">&#x27;getFileSystemManager&#x27;</span>)) &#123;<br>            wx.<span class="hljs-title function_">getFileSystemManager</span>().<span class="hljs-title function_">readFile</span>(&#123;<br>                <span class="hljs-attr">filePath</span>: path,<br>                <span class="hljs-attr">encoding</span>: <span class="hljs-string">&#x27;base64&#x27;</span>,<br>                <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) &#123;<br>                    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;data:image/png;base64,&#x27;</span> + res.<span class="hljs-property">data</span>)<br>                &#125;,<br>                <span class="hljs-attr">fail</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) &#123;<br>                    <span class="hljs-title function_">reject</span>(error)<br>                &#125;<br>            &#125;)<br>            <span class="hljs-keyword">return</span><br>        &#125;<br>        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;not support&#x27;</span>))<br>    &#125;)<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">base64ToPath</span>(<span class="hljs-params">base64, extName</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> === <span class="hljs-string">&#x27;object&#x27;</span> &amp;&amp; <span class="hljs-string">&#x27;document&#x27;</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) &#123;<br>            base64 = base64.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;,&#x27;</span>)<br>            <span class="hljs-keyword">var</span> type = base64[<span class="hljs-number">0</span>].<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/:(.*?);/</span>)[<span class="hljs-number">1</span>]<br>            <span class="hljs-keyword">var</span> str = <span class="hljs-title function_">atob</span>(base64[<span class="hljs-number">1</span>])<br>            <span class="hljs-keyword">var</span> n = str.<span class="hljs-property">length</span><br>            <span class="hljs-keyword">var</span> array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(n)<br>            <span class="hljs-keyword">while</span> (n--) &#123;<br>                array[n] = str.<span class="hljs-title function_">charCodeAt</span>(n)<br>            &#125;<br>            <span class="hljs-keyword">return</span> <span class="hljs-title function_">resolve</span>((<span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">webkitURL</span>).<span class="hljs-title function_">createObjectURL</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([array], &#123; <span class="hljs-attr">type</span>: type &#125;)))<br>        &#125;<br><span class="hljs-keyword">var</span> fileName;<br><span class="hljs-keyword">if</span> (!extName) &#123;<br>extName = base64.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/data\:\S+\/(\S+);/</span>)<br><span class="hljs-keyword">if</span> (extName) &#123;<br>    extName = extName[<span class="hljs-number">1</span>]<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;base64 error&#x27;</span>))<br>&#125;<br>fileName = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + <span class="hljs-string">&#x27;.&#x27;</span> + extName;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>fileName = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + extName;<br>&#125;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> plus === <span class="hljs-string">&#x27;object&#x27;</span>) &#123;<br>            <span class="hljs-keyword">var</span> bitmap = <span class="hljs-keyword">new</span> plus.<span class="hljs-property">nativeObj</span>.<span class="hljs-title class_">Bitmap</span>(<span class="hljs-string">&#x27;bitmap&#x27;</span> + <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>())<br>            bitmap.<span class="hljs-title function_">loadBase64Data</span>(base64, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>                <span class="hljs-keyword">var</span> filePath = <span class="hljs-string">&#x27;_doc/uniapp_temp/&#x27;</span> + fileName<br>                bitmap.<span class="hljs-title function_">save</span>(filePath, &#123;&#125;, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>                    bitmap.<span class="hljs-title function_">clear</span>()<br>                    <span class="hljs-title function_">resolve</span>(filePath)<br>                &#125;, <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) &#123;<br>                    bitmap.<span class="hljs-title function_">clear</span>()<br>                    <span class="hljs-title function_">reject</span>(error)<br>                &#125;)<br>            &#125;, <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) &#123;<br>                bitmap.<span class="hljs-title function_">clear</span>()<br>                <span class="hljs-title function_">reject</span>(error)<br>            &#125;)<br>            <span class="hljs-keyword">return</span><br>        &#125;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> wx === <span class="hljs-string">&#x27;object&#x27;</span> &amp;&amp; wx.<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">&#x27;getFileSystemManager&#x27;</span>)) &#123;<br>            <span class="hljs-keyword">var</span> filePath = wx.<span class="hljs-property">env</span>.<span class="hljs-property">USER_DATA_PATH</span> + <span class="hljs-string">&#x27;/&#x27;</span> + fileName<br>            wx.<span class="hljs-title function_">getFileSystemManager</span>().<span class="hljs-title function_">writeFile</span>(&#123;<br>                <span class="hljs-attr">filePath</span>: filePath,<br>                <span class="hljs-attr">data</span>: base64.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^data:\S+\/\S+;base64,/</span>, <span class="hljs-string">&#x27;&#x27;</span>),<br>                <span class="hljs-attr">encoding</span>: <span class="hljs-string">&#x27;base64&#x27;</span>,<br>                <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>                    <span class="hljs-title function_">resolve</span>(filePath)<br>                &#125;,<br>                <span class="hljs-attr">fail</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) &#123;<br>                    <span class="hljs-title function_">reject</span>(error)<br>                &#125;<br>            &#125;)<br>            <span class="hljs-keyword">return</span><br>        &#125;<br>        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;not support&#x27;</span>))<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>uniapp</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】h5-ios键盘问题</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91h5ios%E9%94%AE%E7%9B%98%E9%97%AE%E9%A2%98/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91h5ios%E9%94%AE%E7%9B%98%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">      * &#123;</span><br><span class="language-css">        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">      <span class="hljs-selector-class">.wrap</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">flex-direction</span>: column;</span><br><span class="language-css">        <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">      <span class="hljs-selector-class">.header-box</span>,</span><br><span class="language-css">      <span class="hljs-selector-class">.footer-box</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f00</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">      <span class="hljs-selector-class">.main-box</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vh</span> - <span class="hljs-number">100px</span>);</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ccc</span>;</span><br><span class="language-css">        <span class="hljs-attribute">overflow</span>: auto;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">      <span class="hljs-selector-class">.footer-box</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wrap&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;header-box&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;id-main&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;main-box&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaa<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;footer-box&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;id-input&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> /&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> <span class="hljs-title class_">Page</span> = &#123;</span><br><span class="language-javascript">        <span class="hljs-title function_">init</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">domMain</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;id-main&quot;</span>);</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">domInput</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;id-input&quot;</span>);</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">domInput</span>.<span class="hljs-property">onfocus</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshMainHeight</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-number">500</span>);</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">domInput</span>.<span class="hljs-property">onblur</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshMainHeight</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-number">500</span>);</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-title function_">refreshMainHeight</span>(<span class="hljs-params">time</span>) &#123;</span><br><span class="language-javascript">          <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">this</span>.<span class="hljs-property">domMain</span>.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">window</span>.innerHeight - <span class="hljs-number">100</span>&#125;</span>px`</span>;</span><br><span class="language-javascript">            <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</span><br><span class="language-javascript">          &#125;, time);</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      &#125;;</span><br><span class="language-javascript">      <span class="hljs-title class_">Page</span>.<span class="hljs-title function_">init</span>();</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】元素拖拽</title>
    <link href="/js/%E3%80%90js%E3%80%91%E5%85%83%E7%B4%A0%E6%8B%96%E6%8B%BD/"/>
    <url>/js/%E3%80%90js%E3%80%91%E5%85%83%E7%B4%A0%E6%8B%96%E6%8B%BD/</url>
    
    <content type="html"><![CDATA[<p>常用拖拽方法封装</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 拖拽方法</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">HTMLElement</span>&#125; sceneDom 拖拽场景</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">HTMLElement</span>&#125; dragDom 拖拽对象</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">rocDrag</span>(<span class="hljs-params">sceneDom, dragDom</span>) &#123;<br>dragDom.<span class="hljs-property">onmousedown</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br><span class="hljs-comment">// 记录鼠标在该DOM元素上的偏移位置</span><br><span class="hljs-keyword">let</span> x = event.<span class="hljs-property">pageX</span> - dragDom.<span class="hljs-property">offsetLeft</span>;<br><span class="hljs-keyword">let</span> y = event.<span class="hljs-property">pageY</span> - dragDom.<span class="hljs-property">offsetTop</span>;<br>sceneDom.<span class="hljs-property">onmousemove</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br><span class="hljs-keyword">const</span> dx = event.<span class="hljs-property">pageX</span> - x;<br><span class="hljs-keyword">const</span> dy = event.<span class="hljs-property">pageY</span> - y;<br>dragDom.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = dx + <span class="hljs-string">&quot;px&quot;</span>;<br>dragDom.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = dy + <span class="hljs-string">&quot;px&quot;</span>;<br>&#125;;<br>sceneDom.<span class="hljs-property">onmouseup</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>sceneDom.<span class="hljs-property">onmousemove</span> = <span class="hljs-literal">null</span>;<br>sceneDom.<span class="hljs-property">onmouseup</span> = <span class="hljs-literal">null</span>;<br>&#125;;<br>&#125;;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】vue-router整理</title>
    <link href="/vue/%E3%80%90vue%E3%80%91vue-router%E6%95%B4%E7%90%86/"/>
    <url>/vue/%E3%80%90vue%E3%80%91vue-router%E6%95%B4%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p>完整官方文档：<br><a href="https://router.vuejs.org/zh/">https://router.vuejs.org/zh</a></p><h2 id="路由安装与导入"><a href="#路由安装与导入" class="headerlink" title="路由安装与导入"></a>路由安装与导入</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">安装：<br>npm install vue-router --save<br>导入：<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">VueRouter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="路由基本使用"><a href="#路由基本使用" class="headerlink" title="路由基本使用"></a>路由基本使用</h2><h3 id="1-配置路由映射关系之前需准备"><a href="#1-配置路由映射关系之前需准备" class="headerlink" title="1.配置路由映射关系之前需准备"></a>1.配置路由映射关系之前需准备</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-number">1</span>）注册<br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">VueRouter</span>)<br><span class="hljs-number">2</span>）创建vue-router实例对象<br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueRouter</span>(&#123;<br>  routes  <span class="hljs-comment">//路由映射配置</span><br>&#125;)<br><span class="hljs-number">3</span>）将router对象传入<span class="hljs-title class_">Vue</span>实例中(在main.<span class="hljs-property">js</span>中导入，传入<span class="hljs-title class_">Vue</span>实例中)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure><h3 id="2-配置路由映射"><a href="#2-配置路由映射" class="headerlink" title="2.配置路由映射"></a>2.配置路由映射</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-number">1</span>）创建路由组件<br>创建所需要转跳的.<span class="hljs-property">vue</span>组件，比如创建<span class="hljs-title class_">Home</span>.<span class="hljs-property">vue</span>和<span class="hljs-title class_">Profile</span>.<span class="hljs-property">vue</span><br><span class="hljs-number">2</span>）配置映射关系<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;/components/Home&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Profile</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;/components/Profile&#x27;</span><br><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/home&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/profile&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Profile</span><br>  &#125;<br>]<br><span class="hljs-number">3</span>）使用路由<br>&lt;router-view&gt;&lt;/router-view&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/home&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/profile&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="3-路由重定向（redirect）使用"><a href="#3-路由重定向（redirect）使用" class="headerlink" title="3.路由重定向（redirect）使用"></a>3.路由重定向（redirect）使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span><br>    <span class="hljs-attr">redirect</span>: <span class="hljs-string">&#x27;/home&#x27;</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/home&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/profile&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Profile</span><br>  &#125;<br>]<br></code></pre></td></tr></table></figure><h3 id="4-router-link属性"><a href="#4-router-link属性" class="headerlink" title="4.router-link属性"></a>4.router-link属性</h3><figure class="highlight pony"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pony"><span class="hljs-number">1</span>）<span class="hljs-meta">tag</span>=<span class="hljs-string">&quot;button&quot;</span>（默认渲染为a标签）<br><span class="hljs-number">2</span>）replace 禁止浏览器返回按钮（默认可以返回）<br><span class="hljs-number">3</span>）active-<span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;active&quot;</span> （更改活跃状态<span class="hljs-keyword">class</span>，默认为“router-link-active”）<br></code></pre></td></tr></table></figure><h3 id="5-不用router-link，使用代码转跳"><a href="#5-不用router-link，使用代码转跳" class="headerlink" title="5.不用router-link，使用代码转跳"></a>5.不用router-link，使用代码转跳</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 可以点击浏览器的返回按钮:</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;/home&#x27;</span>)<br><span class="hljs-comment">// 不可以点击浏览器的返回按钮:</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-string">&#x27;/home&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="6-实例router对象时常用配置"><a href="#6-实例router对象时常用配置" class="headerlink" title="6.实例router对象时常用配置"></a>6.实例router对象时常用配置</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueRouter</span>(&#123;<br>  routes,  <span class="hljs-comment">//路由映射配置</span><br>  <span class="hljs-attr">mode</span>: history,  <span class="hljs-comment">//更改默认的“哈希模式”为“history模式”,哈希模式的路径有#号</span><br>  <span class="hljs-attr">newVueRouter</span>: <span class="hljs-string">&#x27;active&#x27;</span>  <span class="hljs-comment">//更改活跃状态class</span><br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h2><p>动态路由官网文档：<br><a href="https://router.vuejs.org/zh/guide/essentials/dynamic-matching.html">https://router.vuejs.org/zh/guide/essentials/dynamic-matching.html</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/profile:userName&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Profile</span><br>  &#125;<br>]<br><br><span class="hljs-title function_">toProfile</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-comment">// 1.跳转携带数据</span><br>  tihs.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;/profile/zhangshan&#x27;</span>)<br>&#125;<br><br><span class="hljs-comment">// 2.profile.vue中拿到userName（注意是$route不是$router）：</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">params</span>.<span class="hljs-property">userName</span><br></code></pre></td></tr></table></figure><p>$router与$route区别？<br>$router：new出来的VueRouter<br>$route：处于活跃的那个路由</p><h2 id="路由参数传递"><a href="#路由参数传递" class="headerlink" title="路由参数传递"></a>路由参数传递</h2><p>官方文档：<br><a href="https://router.vuejs.org/zh/guide/essentials/passing-props.html">https://router.vuejs.org/zh/guide/essentials/passing-props.html</a></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">1</span>. params的类型（以上方式）：动态路由方式（this.<span class="hljs-variable">$route</span><span class="hljs-selector-class">.params</span>.userName）<br><span class="hljs-number">2</span>. query的类型：(this.<span class="hljs-variable">$route</span><span class="hljs-selector-class">.query</span>.userName)<br><br>query方式：<br><span class="hljs-function"><span class="hljs-title">toProfile</span><span class="hljs-params">()</span></span>&#123;<br>  <span class="hljs-comment">// 1.跳转</span><br>  this.<span class="hljs-variable">$router</span><span class="hljs-selector-class">.push</span>(&#123;<br>    path: <span class="hljs-string">&#x27;/profile&#x27;</span>,<br>    query: &#123;<br>      userName: <span class="hljs-string">&#x27;zhangsan&#x27;</span><br>    &#125;<br>  &#125;)<br>&#125;<br><span class="hljs-number">2</span>. profile.vue中拿数据<br>this.<span class="hljs-variable">$route</span><span class="hljs-selector-class">.query</span>.userName<br></code></pre></td></tr></table></figure><h2 id="路由嵌套使用-children"><a href="#路由嵌套使用-children" class="headerlink" title="路由嵌套使用(children)"></a>路由嵌套使用(children)</h2><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs elixir">const routes = [<br>  &#123;<br>    <span class="hljs-symbol">path:</span> <span class="hljs-string">&#x27;/home&#x27;</span>,<br>    <span class="hljs-symbol">component:</span> <span class="hljs-title class_">Home</span>,<br>    <span class="hljs-symbol">children:</span> [<br>      &#123;<br>      <span class="hljs-symbol">path:</span> <span class="hljs-string">&#x27;news&#x27;</span>,<br>      <span class="hljs-symbol">component:</span> <span class="hljs-title class_">News</span><br>      &#125;<br>    ]<br>  &#125;<br>]<br><br>路由映射配置中<span class="hljs-symbol">:children</span>: []<br><span class="hljs-title class_">Home</span>组件中<span class="hljs-symbol">:&lt;router-link</span> to=<span class="hljs-string">&#x27;/home/news&#x27;</span>&gt;&lt;router-view/&gt;<br></code></pre></td></tr></table></figure><h2 id="keep-alive"><a href="#keep-alive" class="headerlink" title="keep-alive"></a>keep-alive</h2><p>keep-alive所包裹的动态组件会被缓存，当离开某个组件，不会让组件频繁创建销毁</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs stata">&lt;<span class="hljs-keyword">keep</span>-alive exclude=<span class="hljs-string">&quot;name(组件的name属性值)&quot;</span>&gt;<br>  &lt;router-<span class="hljs-keyword">view</span>&gt;&lt;/router-<span class="hljs-keyword">view</span>&gt;<br>&lt;/<span class="hljs-keyword">keep</span>-alive&gt;<br><br><span class="hljs-keyword">keep</span>-alive属性:<br><span class="hljs-keyword">include</span>: 字符串或正则，只有匹配的会被缓存<br>exclude: 字符串或正则，匹配的不会被缓存<br><br><span class="hljs-keyword">keep</span>-alice包裹的组件转跳会触发一下钩子方法，没有<span class="hljs-keyword">keep</span>-alice,以下两方法不会生效<br>activated：是在被包裹组建被激活的状态下使用的生命周期钩子<br>deactivated：在被包裹组件停止使用时调用<br></code></pre></td></tr></table></figure><h2 id="路由懒加载"><a href="#路由懒加载" class="headerlink" title="路由懒加载"></a>路由懒加载</h2><p>官方文档：<br><a href="https://router.vuejs.org/zh/guide/advanced/lazy-loading.html">https://router.vuejs.org/zh/guide/advanced/lazy-loading.html</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript">常用：<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Home</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;/components/Home&quot;</span>)<br></code></pre></td></tr></table></figure><h2 id="导航守卫"><a href="#导航守卫" class="headerlink" title="导航守卫"></a>导航守卫</h2><p>官方文档：<br><a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html">https://router.vuejs.org/zh/guide/advanced/navigation-guards.html</a></p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xquery">举个栗子：使用beforeEach改变页面title<br>&#123;<br> <span class="hljs-built_in"> path</span>: <span class="hljs-string">&#x27;/home&#x27;</span>,<br>  component: Home,<br>  路由独享守卫<br>  beforeEnter: <span class="hljs-keyword">function</span>(<span class="hljs-keyword">to</span>, from, <span class="hljs-keyword">next</span>)&#123;<br>    <span class="hljs-keyword">next</span>()<br>  &#125;<br>  meta: &#123;<br>    title: <span class="hljs-string">&#x27;首页&#x27;</span><br>  &#125;<br>&#125;<br><br>前置钩子（回调）******全局守卫******<br>router.beforeEach(<span class="hljs-keyword">function</span>(<span class="hljs-keyword">to</span>, from, <span class="hljs-keyword">next</span>)&#123;<br>  //路由嵌套出现错误<br>  //<span class="hljs-type">document</span>.title = <span class="hljs-keyword">to</span>.meta.title<br>  //正确的<br> <span class="hljs-built_in"> document</span>.title = <span class="hljs-keyword">to</span>.matched[<span class="hljs-number">0</span>].meta.title<br>  <span class="hljs-keyword">next</span>()<br>&#125;)<br><br>meta： 元数据：描述数据的数据<br>beforeEach ：前置守卫：跳转之前执行<br>afterEach：后置钩子：跳转完成后执行（<span class="hljs-keyword">function</span>（<span class="hljs-keyword">to</span>, from））,没有<span class="hljs-keyword">next</span>，因为跳转完成了<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】swiper工作常用设置</title>
    <link href="/js/%E3%80%90js%E3%80%91swiper%E5%B7%A5%E4%BD%9C%E5%B8%B8%E7%94%A8%E8%AE%BE%E7%BD%AE/"/>
    <url>/js/%E3%80%90js%E3%80%91swiper%E5%B7%A5%E4%BD%9C%E5%B8%B8%E7%94%A8%E8%AE%BE%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="swiper轮播图，工作常用设置总结"><a href="#swiper轮播图，工作常用设置总结" class="headerlink" title="swiper轮播图，工作常用设置总结"></a>swiper轮播图，工作常用设置总结</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;<span class="hljs-selector-tag">div</span> class=&quot;swiper-container&quot;&gt;<br>  &lt;<span class="hljs-selector-tag">div</span> class=&quot;swiper-wrapper&quot;&gt;<br>      &lt;<span class="hljs-selector-tag">div</span> class=&quot;swiper-slide&quot;&gt;&lt;<span class="hljs-selector-tag">img</span> <span class="hljs-attribute">src</span>=&quot;//game<span class="hljs-selector-class">.gtimg</span><span class="hljs-selector-class">.cn</span>/images/yrzx/cp/a20200308qhhdm/game-screenshot-<span class="hljs-number">5</span><span class="hljs-selector-class">.jpg</span>&quot; alt=&quot;&quot; <span class="hljs-attribute">width</span>=&quot;<span class="hljs-number">670</span>&quot; <span class="hljs-attribute">height</span>=&quot;<span class="hljs-number">376</span>&quot;&gt;&lt;/<span class="hljs-selector-tag">div</span>&gt;<br>      &lt;<span class="hljs-selector-tag">div</span> class=&quot;swiper-slide&quot;&gt;&lt;<span class="hljs-selector-tag">img</span> <span class="hljs-attribute">src</span>=&quot;//game<span class="hljs-selector-class">.gtimg</span><span class="hljs-selector-class">.cn</span>/images/yrzx/cp/a20200308qhhdm/game-screenshot-<span class="hljs-number">4</span><span class="hljs-selector-class">.jpg</span>&quot; alt=&quot;&quot; <span class="hljs-attribute">width</span>=&quot;<span class="hljs-number">670</span>&quot; <span class="hljs-attribute">height</span>=&quot;<span class="hljs-number">376</span>&quot;&gt;&lt;/<span class="hljs-selector-tag">div</span>&gt;<br>      &lt;<span class="hljs-selector-tag">div</span> class=&quot;swiper-slide&quot;&gt;&lt;<span class="hljs-selector-tag">img</span> <span class="hljs-attribute">src</span>=&quot;//game<span class="hljs-selector-class">.gtimg</span><span class="hljs-selector-class">.cn</span>/images/yrzx/cp/a20200308qhhdm/game-screenshot-<span class="hljs-number">3</span><span class="hljs-selector-class">.jpg</span>&quot; alt=&quot;&quot; <span class="hljs-attribute">width</span>=&quot;<span class="hljs-number">670</span>&quot; <span class="hljs-attribute">height</span>=&quot;<span class="hljs-number">376</span>&quot;&gt;&lt;/<span class="hljs-selector-tag">div</span>&gt;<br>      &lt;<span class="hljs-selector-tag">div</span> class=&quot;swiper-slide&quot;&gt;&lt;<span class="hljs-selector-tag">img</span> <span class="hljs-attribute">src</span>=&quot;//game<span class="hljs-selector-class">.gtimg</span><span class="hljs-selector-class">.cn</span>/images/yrzx/cp/a20200308qhhdm/game-screenshot-<span class="hljs-number">1</span><span class="hljs-selector-class">.jpg</span>&quot; alt=&quot;&quot; <span class="hljs-attribute">width</span>=&quot;<span class="hljs-number">670</span>&quot; <span class="hljs-attribute">height</span>=&quot;<span class="hljs-number">376</span>&quot;&gt;&lt;/<span class="hljs-selector-tag">div</span>&gt;<br>      &lt;<span class="hljs-selector-tag">div</span> class=&quot;swiper-slide&quot;&gt;&lt;<span class="hljs-selector-tag">img</span> <span class="hljs-attribute">src</span>=&quot;//game<span class="hljs-selector-class">.gtimg</span><span class="hljs-selector-class">.cn</span>/images/yrzx/cp/a20200308qhhdm/game-screenshot-<span class="hljs-number">2</span><span class="hljs-selector-class">.jpg</span>&quot; alt=&quot;&quot; <span class="hljs-attribute">width</span>=&quot;<span class="hljs-number">670</span>&quot; <span class="hljs-attribute">height</span>=&quot;<span class="hljs-number">376</span>&quot;&gt;&lt;/<span class="hljs-selector-tag">div</span>&gt;<br>  &lt;/<span class="hljs-selector-tag">div</span>&gt;<br>  &lt;!-- Add Pagination --&gt;<br>  &lt;<span class="hljs-selector-tag">div</span> class=&quot;swi-pagination&quot;&gt;&lt;/<span class="hljs-selector-tag">div</span>&gt;<br>  &lt;!-- Add Arrows --&gt;<br>  &lt;<span class="hljs-selector-tag">div</span> class=&quot;spr swiper-<span class="hljs-selector-tag">button</span>-prev&quot;&gt;&lt;/<span class="hljs-selector-tag">div</span>&gt;<br>  &lt;<span class="hljs-selector-tag">div</span> class=&quot;spr swiper-<span class="hljs-selector-tag">button</span>-next&quot;&gt;&lt;/<span class="hljs-selector-tag">div</span>&gt;<br>&lt;/<span class="hljs-selector-tag">div</span>&gt;<br><br>&lt;script <span class="hljs-attribute">src</span>=&quot;//ossweb-<span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>/images/js/swiper4_component/js/swiper<span class="hljs-selector-class">.min</span><span class="hljs-selector-class">.js</span>&quot;&gt;&lt;/script&gt;<br><br>// swiper常用初始化<br><span class="hljs-selector-tag">var</span> swiper = new Swiper(&#x27;<span class="hljs-selector-class">.swiper-container</span>&#x27;, &#123;<br>  autoplay: &#123;<br>    // 用户手碰到轮播图不停止<br>    disableOnInteraction: false<br>  &#125;,<br>  // 分页class设置<br>  pagination: &#123;<br>    el: <span class="hljs-string">&#x27;.swi-pagination&#x27;</span>,<br>    bulletClass: <span class="hljs-string">&#x27;swi-bullet&#x27;</span>,<br>    bulletActiveClass: <span class="hljs-string">&#x27;swi-active-bullet&#x27;</span><br>  &#125;,<br>  // 左右按钮class设置<br>  navigation: &#123;<br>    prevEl: <span class="hljs-string">&#x27;.swiper-button-prev&#x27;</span>,<br>    nextEl: <span class="hljs-string">&#x27;.swiper-button-next&#x27;</span><br>  &#125;,<br>  on:&#123;<br>    // 用户滑动滚动结束后，数据上报（腾讯互娱）<br>    transitionEnd: <span class="hljs-built_in">function</span>()&#123;<br>      <span class="hljs-selector-tag">var</span> idx = swiper<span class="hljs-selector-class">.activeIndex</span>+<span class="hljs-number">1</span><br>      PTTSendClick(&#x27;pop&#x27;,&#x27;banner&#x27;+idx,&#x27;游戏特色轮播图&#x27;+idx);<br>    &#125;,<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】抽奖发牌动画开发需求</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/</url>
    
    <content type="html"><![CDATA[<p>活动过期了，觉得挺有意思的，终于可以拿出来分享了，很遗憾线上也过期了地址没有了，不过我会提供部分线上预览地址（仅供交流学习）并非最终产品；</p><p>需求介绍：此需求是腾讯旗下qq元気泡小程序渠道的，狐妖小红娘、火影忍者（两者页面一样，下面以狐妖小红娘为例）游戏2020年新年活动页面，本人负责前端效果开发，具体需求看图（并非最终版本）：</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/1.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/2.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/3.png"></p><p>本篇主要交流以上需求效果，付上整张原型图（没办法只能传小点的，主要看上面交互）：</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/4.png"></p><p>设计师出稿（并非最终版本）：</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/5.png"></p><h3 id="分析需求（只分析抽卡环节）："><a href="#分析需求（只分析抽卡环节）：" class="headerlink" title="分析需求（只分析抽卡环节）："></a>分析需求（只分析抽卡环节）：</h3><ul><li>点击悬浮卡卡牌进入本页面（站外的悬浮卡牌）卡面不展示五彩棒数量。</li><li>点击参与，进入抽卡环节：<ol><li>6张卡片浮起；</li><li>非抽奖区域灰色蒙层覆盖；</li><li>显示五彩棒数量；</li><li>卡片显示两秒后自动聚拢堆叠成一张（看到的一张是第一排左边第一张卡牌）；</li><li>全部翻转至卡牌的背面；</li><li>1秒后卡牌按照轨迹分发开（此时卡牌是背面的，并且加上发光效果）；</li><li>发开后上面人物提示选择一张；</li><li>选中后选中的卡牌发光且只能选择一张 ，其他卡牌光效消失，显示点击收下按钮。</li></ol></li></ul><p>代码主体入口逻辑（将以上逻辑封装成的方法运行起来，）下面展示了各个逻辑实现的方法。</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/6.png"></p><p>我将 不展示五彩棒数量的模块（页面本身展示的6个卡牌） 与 展示五彩棒数量的模块（抽卡环节的6个卡牌） 分离开了；因为展示在页面的卡牌只是静态的6张卡牌，而抽奖模块的卡牌看似6张实则12张（每张都是正反），两者不同。</p><p><strong>页面中静态卡牌：</strong></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/7.png"></p><p><strong>抽卡环节中的卡牌：</strong></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/8.png"></p><p>然后将 抽卡环节的卡牌 定位到 静态展示的卡牌 位置上，只不过 抽卡环节的卡牌 隐藏了起来 ，这样方便制作卡片浮起动画。</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/9.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/10.png"></p><p>布局准备好了后，开始我们的逻辑</p><p>准备下需要用到了卡牌数据，及封装卡片数据打乱方法（因为每次打开展示都是随机的）</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/11.png"></p><p>① 6张卡片显示浮起；</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/12.png"></p><p>②非抽奖区域灰色蒙层覆盖；</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/13.png"></p><p>③显示五彩棒数量；（也就是将数据渲染出来）</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/14.png"></p><p>④ 卡片显示两秒后自动聚拢堆叠成一张（看到的一张是第一排左边第一张卡牌）； 将第一张z-index提高盖住其他5张。</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/15.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/16.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/17.png"></p><p>⑤全部翻转至卡牌的背面， 利用了css3动画及翻转</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/18.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/19.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/20.png"></p><p>⑥1秒后卡牌按照轨迹分发开（此时卡牌是背面的，并且加上发光效果，主体逻辑中翻转后加上发光了，散发卡片后发光还在）</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/21.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/22.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/23.png"></p><p>⑦发开后上面人物提示选择一张。 （由于人物提示图片不止一处且只是图片不同，封装起来了）</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/24.png"></p><p>⑧选中后选中的卡牌发光且只能选择一张，其他卡牌光效消失，显示点击收下按钮。</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/25.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91%E6%8A%BD%E5%A5%96%E5%8F%91%E7%89%8C%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82/26.png"></p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】项目常用插件</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E9%A1%B9%E7%9B%AE%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E9%A1%B9%E7%9B%AE%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="图片懒加载"><a href="#图片懒加载" class="headerlink" title="图片懒加载"></a>图片懒加载</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs css">npm install vue-lazyload <span class="hljs-attr">--save</span><br><br>import VueLazyLoad <span class="hljs-selector-tag">from</span> &#x27;vue-lazyload&#x27;<br> <br>//注册时可传入对象：<br> Vue<span class="hljs-selector-class">.use</span>(VueLazyLoad,&#123;<br>    //未加载出来的占位图<br>    loading: <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./xxxpng&#x27;</span>)<br> &#125;)<br>//使用懒加载：<span class="hljs-selector-tag">img</span> :src=<span class="hljs-string">&#x27;&#x27;</span> 更改为 img v-lazy=<span class="hljs-string">&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="顶部进度条"><a href="#顶部进度条" class="headerlink" title="顶部进度条"></a>顶部进度条</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css">npm install nprogress <span class="hljs-attr">--save</span><br>import NProgress <span class="hljs-selector-tag">from</span> &#x27;nprogress&#x27;<br>// 导入进度条样式<br>import &#x27;nprogress/nprogress<span class="hljs-selector-class">.css</span>&#x27;<br>//请求,响应拦截配置<br>NProgress<span class="hljs-selector-class">.start</span>() 显示进度条<br>NProgress<span class="hljs-selector-class">.done</span>() 隐藏进度条<br></code></pre></td></tr></table></figure><h2 id="px单位转换"><a href="#px单位转换" class="headerlink" title="px单位转换"></a>px单位转换</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs css">npm install postcss-px-<span class="hljs-selector-tag">to</span>-viewport <span class="hljs-attr">--save-dev</span><br><br>//个人不常用<br>//修改 postcss<span class="hljs-selector-class">.config</span><span class="hljs-selector-class">.js</span><br><br>module<span class="hljs-selector-class">.exports</span> = &#123;<br>  plugins: &#123;<br>    autoprefixer: &#123;&#125;,<br>    &quot;postcss-px-<span class="hljs-selector-tag">to</span>-viewport&quot;: &#123;<br>      viewportWidth: <span class="hljs-number">375</span>,  //视窗宽度<br>      viewportHeight: <span class="hljs-number">667</span>,  //视窗高度<br>      unitPrecision: <span class="hljs-number">5</span>,  //指定`px`转换为视窗单位值的小数位数<br>      viewportUnit: <span class="hljs-string">&#x27;vw&#x27;</span>,  //指定需要转成的视窗单位，建议vw<br>      // selectorBlackLict: [<span class="hljs-string">&#x27;&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>],  //指定不需要转换的类   出问题！！！<br>      exclude: [/正则/], 正则匹配的不做转换  出问题！！！<br>      minPixelCalue: <span class="hljs-number">1</span>,  //小于<span class="hljs-number">1px</span>不转换<br>      mediaQuery: false  //允许在媒体查询中转换`px`<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】github提交ssh22端口无法连接</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91github%E6%8F%90%E4%BA%A4ssh22%E7%AB%AF%E5%8F%A3%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91github%E6%8F%90%E4%BA%A4ssh22%E7%AB%AF%E5%8F%A3%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5/</url>
    
    <content type="html"><![CDATA[<h2 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git pull<br>ssh: connect to host github.com port 22: Connection timed out<br>fatal: Could not <span class="hljs-built_in">read</span> from remote repository.<br><br>Please make sure you have the correct access rights<br>and the repository exists.<br></code></pre></td></tr></table></figure><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>在 <code>~/.ssh</code> 下创建 <code>config</code> 文件<br>User 修改为自己邮箱<br>IdentityFile 修改公钥地址  </p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">Host github.com<br>User rocyuan666@163.com<br>Hostname ssh.github.com<br>PreferredAuthentications publickey<br>IdentityFile ~/.ssh/id_ed25519<br>Port 443<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】点击复制</title>
    <link href="/js/%E3%80%90js%E3%80%91%E7%82%B9%E5%87%BB%E5%A4%8D%E5%88%B6/"/>
    <url>/js/%E3%80%90js%E3%80%91%E7%82%B9%E5%87%BB%E5%A4%8D%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript">$(<span class="hljs-string">&quot;.clickCopy&quot;</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">let</span> copyText = $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">html</span>();<br>  <span class="hljs-keyword">let</span> textarea = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;textarea&quot;</span>);<br>  textarea.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">&quot;fixed&quot;</span>;<br>  textarea.<span class="hljs-property">style</span>.<span class="hljs-property">opacity</span> = <span class="hljs-number">0</span>;<br>  textarea.<span class="hljs-property">value</span> = copyText;<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(textarea);<br>  textarea.<span class="hljs-title function_">select</span>();<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">&quot;copy&quot;</span>);<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(textarea);<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;提示复制成功&quot;</span>)<br>&#125;);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】全选-非全选</title>
    <link href="/js/%E3%80%90js%E3%80%91%E5%85%A8%E9%80%89-%E9%9D%9E%E5%85%A8%E9%80%89/"/>
    <url>/js/%E3%80%90js%E3%80%91%E5%85%A8%E9%80%89-%E9%9D%9E%E5%85%A8%E9%80%89/</url>
    
    <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>原生js - 全选、非全选<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wrap&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectAll&quot;</span> /&gt;</span> 全选 <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;checkbox&quot;</span> /&gt;</span> 选项1 <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;checkbox&quot;</span> /&gt;</span> 选项2 <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;checkbox&quot;</span> /&gt;</span> 选项3 <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;checkbox&quot;</span> /&gt;</span> 选项4 <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;checkbox&quot;</span> /&gt;</span> 选项5 <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> <span class="hljs-title class_">Roc</span> = &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">selectAll</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;selectAll&quot;</span>),</span><br><span class="language-javascript">        <span class="hljs-attr">checkboxs</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByClassName</span>(<span class="hljs-string">&quot;checkbox&quot;</span>),</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-attr">init</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleCheck</span>();</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">handleCheck</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">var</span> that = <span class="hljs-variable language_">this</span>;</span><br><span class="language-javascript">          <span class="hljs-comment">// 全选复选框的点击事件</span></span><br><span class="language-javascript">          that.<span class="hljs-property">selectAll</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; that.<span class="hljs-property">checkboxs</span>.<span class="hljs-property">length</span>; i++) &#123;</span><br><span class="language-javascript">              that.<span class="hljs-property">checkboxs</span>[i].<span class="hljs-property">checked</span> = that.<span class="hljs-property">selectAll</span>.<span class="hljs-property">checked</span>;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript">          <span class="hljs-comment">// 单个复选框的点击事件</span></span><br><span class="language-javascript">          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; that.<span class="hljs-property">checkboxs</span>.<span class="hljs-property">length</span>; i++) &#123;</span><br><span class="language-javascript">            that.<span class="hljs-property">checkboxs</span>[i].<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">              <span class="hljs-keyword">let</span> allChecked = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">              <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; that.<span class="hljs-property">checkboxs</span>.<span class="hljs-property">length</span>; j++) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (!that.<span class="hljs-property">checkboxs</span>[j].<span class="hljs-property">checked</span>) &#123;</span><br><span class="language-javascript">                  allChecked = <span class="hljs-literal">false</span>;</span><br><span class="language-javascript">                  <span class="hljs-keyword">break</span>;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">              &#125;</span><br><span class="language-javascript">              that.<span class="hljs-property">selectAll</span>.<span class="hljs-property">checked</span> = allChecked;</span><br><span class="language-javascript">            &#125;);</span><br><span class="language-javascript">          &#125;</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      &#125;;</span><br><span class="language-javascript">      <span class="hljs-title class_">Roc</span>.<span class="hljs-title function_">init</span>();</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】浏览器环境判断（QQ，微信）</title>
    <link href="/js/%E3%80%90js%E3%80%91%E6%B5%8F%E8%A7%88%E5%99%A8%E7%8E%AF%E5%A2%83%E5%88%A4%E6%96%AD%EF%BC%88QQ%EF%BC%8C%E5%BE%AE%E4%BF%A1%EF%BC%89/"/>
    <url>/js/%E3%80%90js%E3%80%91%E6%B5%8F%E8%A7%88%E5%99%A8%E7%8E%AF%E5%A2%83%E5%88%A4%E6%96%AD%EF%BC%88QQ%EF%BC%8C%E5%BE%AE%E4%BF%A1%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="手机QQ中打开："><a href="#手机QQ中打开：" class="headerlink" title="手机QQ中打开："></a>手机QQ中打开：</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">function isQQ() &#123;<br>  return(navigator<span class="hljs-selector-class">.userAgent</span><span class="hljs-selector-class">.toLowerCase</span>()<span class="hljs-selector-class">.match</span>(/\bqq\<span class="hljs-selector-tag">b</span>/<span class="hljs-selector-tag">i</span>) == &quot;qq&quot;);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="微信中打开："><a href="#微信中打开：" class="headerlink" title="微信中打开："></a>微信中打开：</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">function isWeixin() &#123;<br>  return(navigator<span class="hljs-selector-class">.userAgent</span><span class="hljs-selector-class">.toLowerCase</span>()<span class="hljs-selector-class">.match</span>(/MicroMessenger/<span class="hljs-selector-tag">i</span>) == &quot;micromessenger&quot;);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【css】移动端横竖屏提示</title>
    <link href="/css/%E3%80%90css%E3%80%91%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%A8%AA%E7%AB%96%E5%B1%8F%E6%8F%90%E7%A4%BA/"/>
    <url>/css/%E3%80%90css%E3%80%91%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%A8%AA%E7%AB%96%E5%B1%8F%E6%8F%90%E7%A4%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="提示用户竖屏浏览页面的CSS样式参考"><a href="#提示用户竖屏浏览页面的CSS样式参考" class="headerlink" title="提示用户竖屏浏览页面的CSS样式参考 :"></a>提示用户竖屏浏览页面的CSS样式参考 :</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@media</span> all <span class="hljs-keyword">and</span> (<span class="hljs-attribute">orientation</span>:landscape)&#123;<br><span class="hljs-selector-tag">html</span>,<span class="hljs-selector-tag">body</span>&#123;<span class="hljs-attribute">position</span>:relative;<span class="hljs-attribute">overflow</span>:hidden;<span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">padding</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;&#125;<br><span class="hljs-selector-tag">html</span><span class="hljs-selector-pseudo">::before</span>&#123;<span class="hljs-attribute">content</span>:<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-attribute">position</span>:fixed;<span class="hljs-attribute">top</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">left</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">background</span>:<span class="hljs-number">#333</span>;<span class="hljs-attribute">z-index</span>:<span class="hljs-number">99999</span>;&#125;<br><span class="hljs-selector-tag">html</span><span class="hljs-selector-pseudo">::after</span>&#123;<span class="hljs-attribute">content</span>:<span class="hljs-string">&quot;\4E3A\4E86\66F4\597D\7684\4F53\9A8C\FF0C\8BF7\5C06\624B\673A\7AD6\8FC7\6765&quot;</span>;<span class="hljs-attribute">text-align</span>:center;<span class="hljs-attribute">font-size</span>:<span class="hljs-number">16px</span>;<span class="hljs-attribute">color</span>:<span class="hljs-number">#fff</span>;<span class="hljs-attribute">position</span>:absolute;<span class="hljs-attribute">top</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">left</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">30px</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">margin-top</span>:<span class="hljs-number">50px</span>;<span class="hljs-attribute">z-index</span>:<span class="hljs-number">99999</span>;&#125;<br><span class="hljs-selector-tag">body</span><span class="hljs-selector-pseudo">::before</span>&#123;<span class="hljs-attribute">content</span>:<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-attribute">position</span>:absolute;<span class="hljs-attribute">z-index</span>:<span class="hljs-number">99999</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">200px</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">100px</span>;<span class="hljs-attribute">left</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">top</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">margin</span>:-<span class="hljs-number">140px</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> -<span class="hljs-number">50px</span>;<span class="hljs-attribute">color</span>:<span class="hljs-number">#fff</span>;<span class="hljs-attribute">background-image</span>:<span class="hljs-built_in">url</span>(<span class="hljs-string">&quot;images/phone.png&quot;</span>);<span class="hljs-attribute">background-repeat</span>:no-repeat;<span class="hljs-attribute">background-position</span>:center center;<span class="hljs-attribute">background-size</span>:<span class="hljs-number">100px</span> auto;-webkit-<span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">90deg</span>);&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90css%E3%80%91%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%A8%AA%E7%AB%96%E5%B1%8F%E6%8F%90%E7%A4%BA/1.png"></p><h2 id="提示用户横屏浏览页面的CSS样式参考"><a href="#提示用户横屏浏览页面的CSS样式参考" class="headerlink" title="提示用户横屏浏览页面的CSS样式参考:"></a>提示用户横屏浏览页面的CSS样式参考:</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@media</span> all <span class="hljs-keyword">and</span> (<span class="hljs-attribute">orientation</span>:portrait)&#123;<br><span class="hljs-selector-tag">html</span>,<span class="hljs-selector-tag">body</span>&#123;<span class="hljs-attribute">position</span>:relative;<span class="hljs-attribute">overflow</span>:hidden;<span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">padding</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;&#125;<br><span class="hljs-selector-tag">html</span><span class="hljs-selector-pseudo">::before</span>&#123;<span class="hljs-attribute">content</span>:<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-attribute">position</span>:fixed;<span class="hljs-attribute">top</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">left</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">background</span>:<span class="hljs-number">#333</span>;<span class="hljs-attribute">z-index</span>:<span class="hljs-number">99999</span>;&#125;<br><span class="hljs-selector-tag">html</span><span class="hljs-selector-pseudo">::after</span>&#123;<span class="hljs-attribute">content</span>:<span class="hljs-string">&quot;\4E3A\4E86\66F4\597D\7684\4F53\9A8C\FF0C\8BF7\5C06\624B\673A\6A2A\8FC7\6765&quot;</span>;<span class="hljs-attribute">position</span>:absolute;<span class="hljs-attribute">top</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">left</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">30px</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">margin-top</span>:<span class="hljs-number">30px</span>;<span class="hljs-attribute">z-index</span>:<span class="hljs-number">99999</span>;<span class="hljs-attribute">text-align</span>:center;<span class="hljs-attribute">font-size</span>:<span class="hljs-number">16px</span>;<span class="hljs-attribute">color</span>:<span class="hljs-number">#fff</span>;&#125;<br><span class="hljs-selector-tag">body</span><span class="hljs-selector-pseudo">::before</span>&#123;<span class="hljs-attribute">content</span>:<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-attribute">position</span>:absolute;<span class="hljs-attribute">z-index</span>:<span class="hljs-number">99999</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">200px</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">100px</span>;<span class="hljs-attribute">left</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">top</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">margin</span>:-<span class="hljs-number">160px</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> -<span class="hljs-number">50px</span>;<span class="hljs-attribute">color</span>:<span class="hljs-number">#fff</span>;<span class="hljs-attribute">background-image</span>:<span class="hljs-built_in">url</span>(<span class="hljs-string">&quot;images/phone.png&quot;</span>);<span class="hljs-attribute">background-repeat</span>:no-repeat;<span class="hljs-attribute">background-position</span>:center center;<span class="hljs-attribute">background-size</span>:<span class="hljs-number">100px</span> auto;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/../../assets/%E3%80%90css%E3%80%91%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%A8%AA%E7%AB%96%E5%B1%8F%E6%8F%90%E7%A4%BA/2.png"></p><p>手机图片base64（也可自己设计， base64在代码中看起来很臃肿，建议更换imgurl ，在浏览器地址栏中输入base64提取img）：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAAB2CAYAAAAZUrcsAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDAwMjcwNkVEQzczMTFFNjlFMDFGQTEzNkM3N0JBMTMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDAwMjcwNkREQzczMTFFNjlFMDFGQTEzNkM3N0JBMTMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ0NzhCMTlBREM1ODExRTZCNTdFRjQ0Q0I1QzRCODZBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQ0NzhCMTlCREM1ODExRTZCNTdFRjQ0Q0I1QzRCODZBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+J30rNQAACRRJREFUeNrsXQlsFVUUfW2hpexQlhYJi0IQJaCgoLgAsohIkFWIURQFNaBgBKMRgZAY1KgYlRIiQVkEo4IBEVAxBsQgyFIkLAHRgFCkgJhCgVqg33syd+R1nPb/+Z3fzpvek5y0s/<span class="hljs-number">6</span>Ze+Zt9933XlIkElExIpN4HfF6YmviJWUGkonFxP3Eg8QjxL9VSJEUg6CNiD2Jw4mdiRnEBmwkI96RiJc8xdxCXEz8sSoKOpH4PLFlCN99PfE94ldVQVBkq9nEe1yO5RPPEFMMeccIp9LGxHSX4/P5wy306fc6EjsQtxF/DYKg/YnLOFu1AQEXEncwc4nVDBO0FbEr8V7iUMc5OcRBxGM+/B4SwniuY3xD/IH4GZfdFfC2JKjGbsSiSElkE5s7zjOdvYnfOt5zF7FmOe+bGXHHKeIyYqdEv5u+<span class="hljs-number">0</span>Yx4UnuIAuLgkAnp5GyH4VeU836NiPOJOZHSsZTYuSIEXeX44b4hF9Pmy473Hu/DPWsR2xOnEX9xEfU8cSYxKVGCDnT84NgqIqbNFdq7nyM29Pn+Q4hfugi7ye/Uav+zWvuRrVVMTLAl8axmg2cT9DsjiHscoqJoG+anoK2JhdoP9K6CgoIzNBtsSeDvpBLfcUmtvuSKyMPHUGX3Q670HiK2J172UFG+kViXWMRNGjeX4UCP94zVA4SmwXKf2pBo0mzm9nUht8UT2dQYRlxArKfte5z4UXmbLdnaV/K+<span class="hljs-selector-tag">h6</span>+hPnGR4ytbR2zhOK9vJLFo6lPKSSHu0+<span class="hljs-number">47</span>vAJyhXbE3Y73GVeeeyazb9bGUQ/fAhwNo12cEp8Tq2v7EunEP++jT/mKI0W2qwA3wAHifQ6P0gfEXvHeEN6eJtr2iRiv6018QPPE4IGyiHU463qQuNTlujziVr4mOU6jw33Xg1gjAQb+R/s/tYI8WbnsYv2e2Jb3IVHc7DGB/SdolrZ9Lsbrumj/b2cR5xAn8L7OpQi62cXt5hVp3A3WIkFdbfrHU1GAy3EU8WcuwzPYx9w/HkGLHduxIE/<span class="hljs-number">7</span>H4Z9kXh7Kcd1dGM/cXGcvmBUvGpzl17YsJM4hrv2FPucR2vbMVeK9HbRiBgL3wbEvFIqKReJbbRzeyWwQnSB2NjHSore+J9eSc2nL7RnyGVbe6oUxQP0+I906fkv5K/skLYvkd1s6dx8CRPGanZtRpziNcuNFxu4rHyE+/+OExcRd7nU5F7xsb9R/<span class="hljs-number">1</span>AKPZT7puAMd7zP4O1xxLd5f8Ky3LAyCFmuXaSdiMcVmawEQQSy3Hna9uh4qumCYGEZ1+rtZuAtLuc8QVxJvEYEDR6clbuD3Ma3dbrfcbwp8Q128OTYbVavlaJO7KoqUuaEcSr2Kv3FX/<span class="hljs-number">35</span>AD4fOkfQKTLE4a1DRGJ3/r+r45qP1VW3bYbd9vcqKFx+rxmaAvARrgmYoCncAhjD23i+h7hlAOixw8h2EbmI2OKniX20Y49xKvWc5RYZnKWdDWCukqSXfyzaRnU1fHa31ibN5ATYlJs1NuD3XRJvO1Q3SD67q4KMauySxN/LAXw+PNOTXF6+qZWN65Tl80aKRXxvPz52K6dguzcrl1OrL46Fnco9EDtoOK1KdhEGEW8R/+ByEWKlcvn5qLLG5PTTzmurXfeU0+FQHkFTDRCznkE1eQRjFxA/UVYEiGLP22ntHF3MBZyCpR0aYKzlbHWvts+tZwm+<span class="hljs-number">8</span>oniWDADKE8HKGuUXGl4mHhBBDUHKE/vIq5yOTZLWVEfSgQ1C6gBDybO1vYh1U6NVq0XBBuTuQ09mWu1ZUJSqBmYqSzn/G4RNFyVJSWCVjGIoCKoQAQViKACEVTAguqiRgtaTjLwY0j28LxebBHYl9XnI0qLcr4+<span class="hljs-number">4</span>qu+Ae8HUewBtRkxiFpX+<span class="hljs-number">7</span>+miYLC9YeobIyFRBR6NE/ET8S5LGyOAe+Hd3pVWVEA6N2PFmW/UFldU7juOxMFjWXyRoEIKhBBBSKoIH5BEZyEWJfmXBO8LKarsEorKnKHldW5faS8giJ2BeM/<span class="hljs-number">7</span>yDWEvtWKiAsIukRCfipV0ExAGYqp0pB8IDgawwIXheLoJi8N1tsFnhEWKt5ZQn6kjJ3MFJVBWKNZrsJivn4Vot9jMQAO/u1BUXNFbOBNRHbGImTylpTp8B2Vk8RMY0GtHvOTqGYmQsRZVk+<span class="hljs-number">3</span>Rxj/uEQTxE7lwlMPYfBvoN9uh9GfrdBw7WHj2IqbvzuEL1itpVfwIDgrshy7/b5IWuKTpVmq54QtJXYNTRo4ZwAWWA2spJ9Lj8F/iGemcCbS9Rf8AB/QE/iTcRnlLdpeJJQy5UO0eAAU6RjurdNvL1PWU6fWTFeH5EUGiz8qYlpY6OXG4igwQJmCrvN2RTxcgMZwR0sIIgA8yqgBwUTN8KLNE0ENRvwyy7hWm51rxdLlhtcVI/nIhE0ZBBBQwYpQ4OHPdx8qcHt0obsZEgWQc3EJGWtg2YDy15i5tN0yXLDAU+ePBE0eHBOW5smgkotVyCCCkLTbPmNiZXzOogJzU2hGP2E9UUwHwMWK+<span class="hljs-number">2</span>orMntD4oZzRMUVedByppU4oq2b72yhhoeFlOaJSgWe9lQyjGsWjBXTGmWoJuiHM8RU5olaLQV42WIvmGC3hnleDcxpVmCjlLWGEQ3oPkySUxplqA4bzlxgrICmTAmA3MEYi4GrCEiwdoGOhbQfTOHOF1Z/XWYvLGlmNBcQW00UTI42PgsVyCCCuKEcwpYLLwbcye3hKAEDzdwHQUd3YjN7eAl4YmgwcO7ypqA2V5mGsKmiaDmIl3FGBAmZahUigQiqEAEFYigAhFUBBUYKqhMshgepEDQi2KH0CAfgh4RO4QGxyFovtghNDgNQXf5fNNisWul2WofBPV7WcVLolOl2eprTFGO6VMwyVFHn266HzdWMhFyNFwg9ie29+l+CNbrbq8KMZS4QmxsNIYQV+rrtmCihl5iFyOxRlnr7pRYiAcB09v4r8AcHFPWGnUnnIICmAlyrSq50LoguMjjlLnd3uG2mB2ClBYTu4i9Ag0scI/lQH/Xd5a23CRiWl5Q1opLdcR2gcIZ4uvKGsXwP7dttAVhWxH7EEcqa0ar2ixwkpKpzRMN28aI0y0gHiAuZb/B0VIvinHJ5muVFR+ayZWmZCUeoUTDtvFxrvDsVdZkJWXiXwEGAB5thUjn4vqyAAAAAElFTkSuQmCC<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>css</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【css】页面兼容提示语设置</title>
    <link href="/css/%E3%80%90css%E3%80%91%E9%A1%B5%E9%9D%A2%E5%85%BC%E5%AE%B9%E6%8F%90%E7%A4%BA%E8%AF%AD%E8%AE%BE%E7%BD%AE/"/>
    <url>/css/%E3%80%90css%E3%80%91%E9%A1%B5%E9%9D%A2%E5%85%BC%E5%AE%B9%E6%8F%90%E7%A4%BA%E8%AF%AD%E8%AE%BE%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--[if lt IE 8]&gt;&lt;p class=&quot;browser-tips&quot;&gt;您的浏览器版本过低，请升级浏览器获得更好的体验&lt;p&gt;&lt;![endif]--&gt;</span><br></code></pre></td></tr></table></figure><p>[ if lt IE 8 ] 中8代表 ie7及以下会显示提示；更改为9则表示 ie8及以下会显示提示<br><code>class：browser-tips</code> 设置醒目样式即可，如下图(已设置样式的)：</p><p><img src="/../../assets/%E3%80%90css%E3%80%91%E9%A1%B5%E9%9D%A2%E5%85%BC%E5%AE%B9%E6%8F%90%E7%A4%BA%E8%AF%AD%E8%AE%BE%E7%BD%AE/1.png"></p>]]></content>
    
    
    <categories>
      
      <category>css</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】网络请求axios整理</title>
    <link href="/js/%E3%80%90js%E3%80%91%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82axios%E6%95%B4%E7%90%86/"/>
    <url>/js/%E3%80%90js%E3%80%91%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82axios%E6%95%B4%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p>axios个人常用整理</p><p>github地址：</p><p><a href="https://github.com/axios/axios">axios&#x2F;axios: Promise based HTTP client for the browser and node.js (github.com)</a></p><h2 id="axios安装导入"><a href="#axios安装导入" class="headerlink" title="axios安装导入"></a>axios安装导入</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 安装</span><br>npm install axios --save<br><span class="hljs-comment"># 导入</span><br>import axios from <span class="hljs-string">&#x27;axios&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="全局方式（项目中不会这么使用，后面会自行封装）"><a href="#全局方式（项目中不会这么使用，后面会自行封装）" class="headerlink" title="全局方式（项目中不会这么使用，后面会自行封装）"></a>全局方式（项目中不会这么使用，后面会自行封装）</h2><p>axios本身返回promise。</p><h3 id="1-基本使用"><a href="#1-基本使用" class="headerlink" title="1.基本使用"></a>1.基本使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">axios</span>(&#123;<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;http://127.0.0.1:8000/xxx&#x27;</span>,<br>  <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;get&#x27;</span>,<br>  <span class="hljs-attr">params</span>: &#123;<br>    <span class="hljs-attr">page</span>: <span class="hljs-number">1</span><br>  &#125;<br>&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)<br>&#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="2-并发请求"><a href="#2-并发请求" class="headerlink" title="2.并发请求"></a>2.并发请求</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript">axios.<span class="hljs-title function_">all</span>([<br>  <span class="hljs-comment">//请求1</span><br>  <span class="hljs-title function_">axios</span>(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;http://127.0.0.1:8000/xxx&quot;</span><br>  &#125;),<br>  <span class="hljs-comment">//请求2</span><br>  <span class="hljs-title function_">axios</span>(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;http://127.0.0.1:8000/yyy&quot;</span>,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>    <span class="hljs-attr">data</span>: &#123;<br>      <span class="hljs-attr">userName</span>: <span class="hljs-string">&#x27;zhangshan&#x27;</span><br>    &#125;<br>  &#125;),<br>]).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>  <span class="hljs-comment">//两次请求都完成</span><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res[<span class="hljs-number">0</span>])<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res[<span class="hljs-number">1</span>])<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="3-全局的配置"><a href="#3-全局的配置" class="headerlink" title="3.全局的配置"></a>3.全局的配置</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">比如：<br>axios.<span class="hljs-property">defaults</span>.<span class="hljs-property">baseURL</span> = <span class="hljs-string">&#x27;http://127.0.0.1:8000&#x27;</span><br>axios.<span class="hljs-property">defaults</span>.<span class="hljs-property">timeOut</span> = <span class="hljs-number">5000</span><br></code></pre></td></tr></table></figure><p>但是项目中有时不可能只有一个baseURL或者其他配置不相同，这时候我们就需要实例化axios</p><h2 id="实例化方式（项目中也不会这么使用，后面会自行封装）"><a href="#实例化方式（项目中也不会这么使用，后面会自行封装）" class="headerlink" title="实例化方式（项目中也不会这么使用，后面会自行封装）"></a>实例化方式（项目中也不会这么使用，后面会自行封装）</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//实例化axios</span><br><span class="hljs-keyword">const</span> sl1 = axios.<span class="hljs-title function_">create</span>(&#123;<br>  <span class="hljs-comment">//全局配置</span><br>  baseURL=<span class="hljs-string">&quot;http://127.0.0.1:8000&quot;</span>,<br>  <span class="hljs-attr">timeOut</span>: <span class="hljs-number">5000</span><br>&#125;)<br><span class="hljs-comment">//发送请求</span><br><span class="hljs-title function_">sl1</span>(&#123;<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;/xxx&quot;</span><br>&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs javascript">请求拦截：<br>axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">requset</span>.<span class="hljs-title function_">use</span>(<br>  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">//请求拦截，config就是axios(config)中的config</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(config)<br>    <span class="hljs-comment">//拦截后进行操作完需要  返回config</span><br>    <span class="hljs-keyword">return</span> config<br>  &#125;,<br>  <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)<br>  &#125;<br>)<br><br>响应拦截：<br>axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(<br>  <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">//响应结果res</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)<br>    <span class="hljs-comment">//拦截后进行操作完需要  返回res（真正需要的是res.data中的数据）</span><br>    <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span><br>  &#125;,<br>  <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)<br>  &#125;<br>)<br></code></pre></td></tr></table></figure><h2 id="axios封装（常用）"><a href="#axios封装（常用）" class="headerlink" title="axios封装（常用）"></a>axios封装（常用）</h2><p>每个人封装不同，一下为本人常用封装</p><p>封装request.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;axios&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">request</span>(<span class="hljs-params">option</span>)&#123;<br>  <span class="hljs-comment">// 1.实例化axios</span><br>  <span class="hljs-keyword">const</span> sl1 = axios.<span class="hljs-title function_">create</span>(&#123;<br>    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&quot;http://127.0.0.1:8000&quot;</span>,<br>    <span class="hljs-attr">timeOut</span>: <span class="hljs-number">5000</span><br>  &#125;)<br>  <span class="hljs-comment">// 2.拦截器</span><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * 为什么拦截？</span><br><span class="hljs-comment">   * 1.比如config中的一些信息不符合服务器要求</span><br><span class="hljs-comment">   * 2.每次发送网络请求时，界面显示一个加载图标</span><br><span class="hljs-comment">   * 3.某些网络请求（比如登录时需要token），必须携带一些特殊信息</span><br><span class="hljs-comment">   * </span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-comment">// 请求拦截</span><br>  sl1.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<br>    <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>      <span class="hljs-comment">//请求拦截，config就是axios(config)中的config</span><br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(config)<br>      <span class="hljs-comment">//拦截后进行操作完需要  返回config</span><br>      <span class="hljs-keyword">return</span> config<br>    &#125;,<br>    <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)<br>    &#125;<br>  )<br>  <span class="hljs-comment">//响应拦截</span><br>  sl1.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(<br>    <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>      <span class="hljs-comment">//响应结果res</span><br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)<br>      <span class="hljs-comment">//拦截后进行操作完需要  返回res（真正需要的是res.data中的数据）</span><br>      <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span><br>    &#125;,<br>    <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)<br>    &#125;<br>  )<br>  <span class="hljs-comment">//3.发送请求</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">sl1</span>(option)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【css】常用baseCSS</title>
    <link href="/css/%E3%80%90css%E3%80%91%E5%B8%B8%E7%94%A8baseCSS/"/>
    <url>/css/%E3%80%90css%E3%80%91%E5%B8%B8%E7%94%A8baseCSS/</url>
    
    <content type="html"><![CDATA[<h2 id="PC端："><a href="#PC端：" class="headerlink" title="PC端："></a>PC端：</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">body</span>,<span class="hljs-selector-tag">dl</span>,<span class="hljs-selector-tag">dd</span>,<span class="hljs-selector-tag">ul</span>,<span class="hljs-selector-tag">ol</span>,<span class="hljs-selector-tag">h1</span>,<span class="hljs-selector-tag">h2</span>,<span class="hljs-selector-tag">h3</span>,<span class="hljs-selector-tag">h4</span>,<span class="hljs-selector-tag">h5</span>,<span class="hljs-selector-tag">h6</span>,<span class="hljs-selector-tag">p</span>,<span class="hljs-selector-tag">form</span>,<span class="hljs-selector-tag">header</span>,<span class="hljs-selector-tag">section</span>,<span class="hljs-selector-tag">article</span>,<span class="hljs-selector-tag">footer</span>&#123;<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;&#125;<br><span class="hljs-selector-tag">body</span>,<span class="hljs-selector-tag">button</span>,<span class="hljs-selector-tag">input</span>,select,<span class="hljs-selector-tag">textarea</span>&#123;<span class="hljs-attribute">font</span>:<span class="hljs-number">12px</span>/<span class="hljs-number">1.5</span> tahoma,<span class="hljs-string">&#x27;\5FAE\8F6F\96C5\9ED1&#x27;</span>,sans-serif&#125;<br><span class="hljs-selector-tag">h1</span>,<span class="hljs-selector-tag">h2</span>,<span class="hljs-selector-tag">h3</span>,<span class="hljs-selector-tag">h4</span>,<span class="hljs-selector-tag">h5</span>,<span class="hljs-selector-tag">h6</span>&#123;<span class="hljs-attribute">font-size</span>:<span class="hljs-number">100%</span>&#125;<br><span class="hljs-selector-tag">em</span>,<span class="hljs-selector-tag">b</span>&#123;<span class="hljs-attribute">font-style</span>:normal&#125;<br><span class="hljs-selector-tag">a</span>&#123;<span class="hljs-attribute">text-decoration</span>:none&#125; <br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span>&#123;<span class="hljs-attribute">text-decoration</span>:underline&#125;<br><span class="hljs-selector-tag">img</span>&#123;<span class="hljs-attribute">border</span>:<span class="hljs-number">0</span>&#125; <br><span class="hljs-selector-tag">body</span>&#123;<span class="hljs-attribute">padding-top</span>:<span class="hljs-number">42px</span>&#125; <br><span class="hljs-selector-tag">button</span>,<span class="hljs-selector-tag">input</span>,select,<span class="hljs-selector-tag">textarea</span>&#123;<span class="hljs-attribute">font-size</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">outline</span>:none&#125;<br><span class="hljs-selector-tag">table</span>&#123;<span class="hljs-attribute">border-collapse</span>:collapse;<span class="hljs-attribute">border-spacing</span>:<span class="hljs-number">0</span>&#125;<br><span class="hljs-selector-tag">td</span>,<span class="hljs-selector-tag">th</span>,<span class="hljs-selector-tag">ul</span>,<span class="hljs-selector-tag">ol</span>&#123;<span class="hljs-attribute">padding</span>:<span class="hljs-number">0</span>&#125;<br></code></pre></td></tr></table></figure><h2 id="移动端："><a href="#移动端：" class="headerlink" title="移动端："></a>移动端：</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 移动端常用reset.css (文字版本) */</span><br><span class="hljs-comment">/* reset */</span><br><span class="hljs-selector-tag">html</span>,<span class="hljs-selector-tag">body</span>,<span class="hljs-selector-tag">div</span>,<span class="hljs-selector-tag">p</span>,<span class="hljs-selector-tag">ul</span>,<span class="hljs-selector-tag">li</span>,<span class="hljs-selector-tag">dl</span>,<span class="hljs-selector-tag">dt</span>,<span class="hljs-selector-tag">dd</span>,<span class="hljs-selector-tag">em</span>,<span class="hljs-selector-tag">i</span>,<span class="hljs-selector-tag">span</span>,<span class="hljs-selector-tag">a</span>,<span class="hljs-selector-tag">img</span>,<span class="hljs-selector-tag">input</span>,<span class="hljs-selector-tag">h1</span>,<span class="hljs-selector-tag">h2</span>,<span class="hljs-selector-tag">h3</span>,<span class="hljs-selector-tag">h4</span>,<span class="hljs-selector-tag">h5</span> &#123;<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">padding</span>:<span class="hljs-number">0</span>&#125;<br><span class="hljs-selector-tag">a</span>,<span class="hljs-selector-tag">img</span>,<span class="hljs-selector-tag">input</span> &#123;<span class="hljs-attribute">border</span>:none;&#125;<br><span class="hljs-selector-tag">body</span>&#123;<span class="hljs-attribute">font</span>: <span class="hljs-number">14px</span>/<span class="hljs-number">1.75</span> -apple-system, <span class="hljs-string">&quot;Helvetica Neue&quot;</span>, Helvetica, Arial, sans-serif;&#125;<br><span class="hljs-selector-tag">table</span>&#123;<span class="hljs-attribute">border-collapse</span>:collapse;<span class="hljs-attribute">border-spacing</span>:<span class="hljs-number">0</span>&#125;<br><span class="hljs-selector-tag">a</span> &#123;<span class="hljs-attribute">text-decoration</span>:none;&#125;<br><span class="hljs-selector-tag">ul</span>,<span class="hljs-selector-tag">li</span>&#123;<span class="hljs-attribute">list-style</span>: none&#125;<br><br><br><br><span class="hljs-comment">/* 移动端常用reset.css (无文字版本) */</span><br><span class="hljs-comment">/* reset */</span><br><span class="hljs-selector-tag">html</span>,<span class="hljs-selector-tag">body</span>,<span class="hljs-selector-tag">div</span>,<span class="hljs-selector-tag">p</span>,<span class="hljs-selector-tag">ul</span>,<span class="hljs-selector-tag">li</span>,<span class="hljs-selector-tag">dl</span>,<span class="hljs-selector-tag">dt</span>,<span class="hljs-selector-tag">dd</span>,<span class="hljs-selector-tag">em</span>,<span class="hljs-selector-tag">i</span>,<span class="hljs-selector-tag">span</span>,<span class="hljs-selector-tag">a</span>,<span class="hljs-selector-tag">img</span>,<span class="hljs-selector-tag">input</span>,<span class="hljs-selector-tag">h1</span>,<span class="hljs-selector-tag">h2</span>,<span class="hljs-selector-tag">h3</span>,<span class="hljs-selector-tag">h4</span>,<span class="hljs-selector-tag">h5</span> &#123;<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">padding</span>:<span class="hljs-number">0</span>&#125;<br><span class="hljs-selector-tag">a</span>,<span class="hljs-selector-tag">img</span>,<span class="hljs-selector-tag">input</span> &#123;<span class="hljs-attribute">border</span>:none;&#125;<br><span class="hljs-selector-tag">body</span>&#123;<span class="hljs-attribute">font</span>: <span class="hljs-number">14px</span>/<span class="hljs-number">1.75</span>  -apple-system, <span class="hljs-string">&quot;Helvetica Neue&quot;</span>, Helvetica, Arial, sans-serif;-webkit-tap-highlight-<span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);&#125;<br><span class="hljs-selector-tag">table</span>&#123;<span class="hljs-attribute">border-collapse</span>:collapse;<span class="hljs-attribute">border-spacing</span>:<span class="hljs-number">0</span>&#125;<br><span class="hljs-selector-tag">a</span> &#123;<span class="hljs-attribute">text-decoration</span>:none;&#125;<br><span class="hljs-selector-tag">ul</span>,<span class="hljs-selector-tag">li</span>&#123;<span class="hljs-attribute">list-style</span>: none&#125;<br><span class="hljs-selector-tag">a</span>, <span class="hljs-selector-tag">img</span> &#123;-webkit-touch-callout: none; <span class="hljs-comment">/* 禁止长按链接与图片弹出菜单 */</span>&#125;<br><span class="hljs-selector-tag">html</span>, <span class="hljs-selector-tag">body</span> &#123;<br>    -webkit-user-select: none;   <span class="hljs-comment">/* 禁止选中文本（如无文本选中需求，此为必选项） */</span><br>    user-select: none;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="PC常用（TX互娱cp）："><a href="#PC常用（TX互娱cp）：" class="headerlink" title="PC常用（TX互娱cp）："></a>PC常用（TX互娱cp）：</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* reset */</span><br><span class="hljs-selector-tag">body</span>,<span class="hljs-selector-tag">div</span>,<span class="hljs-selector-tag">dl</span>,<span class="hljs-selector-tag">dt</span>,<span class="hljs-selector-tag">dd</span>,<span class="hljs-selector-tag">ul</span>,<span class="hljs-selector-tag">ol</span>,<span class="hljs-selector-tag">li</span>,<span class="hljs-selector-tag">h1</span>,<span class="hljs-selector-tag">h2</span>,<span class="hljs-selector-tag">h3</span>,<span class="hljs-selector-tag">h4</span>,<span class="hljs-selector-tag">h5</span>,<span class="hljs-selector-tag">h6</span>,pre,<span class="hljs-selector-tag">form</span>,<span class="hljs-selector-tag">fieldset</span>,<span class="hljs-selector-tag">input</span>,<span class="hljs-selector-tag">textarea</span>,<span class="hljs-selector-tag">p</span>,<span class="hljs-selector-tag">blockquote</span>,<span class="hljs-selector-tag">th</span>,<span class="hljs-selector-tag">td</span>&#123;<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">padding</span>:<span class="hljs-number">0</span>;&#125;<br><span class="hljs-selector-tag">table</span>&#123;<span class="hljs-attribute">border-collapse</span>:collapse;<span class="hljs-attribute">border-spacing</span>:<span class="hljs-number">0</span>;&#125;<br><span class="hljs-selector-tag">address</span>,<span class="hljs-selector-tag">caption</span>,<span class="hljs-selector-tag">cite</span>,<span class="hljs-selector-tag">code</span>,<span class="hljs-selector-tag">dfn</span>,<span class="hljs-selector-tag">em</span>,<span class="hljs-selector-tag">strong</span>,<span class="hljs-selector-tag">th</span>,<span class="hljs-selector-tag">var</span>&#123;<span class="hljs-attribute">font-weight</span>:normal;<span class="hljs-attribute">font-style</span>:normal;&#125;<br><span class="hljs-selector-tag">ol</span>,<span class="hljs-selector-tag">ul</span>&#123;<span class="hljs-attribute">list-style</span>:none;&#125;<br><span class="hljs-selector-tag">h1</span>,<span class="hljs-selector-tag">h2</span>,<span class="hljs-selector-tag">h3</span>,<span class="hljs-selector-tag">h4</span>,<span class="hljs-selector-tag">h5</span>,<span class="hljs-selector-tag">h6</span>&#123;<span class="hljs-attribute">font-weight</span>:normal;<span class="hljs-attribute">font-size</span>:<span class="hljs-number">100%</span>;&#125;<br><span class="hljs-selector-tag">q</span><span class="hljs-selector-pseudo">:before</span>,<span class="hljs-selector-tag">q</span><span class="hljs-selector-pseudo">:after</span>&#123;<span class="hljs-attribute">content</span>:<span class="hljs-string">&#x27;&#x27;</span>;&#125;<br><span class="hljs-selector-tag">fieldset</span>,<span class="hljs-selector-tag">img</span>,<span class="hljs-selector-tag">abbr</span>,acronym&#123;<span class="hljs-attribute">border</span>:<span class="hljs-number">0</span>;&#125;<br><span class="hljs-comment">/* basic */</span><br><span class="hljs-selector-class">.c</span><span class="hljs-selector-pseudo">:before</span>,<span class="hljs-selector-class">.c</span><span class="hljs-selector-pseudo">:after</span>&#123;<span class="hljs-attribute">content</span>:<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-attribute">display</span>:table;&#125;<br><span class="hljs-selector-class">.c</span><span class="hljs-selector-pseudo">:after</span>&#123;<span class="hljs-attribute">clear</span>:both;&#125;<br><span class="hljs-selector-class">.c</span>&#123;zoom:<span class="hljs-number">1</span>;&#125;<br><span class="hljs-selector-tag">body</span> &#123;<span class="hljs-attribute">font-family</span>:<span class="hljs-string">&#x27;\5FAE\8F6F\96C5\9ED1&#x27;</span>;<span class="hljs-attribute">font-size</span>:<span class="hljs-number">12px</span>;<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#191e32</span>;&#125;<br><span class="hljs-selector-tag">a</span> &#123;<span class="hljs-attribute">text-decoration</span>:none;<span class="hljs-attribute">overflow</span>:hidden;&#125;<br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> &#123;<span class="hljs-attribute">text-decoration</span>:none;&#125;<br><span class="hljs-selector-class">.wrap</span> &#123;<span class="hljs-attribute">min-width</span>:<span class="hljs-number">1200px</span>;<span class="hljs-attribute">overflow</span>: hidden;&#125;<br><span class="hljs-selector-class">.container</span> &#123;<span class="hljs-attribute">width</span>:<span class="hljs-number">1200px</span>;<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span> auto;&#125;<br><span class="hljs-selector-class">.hide</span> &#123;<span class="hljs-attribute">display</span>:block;<span class="hljs-attribute">width</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">overflow</span>:hidden;&#125;<br><span class="hljs-selector-class">.mt</span>&#123;<span class="hljs-attribute">margin-top</span>: <span class="hljs-number">90px</span>;&#125;<br><span class="hljs-selector-class">.pr</span> &#123;<span class="hljs-attribute">position</span>:relative;&#125;<br><span class="hljs-selector-class">.pa</span> &#123;<span class="hljs-attribute">position</span>:absolute;&#125;<br><span class="hljs-selector-class">.db</span>&#123;<span class="hljs-attribute">display</span>:block;<span class="hljs-attribute">text-indent</span>:-<span class="hljs-number">999em</span>;&#125;<br><span class="hljs-selector-class">.sp</span>&#123;<span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">../images/sp.png</span>) no-repeat;<span class="hljs-attribute">background-position</span>: <span class="hljs-number">9999px</span> <span class="hljs-number">9999px</span>;&#125;<br><span class="hljs-selector-class">.cont</span>&#123;<span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;<span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;<span class="hljs-attribute">margin-top</span>: -<span class="hljs-number">298px</span>;&#125;<br><span class="hljs-selector-class">.line-bg</span>&#123;<span class="hljs-attribute">top</span>: <span class="hljs-number">60px</span>;<span class="hljs-attribute">left</span>: -<span class="hljs-number">360px</span>;<span class="hljs-attribute">z-index</span>: -<span class="hljs-number">1</span>;-webkit-<span class="hljs-attribute">animation</span>:  fadeIn <span class="hljs-number">2s</span>;<span class="hljs-attribute">animation</span>: fadeIn <span class="hljs-number">2s</span>;&#125;<br><span class="hljs-selector-class">.min-title</span>&#123;<span class="hljs-attribute">position</span>: relative;<span class="hljs-attribute">width</span>: <span class="hljs-number">411px</span>;<span class="hljs-attribute">height</span>: <span class="hljs-number">60px</span>;<span class="hljs-attribute">background-position</span>: -<span class="hljs-number">312px</span> <span class="hljs-number">0</span>;<span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">16px</span>;&#125;<br><span class="hljs-selector-class">.min-title</span> <span class="hljs-selector-tag">h2</span>&#123;<span class="hljs-attribute">position</span>: absolute;<span class="hljs-attribute">left</span>: <span class="hljs-number">95px</span>;<span class="hljs-attribute">top</span>:-<span class="hljs-number">4px</span>;<span class="hljs-attribute">font-size</span>:<span class="hljs-number">38px</span>;<span class="hljs-attribute">font-weight</span>: bold;<span class="hljs-attribute">color</span>:<span class="hljs-number">#ff4c36</span>;&#125;<br><span class="hljs-selector-class">.main</span> <span class="hljs-selector-tag">img</span>&#123;<span class="hljs-attribute">display</span>: block;&#125;<br></code></pre></td></tr></table></figure><h2 id="畅游cp："><a href="#畅游cp：" class="headerlink" title="畅游cp："></a>畅游cp：</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">html</span>, <span class="hljs-selector-tag">body</span>, <span class="hljs-selector-tag">div</span>, <span class="hljs-selector-tag">span</span>, applet, <span class="hljs-selector-tag">object</span>, <span class="hljs-selector-tag">iframe</span>,<br><span class="hljs-selector-tag">h1</span>, <span class="hljs-selector-tag">h2</span>, <span class="hljs-selector-tag">h3</span>, <span class="hljs-selector-tag">h4</span>, <span class="hljs-selector-tag">h5</span>, <span class="hljs-selector-tag">h6</span>, <span class="hljs-selector-tag">p</span>, <span class="hljs-selector-tag">blockquote</span>, pre,<br><span class="hljs-selector-tag">a</span>, <span class="hljs-selector-tag">abbr</span>, acronym, <span class="hljs-selector-tag">address</span>, big, <span class="hljs-selector-tag">cite</span>, <span class="hljs-selector-tag">code</span>,<br><span class="hljs-selector-tag">del</span>, <span class="hljs-selector-tag">dfn</span>, <span class="hljs-selector-tag">em</span>, <span class="hljs-attribute">font</span>, <span class="hljs-selector-tag">img</span>, <span class="hljs-selector-tag">ins</span>, <span class="hljs-selector-tag">kbd</span>, <span class="hljs-selector-tag">q</span>, s, <span class="hljs-selector-tag">samp</span>,<br>small, strike, <span class="hljs-selector-tag">strong</span>, sub, <span class="hljs-selector-tag">sup</span>, tt, <span class="hljs-selector-tag">var</span>,<br><span class="hljs-selector-tag">b</span>, u, <span class="hljs-selector-tag">i</span>, center,<br><span class="hljs-selector-tag">dl</span>, <span class="hljs-selector-tag">dt</span>, <span class="hljs-selector-tag">dd</span>, <span class="hljs-selector-tag">ol</span>, <span class="hljs-selector-tag">ul</span>, <span class="hljs-selector-tag">li</span>,<br><span class="hljs-selector-tag">fieldset</span>, <span class="hljs-selector-tag">form</span>, <span class="hljs-selector-tag">label</span>, <span class="hljs-selector-tag">legend</span>,<br><span class="hljs-selector-tag">table</span>, <span class="hljs-selector-tag">caption</span>, <span class="hljs-selector-tag">tbody</span>, <span class="hljs-selector-tag">tfoot</span>, <span class="hljs-selector-tag">thead</span>, <span class="hljs-selector-tag">tr</span>, <span class="hljs-selector-tag">th</span>, <span class="hljs-selector-tag">td</span> &#123;<br><span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;<br><span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;<br><span class="hljs-attribute">border</span>: <span class="hljs-number">0</span>;<br><span class="hljs-attribute">outline</span>: <span class="hljs-number">0</span>;<br><span class="hljs-attribute">font-size</span>: <span class="hljs-number">100%</span>;<br><span class="hljs-attribute">background</span>: transparent;<br>&#125;<br><span class="hljs-selector-tag">table</span> &#123;<br><span class="hljs-attribute">border-collapse</span>:collapse;<br><span class="hljs-attribute">border-spacing</span>:<span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-selector-tag">fieldset</span>, <span class="hljs-selector-tag">img</span> &#123;<span class="hljs-attribute">border</span>:<span class="hljs-number">0</span>; &#125;<br><span class="hljs-selector-tag">address</span>, <span class="hljs-selector-tag">caption</span>, <span class="hljs-selector-tag">cite</span>, <span class="hljs-selector-tag">code</span>, <span class="hljs-selector-tag">dfn</span>, <span class="hljs-selector-tag">em</span>, <span class="hljs-selector-tag">strong</span>, <span class="hljs-selector-tag">th</span>, <span class="hljs-selector-tag">var</span> &#123;<br><span class="hljs-attribute">font-style</span>:normal;<br><span class="hljs-attribute">font-weight</span>:normal;<br>&#125;<br><span class="hljs-selector-tag">ol</span>, <span class="hljs-selector-tag">ul</span> &#123; <span class="hljs-attribute">list-style</span>:none; &#125;<br><span class="hljs-selector-tag">caption</span>, <span class="hljs-selector-tag">th</span> &#123; <span class="hljs-attribute">text-align</span><span class="hljs-selector-pseudo">:left</span>; &#125;<br><span class="hljs-selector-tag">h1</span>, <span class="hljs-selector-tag">h2</span>, <span class="hljs-selector-tag">h3</span>, <span class="hljs-selector-tag">h4</span>, <span class="hljs-selector-tag">h5</span>, <span class="hljs-selector-tag">h6</span> &#123;<br><span class="hljs-attribute">font-size</span>:<span class="hljs-number">100%</span>;<br><span class="hljs-attribute">font-weight</span>:normal;<br>&#125;<br><span class="hljs-selector-pseudo">:focus</span> &#123; <span class="hljs-attribute">outline</span>: <span class="hljs-number">0</span>;&#125;<br><span class="hljs-selector-tag">a</span>&#123; <span class="hljs-attribute">text-decoration</span>:none;&#125;<br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-tag">img</span>&#123; <span class="hljs-attribute">border</span>:none;&#125;<br><br><span class="hljs-comment">/*清除浮动*/</span><br><span class="hljs-selector-class">.clearfix</span><span class="hljs-selector-pseudo">:after</span> &#123;<br><span class="hljs-attribute">content</span>: <span class="hljs-string">&quot;.&quot;</span>;<br><span class="hljs-attribute">display</span>: block;<br><span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;<br><span class="hljs-attribute">clear</span>: both;<br><span class="hljs-attribute">visibility</span>: hidden;<br>&#125;<br><span class="hljs-selector-class">.clearfix</span> &#123;<span class="hljs-attribute">display</span>: inline-block;&#125;<br><span class="hljs-comment">/* Hides from IE-mac \*/</span><br>* <span class="hljs-selector-tag">html</span> <span class="hljs-selector-class">.clearfix</span> &#123; <span class="hljs-attribute">height</span>: <span class="hljs-number">1%</span>;&#125;<br><span class="hljs-selector-class">.clearfix</span> &#123;<span class="hljs-attribute">display</span>: block;&#125;<br><span class="hljs-comment">/* End hide from IE-mac */</span><br><br><span class="hljs-comment">/*png css hack for ie6*/</span><br>*<span class="hljs-selector-tag">html</span> <span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.png</span>&#123;<br>    _background-image: <span class="hljs-built_in">expression</span>(this.runtimeStyle.backgroundImage = <span class="hljs-string">&quot;none&quot;</span>,this.runtimeStyle.filter = <span class="hljs-string">&quot;progid:DXImageTransform.Microsoft.AlphaImageLoader(src=&#x27;&quot;</span> + this.src + <span class="hljs-string">&quot;&#x27;, sizingMethod=&#x27;image&#x27;)&quot;</span>,this.src = <span class="hljs-string">&quot;http://i0.itc.cn/20101019/848_0a785a7b_1118_4825_85dc_e8696988c94b_0.gif&quot;</span>);<br>&#125;<br><span class="hljs-comment">/*Extra CSS File For Change on All The Websites*/</span><br><span class="hljs-keyword">@import</span> url(<span class="hljs-attribute">http</span>://www1.changyou.com/styles/extra.css);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>css</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】PC&amp;M双端转跳</title>
    <link href="/js/%E3%80%90js%E3%80%91PC&amp;M%E5%8F%8C%E7%AB%AF%E8%BD%AC%E8%B7%B3/"/>
    <url>/js/%E3%80%90js%E3%80%91PC&amp;M%E5%8F%8C%E7%AB%AF%E8%BD%AC%E8%B7%B3/</url>
    
    <content type="html"><![CDATA[<p><strong>移动端加：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 不是移动设备里跳转到PC地址</span><br><span class="hljs-keyword">if</span>(!<span class="hljs-regexp">/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|OperaMini/i</span>.<span class="hljs-title function_">tesst</span>(navigator.<span class="hljs-property">userAgent</span>)) &#123;<br><span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span> = <span class="hljs-string">&quot;/cp/a11111212xx/index.htm&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>PC中加：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//是移动端跳转到移动地址</span><br><span class="hljs-keyword">if</span>(<span class="hljs-regexp">/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|OperaMini/i</span>.<span class="hljs-title function_">test</span>(navigator.<span class="hljs-property">userAgent</span>) ) &#123;<br><span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span> = <span class="hljs-string">&quot;/cp/a11111212xxm/index.htm&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】常用生成图片插件</title>
    <link href="/js/%E3%80%90js%E3%80%91%E5%B8%B8%E7%94%A8%E7%94%9F%E6%88%90%E5%9B%BE%E7%89%87%E6%8F%92%E4%BB%B6/"/>
    <url>/js/%E3%80%90js%E3%80%91%E5%B8%B8%E7%94%A8%E7%94%9F%E6%88%90%E5%9B%BE%E7%89%87%E6%8F%92%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>多用于游戏页面h5，保存用户游戏生涯等海报</p><h2 id="使用方法："><a href="#使用方法：" class="headerlink" title="使用方法："></a>使用方法：</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;<span class="hljs-selector-tag">div</span> id=&quot;toimg&quot;&gt;这个<span class="hljs-selector-tag">div</span>是需要转为图片的，不能<span class="hljs-attribute">display</span>:none，详见注意事项&lt;/div&gt;<br>&lt;script src=<span class="hljs-string">&quot;//game.gtimg.cn/images/js/dom2img/1.0.min.js&quot;</span>&gt;&lt;/script&gt;<br><br>&lt;script&gt;<br>// 生成后的图片会出现在dom元素后面，类名是dom2img-result<br><span class="hljs-built_in">dom2img</span>(<span class="hljs-string">&#x27;#toimg&#x27;</span>)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h2 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h2><ul><li>用于生成图片的dom元素不能display:none或opacity:0。可以用z-index放到其它元素下面；或者用绝对定位，将其放到某个div容器的可视区之外，然后容器设置overflow:hidden</li><li>用于生成图片的dom元素的父元素们不能display:none</li><li>综合1、2，即用于生成图片的dom元素要本身是可见的，且能计算到尺寸值，但不需要出现在视野中</li><li>生成后的图，会自动追加到用于生成的dom元素后面，类名是dom2img-result，如果不想把图片的样子展示给用户，可将其样式设置为opacity:0</li><li>某些早期zepto版本内置了一段过时的脚本，会有冲突。如果遇到奇怪的页面问题，请将页面的zepto替换为zepto1.2版本：<a href="https://ossweb-img.qq.com/images/js/zepto/zepto1.2.min.js">https://ossweb-img.qq.com/images/js/zepto/zepto1.2.min.js</a></li><li>图片跨域的缘故，不是所有的图都能合并到最后生成的图中</li></ul><h2 id="关于横竖屏"><a href="#关于横竖屏" class="headerlink" title="关于横竖屏"></a>关于横竖屏</h2><p>由于横竖旋屏过程中无法实时生成图片，在适配上会出现较多的问题，故不建议根据横竖屏的情况生成不同的分享图，建议统一成竖屏或者统一成横屏。</p><h2 id="生成的图和原dom元素不一样"><a href="#生成的图和原dom元素不一样" class="headerlink" title="生成的图和原dom元素不一样"></a>生成的图和原dom元素不一样</h2><p>因为组件是用模拟浏览器渲染的方式，来生成图片，和浏览器自身的渲染方式不完全一致：</p><ol><li>生成的图片上的元素层级关系不正确：针对层级关系不正确的元素，手动设置z-index</li><li>生成的图缺失原本的dom元素的部分样式，比如没有box-shadow：支持的属性与不支持的CSS属性看<a href="http://html2canvas.hertzen.com/features">这里</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【html】meta标签大全</title>
    <link href="/html/%E3%80%90html%E3%80%91meta%E6%A0%87%E7%AD%BE%E5%A4%A7%E5%85%A8/"/>
    <url>/html/%E3%80%90html%E3%80%91meta%E6%A0%87%E7%AD%BE%E5%A4%A7%E5%85%A8/</url>
    
    <content type="html"><![CDATA[<p>个人工作常用（TX互娱cp）：</p><h2 id="PC："><a href="#PC：" class="headerlink" title="PC："></a>PC：</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;gbk&quot;</span> /&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;robots&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;all&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;author&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;Tencent-CP&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Copyright&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;Tencent&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Description&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;页面的描述内容&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Keywords&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;页面关键字&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><h2 id="M："><a href="#M：" class="headerlink" title="M："></a>M：</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;gbk&quot;</span> /&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 为了防止页面数字被识别为电话号码，可根据实际需要添加： --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;format-detection&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;telephone=no&quot;</span>&gt;</span> <br><span class="hljs-comment">&lt;!-- 让添加到主屏幕的网页再次打开时全屏展示，可添加：   --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;yes&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mobile-web-app-capable&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;yes&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-mobile-web-app-capable&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;robots&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;all&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;author&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;Tencent-CP&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Copyright&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;Tencent&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Description&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;页面的描述内容&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Keywords&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;页面关键字&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><h2 id="meta标签大全详解："><a href="#meta标签大全详解：" class="headerlink" title="meta标签大全详解："></a>meta标签大全详解：</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>//声明字符的编码**防止出现乱码<br><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;x-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>//避免IE使用兼容模式(必须放在前面否则无效)<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0, shrink-to-fit=no&quot;</span>&gt;</span><br>//对移动设备的友好 确保适当的绘制和触屏缩放 shrink-to-fit=no则禁用其缩放(zooming)功能*Bootstrap<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;pragma&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;no-cache&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Cache-Control&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;no-cache, must-revalidate&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">META</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;expires&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;0&quot;</span>&gt;</span><br>//禁止html页面缓存<br><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;author&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;作者&quot;</span>&gt;</span><br>//规定文档的作者<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;description&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;页面描述&quot;</span>&gt;</span><br>//规定文档页面的描述(限150字符) 搜索引擎会把这个描述显示在搜索结果中<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;keywords&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;关键字&quot;</span>&gt;</span><br>//搜索关键字用来告诉搜索引擎<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;robots&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot; index,follow&quot;</span> /&gt;</span><br>//所有搜索引擎(搜索引擎抓取)<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;googlebot&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;index,follow&quot;</span>&gt;</span><br>//搜索引擎抓取(只对谷歌有效)<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">“expires”</span> <span class="hljs-attr">content</span>=<span class="hljs-string">“Wed,</span> <span class="hljs-attr">26</span> <span class="hljs-attr">Feb</span> <span class="hljs-attr">1997</span> <span class="hljs-attr">08</span>：<span class="hljs-attr">21</span>：<span class="hljs-attr">57</span> <span class="hljs-attr">GMT</span>”&gt;</span><br>//设定网页的到期时间。一旦网页过期，必须到服务器上重新调阅<br><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;x5-orientation&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;portrait&quot;</span>&gt;</span><br>//QQ强制竖屏<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Cache-Control&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;no-transform&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Cache-Control&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;no-siteapp&quot;</span> /&gt;</span><br>//不让百度转码 原网页呈献给移动端<br><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Pragma&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;no-cache&quot;</span>&gt;</span> <br>//禁止浏览器从本地机的缓存中调阅页面内容<br><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Window-target&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;_top&quot;</span>&gt;</span><br>//用来防止别人在框架里调用你的页面<br><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;refresh&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;秒数,URL地址&quot;</span>&gt;</span><br>//规定几秒后跳转到指定的URL链接<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;generator&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;FrontPage4.0&quot;</span>&gt;</span><br>//规定用于生成文档的一个软件包<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Security-Policy&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;default-src &#x27;self&#x27;&quot;</span>&gt;</span><br>//允许控制资源的过度加载<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;application-name&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;应用名称&quot;</span>&gt;</span><br>//Web应用程序的名称(仅网站被用作一个应用时才使用它)<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;google&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;nositelinkssearchbox&quot;</span>&gt;</span><br>//告诉Google不显示网站链接的搜索框信息<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;google&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;notranslate&quot;</span>&gt;</span><br>//告诉Google不提供此页面的翻译<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;google-site-verification&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;verification_token&quot;</span>&gt;</span><br>//验证 Google 搜索控制台的所有权<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;yandex-verification&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;verification_token&quot;</span>&gt;</span><br>//验证 Yandex 网站管理员的所有权<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;msvalidate.01&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;verification_token&quot;</span>&gt;</span><br>//验证 Bing 网站管理员中心的所有权<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;alexaVerifyID&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;verification_token&quot;</span>&gt;</span><br>//验证 Alexa 控制台的所有权<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;p:domain_verify&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;code from pinterest&quot;</span>&gt;</span><br>//验证 Pinterest 控制台的所有权<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;norton-safeweb-site-verification&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;norton code&quot;</span>&gt;</span><br>//验证 Norton 安全站点的所有权<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;generator&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;program&quot;</span>&gt;</span><br>//用来命名软件或用于构建网页（如WordPress、Dreamweaver）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;subject&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;主题描述&quot;</span>&gt;</span><br>//网站主题的简短描述<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;abstract&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>// 非常简短(不大于10字)的描述。<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;google&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;notranslate&quot;</span>&gt;</span><br>//禁用翻译提示（Google Chrome）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;rating&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;General&quot;</span>&gt;</span><br>//基于网站内容给出一般的年龄分级<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;referrer&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;no-referrer&quot;</span>&gt;</span><br>//允许控制 referrer 信息如何传递<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;format-detection&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;telephone=no&quot;</span>&gt;</span><br>//禁用自动检测和格式化可能的电话号码<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;x-dns-prefetch-control&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;off&quot;</span>&gt;</span><br>//通过设置为 “off” 完全退出 DNS 预取<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;set-cookie&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;name=value; expires=date; path=url&quot;</span>&gt;</span><br>//在客户端存储 cookie，web 浏览器的客户端识别<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Window-Target&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;_value&quot;</span>&gt;</span><br>//指定要显示在一个特定框架中的页面<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;ICBM&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;latitude, longitude&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;geo.position&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;latitude;longitude&quot;</span>&gt;</span><br>//地理标签<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;geo.region&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;country[-state]&quot;</span>&gt;</span><br>//国家代码 (ISO 3166-1): 强制性, 州代码 (ISO 3166-2): 可选; 如 content=&quot;US&quot; / content=&quot;US-NY&quot;<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;geo.placename&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;city/town&quot;</span>&gt;</span><br>//如 content=&quot;New York City&quot;<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-itunes-app&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;app-id=APP_ID,affiliate-data=AFFILIATE_ID,app-argument=SOME_TEXT&quot;</span>&gt;</span><br>//智能应用 Banner（apple IOS）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;format-detection&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;telephone=no&quot;</span>&gt;</span><br>//禁用自动检测和格式化可能的电话号码（apple IOS）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-mobile-web-app-capable&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;yes&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;black&quot;</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-mobile-web-app-title&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;应用标题&quot;</span>&gt;</span><br>//添加到主屏幕（apple IOS）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-itunes-app&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;app-id=APP-ID, app-argument=http/url-sample.com&quot;</span>&gt;</span><br>// iOS 应用深层链接（apple IOS）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;theme-color&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;#E64545&quot;</span>&gt;</span><br>//添加到主屏幕（Google Android）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mobile-web-app-capable&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;yes&quot;</span>&gt;</span><br>//https://developer.chrome.com/multidevice/android/installtohomescreen（Google Android）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mobile-web-app-capable&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;yes&quot;</span>&gt;</span><br>//定义你的网页为 Web 应用<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;skype_toolbar&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;skype_toolbar_parser_compatible&quot;</span>&gt;</span><br>// IE10: 禁用链接点击高亮<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;al:ios:url&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;applinks://docs&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;al:ios:app_store_id&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;12345&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;al:ios:app_name&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;App Links&quot;</span>&gt;</span><br>//应用链接（IOS）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;al:android:url&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;applinks://docs&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;al:android:app_name&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;App Links&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;al:android:package&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;org.applinks&quot;</span>&gt;</span><br>//应用链接（Android）<br>  <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;wap-font-scale&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;no&quot;</span>&gt;</span><br>//禁用的UC浏览器的功能，“当此页面中有较多文本时缩放字体”（UC移动浏览器）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;screen-orientation&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;landscape/portrait&quot;</span>&gt;</span><br>//在指定方向上锁定屏幕 锁定横/竖屏（UC移动浏览器）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;full-screen&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;yes&quot;</span>&gt;</span><br>//全屏显示此页面（UC移动浏览器）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;imagemode&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;force&quot;</span>&gt;</span><br>//即使在“文本模式”下，UC浏览器也会显示图片（UC移动浏览器）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;browsermode&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;application&quot;</span>&gt;</span><br>//页面将以“应用模式”显示 全屏、禁止手势等（UC移动浏览器）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;nightmode&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;disable&quot;</span>&gt;</span><br>//在此页面禁用“夜间模式”（UC移动浏览器）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;layoutmode&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;fitscreen&quot;</span>&gt;</span><br>//简化页面 减少数据传输（UC移动浏览器）<br><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;al:web:url&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;http://applinks.org/documentation&quot;</span>&gt;</span><br>//Web回退<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;renderer&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;webkit|ie-comp|ie-stand&quot;</span>&gt;</span><br>//选择渲染引擎（360浏览器）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;x5-orientation&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;landscape/portrait&quot;</span>&gt;</span><br>//在指定方向上锁定屏幕 锁定横/竖屏（QQ移动浏览器）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;x5-fullscreen&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br>//全屏显示此页面（QQ移动浏览器）<br> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;x5-page-mode&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>//页面将以“应用模式”显示/全屏等（QQ移动浏览器）<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>html</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】echarts常用配置</title>
    <link href="/js/%E3%80%90js%E3%80%91echarts%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/"/>
    <url>/js/%E3%80%90js%E3%80%91echarts%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="自定义提示框"><a href="#自定义提示框" class="headerlink" title="自定义提示框"></a>自定义提示框</h1><p>如果是使用 dataset 模式，则需要根据 params 修改下显示值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> option = &#123;<br>  <span class="hljs-attr">tooltip</span>: &#123;<br>    <span class="hljs-title function_">formatter</span>(<span class="hljs-params">params</span>) &#123;<br>      <span class="hljs-comment">// 标题</span><br>      <span class="hljs-keyword">const</span> titleText = <span class="hljs-string">`<span class="hljs-subst">$&#123;params[<span class="hljs-number">0</span>].axisValue&#125;</span>`</span>;<br>      <span class="hljs-comment">// 根据 params 生成常规数据内容</span><br>      <span class="hljs-keyword">let</span> content = <span class="hljs-string">&quot;&lt;div&gt;&quot;</span>;<br>      params.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br>        content += <span class="hljs-string">`&lt;div style=&quot;display: flex; align-items: center; line-height: 1.7&quot;&gt;</span><br><span class="hljs-string">              &lt;div style=&quot;width: 10px; height: 10px; border-radius: 50%; background-color: <span class="hljs-subst">$&#123;item.color&#125;</span>&quot;&gt;&lt;/div&gt;</span><br><span class="hljs-string">              &lt;div style=&quot;margin: 0 0 0 5px;&quot;&gt;<span class="hljs-subst">$&#123;item.seriesName&#125;</span>：&lt;/div&gt;</span><br><span class="hljs-string">              &lt;div&gt;<span class="hljs-subst">$&#123;item.value&#125;</span>&lt;/div&gt;</span><br><span class="hljs-string">            &lt;/div&gt;`</span>;<br>      &#125;);<br>      content += <span class="hljs-string">&quot;&lt;/div&gt;&quot;</span>;<br>      <span class="hljs-comment">// 将标题与数据内容拼接成完整的 HTML 返回</span><br>      <span class="hljs-keyword">return</span> titleText + <span class="hljs-string">&quot;&lt;br /&gt;&quot;</span> + content;<br>    &#125;,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="dataset-数据集-多数据源模式"><a href="#dataset-数据集-多数据源模式" class="headerlink" title="dataset 数据集 多数据源模式"></a>dataset 数据集 多数据源模式</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> option = &#123;<br>  <span class="hljs-attr">dataset</span>: [<br>    &#123;<br>      <span class="hljs-comment">// dimensions 与 series[0].encode 任选其一</span><br>      <span class="hljs-comment">// [&quot;x轴key&quot;, &quot;y轴key1&quot;, &quot;y轴key2&quot;, &quot;......&quot;]</span><br>      <span class="hljs-attr">dimensions</span>: [<span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>]<br>      <span class="hljs-attr">source</span>: [<br>        &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;张三&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span> &#125;,<br>        &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;李四&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> &#125;,<br>        &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;王五&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">15</span> &#125;,<br>        &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;李六&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">17</span> &#125;,<br>      ],<br>    &#125;,<br>    &#123;<br>      <span class="hljs-comment">// dimensions 与 series[0].encode 任选其一</span><br>      <span class="hljs-comment">// [&quot;x轴key&quot;, &quot;y轴key1&quot;, &quot;y轴key2&quot;, &quot;......&quot;]</span><br>      <span class="hljs-attr">dimensions</span>: [<span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>]<br>      <span class="hljs-attr">source</span>: [<br>        &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;张三&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span> &#125;,<br>        &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;李四&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> &#125;,<br>        &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;王五&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">15</span> &#125;,<br>        &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;李六&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">17</span> &#125;,<br>      ],<br>    &#125;,<br>  ],<br>  <span class="hljs-attr">series</span>: [<br>    &#123;<br>      <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;line&quot;</span>,<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;xxxxxx&quot;</span>,<br>      <span class="hljs-attr">datasetIndex</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// 使用第1个数据源</span><br>      <span class="hljs-attr">encode</span>: &#123; <span class="hljs-attr">x</span>: <span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-attr">y</span>: <span class="hljs-string">&quot;name&quot;</span> &#125;,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;bar&quot;</span>,<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;xxxxxx&quot;</span>,<br>      <span class="hljs-attr">datasetIndex</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">// 使用第2个数据源</span><br>      <span class="hljs-attr">encode</span>: &#123; <span class="hljs-attr">x</span>: <span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-attr">y</span>: <span class="hljs-string">&quot;name&quot;</span> &#125;,<br>    &#125;,<br>  ],<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="y-轴数据-数字转汉字"><a href="#y-轴数据-数字转汉字" class="headerlink" title="y 轴数据-数字转汉字"></a>y 轴数据-数字转汉字</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> option = &#123;<br>  <span class="hljs-attr">yAxis</span>: &#123;<br>    <span class="hljs-attr">axisLabel</span>: &#123;<br>      <span class="hljs-attr">textStyle</span>: &#123;<br>        <span class="hljs-attr">color</span>: <span class="hljs-function">(<span class="hljs-params">value, index</span>) =&gt;</span> &#123;<br>          <span class="hljs-keyword">if</span> (<span class="hljs-built_in">parseInt</span>(value) === <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;#0f0&quot;</span>;<br>          &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">parseInt</span>(value) === <span class="hljs-number">2</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;#f00&quot;</span>;<br>          &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;#00f&quot;</span>;<br>          &#125;<br>        &#125;,<br>      &#125;,<br>      <span class="hljs-attr">formatter</span>: <span class="hljs-function">(<span class="hljs-params">value, index</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">parseInt</span>(value) === <span class="hljs-number">1</span>) &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;开&quot;</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">parseInt</span>(value) === <span class="hljs-number">2</span>) &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;关&quot;</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;未知&quot;</span>;<br>        &#125;<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="渐变色-线性，径向"><a href="#渐变色-线性，径向" class="headerlink" title="渐变色(线性，径向)"></a>渐变色(线性，径向)</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> option = &#123;<br>  <span class="hljs-attr">series</span>: [<br>    &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;线性渐变&quot;</span>,<br>      <span class="hljs-attr">data</span>: [],<br>      <span class="hljs-attr">smooth</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">areaStyle</span>: &#123;<br>        <span class="hljs-comment">// 线性渐变（常用），前四个参数分别是 x0, y0, x2, y2, 范围从 0 - 1，相当于在图形包围盒中的百分比，如果 globalCoord 为 `true`，则该四个值是绝对的像素位置</span><br>        <span class="hljs-attr">color</span>: &#123;<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;linear&quot;</span>,<br>          <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,<br>          <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,<br>          <span class="hljs-attr">x2</span>: <span class="hljs-number">0</span>,<br>          <span class="hljs-attr">y2</span>: <span class="hljs-number">1</span>,<br>          <span class="hljs-attr">colorStops</span>: [<br>            &#123;<br>              <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,<br>              <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;rgba(58,132,255, 0.5)&quot;</span>, <span class="hljs-comment">// 0% 处的颜色</span><br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">offset</span>: <span class="hljs-number">1</span>,<br>              <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;rgba(58,132,255, 0)&quot;</span>, <span class="hljs-comment">// 100% 处的颜色</span><br>            &#125;,<br>          ],<br>          <span class="hljs-attr">global</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 缺省为 false</span><br>        &#125;,<br>      &#125;,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;径向渐变&quot;</span>,<br>      <span class="hljs-attr">data</span>: [],<br>      <span class="hljs-attr">smooth</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">areaStyle</span>: &#123;<br>        <span class="hljs-comment">// 径向渐变，前三个参数分别是圆心 x, y 和半径，取值同线性渐变</span><br>        <span class="hljs-attr">color</span>: &#123;<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;radial&quot;</span>,<br>          <span class="hljs-attr">x</span>: <span class="hljs-number">0.5</span>,<br>          <span class="hljs-attr">y</span>: <span class="hljs-number">0.5</span>,<br>          <span class="hljs-attr">r</span>: <span class="hljs-number">0.5</span>,<br>          <span class="hljs-attr">colorStops</span>: [<br>            &#123;<br>              <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,<br>              <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;rgba(58,132,255, 0.5)&quot;</span>, <span class="hljs-comment">// 0% 处的颜色</span><br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">offset</span>: <span class="hljs-number">1</span>,<br>              <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;rgba(58,132,255, 0)&quot;</span>, <span class="hljs-comment">// 100% 处的颜色</span><br>            &#125;,<br>          ],<br>          <span class="hljs-attr">global</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 缺省为 false</span><br>        &#125;,<br>      &#125;,<br>    &#125;,<br>  ],<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】时间戳格式化为时间</title>
    <link href="/js/%E3%80%90js%E3%80%91%E6%97%B6%E9%97%B4%E6%88%B3%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%B8%BA%E6%97%B6%E9%97%B4/"/>
    <url>/js/%E3%80%90js%E3%80%91%E6%97%B6%E9%97%B4%E6%88%B3%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%B8%BA%E6%97%B6%E9%97%B4/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">formatDate</span>(<span class="hljs-params">date, fmt</span>) &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/(y+)/</span>.<span class="hljs-title function_">test</span>(fmt)) &#123;<br>    fmt = fmt.<span class="hljs-title function_">replace</span>(<span class="hljs-title class_">RegExp</span>.<span class="hljs-property">$1</span>, (date.<span class="hljs-title function_">getFullYear</span>() + <span class="hljs-string">&#x27;&#x27;</span>).<span class="hljs-title function_">substr</span>(<span class="hljs-number">4</span> - <span class="hljs-title class_">RegExp</span>.<span class="hljs-property">$1</span>.<span class="hljs-property">length</span>));<br>  &#125;<br>  <span class="hljs-keyword">let</span> o = &#123;<br>    <span class="hljs-string">&#x27;M+&#x27;</span>: date.<span class="hljs-title function_">getMonth</span>() + <span class="hljs-number">1</span>,<br>    <span class="hljs-string">&#x27;d+&#x27;</span>: date.<span class="hljs-title function_">getDate</span>(),<br>    <span class="hljs-string">&#x27;h+&#x27;</span>: date.<span class="hljs-title function_">getHours</span>(),<br>    <span class="hljs-string">&#x27;m+&#x27;</span>: date.<span class="hljs-title function_">getMinutes</span>(),<br>    <span class="hljs-string">&#x27;s+&#x27;</span>: date.<span class="hljs-title function_">getSeconds</span>()<br>  &#125;;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> k <span class="hljs-keyword">in</span> o) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`(<span class="hljs-subst">$&#123;k&#125;</span>)`</span>).<span class="hljs-title function_">test</span>(fmt)) &#123;<br>      <span class="hljs-keyword">let</span> str = o[k] + <span class="hljs-string">&#x27;&#x27;</span>;<br>      fmt = fmt.<span class="hljs-title function_">replace</span>(<span class="hljs-title class_">RegExp</span>.<span class="hljs-property">$1</span>, (<span class="hljs-title class_">RegExp</span>.<span class="hljs-property">$1</span>.<span class="hljs-property">length</span> === <span class="hljs-number">1</span>) ? str : <span class="hljs-title function_">padLeftZero</span>(str));<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> fmt;<br>&#125;;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">padLeftZero</span> (str) &#123;<br>  <span class="hljs-keyword">return</span> (<span class="hljs-string">&#x27;00&#x27;</span> + str).<span class="hljs-title function_">substr</span>(str.<span class="hljs-property">length</span>);<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>参数说明：</strong><br>formatDate(date, fmt)<br>date: 时间对象<br>fmt: 对应时间戳返回的时间格式，如下：<br>（”yyyy-MM-dd hh:mm:ss”）返回（2000-12-21 12:12:12）<br>使用示例：<br>const dateNum &#x3D; 1232654521122 &#x2F;&#x2F; 瞎写的时间戳<br>const date &#x3D; new Date(dateNum)<br>console.log(formatDate(date, ‘yyyy&#x2F;MM&#x2F;dd hh:mm:sss’))<br>打印： dateNum时间戳对应的时间（当然是错的，只演示格式）：<br>2000&#x2F;12&#x2F;21 12:12:12</p>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】获取URL参数</title>
    <link href="/js/%E3%80%90js%E3%80%91%E8%8E%B7%E5%8F%96URL%E5%8F%82%E6%95%B0/"/>
    <url>/js/%E3%80%90js%E3%80%91%E8%8E%B7%E5%8F%96URL%E5%8F%82%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//获取URL参数</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">GetParameterOfURL</span>(<span class="hljs-params">pname</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-title class_">GetRequest</span>()[pname];<br>&#125;<br><span class="hljs-comment">//页面传递参数函数</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">GetRequest</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-keyword">var</span> url = location.<span class="hljs-property">search</span>; <span class="hljs-comment">//获取url中&quot;?&quot;符后的字串 </span><br><span class="hljs-keyword">var</span> theRequest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;?&quot;</span>) != -<span class="hljs-number">1</span>) &#123;<br><span class="hljs-keyword">var</span> str = url.<span class="hljs-title function_">substr</span>(<span class="hljs-number">1</span>);<br>strs = str.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;&amp;&quot;</span>);<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; strs.<span class="hljs-property">length</span>; i++) &#123;<br><span class="hljs-comment">// theRequest[strs[i].split(&quot;=&quot;)[0]] = unescape(strs[i].split(&quot;=&quot;)[1]);</span><br>theRequest[strs[i].<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;=&quot;</span>)[<span class="hljs-number">0</span>]] = <span class="hljs-built_in">decodeURI</span>(strs[i].<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;=&quot;</span>)[<span class="hljs-number">1</span>]);<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> theRequest; <span class="hljs-comment">//返回参数</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】XAMPP相关问题</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91XAMPP%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91XAMPP%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="1-查看修改MySql账号密码："><a href="#1-查看修改MySql账号密码：" class="headerlink" title="1.查看修改MySql账号密码："></a>1.查看修改MySql账号密码：</h2><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91XAMPP%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/1.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91XAMPP%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/2.png"></p><p>修改即可</p><h2 id="2-修改MySql导入数据库最大限制："><a href="#2-修改MySql导入数据库最大限制：" class="headerlink" title="2.修改MySql导入数据库最大限制："></a>2.修改MySql导入数据库最大限制：</h2><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91XAMPP%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/3.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91XAMPP%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/4.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91XAMPP%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/5.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91XAMPP%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/6.png"></p><p>upload_max_filesize&#x3D;100M<br>memory_limit&#x3D;1024M<br>post_max_size&#x3D;100M</p><p>修改以上即可</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】插槽</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E6%8F%92%E6%A7%BD/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E6%8F%92%E6%A7%BD/</url>
    
    <content type="html"><![CDATA[<h2 id="默认插槽："><a href="#默认插槽：" class="headerlink" title="默认插槽："></a>默认插槽：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;child-component&gt;rocyuan&lt;/child-component&gt;<br><br>Vue.component(&#x27;child-component&#x27;,&#123;<br>    template:`<br>        &lt;div&gt;<br>            Hello,World!<br>            &lt;slot&gt;&lt;/slot&gt;<br>        &lt;/div&gt;<br>    `<br>&#125;)<br><br>// 将 child-component 中的内容会插入到 slot 中<br></code></pre></td></tr></table></figure><h2 id="具名插槽："><a href="#具名插槽：" class="headerlink" title="具名插槽："></a>具名插槽：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;child-component&gt;<br>    &lt;h1 slot=&quot;center&quot;&gt;中间的&lt;/h1&gt;<br>    &lt;h1 slot=&quot;left&quot;&gt;中间的&lt;/h1&gt;<br>    &lt;h1&gt;默认的&lt;/h1&gt;<br>&lt;/child-component&gt;<br><br>Vue.component(&#x27;child-component&#x27;,&#123;<br>    template:`<br>        &lt;div&gt;<br>            Hello,World!<br>            &lt;slot name=&quot;center&quot;&gt;&lt;/slot&gt;<br>            &lt;slot name=&quot;left&quot;&gt;&lt;/slot&gt;<br>            &lt;slot&gt;&lt;/slot&gt;<br>        &lt;/div&gt;<br>    `<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="作用域插槽："><a href="#作用域插槽：" class="headerlink" title="作用域插槽："></a>作用域插槽：</h2><p>也可理解为带数据的插槽；如果我们v-for循环渲染表格，表格每行都有本行的数据，有一列是需要进行功能操作数据的，这样我们就可以使用作用域插槽拿到本行的数据进行操作</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs vue">已被废弃:<br>&lt;slot-example&gt;<br>  &lt;template slot-scope=&quot;slotProps&quot;&gt;<br>    &#123;&#123; slotProps&#125;&#125;<br>  &lt;/template&gt;<br>&lt;/slot-example&gt;<br><br>使用这种：<br>&lt;template&gt;<br>  &lt;template v-slot=&quot;&#123; msg &#125;&quot;&gt;<br>    &#123;&#123; msg &#125;&#125;<br>  &lt;/template&gt;<br>&lt;/template&gt;<br>或：<br>&lt;view v-for=&quot;item in dataList&quot; key=&quot;item.id&quot;&gt;<br>  &lt;template v-slot:default=&quot;item&quot;&gt;<br>    &lt;!-- 此处添加插槽内容 --&gt;<br>    &lt;view class=&quot;cont-item&quot;&gt;<br>      &lt;view class=&quot;title&quot;&gt;&#123;&#123;item.title&#125;&#125;&lt;/view&gt;<br>    &lt;/view&gt;<br>  &lt;/template&gt;<br>&lt;/view&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】组件化</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E7%BB%84%E4%BB%B6%E5%8C%96/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E7%BB%84%E4%BB%B6%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<h2 id="基本使用（全局组件）："><a href="#基本使用（全局组件）：" class="headerlink" title="基本使用（全局组件）："></a>基本使用（全局组件）：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vue">// 1. 创建组件构造器对象<br>const cpnC = Vue.extend(&#123;<br>template: `<br>&lt;div&gt;<br>&lt;h2&gt;我是标题&lt;/h2&gt;<br>&lt;p&gt;我是内容111111111&lt;/p&gt;<br>&lt;p&gt;我是内容222222222&lt;/p&gt;<br>&lt;/div&gt;<br>`<br>&#125;)<br><br>// 2. 注册组件 (全局组件) (使用的标签名, 构造器的名字)<br>Vue.component(&#x27;my-cpn&#x27;, cpnC);<br><br>&lt;!-- 3. 使用组件 多次使用 --&gt;<br>&lt;my-cpn&gt;&lt;/my-cpn&gt;<br>&lt;my-cpn&gt;&lt;/my-cpn&gt;<br></code></pre></td></tr></table></figure><h2 id="组件的全局组件和局部组件"><a href="#组件的全局组件和局部组件" class="headerlink" title="组件的全局组件和局部组件:"></a>组件的全局组件和局部组件:</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs vue">const app = new Vue(&#123;<br>el: &#x27;#app&#x27;,<br>data: &#123;<br>message: &#x27;你好啊&#x27;<br>&#125;,<br>//2. 注册组件(局部组件) 只能在app实例中使用,app2中不可以使用<br>components:&#123;<br>// 标签名: 组件构造器名<br>mycpn: cpnC<br>&#125;<br>&#125;)<br>const app2 = new Vue(&#123;<br>el: &#x27;#app2&#x27;<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="父组件和子组件："><a href="#父组件和子组件：" class="headerlink" title="父组件和子组件："></a>父组件和子组件：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs vue">// 创建第一个组件 （第二个组件的子组件）<br>const cpnC1 = Vue.extend(&#123;<br>template: `<br>&lt;div&gt;<br>&lt;h2&gt;我是标题1&lt;/h2&gt;<br>&lt;p&gt;我是内容1&lt;/p&gt;<br>&lt;/div&gt;<br>`<br>&#125;)<br>// 创建第二个组件 （第一个组件的父组件）<br>const cpnC2 = Vue.extend(&#123;<br>template: `<br>&lt;div&gt;<br>&lt;h2&gt;我是标题2&lt;/h2&gt;<br>&lt;p&gt;我是内容2&lt;/p&gt;<br>&lt;cpn1&gt;&lt;/cpn1&gt;<br>&lt;/div&gt;<br>`,<br>components:&#123;<br>cpn1: cpnC1<br>&#125;<br>&#125;)<br>// root组件（第二个组件的父组件）<br>const app = new Vue(&#123;<br>el: &#x27;#app&#x27;,<br>data: &#123;<br>message: &#x27;你好啊&#x27;<br>&#125;,<br>components: &#123;<br>cpn2: cpnC2<br>&#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="组件的简写组件："><a href="#组件的简写组件：" class="headerlink" title="组件的简写组件："></a>组件的简写组件：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">// 省略了 Vue.extend(&#123;&#125;)<br>// 全局组件（简便语法）<br>Vue.component(&#x27;cpn2&#x27;, &#123;<br>template: `<br>&lt;div&gt;<br>&lt;h2&gt;我是标题2&lt;/h2&gt;<br>&lt;p&gt;我是内容2&lt;/p&gt;<br>&lt;/div&gt;<br>`<br>&#125;)<br><br>const app = new Vue(&#123;<br>el: &#x27;#app&#x27;,<br>data: &#123;<br>message: &#x27;你好啊&#x27;<br>&#125;,<br>// 局部组件（简便语法）<br>components: &#123;<br>cpn1: &#123;<br>template: `<br>&lt;div&gt;<br>&lt;h2&gt;我是标题1&lt;/h2&gt;<br>&lt;p&gt;我是内容1&lt;/p&gt;<br>&lt;/div&gt;<br>`<br>&#125;<br>&#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="组件模板的分离写法："><a href="#组件模板的分离写法：" class="headerlink" title="组件模板的分离写法："></a>组件模板的分离写法：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 1.script标签写法 --&gt;<br>创建 -&gt; 注册 -&gt; 使用<br>&lt;script type=&quot;text/x-template&quot; id=&quot;cpn1&quot;&gt;<br>&lt;div&gt;<br>&lt;h2&gt;&#123;&#123;title&#125;&#125;&lt;/h2&gt;<br>&lt;p&gt;我是内容1&lt;/p&gt;<br>&lt;/div&gt;<br>&lt;/script&gt;<br><br>Vue.component(&#x27;cpn1&#x27;, &#123;<br>template: &#x27;#cpn1&#x27;,<br>data()&#123;<br>return &#123;<br>title: &#x27;我是标题111&#x27;<br>&#125;<br>&#125;<br>&#125;)<br>&lt;cpn1&gt;&lt;/cpn1&gt;<br><br>----------------------------------------------------------<br><br>&lt;!-- 2.template 标签写法 --&gt;<br>创建 -&gt; 注册 -&gt; 使用<br>&lt;template id=&quot;cpn2&quot;&gt;<br>&lt;div&gt;<br>&lt;h2&gt;我是标题2&lt;/h2&gt;<br>&lt;p&gt;我是内容2&lt;/p&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>Vue.component(&#x27;cpn2&#x27;, &#123;<br>template: &#x27;#cpn2&#x27;<br>&#125;)<br><br>&lt;cpn2&gt;&lt;/cpn2&gt;<br></code></pre></td></tr></table></figure><h2 id="组件中的数据存放-存放在data方法的返回值，对象中-："><a href="#组件中的数据存放-存放在data方法的返回值，对象中-：" class="headerlink" title="组件中的数据存放(存放在data方法的返回值，对象中)："></a>组件中的数据存放(存放在data方法的返回值，对象中)：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template id=&quot;cpn1&quot;&gt;<br>&lt;div&gt;<br>&lt;h2&gt;&#123;&#123;title&#125;&#125;&lt;/h2&gt;<br>&lt;p&gt;&#123;&#123;cont&#125;&#125;&lt;/p&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>Vue.component(&#x27;cpn1&#x27;, &#123;<br>template: &#x27;#cpn1&#x27;,<br>data()&#123;<br>return &#123;<br>title: &#x27;我是标题111&#x27;,<br>cont: &#x27;我是内容111&#x27;<br>&#125;<br>&#125;<br>&#125;)<br><br>&lt;cpn1&gt;&lt;/cpn1&gt;<br></code></pre></td></tr></table></figure><p>为什么组件中的data是一个方法？<br>多次使用的组件不会共用一个data，因为data是一个方法，多次使用组件会多次调用data方法，每一次调用组件所用的数据是每一次调用data方法返回的对象数据。</p>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】组件通讯</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF/</url>
    
    <content type="html"><![CDATA[<h2 id="组件父传子："><a href="#组件父传子：" class="headerlink" title="组件父传子："></a>组件父传子：</h2><p>子组件中使用 props 接收父组件传过来的值。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs vue">// 父传子:<br>&lt;div id=&quot;app&quot;&gt;<br>&lt;cpn :cmessage=&#x27;message&#x27; :cmovies=&#x27;movies&#x27;&gt;&lt;/cpn&gt;<br>&lt;/div&gt;<br><br>const cpn = &#123;<br>template: &#x27;#cpn&#x27;,<br>// 1.数组写法<br>// props: [&#x27;cmessage&#x27;, &#x27;cmovies&#x27;],<br>// 2.对象写法（常用）<br>props: &#123;<br>// 2.1 类型的限制<br>// cmessage: String,<br>// cmovies: Array<br>// 2.2 提供默认值  及必传值<br>cmessage: &#123;<br>type: String,<br>default: &#x27;aaaa&#x27;,<br>required: true<br>&#125;,<br>cmovies: &#123;<br>type: Array,<br>// default: []    vue2.5.x 以下可以<br>default()&#123;<br>return []<br>&#125;<br>&#125;<br>&#125;,<br>data()&#123;<br>return &#123;&#125;<br>&#125;<br>&#125;<br><br>const app = new Vue(&#123;<br>el: &#x27;#app&#x27;,<br>data: &#123;<br>message: &#x27;你好啊&#x27;,<br>movies: [&#x27;海王&#x27;, &#x27;海贼王&#x27;, &#x27;海尔兄弟&#x27;]<br>&#125;,<br>components:&#123;<br>cpn: cpn<br>&#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="组件子传父："><a href="#组件子传父：" class="headerlink" title="组件子传父："></a>组件子传父：</h2><p>子组件使用 $emit 发送 自定义事件并可携带参数，父组件使用绑定自定义事件触发自身定义的方法，在自身定义的方法中接收到携带的参数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;cpn @itemclick=&#x27;btnClick&#x27;&gt;&lt;/cpn&gt;<br><br>&lt;template id=&quot;cpn&quot;&gt;<br>&lt;div&gt;<br>&lt;button v-for=&quot;item in cts&quot; @click=&quot;btnClick(item)&quot;&gt;&#123;&#123;item.name&#125;&#125;&lt;/button&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>//子组件<br>const cpn = &#123;<br>template: &#x27;#cpn&#x27;,<br>data()&#123;<br>return &#123;<br>cts:[<br>&#123;id: &#x27;aaa&#x27;, name: &#x27;热门推荐&#x27;&#125;,<br>&#123;id: &#x27;bbb&#x27;, name: &#x27;手机数码&#x27;&#125;,<br>&#123;id: &#x27;ccc&#x27;, name: &#x27;家用家电&#x27;&#125;,<br>&#123;id: &#x27;ddd&#x27;, name: &#x27;电脑办公&#x27;&#125;<br>]<br>&#125;<br>&#125;,<br>methods: &#123;<br>btnClick(item)&#123;<br>// console.log(item);<br>// 向父组件 发射事件: 自定义事件<br>this.$emit(&#x27;itemclick&#x27;,item)<br>&#125;<br>&#125;<br>&#125;<br>//父组件<br>const app = new Vue(&#123;<br>el: &#x27;#app&#x27;,<br>data: &#123;<br>info: &#123;<br>name: &#x27;roc&#x27;,<br>age: 18,<br>height: 180<br>&#125;<br>&#125;,<br>components:&#123;<br>cpn<br>&#125;,<br>methods:&#123;<br>btnClick(item)&#123;<br>console.log(&#x27;btnClick&#x27;,item)<br>&#125;<br>&#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="父组件访问子组件："><a href="#父组件访问子组件：" class="headerlink" title="父组件访问子组件："></a>父组件访问子组件：</h2><p>通过给子组件添加属性 ref ，父组件可以用 $refs 拿到子组件对象。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;div id=&quot;app&quot;&gt;<br>&lt;cpn ref=&#x27;bbb&#x27;&gt;&lt;/cpn&gt;<br>&lt;cpn ref=&#x27;aaa&#x27;&gt;&lt;/cpn&gt;<br>&lt;cpn&gt;&lt;/cpn&gt;<br>&lt;button @click=&quot;btnclick&quot;&gt;按钮&lt;/button&gt;<br>&lt;/div&gt;<br><br>methods: &#123;<br>btnclick()&#123;<br>// 用的比较少依  赖于下标 $children (数组类型)<br>// console.log(this.$children);<br>// this.$children[0].showMessage()<br>// console.log(this.$children[0].name)<br><br>// 用的多 $refs  (对象类型)<br>console.log(this.$refs.aaa.name);<br>&#125;<br>&#125;,<br></code></pre></td></tr></table></figure><h2 id="子组件访问父组件（使用较少）："><a href="#子组件访问父组件（使用较少）：" class="headerlink" title="子组件访问父组件（使用较少）："></a>子组件访问父组件（使用较少）：</h2><p>子组件使用 $parent 可访问到父组件对象，使用 $root 可访问到根组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">methods: &#123;<br>btnClick()&#123;<br>//  $parent  为了组件的复用性 子访问父 用的少<br>console.log(this.$parent.name)<br>//  $root  访问根组件 用的少<br>console.log(this.$root.message)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】双向数据绑定（v-model）</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%EF%BC%88v-model%EF%BC%89/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%EF%BC%88v-model%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="基本使用："><a href="#基本使用：" class="headerlink" title="基本使用："></a>基本使用：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- input中改变message值，都同步改变，反之一样 --&gt;<br>&lt;input type=&quot;text&quot; v-model=&quot;message&quot;&gt;<br>&lt;input type=&quot;text&quot; v-model=&quot;message&quot;&gt;<br>&lt;p&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt;<br><br>data: &#123;<br>message: &#x27;你好啊&#x27;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="v-model原理："><a href="#v-model原理：" class="headerlink" title="v-model原理："></a>v-model原理：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- input值发生变化时触发clickChange方法 --&gt;<br>&lt;input type=&quot;text&quot; :value=&quot;message&quot; @input=&quot;clickChange($event)&quot;&gt;<br>&lt;p&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt;<br><br>data: &#123;<br>message: &#x27;你好啊&#x27;<br>&#125;,<br>methods: &#123;<br>clickChange(event)&#123;<br>this.message = event.target.value<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="v-model结合radio类型"><a href="#v-model结合radio类型" class="headerlink" title="v-model结合radio类型:"></a>v-model结合radio类型:</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- v-model相同不用 name 属性 --&gt;<br>&lt;label for=&quot;male&quot;&gt;<br>&lt;input type=&quot;radio&quot; id=&quot;male&quot; value=&quot;男&quot; v-model=&quot;sex&quot;&gt;<br>男<br>&lt;/label&gt;<br>&lt;label for=&quot;famale&quot;&gt;<br>&lt;input type=&quot;radio&quot; id=&quot;famale&quot; value=&quot;女&quot; v-model=&quot;sex&quot;&gt;<br>女<br>&lt;/label&gt;<br>&lt;p&gt;您选择的性别是: &#123;&#123;sex&#125;&#125;&lt;/p&gt;<br><br>data: &#123;<br>message: &#x27;你好啊&#x27;,<br>sex: &#x27;男&#x27;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="v-model结合checkbox类型："><a href="#v-model结合checkbox类型：" class="headerlink" title="v-model结合checkbox类型："></a>v-model结合checkbox类型：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 单个复选框，绑定到布尔值： --&gt;<br>&lt;label for=&quot;agree&quot;&gt;<br>&lt;input type=&quot;checkbox&quot; id=&quot;agree&quot; v-model=&quot;isAgree&quot;&gt;<br>同意协议<br>&lt;/label&gt;<br>&lt;p&gt;您选择的是: &#123;&#123;isAgree&#125;&#125;&lt;/p&gt;<br>&lt;button :disabled=&quot;!isAgree&quot;&gt;下一步&lt;/button&gt;<br><br>&lt;!-- 多个复选框，绑定到同一个数组： --&gt;<br>&lt;input type=&quot;checkbox&quot; value=&quot;篮球&quot; v-model=&quot;hobbies&quot;&gt;篮球<br>&lt;input type=&quot;checkbox&quot; value=&quot;足球&quot; v-model=&quot;hobbies&quot;&gt;足球<br>&lt;input type=&quot;checkbox&quot; value=&quot;乒乓球&quot; v-model=&quot;hobbies&quot;&gt;乒乓球<br>&lt;input type=&quot;checkbox&quot; value=&quot;羽毛球&quot; v-model=&quot;hobbies&quot;&gt;羽毛球<br>&lt;p&gt;您的爱好是: &#123;&#123;hobbies&#125;&#125;&lt;/p&gt;<br><br>data: &#123;<br>message: &#x27;你好啊&#x27;,<br>isAgree: false,<br>hobbies: []<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="v-model结合select类型："><a href="#v-model结合select类型：" class="headerlink" title="v-model结合select类型："></a>v-model结合select类型：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 选择一个 --&gt;<br>&lt;select name=&quot;abc&quot; v-model=&quot;fruit&quot;&gt;<br>&lt;option value=&quot;苹果&quot;&gt;苹果&lt;/option&gt;<br>&lt;option value=&quot;香蕉&quot;&gt;香蕉&lt;/option&gt;<br>&lt;option value=&quot;葡萄&quot;&gt;葡萄&lt;/option&gt;<br>&lt;option value=&quot;榴莲&quot;&gt;榴莲&lt;/option&gt;<br>&lt;/select&gt;<br>&lt;p&gt;您选择的水果是: &#123;&#123;fruit&#125;&#125;&lt;/p&gt;<br><br>&lt;!-- 多选 multiple 时 (绑定到一个数组) --&gt;<br>&lt;select name=&quot;abc&quot; v-model=&quot;fruits&quot; multiple=&quot;multiple&quot;&gt;<br>&lt;option value=&quot;苹果&quot;&gt;苹果&lt;/option&gt;<br>&lt;option value=&quot;香蕉&quot;&gt;香蕉&lt;/option&gt;<br>&lt;option value=&quot;葡萄&quot;&gt;葡萄&lt;/option&gt;<br>&lt;option value=&quot;榴莲&quot;&gt;榴莲&lt;/option&gt;<br>&lt;/select&gt;<br>&lt;p&gt;您选择的水果是: &#123;&#123;fruits&#125;&#125;&lt;/p&gt;<br><br>data: &#123;<br>message: &#x27;你好啊&#x27;,<br>fruit: &#x27;香蕉&#x27;,<br>fruits: [&#x27;香蕉&#x27;]<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="v-model修饰符的使用："><a href="#v-model修饰符的使用：" class="headerlink" title="v-model修饰符的使用："></a>v-model修饰符的使用：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 1. .lazy: 失去焦点的时候更新 message --&gt;<br>&lt;input type=&quot;text&quot; v-model.lazy=&quot;message&quot;&gt;<br>&lt;p&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt;<br><br>&lt;!-- 2. .number: v-model绑定的都是string类型, .number 可转换为number类型 --&gt;<br>&lt;input type=&quot;number&quot; v-model.number=&quot;age&quot;&gt;<br>&lt;p&gt;&#123;&#123;age&#125;&#125;-&#123;&#123;typeof age&#125;&#125;&lt;/p&gt;<br><br>&lt;!-- 3. .trim 去掉两端空格 --&gt;<br>&lt;input type=&quot;text&quot; v-model.trim=&quot;name&quot;&gt;<br>&lt;p&gt;&#123;&#123;name&#125;&#125;&lt;/p&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【记录】IIS文件存在但是报404问题解决</title>
    <link href="/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91IIS%E6%96%87%E4%BB%B6%E5%AD%98%E5%9C%A8%E4%BD%86%E6%98%AF%E6%8A%A5404%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    <url>/record/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91IIS%E6%96%87%E4%BB%B6%E5%AD%98%E5%9C%A8%E4%BD%86%E6%98%AF%E6%8A%A5404%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
    
    <content type="html"><![CDATA[<p>遇到一个很奇怪的问题，在IIS7中，一些文件存在，地址没错，但总是404！！！看图（有图有真相！）</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91IIS%E6%96%87%E4%BB%B6%E5%AD%98%E5%9C%A8%E4%BD%86%E6%98%AF%E6%8A%A5404%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/1.png"></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91IIS%E6%96%87%E4%BB%B6%E5%AD%98%E5%9C%A8%E4%BD%86%E6%98%AF%E6%8A%A5404%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/2.png"></p><p>可以看到 fa-solid-900.woff、fa-solid-900.woff2，俩文件地址都没有错，但就是404！找了半天，终于解决了，原来问题出现在这： ↓ ↓ ↓</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91IIS%E6%96%87%E4%BB%B6%E5%AD%98%E5%9C%A8%E4%BD%86%E6%98%AF%E6%8A%A5404%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/3.png"></p><p>图上可能看不太清下面：<br>使用“添加 MIME 类型”和“编辑 MIME 类型”对话框可以创建和编辑多用途 Internet 邮件扩展 (MIME) 类型。MIME 类型将帮助客户端适当地处理新的文件扩展名。如果 IIS 无法识别客户端请求的文件扩展名，则 IIS 会以默认的 MIME 类型（即应用程序）形式发送内容。此 MIME 类型表示文件包含应用程序数据，这通常意味着客户端无法处理该文件。</p><table><thead><tr><th><strong>元素名称</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>扩展名</td><td>键入文件扩展名。这是静态文件扩展名，例如 .chm。</td></tr><tr><td>MIME类型</td><td>键入 MIME 类型，例如，application&#x2F;octet-stream。</td></tr></tbody></table><p>原因出在MIME类型设置上！！！</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91IIS%E6%96%87%E4%BB%B6%E5%AD%98%E5%9C%A8%E4%BD%86%E6%98%AF%E6%8A%A5404%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/4.png"></p><p><strong>MIME类型</strong></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91IIS%E6%96%87%E4%BB%B6%E5%AD%98%E5%9C%A8%E4%BD%86%E6%98%AF%E6%8A%A5404%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/5.png"></p><p>MIME类型列表</p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91IIS%E6%96%87%E4%BB%B6%E5%AD%98%E5%9C%A8%E4%BD%86%E6%98%AF%E6%8A%A5404%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/6.png"></p><p>点击右上角添加 或者 鼠标右击空白区域-添加</p><p>百度：<strong>MIME类型参考手册</strong></p><p><img src="/../../assets/%E3%80%90%E8%AE%B0%E5%BD%95%E3%80%91IIS%E6%96%87%E4%BB%B6%E5%AD%98%E5%9C%A8%E4%BD%86%E6%98%AF%E6%8A%A5404%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/7.png"></p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】循环遍历（v-for）</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E5%BE%AA%E7%8E%AF%E9%81%8D%E5%8E%86%EF%BC%88v-for%EF%BC%89/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E5%BE%AA%E7%8E%AF%E9%81%8D%E5%8E%86%EF%BC%88v-for%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="v-for遍历数组："><a href="#v-for遍历数组：" class="headerlink" title="v-for遍历数组："></a>v-for遍历数组：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;ul&gt;<br>&lt;li v-for=&quot;(item, index) in names&quot;&gt;&#123;&#123;index+1&#125;&#125;. &#123;&#123;item&#125;&#125;&lt;/li&gt;<br>&lt;/ul&gt;<br><br>data: &#123;<br>names: [&#x27;roc&#x27;,&#x27;koke&#x27;,&#x27;sev&#x27;]<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="v-for遍历对象："><a href="#v-for遍历对象：" class="headerlink" title="v-for遍历对象："></a>v-for遍历对象：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;ul&gt;<br>&lt;li v-for=&quot;(value, key, index) in info&quot;&gt;&#123;&#123;index&#125;&#125; - &#123;&#123;key&#125;&#125; : &#123;&#123;value&#125;&#125;&lt;/li&gt;<br>&lt;/ul&gt;<br><br>data: &#123;<br>info: &#123;<br>name: &#x27;roc&#x27;,<br>age: 18,<br>height: 180<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="v-for使用过程需添加key："><a href="#v-for使用过程需添加key：" class="headerlink" title="v-for使用过程需添加key："></a>v-for使用过程需添加key：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">// 官网：建议尽可能在使用 v-for 时提供 key attribute，除非遍历输出的 DOM 内容非常简单，或者是刻意依赖默认行为以获取性能上的提升。<br>// vue会复用渲染的组件（dom）从而不会重新渲染，加key保证唯一性，不会复用将重新渲染。<br>&lt;ul&gt;<br>&lt;li v-for=&quot;item in letters&quot; :key=&quot;item&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt;<br>&lt;/ul&gt;<br><br>data: &#123;<br>letters: [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;]<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="数组响应式的方法："><a href="#数组响应式的方法：" class="headerlink" title="数组响应式的方法："></a>数组响应式的方法：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">// 通过索引修改数组中的元素，不会发生响应式<br>this.letters[0] = &#x27;aaa&#x27;;<br>// -----------------------------------------------------------------------<br>// 响应式的方法：<br>// 1.push方法(向最后添加元素，可添加多个)<br>this.letters.push(&#x27;aaa&#x27;);<br><br>// 2.pop方法(删除最后一个)<br>this.letters.pop();<br><br>// 3.unshift方法(向最前面添加，可添加多个)<br>this.letters.unshift(&#x27;aaa&#x27;)<br><br>4.shift方法(删除第一个)<br>this.letters.shift();<br><br>// splice作用：删除元素/插入元素/替换元素  (常用  推荐使用)<br>// 5.splice方法(a,b,...c)  a:开始的位置(包含开始位置)  b:要删除多少个(没传 删除后面所有)  ...c添加的元素<br>this.letters.splice(1, 0, &#x27;aaa&#x27;,&#x27;bbb&#x27;)<br><br>// 6.sort方法(排序)<br>this.letters.sort();<br><br>// 7.reverst方法(反转)<br>this.letters.reverse();<br><br>// set(&#x27;要修改的对象&#x27;,&#x27;索引值&#x27;,&#x27;修改后的值&#x27;)<br>Vue.set(this.letters, 0, &#x27;aaa&#x27;)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】条件判断（v-if …）</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%EF%BC%88v-if%20%E2%80%A6%EF%BC%89/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%EF%BC%88v-if%20%E2%80%A6%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="v-if使用："><a href="#v-if使用：" class="headerlink" title="v-if使用："></a>v-if使用：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h2 v-if=&quot;isShow&quot;&gt;<br>&lt;p&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt;<br>&lt;/h2&gt;<br><br>data: &#123;<br>message: &#x27;hello&#x27;,<br>isShow: false<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="v-if和v-else的使用："><a href="#v-if和v-else的使用：" class="headerlink" title="v-if和v-else的使用："></a>v-if和v-else的使用：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h2 v-if=&quot;isShow&quot;&gt;<br>&lt;p&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt;<br>&lt;/h2&gt;<br>&lt;h1 v-else&gt;isShow为false时，显示我&lt;/h1&gt;<br><br>data: &#123;<br>message: &#x27;hello&#x27;,<br>isShow: true<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="v-if和v-else-if和v-else的使用："><a href="#v-if和v-else-if和v-else的使用：" class="headerlink" title="v-if和v-else-if和v-else的使用："></a>v-if和v-else-if和v-else的使用：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h2 v-if=&quot;score &gt;= 90&quot;&gt;优秀&lt;/h2&gt;<br>&lt;h2 v-else-if=&quot;score &gt;= 80&quot;&gt;良好&lt;/h2&gt;<br>&lt;h2 v-else-if=&quot;score &gt;= 60&quot;&gt;及格&lt;/h2&gt;<br>&lt;h2 v-else&gt;不及格&lt;/h2&gt;<br><br>data: &#123;<br>score: 90<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="v-show的使用（v-if，v-show区别）："><a href="#v-show的使用（v-if，v-show区别）：" class="headerlink" title="v-show的使用（v-if，v-show区别）："></a>v-show的使用（v-if，v-show区别）：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- <br>v-if: 条件为 false 时；包含v-if的Dom不会存在在页面中（适用于切换频率低）<br>v-show: 条件为 false 时；包含v-show的Dom存在页面中，只是加了 display:none 行内样式（适用于切换频率高）<br>--&gt;<br>&lt;h2 v-if=&quot;isShow&quot; id=&quot;aaa&quot;&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;<br><br>data: &#123;<br>message: &#x27;你好啊&#x27;,<br>isShow: true<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】事件监听</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC/</url>
    
    <content type="html"><![CDATA[<h2 id="基本使用："><a href="#基本使用：" class="headerlink" title="基本使用："></a>基本使用：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h2&gt;&#123;&#123;num&#125;&#125;&lt;/h2&gt;<br>&lt;!-- 不需要传参的时候可以省略 方法的括号() --&gt;<br>&lt;button v-on:click=&quot;add&quot; type=&quot;button&quot;&gt;+&lt;/button&gt;<br>&lt;!-- 简写 --&gt;<br>&lt;button @click=&quot;sub&quot; type=&quot;button&quot;&gt;-&lt;/button&gt;<br><br>data: &#123;<br>num: 0<br>&#125;,<br>methods: &#123;<br>add()&#123;<br>this.num++;<br>&#125;,<br>sub()&#123;<br>this.num--;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="v-on的参数问题："><a href="#v-on的参数问题：" class="headerlink" title="v-on的参数问题："></a>v-on的参数问题：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 1.事件调用的方法没有参数 --&gt;<br>&lt;button @click=&quot;btn1Click()&quot;&gt;按钮1&lt;/button&gt;<br>&lt;button @click=&quot;btn1Click&quot;&gt;按钮1&lt;/button&gt;<br><br>&lt;!-- 2.事件调用的方法需要传入参数，1.不传参数：形参会是undedifed  2.不带()：Vue默认会将浏览器生成的 event对象 传入形参 --&gt;<br>&lt;button @click=&quot;btn2Click(123)&quot;&gt;按钮2&lt;/button&gt;<br>&lt;button @click=&quot;btn2Click()&quot;&gt;按钮2&lt;/button&gt;<br>&lt;button @click=&quot;btn2Click&quot;&gt;按钮2&lt;/button&gt;<br><br>&lt;!-- 3.事件调用的方法需要传参，又要获取event对象 --&gt;<br>&lt;!-- 手动获取 浏览器的 event对象    加$event --&gt;<br>&lt;button @click=&quot;btn3Click(123,$event)&quot;&gt;按钮3&lt;/button&gt;<br></code></pre></td></tr></table></figure><h2 id="v-on的修饰符"><a href="#v-on的修饰符" class="headerlink" title="v-on的修饰符:"></a>v-on的修饰符:</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 1. .stop 修饰符的使用 阻止事件冒泡 --&gt;<br>&lt;div @click=&quot;divClick&quot;&gt;<br>bbbbb<br>&lt;button @click.stop=&quot;btnClick&quot;&gt;按钮1&lt;/button&gt;<br>&lt;/div&gt;<br><br>&lt;!-- 2. .prevent 修饰符的使用 阻止默认事件 --&gt;<br>&lt;form action=&quot;baidu&quot;&gt;<br>&lt;input type=&quot;submit&quot; value=&quot;提交&quot; @click.prevent=&quot;submitClick&quot;&gt;<br>&lt;/form&gt;<br><br>&lt;!-- 3. .enter 监听某个键盘的键帽 --&gt;<br>&lt;input type=&quot;text&quot; @keyup.enter=&quot;keyUp&quot;&gt;<br><br>&lt;!-- 4. .once 只会触发一次 --&gt;<br>&lt;button @click.once=&quot;btn2Click&quot;&gt;按钮2&lt;/button&gt;<br><br>&lt;!-- 5.监听组件的原生事件时要加 .native --&gt;<br>&lt;mybtn @click.native=&quot;mybtnClick&quot;&gt;&lt;/mybtn&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】计算属性</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7/</url>
    
    <content type="html"><![CDATA[<h2 id="基本使用："><a href="#基本使用：" class="headerlink" title="基本使用："></a>基本使用：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h2&gt;&#123;&#123;firstName + &quot; &quot; + lastName&#125;&#125;&lt;/h2&gt;<br>&lt;!-- 计算属性 --&gt;<br>&lt;h2&gt;&#123;&#123;fullName&#125;&#125;&lt;/h2&gt;<br><br>// 计算属性 computed<br>computed: &#123;<br>fullName: function()&#123;<br>return this.lastName + &#x27; &#x27; + this.firstName<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="进阶使用："><a href="#进阶使用：" class="headerlink" title="进阶使用："></a>进阶使用：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h2&gt;总价格：&#123;&#123;prices&#125;&#125;&lt;/h2&gt;<br><br>data: &#123;<br>books: [<br>&#123;id: 110, name: &#x27;xxxxxx&#x27;, price: 110&#125;,<br>&#123;id: 111, name: &#x27;xxxxxx&#x27;, price: 111&#125;,<br>&#123;id: 112, name: &#x27;xxxxxx&#x27;, price: 112&#125;,<br>&#123;id: 113, name: &#x27;xxxxxx&#x27;, price: 113&#125;,<br>]<br>&#125;,<br>computed: &#123;<br>// 计算books中书的总价格<br>prices: function()&#123;<br>// 总价格<br>let prices = 0;<br>for(let i in this.books)&#123;<br>prices += this.books[i].price;<br>&#125;<br>return prices;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="计算属性的setter和getter："><a href="#计算属性的setter和getter：" class="headerlink" title="计算属性的setter和getter："></a>计算属性的setter和getter：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h2&gt;&#123;&#123;fullName&#125;&#125;&lt;/h2&gt;<br><br>data: &#123;<br>fristName: &#x27;aaa&#x27;,<br>lastName: &#x27;bbb&#x27;<br>&#125;,<br>computed: &#123;<br>fullName: &#123;<br>// 一般没有set方法，只读属性<br>// 如果有，对fullName赋值会触发set方法，对fullName赋的值是newvalue<br>set: function(newvalue)&#123;<br>console.log(newvalue)<br>&#125;,<br>get: function()&#123;<br>return this.fristName + &#x27; &#x27; + this.lastName;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="computed和methods区别"><a href="#computed和methods区别" class="headerlink" title="computed和methods区别"></a>computed和methods区别</h2><p>多次执行时， computed 只执行1次methods会执行多次。</p>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】动态绑定属性（v-bind）</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A%E5%B1%9E%E6%80%A7%EF%BC%88v-bind%EF%BC%89/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A%E5%B1%9E%E6%80%A7%EF%BC%88v-bind%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="基本使用："><a href="#基本使用：" class="headerlink" title="基本使用："></a>基本使用：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;img v-bind:src=&quot;imgUrl&quot; alt=&quot;&quot;&gt;<br>&lt;a v-bind:href=&quot;aUrl&quot;&gt;&#123;&#123;aName&#125;&#125;&lt;/a&gt;<br><br>&lt;!-- 简写 --&gt;<br>&lt;img :src=&quot;imgUrl&quot; alt=&quot;&quot;&gt;<br>&lt;a :href=&quot;aUrl&quot;&gt;&#123;&#123;aName&#125;&#125;&lt;/a&gt;<br><br>data: &#123;<br>  imgUrl:&quot;https://img14.360buyimg.com/babel/s190x240_jfs/t1/73611/34/16563/10157/5ddf5f8bE1609147d/4ec959f1cfa2de36.png!cc_190x240.webp&quot;,<br>  aName: &quot;百度一下&quot;,<br>  aUrl: &quot;http://www.baidu.com&quot;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="v-bind动态绑定class-对象语法-："><a href="#v-bind动态绑定class-对象语法-：" class="headerlink" title="v-bind动态绑定class(对象语法)："></a>v-bind动态绑定class(对象语法)：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">.act&#123;color:#f00;&#125;<br><br>&lt;!-- 不会覆盖  原来的class --&gt;<br>&lt;div class=&quot;title&quot; :class=&quot;&#123;&#x27;act&#x27;: isActive&#125;&quot;&gt;&#123;&#123;message&#125;&#125;&lt;/div&gt;<br><br>data: &#123;<br>  message: &quot;你好啊&quot;,<br>  isActive: true<br>&#125;,<br></code></pre></td></tr></table></figure><h2 id="v-bind动态绑定class-数组语法-："><a href="#v-bind动态绑定class-数组语法-：" class="headerlink" title="v-bind动态绑定class(数组语法)："></a>v-bind动态绑定class(数组语法)：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">.aaa&#123;&#125;<br>.bbb&#123;&#125;<br><br>&lt;!-- 数组语法不常用 不会覆盖原来的class --&gt;<br>&lt;h2 class=&quot;title&quot; :class=&quot;[active, line]&quot;&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;<br><br>data: &#123;<br>  message: &quot;你好啊&quot;,<br>  active: &#x27;aaa&#x27;,<br>  line: &#x27;bbb&#x27;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="v-bind动态绑定style-对象语法-："><a href="#v-bind动态绑定style-对象语法-：" class="headerlink" title="v-bind动态绑定style(对象语法)："></a>v-bind动态绑定style(对象语法)：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h2 :style=&quot;&#123;fontSize: this.size + &#x27;px&#x27;, backgroundColor: this.bgc&#125;&quot;&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;<br><br>data: &#123;<br>  message: &quot;你好啊&quot;,<br>  size: 50,<br>  bgc: &#x27;#f00&#x27;<br>&#125;,<br></code></pre></td></tr></table></figure><h2 id="v-bind动态绑定style-数组语法-："><a href="#v-bind动态绑定style-数组语法-：" class="headerlink" title="v-bind动态绑定style(数组语法)："></a>v-bind动态绑定style(数组语法)：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h2 :style=&quot;[baseStyle]&quot;&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;<br>data: &#123;<br>  message: &quot;你好啊&quot;,<br>  baseStyle: &#123;backgroundColor: &#x27;#f00&#x27;&#125;<br>&#125;,<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【vue】插值操作</title>
    <link href="/vue/%E3%80%90vue%E3%80%91%E6%8F%92%E5%80%BC%E6%93%8D%E4%BD%9C/"/>
    <url>/vue/%E3%80%90vue%E3%80%91%E6%8F%92%E5%80%BC%E6%93%8D%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<h2 id="Mustache语法"><a href="#Mustache语法" class="headerlink" title="Mustache语法"></a>Mustache语法</h2><p> <code>&#123;&#123; &#125;&#125;</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h2&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;<br></code></pre></td></tr></table></figure><h2 id="v-once"><a href="#v-once" class="headerlink" title="v-once"></a>v-once</h2><p>只会在初始化的时候赋值，不会根据数据变化而变化</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h2 v-once&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;<br></code></pre></td></tr></table></figure><h2 id="v-html"><a href="#v-html" class="headerlink" title="v-html"></a>v-html</h2><p>展示html代码段</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h2 v-html=&quot;url&quot;&gt;&lt;/h2&gt;<br><br>let vm = new Vue(&#123;<br>el: &quot;#app&quot;,<br>data: &#123;<br>message: &quot;你好啊&quot;,<br>url: &#x27;&lt;a href=&quot;http://www.baidu.com&quot;&gt;百度一下&lt;/a&gt;&#x27;<br>&#125;<br>&#125;);<br></code></pre></td></tr></table></figure><h2 id="v-text"><a href="#v-text" class="headerlink" title="v-text"></a>v-text</h2><p>一般不用 缺点：不灵活 会覆盖标签内内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h2 v-text=&quot;message&quot;&gt;&lt;/h2&gt;<br></code></pre></td></tr></table></figure><h2 id="v-pre"><a href="#v-pre" class="headerlink" title="v-pre"></a>v-pre</h2><p>把内容原封不动的解析出来</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h2 v-pre&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;<br></code></pre></td></tr></table></figure><h2 id="v-cloak"><a href="#v-cloak" class="headerlink" title="v-cloak"></a>v-cloak</h2><p>（斗篷）解析之前会有v-cloak，解析完成后会去掉</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vue">[v-cloak] &#123;<br>display: none;<br>&#125;<br>&lt;h2 v-cloak&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】移动端pc端判断转跳</title>
    <link href="/js/%E3%80%90js%E3%80%91%E7%A7%BB%E5%8A%A8%E7%AB%AFpc%E7%AB%AF%E5%88%A4%E6%96%AD%E8%BD%AC%E8%B7%B3/"/>
    <url>/js/%E3%80%90js%E3%80%91%E7%A7%BB%E5%8A%A8%E7%AB%AFpc%E7%AB%AF%E5%88%A4%E6%96%AD%E8%BD%AC%E8%B7%B3/</url>
    
    <content type="html"><![CDATA[<p>腾讯互娱cp</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> <span class="hljs-title class_">Roc</span> = &#123;<br>  <span class="hljs-attr">init</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;&#125;,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * 去移动端</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-title function_">pc2m</span>(<span class="hljs-params">mUrl</span>) &#123;<br>    <span class="hljs-keyword">var</span> isMobile = <span class="hljs-regexp">/(iPhone|iPad|iPod|iOS|Android|Windows Phone|BlackBerry|SymbianOS)/i</span>.<span class="hljs-title function_">test</span>(navigator.<span class="hljs-property">userAgent</span>);<br>    <span class="hljs-keyword">if</span> (isMobile) &#123;<br>      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = mUrl;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>    &#125;<br>  &#125;,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * 去pc端</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-title function_">m2pc</span>(<span class="hljs-params">pcUrl</span>) &#123;<br>    <span class="hljs-keyword">var</span> sUserAgent = navigator.<span class="hljs-property">userAgent</span>.<span class="hljs-title function_">toLowerCase</span>();<br>    <span class="hljs-keyword">var</span> bIsIpad = sUserAgent.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/ipad/i</span>) == <span class="hljs-string">&quot;ipad&quot;</span>;<br>    <span class="hljs-keyword">var</span> bIsIphoneOs = sUserAgent.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/iphone os/i</span>) == <span class="hljs-string">&quot;iphone os&quot;</span>;<br>    <span class="hljs-keyword">var</span> bIsMidp = sUserAgent.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/midp/i</span>) == <span class="hljs-string">&quot;midp&quot;</span>;<br>    <span class="hljs-keyword">var</span> bIsUc7 = sUserAgent.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/rv:1.2.3.4/i</span>) == <span class="hljs-string">&quot;rv:1.2.3.4&quot;</span>;<br>    <span class="hljs-keyword">var</span> bIsUc = sUserAgent.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/ucweb/i</span>) == <span class="hljs-string">&quot;ucweb&quot;</span>;<br>    <span class="hljs-keyword">var</span> bIsAndroid = sUserAgent.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/android/i</span>) == <span class="hljs-string">&quot;android&quot;</span>;<br>    <span class="hljs-keyword">var</span> bIsCE = sUserAgent.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/windows ce/i</span>) == <span class="hljs-string">&quot;windows ce&quot;</span>;<br>    <span class="hljs-keyword">var</span> bIsWM = sUserAgent.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/windows mobile/i</span>) == <span class="hljs-string">&quot;windows mobile&quot;</span>;<br>    <span class="hljs-keyword">if</span> (bIsIpad || bIsIphoneOs || bIsMidp || bIsUc7 || bIsUc || bIsAndroid || bIsCE || bIsWM) &#123;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = pcUrl;<br>    &#125;<br>  &#125;,<br>&#125;;<br><span class="hljs-title class_">Roc</span>.<span class="hljs-title function_">init</span>();<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【css】常用css</title>
    <link href="/css/%E3%80%90css%E3%80%91%E5%B8%B8%E7%94%A8css/"/>
    <url>/css/%E3%80%90css%E3%80%91%E5%B8%B8%E7%94%A8css/</url>
    
    <content type="html"><![CDATA[<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 字间距： */</span><br><span class="hljs-selector-tag">p</span>&#123;<br><span class="hljs-attribute">letter-spacing</span>: <span class="hljs-number">1px</span>;<br>&#125;<br><br><span class="hljs-comment">/* 单行省略号 */</span><br><span class="hljs-selector-class">.sl</span>&#123;<br>  <span class="hljs-attribute">overflow</span>:hidden;<br>  <span class="hljs-attribute">white-space</span>:nowrap;<br>  <span class="hljs-attribute">text-overflow</span>:ellipsis;<br>&#125;<br><br><span class="hljs-comment">/* 多行省略号 */</span><br><span class="hljs-selector-class">.sl2</span> &#123;<br>  <span class="hljs-attribute">display</span>: -webkit-box <span class="hljs-meta">!important</span>;<br>  <span class="hljs-attribute">overflow</span>: hidden;<br>  <span class="hljs-attribute">text-overflow</span>: ellipsis;<br>  <span class="hljs-attribute">word-break</span>: break-all;<br>  -webkit-line-clamp: <span class="hljs-number">2</span>;<br>  -webkit-box-orient: vertical <span class="hljs-meta">!important</span>;<br>&#125;<br><br><span class="hljs-comment">/* 画三角形 */</span><br><span class="hljs-selector-class">.box</span>&#123;<br><span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;&#x27;</span>;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">10px</span> solid transparent;<br>  <span class="hljs-attribute">border-bottom-color</span>: pink;<br>&#125;<br><br><span class="hljs-comment">/* 文字不被选中 */</span><br><span class="hljs-selector-tag">body</span> &#123;<br>  -webkit-user-select: none;<br>  -moz-user-select: none;<br>  -ms-user-select: none;<br>  user-select: none;<br>&#125;<br><br><span class="hljs-comment">/* css“&gt;”符号: */</span><br><span class="hljs-selector-class">.more</span><span class="hljs-selector-pseudo">:after</span> &#123;<br>  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#666</span>;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">right</span>: ;(具体位置具体定)<br>  <span class="hljs-attribute">top</span>: ;(具体位置具体定)<br>  <span class="hljs-attribute">display</span>: block;<br>  <span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;&#x27;</span>;<br>  <span class="hljs-attribute">width</span>: .<span class="hljs-number">6em</span>;<br>  <span class="hljs-attribute">height</span>: .<span class="hljs-number">6em</span>;<br>  <span class="hljs-attribute">border-left</span>: .<span class="hljs-number">04rem</span> solid <span class="hljs-number">#06c1ae</span>; <br>  <span class="hljs-attribute">border-bottom</span>: .<span class="hljs-number">04rem</span> solid <span class="hljs-number">#06c1ae</span>;<br>  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">50%</span>) <span class="hljs-built_in">scaleY</span>(.<span class="hljs-number">7</span>) <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">135deg</span>);<br>  -webkit-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">50%</span>) <span class="hljs-built_in">scaleY</span>(.<span class="hljs-number">7</span>) <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">135deg</span>);<br>  -moz-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">50%</span>) <span class="hljs-built_in">scaleY</span>(.<span class="hljs-number">7</span>) <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">135deg</span>);<br>  -ms-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">50%</span>) <span class="hljs-built_in">scaleY</span>(.<span class="hljs-number">7</span>) <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">135deg</span>); <br>&#125;<br><br><span class="hljs-comment">/* css“&lt;”符号: */</span><br><span class="hljs-selector-class">.more</span><span class="hljs-selector-pseudo">:after</span> &#123;<br>  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#666</span>;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">right</span>: ;(具体位置具体定)<br>  <span class="hljs-attribute">top</span>: ;(具体位置具体定)<br>  <span class="hljs-attribute">display</span>: block;<br>  <span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;&#x27;</span>;<br>  <span class="hljs-attribute">width</span>: .<span class="hljs-number">6em</span>;<br>  <span class="hljs-attribute">height</span>: .<span class="hljs-number">6em</span>;<br>  <span class="hljs-attribute">border-right</span>: .<span class="hljs-number">04rem</span> solid <span class="hljs-number">#06c1ae</span>; (和上面相比就改了这)<br>  <span class="hljs-attribute">border-top</span>: .<span class="hljs-number">04rem</span> solid <span class="hljs-number">#06c1ae</span>;(和上面相比就改了这)<br>  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">50%</span>) <span class="hljs-built_in">scaleY</span>(.<span class="hljs-number">7</span>) <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">135deg</span>);<br>  -webkit-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">50%</span>) <span class="hljs-built_in">scaleY</span>(.<span class="hljs-number">7</span>) <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">135deg</span>);<br>  -moz-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">50%</span>) <span class="hljs-built_in">scaleY</span>(.<span class="hljs-number">7</span>) <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">135deg</span>);<br>  -ms-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">50%</span>) <span class="hljs-built_in">scaleY</span>(.<span class="hljs-number">7</span>) <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">135deg</span>); <br>&#125;<br><br><span class="hljs-comment">/* 字体： */</span><br><span class="hljs-keyword">@font-face</span>&#123;<br>  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">&#x27;字体名称随便起&#x27;</span>; <br>  <span class="hljs-attribute">src</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;../font/字体名称.eot&#x27;</span>);<br>  <span class="hljs-attribute">src</span>:<span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;../font/字体名称.woff&#x27;</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">&#x27;woff&#x27;</span>),<br>    <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;../font/字体名称.ttf&#x27;</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">&#x27;truetype&#x27;</span>),<br>    <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;../font/字体名称.svg&#x27;</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">&#x27;svg&#x27;</span>);<br>&#125;<br><br><span class="hljs-comment">/* 移动端改变滚动条样式 */</span><br><span class="hljs-selector-class">.list</span> &#123;  <br>  <span class="hljs-attribute">overflow</span>: hidden;  <br>  <span class="hljs-attribute">overflow-y</span>: auto;  <br>&#125;  <br><span class="hljs-selector-class">.list</span>::-webkit-scrollbar-track-piece &#123;  <br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);  <br>  <span class="hljs-attribute">border-left</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);  <br>&#125;  <br><span class="hljs-selector-class">.list</span>::-webkit-scrollbar &#123;  <br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">5px</span>;  <br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">13px</span>;  <br>  -webkit-<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;  <br>  -moz-<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;  <br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;  <br>&#125;  <br><span class="hljs-selector-class">.list</span>::-webkit-scrollbar-thumb &#123;  <br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);  <br>  <span class="hljs-attribute">background-clip</span>: padding-box;  <br>  -webkit-<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;  <br>  -moz-<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;  <br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;  <br>  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">28px</span>;  <br>&#125;  <br><span class="hljs-selector-class">.list</span>::-webkit-scrollbar-thumb:hover &#123;  <br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);  <br>  -webkit-<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;  <br>  -moz-<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;  <br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;  <br>&#125;  <br><br><span class="hljs-comment">/* 整个滚动条的样式 */</span><br>::-webkit-scrollbar &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">10px</span>;<br>&#125;<br>::-webkit-scrollbar-track-piece &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>);<br>  -webkit-<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;<br>&#125;<br>::-webkit-scrollbar-thumb:vertical &#123;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">5px</span>;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">125</span>, <span class="hljs-number">125</span>, <span class="hljs-number">125</span>, <span class="hljs-number">0.7</span>);<br>  -webkit-<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;<br>&#125;<br>::-webkit-scrollbar-thumb:horizontal &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">5px</span>;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">125</span>, <span class="hljs-number">125</span>, <span class="hljs-number">125</span>, <span class="hljs-number">0.7</span>);<br>  -webkit-<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">倾斜</span><br><span class="hljs-comment">-webkit-transform: skew(-3deg,-1deg)</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">table隔行换色 </span><br><span class="hljs-comment">table tr:nth-child(odd) 奇数</span><br><span class="hljs-comment">table tr:nth-child(even) 偶数</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">table 合并边框 </span><br><span class="hljs-comment">border-collapse:collapse;</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-comment">/* 表格中图片垂直居中 */</span><br><span class="hljs-selector-tag">img</span>&#123;<br>  <span class="hljs-attribute">vertical-align</span>:middle<br>&#125;<br><br><span class="hljs-comment">/* TG横竖屏兼容问题 */</span><br><span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">min-aspect-ratio</span>: <span class="hljs-number">13</span>/<span class="hljs-number">9</span>)&#123; &#125; // landscape  横屏<br><span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">max-aspect-ratio</span>: <span class="hljs-number">13</span>/<span class="hljs-number">9</span>)&#123; &#125; // portrait   竖屏<br><br><span class="hljs-comment">/* 文本两端对齐 */</span><br><span class="hljs-attribute">text-align</span>: justify;<br><br><span class="hljs-comment">/* 文字英文数字也换行 */</span><br><span class="hljs-attribute">word-break</span>: break-all;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">所有表单的placeholder 默认颜色</span><br><span class="hljs-comment">IE9及以下版本不支持input的placeholder属性，需要用JS来做兼容。</span><br><span class="hljs-comment">*/</span><br><span class="hljs-selector-tag">input</span>::-webkit-input-placeholder&#123;<br>  <span class="hljs-attribute">color</span>:red;<br>&#125;<br><span class="hljs-selector-tag">input</span>::-moz-placeholder&#123;   <span class="hljs-comment">/* Mozilla Firefox 19+ */</span><br>  <span class="hljs-attribute">color</span>:red;<br>&#125;　　<br><span class="hljs-selector-tag">input</span>:-moz-placeholder&#123;    <span class="hljs-comment">/* Mozilla Firefox 4 to 18 */</span><br>  <span class="hljs-attribute">color</span>:red;<br>&#125;<br><span class="hljs-selector-tag">input</span>:-ms-input-placeholder&#123;  <span class="hljs-comment">/* Internet Explorer 10-1*/</span><br><span class="hljs-attribute">color</span>:red;<br>&#125;<br><br><span class="hljs-comment">/* 去除激活input的默认边框, 三种方法都能实现 */</span><br><span class="hljs-selector-tag">input</span>&#123;<br>  <span class="hljs-attribute">outline</span>: none;<br>  <span class="hljs-attribute">outline</span>: medium;<br>  <span class="hljs-attribute">outline</span>: <span class="hljs-number">0</span>;<br>&#125; <br><br><span class="hljs-comment">/* textarea禁止拖动 */</span><br><span class="hljs-selector-tag">textarea</span>&#123;<br><span class="hljs-attribute">resize</span>: none;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>css</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】百度地图、腾讯地图、高德地图经纬度转换</title>
    <link href="/js/%E3%80%90js%E3%80%91%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E3%80%81%E8%85%BE%E8%AE%AF%E5%9C%B0%E5%9B%BE%E3%80%81%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E7%BB%8F%E7%BA%AC%E5%BA%A6%E8%BD%AC%E6%8D%A2/"/>
    <url>/js/%E3%80%90js%E3%80%91%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E3%80%81%E8%85%BE%E8%AE%AF%E5%9C%B0%E5%9B%BE%E3%80%81%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E7%BB%8F%E7%BA%AC%E5%BA%A6%E8%BD%AC%E6%8D%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="常见坐标系标准"><a href="#常见坐标系标准" class="headerlink" title="常见坐标系标准"></a>常见坐标系标准</h1><p><strong>WGS-84（地球坐标系）</strong>：是目前广泛使用的GPS全球卫星定位系统使用的坐标系；谷歌地图、GPS模块使用。<br><strong>GCJ-02（火星坐标系）</strong>：是由中国国家测绘局制定的地理坐标系统，是由WGS-84加密后得到的坐标系；高德地图、腾讯地图使用。<br><strong>BD-09（百度坐标系）</strong>：是百度坐标系，在GCJ-02坐标系基础上再次加密；百度地图使用。</p><h1 id="腾讯、高德转百度"><a href="#腾讯、高德转百度" class="headerlink" title="腾讯、高德转百度"></a>腾讯、高德转百度</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 将腾讯、高德地图经纬度转换为百度地图经纬度</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">qqMapTransBMap</span>(<span class="hljs-params">lng, lat</span>) &#123;<br>  <span class="hljs-keyword">let</span> x_pi = (<span class="hljs-number">3.14159265358979324</span> * <span class="hljs-number">3000.0</span>) / <span class="hljs-number">180.0</span>;<br>  <span class="hljs-keyword">let</span> x = lng;<br>  <span class="hljs-keyword">let</span> y = lat;<br>  <span class="hljs-keyword">let</span> z = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(x * x + y * y) + <span class="hljs-number">0.00002</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(y * x_pi);<br>  <span class="hljs-keyword">let</span> theta = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(y, x) + <span class="hljs-number">0.000003</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(x * x_pi);<br>  <span class="hljs-keyword">let</span> lngs = z * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(theta) + <span class="hljs-number">0.0065</span>;<br>  <span class="hljs-keyword">let</span> lats = z * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(theta) + <span class="hljs-number">0.006</span>;<br>  <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-attr">lng</span>: lngs,<br>    <span class="hljs-attr">lat</span>: lats,<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="百度转腾讯、高德"><a href="#百度转腾讯、高德" class="headerlink" title="百度转腾讯、高德"></a>百度转腾讯、高德</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 将百度地图经纬度转换为腾讯、高德地图经纬度</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">bMapTransQQMap</span>(<span class="hljs-params">lng, lat</span>) &#123;<br>  <span class="hljs-keyword">let</span> x_pi = (<span class="hljs-number">3.14159265358979324</span> * <span class="hljs-number">3000.0</span>) / <span class="hljs-number">180.0</span>;<br>  <span class="hljs-keyword">let</span> x = lng - <span class="hljs-number">0.0065</span>;<br>  <span class="hljs-keyword">let</span> y = lat - <span class="hljs-number">0.006</span>;<br>  <span class="hljs-keyword">let</span> z = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(x * x + y * y) - <span class="hljs-number">0.00002</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(y * x_pi);<br>  <span class="hljs-keyword">let</span> theta = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(y, x) - <span class="hljs-number">0.000003</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(x * x_pi);<br>  <span class="hljs-keyword">let</span> lngs = z * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(theta);<br>  <span class="hljs-keyword">let</span> lats = z * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(theta);<br>  <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-attr">lng</span>: lngs,<br>    <span class="hljs-attr">lat</span>: lats,<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】浏览器兼容提示急速模式</title>
    <link href="/js/%E3%80%90js%E3%80%91%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9%E6%8F%90%E7%A4%BA%E6%80%A5%E9%80%9F%E6%A8%A1%E5%BC%8F/"/>
    <url>/js/%E3%80%90js%E3%80%91%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9%E6%8F%90%E7%A4%BA%E6%80%A5%E9%80%9F%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p><img src="/../../assets/%E3%80%90js%E3%80%91%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9%E6%8F%90%E7%A4%BA%E6%80%A5%E9%80%9F%E6%A8%A1%E5%BC%8F/1.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs javascript">(<span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-variable language_">window</span></span>) &#123;<br>  <span class="hljs-keyword">var</span> userAgent = navigator.<span class="hljs-property">userAgent</span>;<br>  <span class="hljs-keyword">var</span> isIE = userAgent.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;compatible&quot;</span>) &gt; -<span class="hljs-number">1</span> &amp;&amp; userAgent.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;MSIE&quot;</span>) &gt; -<span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">var</span> isIE11 = userAgent.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;Trident&quot;</span>) &gt; -<span class="hljs-number">1</span> &amp;&amp; userAgent.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;rv:11.0&quot;</span>) &gt; -<span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">var</span> compatibilityMode = <span class="hljs-variable language_">window</span>.<span class="hljs-property">navigator</span>.<span class="hljs-property">userAgent</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;compatible&quot;</span>) != -<span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (isIE || isIE11 || compatibilityMode) &#123;<br>    <span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;抱歉！您浏览的页面无法正常显示&quot;</span>;<br>    <span class="hljs-keyword">var</span> str2 = <span class="hljs-string">&quot;推荐使用Chrome，Firefox，Edge浏览器，如果您使用的是360、搜狗、QQ等双核浏览器，&quot;</span>;<br>    <span class="hljs-keyword">var</span> str1 = <span class="hljs-string">&quot;请切换到极速模式访问&quot;</span>;<br>    <span class="hljs-keyword">var</span> str3 = <span class="hljs-string">&quot;./img/jiantou.png&quot;</span>;<br>    <span class="hljs-keyword">var</span> str4 = <span class="hljs-string">&quot;./img/logo.png&quot;</span>;<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">write</span>(<br>      <span class="hljs-string">&quot;&lt;div&gt;&lt;div style=&#x27;width:900px;margin:0 auto;font-family:Microsoft YaHei&#x27;&gt;&quot;</span> +<br>        <span class="hljs-string">&quot;&lt;p style=&#x27;padding-top:100px;margin:0;text-align:center;margin-bottom:40px;color:#999;font-size:30px;&#x27;&gt;&quot;</span> +<br>        str +<br>        <span class="hljs-string">&quot;&lt;br/&gt;&lt;/p&gt;&lt;p style=&#x27;color:#999;font-size:20px;margin-left:50px;&#x27;&gt;&quot;</span> +<br>        str2 +<br>        <span class="hljs-string">&quot;&lt;/br&gt;&quot;</span> +<br>        str1 +<br>        <span class="hljs-string">&quot;&lt;/p&gt;&quot;</span> +<br>        <span class="hljs-string">&quot;&lt;div style=&#x27;text-align:center;&#x27;&gt;&lt;/div&gt;&quot;</span> +<br>        <span class="hljs-string">&quot;&lt;/div&gt;&lt;/div&gt;&quot;</span><br>    );<br>  &#125;<br>&#125;)(<span class="hljs-variable language_">window</span>);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】cookie创建获取删除</title>
    <link href="/js/%E3%80%90js%E3%80%91cookie%E5%88%9B%E5%BB%BA%E8%8E%B7%E5%8F%96%E5%88%A0%E9%99%A4/"/>
    <url>/js/%E3%80%90js%E3%80%91cookie%E5%88%9B%E5%BB%BA%E8%8E%B7%E5%8F%96%E5%88%A0%E9%99%A4/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 设置cookie</span><br><span class="hljs-comment">* name cookie的名称</span><br><span class="hljs-comment">* value cookie的值</span><br><span class="hljs-comment">* day cookie的过期时间</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">var</span> setCookie = <span class="hljs-keyword">function</span> (<span class="hljs-params">name, value, day</span>) &#123;<br>  <span class="hljs-keyword">if</span>(day !== <span class="hljs-number">0</span>)&#123;     <span class="hljs-comment">//当设置的时间等于0时，不设置expires属性，cookie在浏览器关闭后删除</span><br>      <span class="hljs-keyword">var</span> expires = day * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>;<br>      <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(+<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()+expires);<br>      <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span> = name + <span class="hljs-string">&quot;=&quot;</span> + <span class="hljs-built_in">escape</span>(value) + <span class="hljs-string">&quot;;expires=&quot;</span> + date.<span class="hljs-title function_">toUTCString</span>();<br>  &#125;<span class="hljs-keyword">else</span>&#123;<br>      <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span> = name + <span class="hljs-string">&quot;=&quot;</span> + <span class="hljs-built_in">escape</span>(value);<br>  &#125;<br>&#125;;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 获取对应名称的cookie</span><br><span class="hljs-comment">*  name cookie的名称</span><br><span class="hljs-comment">*  &#123;null&#125; 不存在时，返回null</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">var</span> getCookie = <span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) &#123;<br>  <span class="hljs-keyword">var</span> arr;<br>  <span class="hljs-keyword">var</span> reg = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">&quot;(^| )&quot;</span> + name + <span class="hljs-string">&quot;=([^;]*)(;|$)&quot;</span>);<br>  <span class="hljs-keyword">if</span> (arr = <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>.<span class="hljs-title function_">match</span>(reg))&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">unescape</span>(arr[<span class="hljs-number">2</span>]);<br>  &#125;<br>  <span class="hljs-keyword">else</span>&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>  &#125;<br>&#125;;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 删除cookie</span><br><span class="hljs-comment">*  name cookie的名称</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">var</span> removeCookie = <span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) &#123;<br>  <span class="hljs-title function_">setCookie</span>(name, <span class="hljs-string">&#x27; &#x27;</span>, -<span class="hljs-number">1</span>);<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【css】Flex弹性布局常用属性</title>
    <link href="/css/%E3%80%90css%E3%80%91Flex%E5%BC%B9%E6%80%A7%E5%B8%83%E5%B1%80%E5%B8%B8%E7%94%A8%E5%B1%9E%E6%80%A7/"/>
    <url>/css/%E3%80%90css%E3%80%91Flex%E5%BC%B9%E6%80%A7%E5%B8%83%E5%B1%80%E5%B8%B8%E7%94%A8%E5%B1%9E%E6%80%A7/</url>
    
    <content type="html"><![CDATA[<h2 id="把父盒子设置成弹性盒布局"><a href="#把父盒子设置成弹性盒布局" class="headerlink" title="把父盒子设置成弹性盒布局"></a>把父盒子设置成弹性盒布局</h2><p>display: flex;<br>特征：子元素默认水平排列。</p><h2 id="Flex方向属性"><a href="#Flex方向属性" class="headerlink" title="Flex方向属性"></a>Flex方向属性</h2><p>flex-direction:row | column | column-reverse | inherit | row-reverse</p><ul><li>row（默认）：主轴为水平方向，起点在左端。</li><li>row-reverse：主轴为水平方向，起点在右端。</li><li>column（常用）：主轴为垂直方向，起点在上沿。</li><li>column-reverse：主轴为垂直方向，起点在下沿。</li></ul><h2 id="Flex对齐方式"><a href="#Flex对齐方式" class="headerlink" title="Flex对齐方式"></a>Flex对齐方式</h2><p>主轴对齐：<br>justify-content:flex-start | flex-end | center | space-between | space-around;</p><ul><li>flex-start（默认值）：左对齐</li><li>flex-end：右对齐</li><li>center（常用）： 居中</li><li>space-between：两端对齐，子元素之间的间隔都相等。</li><li>space-around：每个子元素两侧的间隔相等。所以，子元素之间的间隔比子元素与边框的间隔大一倍。</li></ul><p>交叉轴对齐：<br>align-items:flex-start | flex-end | center | baseline | stretch;</p><ul><li>flex-start：交叉轴的起点对齐。</li><li>flex-end：交叉轴的终点对齐。</li><li>center（常用）：交叉轴的中点对齐。</li><li>baseline: 项目的第一行文字的基线对齐。</li><li>stretch（默认值）：如果子元素未设置高度或设为auto，将占满整个容器的高度。</li></ul><h2 id="Flex换行"><a href="#Flex换行" class="headerlink" title="Flex换行"></a>Flex换行</h2><p>flex-wrap: nowrap | wrap | wrap-reverse;</p><ul><li>nowrap（默认）：不换行。</li><li>wrap（常用）：换行，第一行在上方。</li><li>wrap-reverse：换行，第一行在下方。</li></ul><h2 id="常用属性属性值"><a href="#常用属性属性值" class="headerlink" title="常用属性属性值"></a>常用属性属性值</h2><p>display: flex; — 设置flex容器<br>flex-direction: column; — 容器内元素竖着排列<br>justify-content: center; — 容器内元素主轴对齐<br>align-items: center; — 容器内元素交叉轴对齐<br>flex-wrap: wrap; — 容器内元素换行</p>]]></content>
    
    
    <categories>
      
      <category>css</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>【js】移动端rem适配代码</title>
    <link href="/js/%E3%80%90js%E3%80%91%E7%A7%BB%E5%8A%A8%E7%AB%AFrem%E9%80%82%E9%85%8D%E4%BB%A3%E7%A0%81/"/>
    <url>/js/%E3%80%90js%E3%80%91%E7%A7%BB%E5%8A%A8%E7%AB%AFrem%E9%80%82%E9%85%8D%E4%BB%A3%E7%A0%81/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//屏幕适应 </span><br>(<span class="hljs-keyword">function</span> (<span class="hljs-params">win, doc</span>) &#123;<br>  <span class="hljs-keyword">if</span> (!win.<span class="hljs-property">addEventListener</span>) <span class="hljs-keyword">return</span>;<br>  <span class="hljs-keyword">var</span> html = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">setFont</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> html = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>;<br>    <span class="hljs-keyword">var</span> k = <span class="hljs-number">640</span>;<br>    html.<span class="hljs-property">style</span>.<span class="hljs-property">fontSize</span> = html.<span class="hljs-property">clientWidth</span> / k * <span class="hljs-number">100</span> + <span class="hljs-string">&quot;px&quot;</span>;<br>  &#125;<br>  <span class="hljs-title function_">setFont</span>();<br>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">setFont</span>();<br>  &#125;, <span class="hljs-number">300</span>);<br>  doc.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;DOMContentLoaded&#x27;</span>, setFont, <span class="hljs-literal">false</span>);<br>  win.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;resize&#x27;</span>, setFont, <span class="hljs-literal">false</span>);<br>  win.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;load&#x27;</span>, setFont, <span class="hljs-literal">false</span>);<br>&#125;)(<span class="hljs-variable language_">window</span>, <span class="hljs-variable language_">document</span>);<br></code></pre></td></tr></table></figure><p>k&#x3D; 宽度<br>若设计稿按照750设计，k&#x3D;750；设计稿640，k&#x3D;640… ；<br>使用时，ps中量取的 px&#x2F;100 即是rem<br>如：18px 则 .18rem</p>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  
</search>
